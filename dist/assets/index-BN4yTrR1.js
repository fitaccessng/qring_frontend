import{r as l,a as Qs,L as g,u as cs,b as me,c as qe,N as et,d as $e,e as Ae,O as xs,B as Us,R as Bs,f as D,g as Hs}from"./router-DcMusYyV.js";import{i as Vs,g as Fs,s as zs,b as Gs,G as Ws,a as ms}from"./firebase-CdJF-HnM.js";import{l as vt}from"./socket-CyTcV1HU.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const d of n)if(d.type==="childList")for(const o of d.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const d={};return n.integrity&&(d.integrity=n.integrity),n.referrerPolicy&&(d.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?d.credentials="include":n.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(n){if(n.ep)return;n.ep=!0;const d=s(n);fetch(n.href,d)}})();var us={exports:{}},rt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Js=l,Ys=Symbol.for("react.element"),Ks=Symbol.for("react.fragment"),Zs=Object.prototype.hasOwnProperty,Xs=Js.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ea={key:!0,ref:!0,__self:!0,__source:!0};function hs(t,a,s){var r,n={},d=null,o=null;s!==void 0&&(d=""+s),a.key!==void 0&&(d=""+a.key),a.ref!==void 0&&(o=a.ref);for(r in a)Zs.call(a,r)&&!ea.hasOwnProperty(r)&&(n[r]=a[r]);if(t&&t.defaultProps)for(r in a=t.defaultProps,a)n[r]===void 0&&(n[r]=a[r]);return{$$typeof:Ys,type:t,key:d,ref:o,props:n,_owner:Xs.current}}rt.Fragment=Ks;rt.jsx=hs;rt.jsxs=hs;us.exports=rt;var e=us.exports,Nt={},Dt=Qs;Nt.createRoot=Dt.createRoot,Nt.hydrateRoot=Dt.hydrateRoot;const bs=l.createContext(null);function ta({children:t}){const[a,s]=l.useState(()=>localStorage.getItem("qring_theme")??"light");l.useEffect(()=>{document.documentElement.classList.toggle("dark",a==="dark"),localStorage.setItem("qring_theme",a)},[a]);const r=l.useMemo(()=>({theme:a,isDark:a==="dark",toggleTheme:()=>s(n=>n==="dark"?"light":"dark")}),[a]);return e.jsx(bs.Provider,{value:r,children:t})}function oe(){const t=l.useContext(bs);if(!t)throw new Error("useTheme must be used inside ThemeProvider");return t}function je(){const t=l.useRef(null),[a,s]=l.useState(!1);return l.useEffect(()=>{if(!t.current)return;const r=new IntersectionObserver(([n])=>s(n.isIntersecting),{threshold:.2});return r.observe(t.current),()=>r.disconnect()},[]),{ref:t,visible:a}}function le({className:t="",tone:a="dark",alt:s="Qring"}){const[r,n]=l.useState(!1),d=a==="light"?"invert":"";return r?e.jsx("span",{"aria-label":s,className:`grid place-items-center rounded-md bg-slate-900 text-white ${t}`,children:"Q"}):e.jsx("img",{src:"/qring_logo.png",alt:s,className:`${d} ${t}`,onError:()=>n(!0),draggable:!1})}const Pe=t=>(t==null?void 0:t.replace(/\/+$/,""))??"",gs=t=>/^https?:\/\//i.test(t??""),ps=t=>/^[a-z0-9.-]+\.[a-z]{2,}(\/.*)?$/i.test(t??""),tt="https://qring-backend-1.onrender.com",qt=typeof window<"u"?`${tt}/api/v1`:`${tt}/api/v1`,$t=tt;function sa(t){const a="".trim();return a?gs(a)?Pe(a):ps(a)?Pe(`https://${a}`):a.startsWith("/")&&typeof window<"u"?Pe(`${window.location.origin}${a}`):qt:qt}function aa(t){const a="".trim();return a?gs(a)?Pe(a):ps(a)?Pe(`https://${a}`):a.startsWith("/")&&typeof window<"u"?Pe(`${window.location.origin}${a}`):$t:$t}const ce={apiBaseUrl:sa(),socketUrl:aa(),socketPath:"/socket.io",dashboardNamespace:"/realtime/dashboard",signalingNamespace:"/realtime/signaling"};class ke extends Error{constructor(a,s,r){super(a),this.name="ApiError",this.status=s,this.payload=r}}let Ie=null;function Ot(t,a="error"){typeof window>"u"||window.dispatchEvent(new CustomEvent("qring:toast",{detail:{message:t,type:a}}))}async function ra(){if(Ie)return Ie;const t=localStorage.getItem("qring_refresh_token");if(!t)return null;Ie=(async()=>{const a=await fetch(`${ce.apiBaseUrl}/auth/refresh-token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})}),s=await a.text();let r=null;if(s)try{r=JSON.parse(s)}catch{r={raw:s}}if(!a.ok)return null;const n=(r==null?void 0:r.data)??r;return n!=null&&n.accessToken?(localStorage.setItem("qring_access_token",n.accessToken),n!=null&&n.refreshToken&&localStorage.setItem("qring_refresh_token",n.refreshToken),n.accessToken):null})();try{return await Ie}finally{Ie=null}}function la(){localStorage.removeItem("qring_access_token"),localStorage.removeItem("qring_refresh_token"),localStorage.removeItem("qring_user")}async function T(t,a={},s=0){const r=localStorage.getItem("qring_access_token"),n={"Content-Type":"application/json",...a.headers??{}};r&&(n.Authorization=`Bearer ${r}`);const d=await fetch(`${ce.apiBaseUrl}${t}`,{...a,headers:n}),o=await d.text();let h=null;if(o)try{h=JSON.parse(o)}catch{h={raw:o}}if(d.ok&&!h){const u=`API returned an empty/non-JSON success response. Check VITE_API_BASE_URL (${ce.apiBaseUrl}) and backend routing.`;throw Ot(u,"error"),new ke(u,d.status,{raw:o})}if(!d.ok){if(d.status===401&&s===0){if(await ra())return T(t,a,1);la()}const u=(h==null?void 0:h.message)??(h==null?void 0:h.detail)??`Request failed (${d.status})`;throw Ot(u,"error"),new ke(u,d.status,h)}return h}async function na(){const t=await T("/payment/subscription/me");return(t==null?void 0:t.data)??null}async function fs(){const t=await T("/payment/plans");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function oa(){const t=await T("/payment/purposes");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function ia(){const t=await T("/payment/referral/me");return(t==null?void 0:t.data)??null}async function da(t){const a=await T("/payment/subscription/request",{method:"POST",body:JSON.stringify({plan:t})});return(a==null?void 0:a.data)??null}async function ca(t,a,s="monthly"){const r=await T("/payment/paystack/initialize",{method:"POST",body:JSON.stringify({plan:t,callbackUrl:a,billingCycle:s})});return(r==null?void 0:r.data)??null}async function xa(t){const a=await T(`/payment/paystack/verify/${encodeURIComponent(t)}`);return(a==null?void 0:a.data)??null}const _t=[{title:"Home",href:"/"},{title:"About",href:"/about"},{title:"Pricing",href:"/pricing"},{title:"Contact",href:"/contact"}],Te=[{name:"Aisha Mohammed",role:"Estate Manager, Lekki Gardens",quote:"Reduced unauthorized entries by 87%. Our residents feel safer and love the convenience."},{name:"Chukwudi Okafor",role:"Homeowner, Abuja",quote:"No more missed deliveries. I approve visitors from anywhere, anytime. Game changer."},{name:"Jennifer Adebayo",role:"Property Developer",quote:"Deployed across 15 properties. The ROI is undeniable and tenants now expect this."}];function ma(){const{isDark:t,toggleTheme:a}=oe(),[s,r]=l.useState("monthly"),[n,d]=l.useState(0),[o,h]=l.useState(!1),[u,p]=l.useState([]),[m,x]=l.useState(""),i=je(),b=je(),f=je(),j=je(),y=je();je(),je();const C=je();return l.useEffect(()=>{const k=setInterval(()=>{d(I=>(I+1)%Te.length)},5e3);return()=>clearInterval(k)},[]),l.useEffect(()=>{let k=!0;async function I(){x("");try{const c=await fs();if(!k)return;const P=ua(c);p(P)}catch(c){if(!k)return;p([]),x((c==null?void 0:c.message)??"Unable to load pricing plans.")}}return I(),()=>{k=!1}},[]),e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 sm:h-12 sm:w-12 dark:bg-white",children:e.jsx(le,{tone:"light",className:"h-6 w-6 sm:h-7 sm:w-7 dark:invert-0"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("p",{className:"text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsx("div",{className:"hidden items-center gap-8 md:flex lg:gap-10",children:_t.map(k=>e.jsx(g,{to:k.href,className:"text-sm font-semibold text-slate-600 transition hover:text-slate-900 dark:text-slate-300 dark:hover:text-white",children:k.title},k.href))}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/login",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white transition hover:bg-slate-800 sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Login"}),e.jsx("button",{type:"button",onClick:()=>h(!o),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:o?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),o&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[_t.map(k=>e.jsx(g,{to:k.href,onClick:()=>h(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:k.title},k.href)),e.jsx(g,{to:"/login",onClick:()=>h(!1),className:"block rounded-lg bg-slate-900 px-3 py-2 text-base font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Login"})]})})]}),e.jsxs("main",{children:[e.jsx("section",{ref:i.ref,className:`mx-auto w-full max-w-7xl px-4 py-12 transition-all duration-700 sm:px-6 sm:py-16 lg:px-10 lg:py-24 ${i.visible?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:e.jsxs("div",{className:"grid gap-10 lg:grid-cols-2 lg:gap-14 xl:gap-20",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-3 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-slate-400"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-white"})]}),e.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-200",children:"Live System"})]}),e.jsxs("h2",{className:"mt-6 text-4xl font-black leading-tight tracking-tight sm:text-5xl lg:mt-8 lg:text-6xl xl:text-7xl",children:["Modern Door",e.jsx("br",{}),"Access Control"]}),e.jsx("p",{className:"mt-5 text-base leading-relaxed text-slate-600 sm:text-lg lg:mt-6 lg:text-xl dark:text-slate-300",children:"Qring replaces outdated doorbells with QR-powered realtime communication, visitor verification, and secure video sessions."}),e.jsxs("div",{className:"mt-8 flex flex-wrap gap-3 sm:gap-4 lg:mt-10",children:[e.jsx(g,{to:"/signup",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 sm:px-8 sm:py-4 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Start Free Trial"}),e.jsx(g,{to:"/contact",className:"rounded-lg border border-slate-200 bg-white px-6 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-50 sm:px-8 sm:py-4 dark:border-slate-700 dark:bg-slate-950 dark:text-slate-100 dark:hover:bg-slate-900",children:"Book Demo"})]}),e.jsxs("div",{className:"mt-10 grid grid-cols-3 gap-4 sm:gap-6 lg:mt-12",children:[e.jsx(mt,{value:"99.9%",label:"Uptime"}),e.jsx(mt,{value:"<1s",label:"Response"}),e.jsx(mt,{value:"24/7",label:"Support"})]})]}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-xl dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("div",{className:"border-b border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-slate-300 dark:bg-slate-500"}),e.jsx("div",{className:"h-3 w-3 rounded-full bg-slate-300 dark:bg-slate-500"}),e.jsx("div",{className:"h-3 w-3 rounded-full bg-slate-300 dark:bg-slate-500"}),e.jsx("span",{className:"ml-auto text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Live Activity"})]})}),e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(_e,{title:"Visitor request at Gate A",time:"Just now",status:"active"}),e.jsx(_e,{title:"Access approved",time:"2m ago",status:"success"}),e.jsx(_e,{title:"Video call established",time:"4m ago",status:"complete"}),e.jsx(_e,{title:"Session ended",time:"8m ago",status:"complete"})]}),e.jsxs("div",{className:"mt-5 rounded-lg border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:"Today's Activity"}),e.jsx("span",{className:"text-sm font-bold",children:"+12%"})]}),e.jsx("div",{className:"h-2 overflow-hidden rounded-full bg-slate-200 dark:bg-slate-700",children:e.jsx("div",{className:"h-full w-3/4 bg-slate-900 dark:bg-white"})})]})]})]})})]})}),e.jsx("section",{ref:b.ref,className:`border-y border-slate-200 bg-slate-50 py-12 transition-all duration-700 sm:py-16 lg:py-20 dark:border-slate-800 dark:bg-slate-900/40 ${b.visible?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-10",children:[e.jsxs("div",{className:"mb-10 text-center sm:mb-12 lg:mb-16",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:"Features"}),e.jsx("h2",{className:"mt-3 text-3xl font-black tracking-tight sm:text-4xl lg:mt-4 lg:text-5xl",children:"Everything You Need"})]}),e.jsxs("div",{className:"grid gap-4 sm:gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsx(Se,{icon:"Alert",title:"Instant Notifications",description:"Get realtime alerts the moment someone scans your QR code."}),e.jsx(Se,{icon:"Route",title:"Smart Routing",description:"Automatically direct visitors to the right person and door."}),e.jsx(Se,{icon:"Secure",title:"Strong Security",description:"JWT auth, encrypted sessions, and strict permission controls."}),e.jsx(Se,{icon:"Web",title:"No App Required",description:"Visitors use their browser with zero friction."}),e.jsx(Se,{icon:"Call",title:"HD Video Calls",description:"Reliable WebRTC video and audio visitor sessions."}),e.jsx(Se,{icon:"Logs",title:"Complete Analytics",description:"Track visitor patterns and security events over time."})]})]})}),e.jsxs("section",{ref:f.ref,className:`mx-auto w-full max-w-7xl px-4 py-12 transition-all duration-700 sm:px-6 sm:py-16 lg:px-10 lg:py-20 ${f.visible?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:[e.jsxs("div",{className:"mb-10 text-center sm:mb-12 lg:mb-16",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:"Process"}),e.jsx("h2",{className:"mt-3 text-3xl font-black tracking-tight sm:text-4xl lg:mt-4 lg:text-5xl",children:"How It Works"})]}),e.jsxs("div",{className:"grid gap-6 sm:gap-8 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(Qe,{number:"01",title:"Visitor Scans",description:"Visitor scans a unique QR code at the entry point."}),e.jsx(Qe,{number:"02",title:"System Validates",description:"Backend verifies code and checks routing permissions."}),e.jsx(Qe,{number:"03",title:"You Approve",description:"You receive an alert and approve or deny the request."}),e.jsx(Qe,{number:"04",title:"Access Granted",description:"Secure chat, voice, or video session opens immediately."})]})]}),e.jsx("section",{ref:j.ref,className:`border-y border-slate-200 bg-slate-50 py-12 transition-all duration-700 sm:py-16 lg:py-20 dark:border-slate-800 dark:bg-slate-900/40 ${j.visible?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-10",children:[e.jsxs("div",{className:"mb-10 text-center sm:mb-12",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:"Platform Statistics"}),e.jsx("h3",{className:"mt-3 text-3xl font-black tracking-tight sm:text-4xl lg:mt-4",children:"Trusted Worldwide"})]}),e.jsxs("div",{className:"grid gap-4 sm:gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(Ue,{value:"24,000+",label:"Active Users"}),e.jsx(Ue,{value:"1.2M",label:"Monthly Scans"}),e.jsx(Ue,{value:"94%",label:"Approval Rate"}),e.jsx(Ue,{value:"<1s",label:"Avg Response"})]})]})}),e.jsxs("section",{ref:y.ref,className:`mx-auto w-full max-w-7xl px-4 py-12 transition-all duration-700 sm:px-6 sm:py-16 lg:px-10 lg:py-20 ${y.visible?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:[e.jsxs("div",{className:"mb-10 text-center sm:mb-12",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:"Testimonials"}),e.jsx("h3",{className:"mt-3 text-3xl font-black tracking-tight sm:text-4xl lg:mt-4",children:"What Our Users Say"})]}),e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white p-6 shadow-lg sm:p-8 lg:p-12 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("div",{className:"mx-auto max-w-3xl text-center",children:[e.jsxs("p",{className:"text-lg font-medium leading-relaxed text-slate-700 sm:text-xl lg:text-2xl dark:text-slate-200",children:['"',Te[n].quote,'"']}),e.jsxs("div",{className:"mt-6 sm:mt-8",children:[e.jsx("p",{className:"text-lg font-bold sm:text-xl",children:Te[n].name}),e.jsx("p",{className:"mt-1 text-sm font-medium text-slate-600 dark:text-slate-300",children:Te[n].role})]})]}),e.jsx("div",{className:"mt-8 flex justify-center gap-2 sm:mt-10",children:Te.map((k,I)=>e.jsx("button",{type:"button",onClick:()=>d(I),className:`h-2 rounded-full transition-all ${I===n?"w-8 bg-slate-900 dark:bg-white":"w-2 bg-slate-300 dark:bg-slate-600"}`},I))})]})]}),e.jsx("section",{ref:C.ref,className:`border-y border-slate-200 bg-slate-900 py-12 transition-all duration-700 sm:py-16 lg:py-20 dark:border-slate-800 ${C.visible?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:e.jsxs("div",{className:"mx-auto w-full max-w-4xl px-4 text-center sm:px-6",children:[e.jsx("h2",{className:"text-3xl font-black tracking-tight text-white sm:text-4xl lg:text-5xl",children:"Ready To Get Started?"}),e.jsx("p",{className:"mt-4 text-base text-slate-300 sm:mt-6 sm:text-xl",children:"Join thousands using Qring. Start your free trial today with no credit card required."}),e.jsxs("div",{className:"mt-8 flex flex-wrap justify-center gap-3 sm:mt-10 sm:gap-4",children:[e.jsx(g,{to:"/signup",className:"rounded-lg bg-white px-6 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-100 sm:px-10 sm:py-4",children:"Start Free Trial"}),e.jsx(g,{to:"/contact",className:"rounded-lg border border-slate-700 bg-transparent px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 sm:px-10 sm:py-4",children:"Contact Sales"})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap justify-center gap-4 text-xs text-slate-400 sm:mt-8 sm:gap-6 sm:text-sm",children:[e.jsx("span",{children:"14-day free trial"}),e.jsx("span",{children:"No credit card needed"}),e.jsx("span",{children:"Cancel anytime"})]})]})})]}),e.jsx("footer",{className:"border-t border-slate-200 bg-white py-10 sm:py-12 dark:border-slate-800 dark:bg-slate-950",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-10",children:[e.jsxs("div",{className:"grid gap-8 sm:gap-10 md:grid-cols-2 lg:grid-cols-4 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("span",{className:"text-xl font-black",children:"Qring"})}),e.jsx("p",{className:"mt-4 text-sm text-slate-600 dark:text-slate-300",children:"Modern door access control for homes and estates."})]}),e.jsx(xt,{title:"Product",links:[{to:"/platform",label:"Platform"},{to:"/pricing",label:"Pricing"},{to:"/security",label:"Security"},{to:"/api-docs",label:"API Docs"}]}),e.jsx(xt,{title:"Company",links:[{to:"/about",label:"About"},{to:"/blog",label:"Blog"},{to:"/careers",label:"Careers"},{to:"/contact",label:"Contact"}]}),e.jsx(xt,{title:"Legal",links:[{to:"/privacy",label:"Privacy"},{to:"/terms",label:"Terms"},{to:"/compliance",label:"Compliance"}]})]}),e.jsxs("div",{className:"mt-10 border-t border-slate-200 pt-6 text-center text-sm text-slate-600 dark:border-slate-800 dark:text-slate-300",children:[e.jsx("p",{children:"2026 Qring Technologies. All rights reserved."}),e.jsx("p",{className:"mt-1",children:"techspareng.online"})]})]})})]})}function xt({title:t,links:a}){return e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wider",children:t}),e.jsx("ul",{className:"mt-4 space-y-2 text-sm",children:a.map(s=>e.jsx("li",{children:e.jsx(g,{to:s.to,className:"text-slate-600 transition hover:text-slate-900 dark:text-slate-300 dark:hover:text-white",children:s.label})},s.label))})]})}function mt({value:t,label:a}){return e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-black sm:text-3xl",children:t}),e.jsx("p",{className:"mt-1 text-[11px] font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:a})]})}function _e({title:t,time:a,status:s}){const r={active:"border-slate-900 bg-slate-50 dark:border-slate-400 dark:bg-slate-800",success:"border-slate-300 bg-white dark:border-slate-700 dark:bg-slate-900",complete:"border-slate-200 bg-white dark:border-slate-700 dark:bg-slate-900"};return e.jsxs("div",{className:`flex items-center justify-between rounded-lg border p-3 ${r[s]}`,children:[e.jsx("p",{className:"text-sm font-semibold",children:t}),e.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:a})]})}function Se({icon:t,title:a,description:s}){return e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-white p-6 transition hover:shadow-lg sm:p-8 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("div",{className:"mb-4 inline-flex rounded-md border border-slate-200 bg-slate-50 px-2 py-1 text-xs font-semibold uppercase tracking-wider dark:border-slate-700 dark:bg-slate-800",children:t}),e.jsx("h4",{className:"text-xl font-bold",children:a}),e.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:s})]})}function Qe({number:t,title:a,description:s}){return e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-white p-6 text-center dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full border-2 border-slate-900 bg-white dark:border-white dark:bg-slate-900",children:e.jsx("span",{className:"text-sm font-black sm:text-base",children:t})}),e.jsx("h4",{className:"text-lg font-bold",children:a}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:s})]})}function Ue({value:t,label:a}){return e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-white p-6 text-center sm:p-8 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("p",{className:"text-3xl font-black sm:text-4xl",children:t}),e.jsx("p",{className:"mt-2 text-sm font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:a})]})}function ua(t){var d;const r=(Array.isArray(t)?t:[]).filter(o=>o&&o.active!==!1).map(o=>{const h=Number(o.amount||0),u=h*12,p=o.maxDoors??null,m=o.maxQrCodes??null,x=[];return typeof p=="number"&&x.push(`Up to ${p} doors`),typeof m=="number"&&x.push(`Up to ${m} QR codes`),{id:o.id,name:o.name??o.id,monthly:h,yearly:u,note:x.length?x.join(" • "):"Flexible access control plan",highlight:!1}}),n=r.some(o=>o.id==="doors_40")?"doors_40":(d=r.find(o=>o.monthly>0))==null?void 0:d.id;return r.map(o=>({...o,highlight:o.id===n}))}const ha=[{title:"Security by design",text:"Every session, route, and permission is scoped with strict role boundaries and auditability."},{title:"Realtime reliability",text:"Qring is engineered for low-latency alerts, resilient socket delivery, and stable communication."},{title:"Scalable architecture",text:"Modular services support growth from single properties to large multi-estate deployments."}],ba=[{year:"2024",event:"Qring concept and architecture blueprint defined."},{year:"2025",event:"Core QR routing and visitor flow launched in pilot communities."},{year:"2026",event:"Realtime session suite and estate operations dashboard released."}];function ga(){const{isDark:t,toggleTheme:a}=oe(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(le,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"Pricing"}),e.jsx(g,{to:"/signup",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Get Started"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/signup",onClick:()=>r(!1),className:"block rounded-lg bg-slate-900 px-3 py-2 text-base font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Get Started"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-7xl px-4 py-10 sm:px-6 sm:py-12 lg:px-10 lg:py-16",children:[e.jsxs("section",{className:"grid gap-8 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft sm:p-8 lg:grid-cols-2 dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:"About Qring"}),e.jsx("h1",{className:"mt-3 text-3xl font-black tracking-tight sm:text-4xl lg:text-5xl",children:"Building trusted access communication for modern communities"}),e.jsx("p",{className:"mt-4 text-sm leading-relaxed text-slate-600 sm:text-base dark:text-slate-300",children:"Qring replaces analog doorbell friction with a secure digital-first experience for homeowners, estate managers, and visitors."}),e.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 sm:text-base dark:text-slate-300",children:"We focus on clarity, speed, and control so communities can manage access confidently from anywhere."})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-5 sm:p-6 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:"Mission"}),e.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 sm:text-base dark:text-slate-300",children:"Make door access communication secure, instant, and auditable while preserving user privacy and operational boundaries."}),e.jsxs("div",{className:"mt-5 grid grid-cols-3 gap-3 text-center sm:gap-4",children:[e.jsx(ut,{value:"150k+",label:"Sessions handled"}),e.jsx(ut,{value:"98%",label:"Approval speed"}),e.jsx(ut,{value:"24/7",label:"Platform ops"})]})]})]}),e.jsx("section",{className:"mt-8 grid gap-4 sm:mt-10 sm:gap-6 md:grid-cols-3",children:ha.map(n=>e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-white p-5 sm:p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h2",{className:"text-xl font-bold",children:n.title}),e.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:n.text})]},n.title))}),e.jsxs("section",{className:"mt-8 rounded-2xl border border-slate-200 bg-white p-6 sm:mt-10 sm:p-8 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h2",{className:"text-2xl font-black tracking-tight sm:text-3xl",children:"Journey"}),e.jsx("div",{className:"mt-5 grid gap-4 sm:mt-6 md:grid-cols-3",children:ba.map(n=>e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-slate-50 p-5 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:n.year}),e.jsx("p",{className:"mt-2 text-sm font-medium leading-relaxed",children:n.event})]},n.year))})]}),e.jsxs("section",{className:"mt-8 rounded-2xl bg-slate-900 p-6 text-white sm:mt-10 sm:p-8 lg:flex lg:items-center lg:justify-between dark:bg-white dark:text-slate-900",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black tracking-tight sm:text-3xl",children:"Ready to deploy Qring?"}),e.jsx("p",{className:"mt-2 text-sm text-slate-300 dark:text-slate-600",children:"Talk to our team about your building or estate setup."})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-3 lg:mt-0",children:[e.jsx(g,{to:"/contact",className:"rounded-lg bg-white px-5 py-3 text-sm font-semibold text-slate-900 dark:bg-slate-900 dark:text-white",children:"Contact Sales"}),e.jsx(g,{to:"/",className:"rounded-lg border border-white px-5 py-3 text-sm font-semibold dark:border-slate-900",children:"Back Home"})]})]})]})]})}function ut({value:t,label:a}){return e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("p",{className:"text-2xl font-black sm:text-3xl",children:t}),e.jsx("p",{className:"mt-1 text-[11px] font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:a})]})}const pa="₦",fa=[{id:"free",name:"Starter",monthly:0,yearly:0,bestFor:"Get started at no cost",cta:"Get Started Free",features:["1 door","1 QR code","Visitor notifications","Basic access logs","Mobile alerts"]},{id:"doors_20",name:"Basic Plan",monthly:12e3,yearly:12e4,bestFor:"Up to 10 doors",cta:"Start Basic",features:["Up to 10 doors","Up to 10 QR codes","Realtime visitor alerts","Access logs","Guest approvals","Resident management","Mobile dashboard"]},{id:"doors_40",name:"Standard Plan",monthly:25e3,yearly:25e4,bestFor:"Up to 22 doors",cta:"Choose Standard",features:["Up to 22 doors","Up to 22 QR codes","Realtime approvals","Visitor session logs","Chat + call access","Admin panel","Multi-user access"]},{id:"doors_80",name:"Pro Estate Plan",monthly:5e4,yearly:5e5,bestFor:"Up to 46 doors",cta:"Start Pro Estate",features:["Up to 46 doors","Up to 46 QR codes","Visitor scheduling","Access time windows","Multi-admin roles","Advanced analytics","Realtime controls","Priority support"],popular:!0},{id:"doors_100",name:"Premium Estate Plan",monthly:1e5,yearly:1e6,bestFor:"Up to 100 doors",cta:"Choose Premium",features:["Up to 100 doors","Up to 100 QR codes","Estate-level analytics","Security audit logs","Multi-location control","Advanced permissions","API access","Dedicated support"]},{id:"enterprise",name:"Enterprise",monthly:null,yearly:null,bestFor:"Custom pricing - annual contract",cta:"Contact Sales",features:["Unlimited doors","Unlimited QR codes","Custom workflows","Custom security policies","Onsite onboarding","SLA contracts","Private cloud deployment","API + integrations","Dedicated account manager"]}];function ja(){const{isDark:t,toggleTheme:a}=oe(),[s,r]=l.useState("monthly"),[n,d]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(le,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/contact",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Contact"}),e.jsx("button",{type:"button",onClick:()=>d(!n),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:n?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),n&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>d(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>d(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/contact",onClick:()=>d(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"}),e.jsx(g,{to:"/signup",onClick:()=>d(!1),className:"block rounded-lg bg-slate-900 px-3 py-2 text-base font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Get Started"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-7xl px-4 py-10 sm:px-6 sm:py-12 lg:px-10 lg:py-16",children:[e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-soft sm:p-8 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:"Pricing Plans"}),e.jsx("h1",{className:"mt-2 text-3xl font-black tracking-tight sm:text-4xl lg:text-5xl",children:"Paystack-ready pricing for every property size"}),e.jsx("p",{className:"mt-4 max-w-2xl text-sm leading-relaxed text-slate-600 sm:text-base dark:text-slate-300",children:"Choose a plan based on your number of doors. Free plan supports one door and one QR code."}),e.jsxs("div",{className:"mt-6 inline-flex rounded-lg border border-slate-200 bg-slate-50 p-1 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("button",{type:"button",onClick:()=>r("monthly"),className:`rounded-md px-4 py-2 text-sm font-semibold transition ${s==="monthly"?"bg-slate-900 text-white dark:bg-white dark:text-slate-900":"text-slate-600 dark:text-slate-300"}`,children:"Monthly"}),e.jsx("button",{type:"button",onClick:()=>r("yearly"),className:`rounded-md px-4 py-2 text-sm font-semibold transition ${s==="yearly"?"bg-slate-900 text-white dark:bg-white dark:text-slate-900":"text-slate-600 dark:text-slate-300"}`,children:"Yearly"})]})]}),e.jsx("section",{className:"mt-8 grid gap-4 sm:gap-6 md:grid-cols-2 xl:grid-cols-3",children:fa.map(o=>e.jsxs("article",{className:`rounded-xl border bg-white p-6 transition hover:shadow-xl sm:p-8 dark:bg-slate-900 ${o.popular?"border-slate-900 shadow-lg dark:border-white":"border-slate-200 dark:border-slate-700"}`,children:[o.popular?e.jsx("div",{className:"mb-4 inline-block rounded-full bg-slate-900 px-3 py-1 text-xs font-semibold uppercase tracking-wider text-white dark:bg-white dark:text-slate-900",children:"Popular"}):null,e.jsx("p",{className:"text-sm font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:o.name}),e.jsx("p",{className:"mt-4 text-4xl font-black tracking-tight sm:text-5xl",children:o.monthly===null||o.yearly===null?"Custom":`${pa}${ka(s==="monthly"?o.monthly:o.yearly)}`}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-300",children:o.monthly===null||o.yearly===null?"Annual contract":s==="monthly"?"per month":"per year"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:o.bestFor}),e.jsx("ul",{className:"mt-5 space-y-2 text-sm text-slate-700 dark:text-slate-200",children:o.features.map(h=>e.jsxs("li",{children:["- ",h]},h))}),e.jsx(g,{to:o.id==="enterprise"?"/contact":"/billing/paywall",className:`mt-8 block rounded-lg py-3 text-center text-sm font-semibold transition ${o.popular?"bg-slate-900 text-white hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200":"border border-slate-200 text-slate-900 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-100 dark:hover:bg-slate-800"}`,children:o.cta??`Choose ${o.name}`})]},o.id))})]})]})}function ka(t){return new Intl.NumberFormat("en-NG").format(t)}function wa(){const{isDark:t,toggleTheme:a}=oe(),[s,r]=l.useState(!1),[n,d]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(le,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>d(!n),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:n?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),n&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>d(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>d(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>d(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/signup",onClick:()=>d(!1),className:"block rounded-lg bg-slate-900 px-3 py-2 text-base font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Get Started"})]})})]}),e.jsxs("main",{className:"mx-auto grid w-full max-w-7xl gap-6 px-4 py-10 sm:px-6 sm:py-12 lg:grid-cols-12 lg:px-10 lg:py-16",children:[e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-soft sm:p-8 lg:col-span-5 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:"Contact"}),e.jsx("h1",{className:"mt-3 text-3xl font-black tracking-tight sm:text-4xl",children:"Talk to the Qring team"}),e.jsx("p",{className:"mt-4 text-sm leading-relaxed text-slate-600 sm:text-base dark:text-slate-300",children:"Reach out for deployment planning, technical onboarding, or custom estate pricing."}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx(Be,{label:"General",value:"hello@useqring.online"}),e.jsx(Be,{label:"Support",value:"support@useqring.online"}),e.jsx(Be,{label:"Sales",value:"sales@useqring.online"}),e.jsx(Be,{label:"Response time",value:"Within 1 business day"})]})]}),e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-soft sm:p-8 lg:col-span-7 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h2",{className:"text-2xl font-black tracking-tight sm:text-3xl",children:"Send a message"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Tell us about your property setup and goals."}),e.jsxs("form",{onSubmit:o=>{o.preventDefault(),r(!0)},className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(Le,{label:"First name",placeholder:"Your first name"}),e.jsx(Le,{label:"Last name",placeholder:"Your last name"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(Le,{label:"Email",type:"email",placeholder:"you@company.com"}),e.jsx(Le,{label:"Phone",placeholder:"+234..."})]}),e.jsx(Le,{label:"Company / Estate",placeholder:"Property name"}),e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-2 block font-semibold text-slate-700 dark:text-slate-200",children:"Message"}),e.jsx("textarea",{required:!0,rows:5,placeholder:"Share your requirements...",className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-3 outline-none ring-0 transition focus:border-slate-500 dark:border-slate-700 dark:bg-slate-950"})]}),s?e.jsx("p",{className:"rounded-lg border border-green-200 bg-green-50 px-3 py-2 text-sm text-green-700 dark:border-green-900 dark:bg-green-950/40 dark:text-green-300",children:"Message received. We will contact you shortly."}):null,e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{type:"submit",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Send Message"}),e.jsx(g,{to:"/",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Back Home"})]})]})]})]})]})}function Le({label:t,placeholder:a,type:s="text"}){return e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-2 block font-semibold text-slate-700 dark:text-slate-200",children:t}),e.jsx("input",{required:!0,type:s,placeholder:a,className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-3 outline-none ring-0 transition focus:border-slate-500 dark:border-slate-700 dark:bg-slate-950"})]})}function Be({label:t,value:a}){return e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:t}),e.jsx("p",{className:"mt-1 text-sm font-medium",children:a})]})}function Na(){const{isDark:t,toggleTheme:a}=oe(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(le,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-5xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:[e.jsxs("div",{className:"mb-16",children:[e.jsx("h1",{className:"text-4xl font-black tracking-tight sm:text-5xl",children:"Platform Overview"}),e.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300",children:"Qring is a modern smart access control platform that replaces traditional doorbells with QR-powered realtime communication and visitor verification."})]}),e.jsxs("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-xl font-bold",children:"QR Code Scanning"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:"Visitors scan unique QR codes at entry points to request access. Instant notifications reach homeowners with full context."})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Realtime Communication"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:"WebSocket-powered messaging, voice, and video calls connect homeowners and visitors instantly with no lag."})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Smart Routing"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:"Automatically direct visitors to the right person, door, or building based on QR code assignments."})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Session Management"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:"Create, approve, deny, or revoke access sessions with configurable time limits on-the-fly."})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Complete Audit Logs"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:"Every action is logged for compliance, security investigations, and operational transparency."})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Multi-Level Access"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:"Role-based access control for homeowners, estate managers, residents, and visitors."})]})]}),e.jsxs("div",{className:"mt-16",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"How It Works"}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-900 text-sm font-bold text-white dark:bg-white dark:text-slate-900",children:"1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"Visitor Scans QR Code"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Visitor scans a unique QR code at the entry point or gate"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-900 text-sm font-bold text-white dark:bg-white dark:text-slate-900",children:"2"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"System Validates & Notifies"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Qring backend verifies the code and sends instant notification to the homeowner"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-900 text-sm font-bold text-white dark:bg-white dark:text-slate-900",children:"3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"Homeowner Responds"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Homeowner approves or denies access from their phone or dashboard"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-900 text-sm font-bold text-white dark:bg-white dark:text-slate-900",children:"4"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"Session Established"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Secure chat, voice, or video session opens immediately for communication"})]})]})]})]}),e.jsxs("div",{className:"mt-16 flex flex-wrap justify-center gap-4",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/pricing",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"View Pricing"}),e.jsx(g,{to:"/signup",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Start Free Trial"})]})]})]})}function ya(){const{isDark:t,toggleTheme:a}=oe(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(le,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-5xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:[e.jsxs("div",{className:"mb-16",children:[e.jsx("h1",{className:"text-4xl font-black tracking-tight sm:text-5xl",children:"Security & Privacy"}),e.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300",children:"Qring employs industry-standard security practices to protect your data, sessions, and access control."})]}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Encryption & Data Protection"}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"End-to-End Encryption"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"All realtime communication (messages, voice, video) is encrypted using WebRTC protocols and TLS 1.2+."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"JWT Authentication"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Sessions are secured with JSON Web Tokens with configurable expiration. Tokens are stored securely on client devices."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Password Security"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Passwords are hashed with bcrypt (10+ rounds). We enforce strong password policies and support two-factor authentication."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Database Encryption"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Sensitive data at rest is encrypted using AES-256 encryption. Database backups are regularly tested and encrypted."})]})]})]}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Access Control & Permissions"}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Role-Based Access Control (RBAC)"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Granular permissions for admins, estate managers, homeowners, and visitors. Each role has strict scope boundaries."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Session Scoping"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Each session is scoped to specific users, doors, and time windows. Access is automatically revoked on expiration."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Audit Logging"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Every authentication, authorization, and access event is logged with timestamp, user, IP, and outcome."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Rate Limiting"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"API endpoints are rate-limited to prevent brute-force attacks and abuse."})]})]})]}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Infrastructure & Compliance"}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"HTTPS/TLS"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"All traffic is encrypted in transit using HTTPS with TLS 1.2 or higher. Certificate pinning for mobile apps."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Secure Infrastructure"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Application runs on managed cloud infrastructure with DDoS protection, firewalls, and intrusion detection."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Regular Security Audits"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Third-party security assessments, penetration testing, and code reviews are conducted regularly."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Vulnerability Disclosure"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"We follow responsible disclosure practices. Report security issues to security@useqring.online"})]})]})]}),e.jsxs("div",{className:"mt-16 flex flex-wrap justify-center gap-4",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/compliance",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"View Compliance"})]})]})]})}function va(){const{isDark:t,toggleTheme:a}=oe(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(le,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsx("main",{className:"mx-auto w-full max-w-4xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-4 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-slate-400"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-white"})]}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-200",children:"Coming Soon"})]}),e.jsx("h1",{className:"mt-6 text-4xl font-black tracking-tight sm:text-5xl lg:text-6xl",children:"API Documentation"}),e.jsx("p",{className:"mt-6 text-lg leading-relaxed text-slate-600 dark:text-slate-300",children:"Comprehensive API reference, code examples, and integration guides are coming soon. Build with Qring."}),e.jsxs("div",{className:"mt-10 flex flex-wrap justify-center gap-4",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/contact",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Get Started"})]})]})})]})}function Sa(){const{isDark:t,toggleTheme:a}=oe(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(le,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsx("main",{className:"mx-auto w-full max-w-4xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-4 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-slate-400"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-white"})]}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-200",children:"Coming Soon"})]}),e.jsx("h1",{className:"mt-6 text-4xl font-black tracking-tight sm:text-5xl lg:text-6xl",children:"Company"}),e.jsx("p",{className:"mt-6 text-lg leading-relaxed text-slate-600 dark:text-slate-300",children:"Learn more about Qring company information, team, and our mission. Detailed company page coming soon."}),e.jsxs("div",{className:"mt-10 flex flex-wrap justify-center gap-4",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/contact",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Contact Us"})]})]})})]})}function Ca(){const{isDark:t,toggleTheme:a}=oe(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(le,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsx("main",{className:"mx-auto w-full max-w-4xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-4 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-slate-400"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-white"})]}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-200",children:"Coming Soon"})]}),e.jsx("h1",{className:"mt-6 text-4xl font-black tracking-tight sm:text-5xl lg:text-6xl",children:"Blog"}),e.jsx("p",{className:"mt-6 text-lg leading-relaxed text-slate-600 dark:text-slate-300",children:"Insights, updates, and stories about smart access control. Our blog is coming soon."}),e.jsxs("div",{className:"mt-10 flex flex-wrap justify-center gap-4",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/contact",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Subscribe to Updates"})]})]})})]})}function Aa(){const{isDark:t,toggleTheme:a}=oe(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(le,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsx("main",{className:"mx-auto w-full max-w-4xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-4 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-slate-400"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-white"})]}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-200",children:"Coming Soon"})]}),e.jsx("h1",{className:"mt-6 text-4xl font-black tracking-tight sm:text-5xl lg:text-6xl",children:"Careers"}),e.jsx("p",{className:"mt-6 text-lg leading-relaxed text-slate-600 dark:text-slate-300",children:"Join our team and help build the future of access control. Career opportunities coming soon."}),e.jsxs("div",{className:"mt-10 flex flex-wrap justify-center gap-4",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/contact",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Get In Touch"})]})]})})]})}function Pa(){const{isDark:t,toggleTheme:a}=oe(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(le,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsx("main",{className:"mx-auto w-full max-w-4xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-4 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-slate-400"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-white"})]}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-200",children:"Coming Soon"})]}),e.jsx("h1",{className:"mt-6 text-4xl font-black tracking-tight sm:text-5xl lg:text-6xl",children:"Legal"}),e.jsx("p",{className:"mt-6 text-lg leading-relaxed text-slate-600 dark:text-slate-300",children:"Legal information and documentation coming soon. Check back for Privacy, Terms, and Compliance information."}),e.jsxs("div",{className:"mt-10 flex flex-wrap justify-center gap-4",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/contact",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Contact Us"})]})]})})]})}function Ra(){const{isDark:t,toggleTheme:a}=oe(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(le,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-5xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:[e.jsxs("div",{className:"mb-16",children:[e.jsx("h1",{className:"text-4xl font-black tracking-tight sm:text-5xl",children:"Privacy Policy"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Last updated: January 2025"}),e.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300",children:"We respect your privacy and are committed to protecting your personal data. This policy explains how we collect, use, and safeguard your information."})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"1. Information We Collect"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Account Information:"})," Name, email address, phone number, password, and profile details provided during registration."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Session Data:"})," QR code scans, access requests, visitor interactions, and device information for each session."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Communication Data:"})," Messages, voice recordings, and video data shared through our realtime communication features (encrypted end-to-end)."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Technical Data:"})," IP address, browser type, device information, and usage patterns for analytics and security."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Payment Information:"})," Billing address and payment method data (processed securely by third-party providers, we do not store full credit card numbers)."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"2. How We Use Your Information"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Provide and improve our smart access control platform and services"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Process transactions, payments, and account management"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Communicate service updates, security alerts, and support responses"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Generate audit logs for security, compliance, and troubleshooting"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Analyze usage patterns to enhance user experience and platform performance"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Comply with legal obligations and enforce our terms of service"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"3. Data Retention"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Active Account:"})," Your account information is retained for the duration of your subscription."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Audit Logs:"})," Session logs and access records are retained for 90 days to 1 year for security and compliance purposes."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Communication Data:"})," Realtime communication is not stored unless explicitly backed up by the user."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"After Account Deletion:"})," We delete or anonymize personal data within 30 days of account closure, except where required by law."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"4. Data Sharing & Third Parties"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"We do not sell, rent, or trade your personal data. We may share information only:"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• With service providers (hosting, payment processing, analytics) under data processing agreements"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• When required by law, court order, or government authority"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• To protect against security threats or fraud (with minimal data shared)"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• In case of business restructuring or acquisition (with privacy terms maintained)"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"5. Your Rights & Controls"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Access:"})," You can view and download your personal data through account settings."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Correction:"})," Update or correct account information in your profile at any time."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Deletion:"})," Request deletion of your account and associated personal data (some data retained for audit/legal purposes)."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Opt-Out:"})," Disable marketing emails and notifications through account preferences."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"GDPR Rights:"})," If you're in the EU, you have additional rights under GDPR. Contact us for a formal data request."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"6. Cookies & Tracking"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"We use cookies and localStorage to maintain sessions, remember preferences, and analyze platform usage. You can control cookie settings in your browser."}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"We use Google Analytics for aggregated usage insights. No personally identifiable information is sent to Google."})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"7. Security Measures"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Data encrypted in transit (HTTPS/TLS 1.2+) and at rest (AES-256)"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Passwords hashed with bcrypt to prevent unauthorized access"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• End-to-end encryption for realtime communications"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Regular security audits and penetration testing"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Multi-factor authentication available for enhanced account protection"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"8. Children's Privacy"}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"Our service is not intended for users under 18. We do not knowingly collect data from minors. If we discover such data, we delete it promptly."})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"9. Policy Changes"}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"We may update this policy periodically. Significant changes will be notified via email or in-app notice. Continued use after changes constitutes acceptance."})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"10. Contact Us"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Privacy Questions:"})," privacy@useqring.online"]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"GDPR/Data Requests:"})," dpo@useqring.online"]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Security Concerns:"})," security@useqring.online"]})]})]})]}),e.jsxs("div",{className:"mt-16 flex flex-wrap justify-center gap-4 border-t border-slate-200 pt-8 dark:border-slate-800",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/terms",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"View Terms"})]})]})]})}function Ea(){const{isDark:t,toggleTheme:a}=oe(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(le,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-5xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:[e.jsxs("div",{className:"mb-16",children:[e.jsx("h1",{className:"text-4xl font-black tracking-tight sm:text-5xl",children:"Terms of Service"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Last updated: January 2025"}),e.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300",children:"These Terms of Service govern your use of the Qring platform. By accessing or using our service, you agree to be bound by these terms."})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"1. Acceptance of Terms"}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"By accessing, using, or registering with Qring, you agree to comply with these Terms of Service and all applicable laws and regulations. If you do not agree with any part of these terms, you may not use our service."})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"2. Service Description"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"Qring is a smart access control platform that enables estate managers and homeowners to manage visitor access through QR codes, realtime communication, and digital session management."}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"We reserve the right to modify, suspend, or discontinue service at any time with reasonable notice."})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"3. User Accounts & Responsibilities"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Registration:"})," You must provide accurate, complete information during registration and keep it updated."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Account Security:"})," You are responsible for maintaining the confidentiality of your password. You agree not to share account credentials and are liable for all activities under your account."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Lawful Use:"})," You must use the service only for lawful purposes and in accordance with these terms."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"4. User Conduct Restrictions"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"You agree NOT to:"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Attempt unauthorized access or hack the platform"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Transmit malware, viruses, or malicious code"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Use the service for illegal activities or harassment"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Violate intellectual property rights of others"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Reverse engineer, decompile, or attempt to derive source code"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Spam, abuse, or harass other users"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"5. Intellectual Property Rights"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"All content, features, and functionality of Qring are owned by Qring or its licensors, including logos, trademarks, and software code. You may not reproduce, modify, or distribute any content without express written permission."}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"You retain ownership of content you create and upload, but grant us a license to use, display, and process it for service delivery."})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"6. Payment & Billing"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Fees:"})," Subscription fees are as listed on the pricing page and are subject to change with 30 days notice."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Billing:"})," You authorize us to charge your payment method on the billing date. Failed payments may result in service suspension."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Refunds:"})," Refunds are available within 30 days of payment for first-time subscribers. Other refunds are at our discretion."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"7. Limitation of Liability"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Disclaimer:"}),' The service is provided "as-is" without warranties of any kind, express or implied.']}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Limitation:"})," To the maximum extent permitted by law, Qring shall not be liable for indirect, incidental, special, consequential, or punitive damages."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Maximum Liability:"})," Our total liability to you shall not exceed the amount you paid in the 12 months preceding the claim."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"8. Indemnification"}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"You agree to indemnify, defend, and hold harmless Qring from any claims, damages, losses, or expenses arising from your violation of these terms, your use of the service, or your infringement of any rights."})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"9. Termination"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Account Termination:"})," You may terminate your account anytime through account settings. No refund of unused subscription fees will be issued."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Our Right to Terminate:"})," We may terminate or suspend your account for violation of these terms, non-payment, or abuse of service."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"10. Dispute Resolution"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Governing Law:"})," These terms are governed by applicable international law."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Arbitration:"})," Disputes shall be resolved through informal resolution or binding arbitration, not court proceedings."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"11. Modifications to Terms"}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"We may update these terms at any time. Major changes will be notified via email or in-app notice. Your continued use after changes constitutes acceptance."})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"12. Contact for Disputes"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Support:"})," support@useqring.online"]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Legal Issues:"})," legal@useqring.online"]})]})]})]}),e.jsxs("div",{className:"mt-16 flex flex-wrap justify-center gap-4 border-t border-slate-200 pt-8 dark:border-slate-800",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/privacy",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"View Privacy"})]})]})]})}function Ma(){const{isDark:t,toggleTheme:a}=oe(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(le,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-5xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:[e.jsxs("div",{className:"mb-16",children:[e.jsx("h1",{className:"text-4xl font-black tracking-tight sm:text-5xl",children:"Compliance & Standards"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Last updated: January 2025"}),e.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300",children:"Qring adheres to stringent compliance requirements and best practices for data protection, security, and operational integrity."})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Data Protection Regulations"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"GDPR Compliance"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Qring complies with the General Data Protection Regulation (GDPR). We honor user rights including data access, correction, deletion, and portability. Our Data Processing Agreements are available upon request."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"CCPA & Privacy Laws"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"For users in California and other jurisdictions with privacy laws, we provide transparency about personal information, allow opt-out options, and facilitate data rights requests."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"UK Data Protection Act (UKDPA)"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Qring honors obligations under the UK Data Protection Act 2018 and recognizes all GDPR rights for UK-based users."})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Security Frameworks"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"NIST Cybersecurity Framework"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Our security practices align with NIST guidelines for identifying, protecting, detecting, responding to, and recovering from cybersecurity incidents."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"OWASP Top 10"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Qring development follows OWASP Top 10 security recommendations to prevent common application vulnerabilities including injection, broken authentication, and sensitive data exposure."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Encryption Standards"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"All data is encrypted using industry-standard protocols: TLS 1.2+ for transport, AES-256 for data at rest, and WebRTC for realtime communications."})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Compliance Certifications"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Security Audits"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Qring undergoes regular third-party security assessments and penetration testing to identify and remediate vulnerabilities."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Incident Response Plan"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"We maintain a documented incident response plan to detect and respond to security incidents within acceptable timeframes and notify affected users."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Business Continuity"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Qring maintains backup and disaster recovery procedures with regular testing to ensure service availability and data integrity."})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Access Control & Authentication"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Role-Based Access Control (RBAC)"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Granular permissions ensure users only access data and features required for their role. Regular access reviews are conducted."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Multi-Factor Authentication"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"MFA is available for all accounts and required for administrative functions to prevent unauthorized access."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Session Management"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Sessions are scoped, time-limited, and automatically revoked. All session events are logged for audit purposes."})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Audit & Logging"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Comprehensive Logging:"})," All authentication, authorization, and data access events are logged with timestamps, user identifiers, IP addresses, and action details."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Log Retention:"})," Audit logs are retained for 12 months and protected against tampering and unauthorized access."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Log Review:"})," Logs are regularly reviewed for suspicious activities and security events."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Third-Party Security"}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"All third-party service providers are vetted for security and compliance. Data Processing Agreements are in place for any processor handling personal data."})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Compliance Contact"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Compliance Officer:"})," compliance@useqring.online"]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Data Protection Officer:"})," dpo@useqring.online"]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Security Team:"})," security@useqring.online"]})]})]})]}),e.jsxs("div",{className:"mt-16 flex flex-wrap justify-center gap-4 border-t border-slate-200 pt-8 dark:border-slate-800",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/security",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"View Security"})]})]})]})}function Re({title:t,subtitle:a,children:s}){return e.jsxs("div",{className:"w-full max-w-md rounded-3xl border border-slate-200 bg-white/90 p-7 shadow-soft backdrop-blur dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"mb-5 flex items-center gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(le,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500",children:"Qring"}),e.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Secure Access"})]})]}),e.jsx("h1",{className:"font-heading text-3xl font-bold",children:t}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:a}),e.jsx("div",{className:"mt-6",children:s})]})}const Ia={apiKey:"AIzaSyAg0TIlKOOk3AcDn-VGh9HlDQi2eDjk088",authDomain:"qring-7ced9.firebaseapp.com",projectId:"qring-7ced9",storageBucket:"qring-7ced9.firebasestorage.app",messagingSenderId:"103048317220",appId:"1:103048317220:web:72f9667db6daae62504bb1",measurementId:"G-3B48QKGTH7"},Ta=Vs(Ia),St=Fs(Ta);zs(St,Gs).catch(t=>{console.error("Error setting Firebase persistence:",t)});const lt=new Ws;lt.addScope("profile");lt.addScope("email");const Ct="qring_pending_google_signup";function La(t){sessionStorage.setItem(Ct,JSON.stringify(t))}function Da(){const t=sessionStorage.getItem(Ct);if(!t)return null;try{return JSON.parse(t)}catch{return null}}function qa(){sessionStorage.removeItem(Ct)}async function js(){try{const a=(await ms(St,lt)).user,s=await a.getIdToken(!0);return await T("/auth/google-signin",{method:"POST",body:JSON.stringify({idToken:s,email:a.email,displayName:a.displayName,photoURL:a.photoURL})})}catch(t){throw t.code==="auth/popup-closed-by-user"?new Error("Sign-in popup was closed"):t.code==="auth/popup-blocked"?new Error("Sign-in popup was blocked. Please allow popups."):new Error(t.message||"Google sign-in failed")}}async function ks(t=""){try{const a=(await ms(St,lt)).user,r={idToken:await a.getIdToken(!0),email:a.email,displayName:a.displayName,photoURL:a.photoURL,referralCode:String(t||"").trim()||void 0};return La(r),r}catch(a){throw a.code==="auth/popup-closed-by-user"?new Error("Sign-up popup was closed"):a.code==="auth/popup-blocked"?new Error("Sign-up popup was blocked. Please allow popups."):new Error(a.message||"Google sign-up failed")}}async function $a(t="homeowner"){let a=Da();a!=null&&a.idToken||(a=await ks());try{const s=await T("/auth/google-signup",{method:"POST",body:JSON.stringify({idToken:a.idToken,email:a.email,displayName:a.displayName,photoURL:a.photoURL,role:t,referralCode:a.referralCode})}),r=(s==null?void 0:s.data)??s;if(!(r!=null&&r.accessToken)&&!(r!=null&&r.user))throw new Error("Google signup API returned no auth payload. Check VITE_API_BASE_URL and backend /auth/google-signup deployment.");return qa(),s}catch(s){throw s.code==="auth/popup-closed-by-user"?new Error("Sign-up popup was closed"):s.code==="auth/popup-blocked"?new Error("Sign-up popup was blocked. Please allow popups."):new Error(s.message||"Google sign-up failed")}}async function ws(t="homeowner"){return $a(t)}async function Ns(t){return T("/auth/login",{method:"POST",body:JSON.stringify(t)})}async function Oa(){return js()}async function _a(t){return ws(t)}async function Qa(t=""){return ks(t)}async function Ua(){return js()}async function Ba(){return ws("admin")}async function Ha(t){return T("/auth/signup",{method:"POST",body:JSON.stringify(t)})}async function Va(t){return T("/auth/admin-signup",{method:"POST",body:JSON.stringify(t)})}async function Fa(t){return T("/auth/forgot-password",{method:"POST",body:JSON.stringify(t)})}async function za(t){return T("/auth/reset-password",{method:"POST",body:JSON.stringify(t)})}async function st(t){return T("/auth/logout",{method:"POST",body:JSON.stringify(t)})}async function Ga(t){return T("/auth/change-password",{method:"POST",body:JSON.stringify(t)})}const ys=l.createContext(null);function Wa(t,a){const s=localStorage.getItem(t);if(!s)return a;try{return JSON.parse(s)}catch{return a}}function Ja(t){if(!t||typeof t!="string"||!t.includes("."))return null;try{const s=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=s.padEnd(s.length+(4-s.length%4)%4,"=");return JSON.parse(atob(r))}catch{return null}}function ht(t){const a=(t==null?void 0:t.data)??t,s=(a==null?void 0:a.data)??a,r=(s==null?void 0:s.accessToken)??(a==null?void 0:a.accessToken)??"",n=(s==null?void 0:s.refreshToken)??(a==null?void 0:a.refreshToken)??"",d=Ja(r),o=(d==null?void 0:d.role)??null,h=(s==null?void 0:s.user)??(a==null?void 0:a.user)??null,u=h?{...h,role:h.role??h.userRole??o??null}:o?{role:o}:null;return{accessToken:r,refreshToken:n,user:u}}function Ya({children:t}){const[a,s]=l.useState(()=>localStorage.getItem("qring_access_token")??""),[r,n]=l.useState(()=>localStorage.getItem("qring_access_token")?Wa("qring_user",null):null),[d,o]=l.useState(!1),h=async j=>{o(!0);try{const y=await Ns(j),C=ht(y);return C.accessToken&&(localStorage.setItem("qring_access_token",C.accessToken),s(C.accessToken)),C.refreshToken&&localStorage.setItem("qring_refresh_token",C.refreshToken),C.user&&(localStorage.setItem("qring_user",JSON.stringify(C.user)),n(C.user)),C}finally{o(!1)}},u=async j=>{o(!0);try{return await Ha(j)}finally{o(!1)}},p=async()=>{o(!0);try{const j=await Oa(),y=ht(j);return y.accessToken&&(localStorage.setItem("qring_access_token",y.accessToken),s(y.accessToken)),y.refreshToken&&localStorage.setItem("qring_refresh_token",y.refreshToken),y.user&&(localStorage.setItem("qring_user",JSON.stringify(y.user)),n(y.user)),y}finally{o(!1)}},m=async j=>{var y;o(!0);try{const C=await _a(j),k=ht(C);return!((y=k.user)!=null&&y.role)&&k.accessToken&&(k.user={...k.user??{},role:j}),k.accessToken&&(localStorage.setItem("qring_access_token",k.accessToken),s(k.accessToken)),k.refreshToken&&localStorage.setItem("qring_refresh_token",k.refreshToken),k.user&&(localStorage.setItem("qring_user",JSON.stringify(k.user)),n(k.user)),k}finally{o(!1)}},x=async(j="")=>{o(!0);try{return await Qa(j)}finally{o(!1)}},i=async j=>Fa({email:j}),b=async()=>{try{const j=localStorage.getItem("qring_refresh_token");j&&await st({refreshToken:j})}finally{localStorage.removeItem("qring_access_token"),localStorage.removeItem("qring_refresh_token"),localStorage.removeItem("qring_user"),s(""),n(null)}},f=l.useMemo(()=>({user:r,loading:d,isAuthenticated:!!(r&&a),login:h,signup:u,googleSignIn:p,googleSignUp:m,beginGoogleSignUp:x,forgotPassword:i,logout:b}),[r,a,d]);return e.jsx(ys.Provider,{value:f,children:t})}function ge(){const t=l.useContext(ys);if(!t)throw new Error("useAuth must be used inside AuthProvider");return t}const Ka={homeowner:"/dashboard/homeowner/overview",admin:"/dashboard/admin",estate:"/dashboard/estate"};function Qt(t,a){var n;const s=(n=t==null?void 0:t.user)==null?void 0:n.role;if(!s)return null;const r=Ka[s];if(!r)throw new Error(`Login succeeded but role '${s}' is not supported in this app.`);return a??r}function Za(){const{login:t,googleSignIn:a,loading:s}=ge(),[r]=cs(),n=r.get("email")??r.get("username")??"",[d,o]=l.useState({email:n,password:""}),[h,u]=l.useState(""),p=me(),m=qe(),x=async b=>{var f,j;b.preventDefault(),u("");try{const y=await t(d),C=Qt(y,(j=(f=m.state)==null?void 0:f.from)==null?void 0:j.pathname);if(!C)throw new Error("Login succeeded but no user role was returned. Please contact support.");p(C,{replace:!0})}catch(y){u(y.message??"Login failed")}},i=async()=>{var b,f,j,y;u("");try{const C=await a(),k=Qt(C,(f=(b=m.state)==null?void 0:b.from)==null?void 0:f.pathname);if(!k){p("/google-role",{replace:!0,state:{from:(y=(j=m.state)==null?void 0:j.from)==null?void 0:y.pathname}});return}p(k,{replace:!0})}catch(C){u(C.message??"Google sign-in failed")}};return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsx(Re,{title:"Login",subtitle:"Access your secure Qring workspace",children:e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsx(Ut,{label:"Email or Username",type:"text",value:d.email,onChange:b=>o(f=>({...f,email:b}))}),e.jsx(Ut,{label:"Password",type:"password",value:d.password,onChange:b=>o(f=>({...f,password:b}))}),h?e.jsx("p",{className:"text-sm text-danger",children:h}):null,e.jsx("button",{type:"submit",disabled:s,className:"w-full rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:s?"Signing In...":"Sign In"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-300 dark:border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-slate-50 px-2 text-slate-500 dark:bg-slate-950 dark:text-slate-400",children:"Or"})})]}),e.jsxs("button",{type:"button",onClick:i,disabled:s,className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-900 dark:text-white dark:hover:bg-slate-800",children:[e.jsxs("svg",{className:"mb-0.5 mr-2 inline h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s?"Signing in...":"Sign in with Google"]}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[e.jsx(g,{to:"/forgot-password",className:"hover:text-brand-500",children:"Forgot password?"}),e.jsx(g,{to:"/signup",className:"hover:text-brand-500",children:"Create account"})]})]})})})}function Ut({label:t,type:a,value:s,onChange:r}){return e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:t}),e.jsx("input",{required:!0,type:a,value:s,onChange:n=>r(n.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]})}function Xa(){const[t,a]=l.useState({email:"",password:""}),[s,r]=l.useState(""),[n,d]=l.useState(!1);me();const o=qe(),h=async p=>{var m,x,i;p.preventDefault(),r(""),d(!0);try{const b=await Ns(t),f=(b==null?void 0:b.data)??b;if(f!=null&&f.accessToken&&localStorage.setItem("qring_access_token",f.accessToken),f!=null&&f.refreshToken&&localStorage.setItem("qring_refresh_token",f.refreshToken),f!=null&&f.user&&localStorage.setItem("qring_user",JSON.stringify(f.user)),((m=f==null?void 0:f.user)==null?void 0:m.role)!=="admin"){const y=localStorage.getItem("qring_refresh_token");if(y)try{await st({refreshToken:y})}catch{}localStorage.removeItem("qring_access_token"),localStorage.removeItem("qring_refresh_token"),localStorage.removeItem("qring_user"),r("Admin account required.");return}const j=((i=(x=o.state)==null?void 0:x.from)==null?void 0:i.pathname)??"/dashboard/admin";window.location.assign(j)}catch(b){r(b.message??"Admin login failed")}finally{d(!1)}},u=async()=>{var p,m,x;r(""),d(!0);try{const i=await Ua(),b=(i==null?void 0:i.data)??i;if(b!=null&&b.accessToken&&localStorage.setItem("qring_access_token",b.accessToken),b!=null&&b.refreshToken&&localStorage.setItem("qring_refresh_token",b.refreshToken),b!=null&&b.user&&localStorage.setItem("qring_user",JSON.stringify(b.user)),((p=b==null?void 0:b.user)==null?void 0:p.role)!=="admin"){const j=localStorage.getItem("qring_refresh_token");if(j)try{await st({refreshToken:j})}catch{}localStorage.removeItem("qring_access_token"),localStorage.removeItem("qring_refresh_token"),localStorage.removeItem("qring_user"),r("Admin account required.");return}const f=((x=(m=o.state)==null?void 0:m.from)==null?void 0:x.pathname)??"/dashboard/admin";window.location.assign(f)}catch(i){r(i.message??"Google admin sign-in failed")}finally{d(!1)}};return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsx(Re,{title:"Admin Login",subtitle:"Restricted access for platform administrators",children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsx(Bt,{label:"Admin Email or Username",type:"text",value:t.email,onChange:p=>a(m=>({...m,email:p}))}),e.jsx(Bt,{label:"Password",type:"password",value:t.password,onChange:p=>a(m=>({...m,password:p}))}),s?e.jsx("p",{className:"text-sm text-danger",children:s}):null,e.jsx("button",{type:"submit",disabled:n,className:"w-full rounded-xl bg-slate-900 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:n?"Signing In...":"Enter Admin Dashboard"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-300 dark:border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-slate-50 px-2 text-slate-500 dark:bg-slate-950 dark:text-slate-400",children:"Or"})})]}),e.jsxs("button",{type:"button",onClick:u,disabled:n,className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-900 dark:text-white dark:hover:bg-slate-800",children:[e.jsxs("svg",{className:"mb-0.5 mr-2 inline h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n?"Signing in...":"Sign in with Google"]}),e.jsx("div",{className:"text-center text-xs text-slate-500",children:e.jsxs("div",{className:"space-x-3",children:[e.jsx(g,{to:"/admin/signup",className:"hover:text-brand-500",children:"Create admin"}),e.jsx(g,{to:"/login",className:"hover:text-brand-500",children:"User login"})]})})]})})})}function Bt({label:t,type:a,value:s,onChange:r}){return e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:t}),e.jsx("input",{required:!0,type:a,value:s,onChange:n=>r(n.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]})}function er(){const[t,a]=l.useState({fullName:"",email:"",password:""}),[s,r]=l.useState(!1),[n,d]=l.useState(""),o=me();async function h(p){p.preventDefault(),r(!0),d("");try{await Va(t),setTimeout(()=>o("/admin/login"),500)}catch(m){d(m.message??"Admin signup failed")}finally{r(!1)}}async function u(){var p;d(""),r(!0);try{const m=await Ba(),x=(m==null?void 0:m.data)??m;if(x!=null&&x.accessToken&&localStorage.setItem("qring_access_token",x.accessToken),x!=null&&x.refreshToken&&localStorage.setItem("qring_refresh_token",x.refreshToken),x!=null&&x.user&&localStorage.setItem("qring_user",JSON.stringify(x.user)),((p=x==null?void 0:x.user)==null?void 0:p.role)!=="admin"){const i=localStorage.getItem("qring_refresh_token");if(i)try{await st({refreshToken:i})}catch{}localStorage.removeItem("qring_access_token"),localStorage.removeItem("qring_refresh_token"),localStorage.removeItem("qring_user"),d("Admin account required.");return}setTimeout(()=>o("/admin/login"),500)}catch(m){d(m.message??"Google admin sign-up failed")}finally{r(!1)}}return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsx(Re,{title:"Create Admin Account",subtitle:"Creates an admin user account",children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsx(bt,{label:"Full Name",type:"text",value:t.fullName,onChange:p=>a(m=>({...m,fullName:p}))}),e.jsx(bt,{label:"Email",type:"email",value:t.email,onChange:p=>a(m=>({...m,email:p}))}),e.jsx(bt,{label:"Password",type:"password",value:t.password,onChange:p=>a(m=>({...m,password:p}))}),n?e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:n}):null,e.jsx("button",{type:"submit",disabled:s,className:"w-full rounded-xl bg-slate-900 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:s?"Creating...":"Create Admin"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-300 dark:border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-slate-50 px-2 text-slate-500 dark:bg-slate-950 dark:text-slate-400",children:"Or"})})]}),e.jsxs("button",{type:"button",onClick:u,disabled:s,className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-900 dark:text-white dark:hover:bg-slate-800",children:[e.jsxs("svg",{className:"mb-0.5 mr-2 inline h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s?"Creating admin...":"Sign up with Google"]}),e.jsxs("p",{className:"text-center text-xs text-slate-500",children:["Already have admin account?"," ",e.jsx(g,{to:"/admin/login",className:"font-semibold hover:text-slate-700 dark:hover:text-slate-300",children:"Admin login"})]})]})})})}function bt({label:t,type:a,value:s,onChange:r}){return e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:t}),e.jsx("input",{required:!0,type:a,value:s,onChange:n=>r(n.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-slate-900 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]})}function tr(){const{signup:t,beginGoogleSignUp:a}=ge(),[s,r]=l.useState({fullName:"",email:"",password:"",role:"homeowner",referralCode:""}),[n,d]=l.useState(""),[o,h]=l.useState(!1),u=me(),p=async x=>{x.preventDefault(),d(""),h(!0);try{await t(s),u("/login")}catch(i){d(i.message??"Signup failed")}finally{h(!1)}},m=async()=>{d(""),h(!0);try{await a(s.referralCode),u("/google-role",{state:{intent:"signup"}})}catch(x){d(x.message??"Google sign-up failed")}finally{h(!1)}};return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsx(Re,{title:"Create Account",subtitle:"Start with secure QR access",children:e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsx(He,{label:"Full name",type:"text",value:s.fullName,onChange:x=>r(i=>({...i,fullName:x}))}),e.jsx(He,{label:"Email",type:"email",value:s.email,onChange:x=>r(i=>({...i,email:x}))}),e.jsx(He,{label:"Password",type:"password",value:s.password,onChange:x=>r(i=>({...i,password:x}))}),e.jsx(He,{label:"Referral code (optional)",type:"text",value:s.referralCode,required:!1,onChange:x=>r(i=>({...i,referralCode:x}))}),e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:"Role"}),e.jsxs("select",{value:s.role,onChange:x=>r(i=>({...i,role:x.target.value})),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("option",{value:"homeowner",children:"Homeowner"}),e.jsx("option",{value:"estate",children:"Estate User"})]})]}),n?e.jsx("p",{className:"text-sm text-danger",children:n}):null,e.jsx("button",{type:"submit",disabled:o,className:"w-full rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:o?"Creating...":"Create Account"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-300 dark:border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-slate-50 px-2 text-slate-500 dark:bg-slate-950 dark:text-slate-400",children:"Or"})})]}),e.jsxs("button",{type:"button",onClick:m,disabled:o,className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-900 dark:text-white dark:hover:bg-slate-800",children:[e.jsxs("svg",{className:"mb-0.5 mr-2 inline h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),o?"Creating account...":"Sign up with Google"]}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Already have an account?"," ",e.jsx(g,{to:"/login",className:"font-semibold hover:text-brand-500",children:"Login"})]})]})})})}function He({label:t,type:a,value:s,onChange:r,required:n=!0}){return e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:t}),e.jsx("input",{required:n,type:a,value:s,onChange:d=>r(d.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]})}const sr={homeowner:"/dashboard/homeowner/overview",admin:"/dashboard/admin",estate:"/dashboard/estate"};function ar(){var i;const{googleSignUp:t,loading:a}=ge(),[s,r]=l.useState("homeowner"),[n,d]=l.useState(""),[o,h]=l.useState(!1),u=me(),p=qe(),m=((i=p.state)==null?void 0:i.intent)??"signin-fallback";async function x(b){var f,j;b.preventDefault(),d("");try{const y=await t(s);if(m==="signup"){localStorage.removeItem("qring_access_token"),localStorage.removeItem("qring_refresh_token"),localStorage.removeItem("qring_user"),h(!0),window.dispatchEvent(new CustomEvent("qring:flash",{detail:{type:"success",title:"Signup Successful",message:"Google account setup complete. Redirecting to login...",duration:2600}})),window.setTimeout(()=>window.location.assign("/login"),1800);return}const C=(()=>{try{return JSON.parse(localStorage.getItem("qring_user")??"null")}catch{return null}})(),k=((f=y==null?void 0:y.user)==null?void 0:f.role)??(C==null?void 0:C.role);if(!k)throw new Error("Account setup completed but role was not returned.");const I=sr[k];if(!I)throw new Error(`Account setup completed but role '${k}' is not supported.`);u(((j=p.state)==null?void 0:j.from)??I,{replace:!0})}catch(y){d(y.message??"Unable to finish Google account setup")}}return e.jsxs("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:[e.jsx(Re,{title:"Choose Your Role",subtitle:"Select how you want to use Qring on this account",children:e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:"Role"}),e.jsxs("select",{value:s,onChange:b=>r(b.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("option",{value:"homeowner",children:"Homeowner"}),e.jsx("option",{value:"estate",children:"Estate User"})]})]}),n?e.jsx("p",{className:"text-sm text-danger",children:n}):null,e.jsx("button",{type:"submit",disabled:a,className:"w-full rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:a?"Setting up...":"Continue"})]})}),o?e.jsx("div",{className:"fixed inset-0 z-40 grid place-items-center bg-slate-900/50 p-4",children:e.jsxs("div",{className:"w-full max-w-sm rounded-2xl border border-emerald-200 bg-white p-5 shadow-2xl",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-emerald-700",children:"Success"}),e.jsx("p",{className:"mt-2 text-sm font-medium text-slate-800",children:"Account setup complete. Redirecting to login..."})]})}):null]})}function rr(){const{forgotPassword:t}=ge(),[a,s]=l.useState(""),[r,n]=l.useState(""),[d,o]=l.useState(1),[h,u]=l.useState({loading:!1,error:"",done:!1,message:""}),p=async x=>{x.preventDefault(),u({loading:!0,error:"",done:!1,message:""});try{const i=await t(a),b=(i==null?void 0:i.data)??i;u({loading:!1,error:"",done:!0,message:(b==null?void 0:b.status)==="email_verified"?"Email found. Set your new password.":"Email verified."}),o(2)}catch(i){u({loading:!1,error:i.message??"Request failed",done:!1,message:""})}},m=async x=>{x.preventDefault(),u(i=>({...i,loading:!0,error:""}));try{await za({email:a,newPassword:r}),u({loading:!1,error:"",done:!0,message:"Password reset successful. You can now login."}),o(3)}catch(i){u(b=>({...b,loading:!1,error:i.message??"Reset failed"}))}};return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsxs(Re,{title:"Forgot Password",subtitle:"Verify your email and set a new password",children:[d===1?e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:"Email"}),e.jsx("input",{required:!0,type:"email",value:a,onChange:x=>s(x.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]}),h.error?e.jsx("p",{className:"text-sm text-danger",children:h.error}):null,e.jsx("button",{type:"submit",disabled:h.loading,className:"w-full rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:h.loading?"Checking...":"Continue"})]}):null,d===2?e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsx("p",{className:"rounded-xl bg-slate-100 p-3 text-xs text-slate-600 dark:bg-slate-800 dark:text-slate-300",children:h.message||"Set your new password."}),e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:"New Password"}),e.jsx("input",{required:!0,minLength:8,type:"password",value:r,onChange:x=>n(x.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]}),h.error?e.jsx("p",{className:"text-sm text-danger",children:h.error}):null,e.jsx("button",{type:"submit",disabled:h.loading,className:"w-full rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:h.loading?"Resetting...":"Reset Password"})]}):null,d===3?e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-success",children:h.message}),e.jsx(g,{to:"/login",className:"block w-full rounded-xl bg-slate-900 px-4 py-3 text-center text-sm font-semibold text-white dark:bg-white dark:text-slate-900",children:"Back to Login"})]}):null,e.jsxs("p",{className:"mt-4 text-xs text-slate-500",children:["Back to"," ",e.jsx(g,{to:"/login",className:"font-semibold hover:text-brand-500",children:"Login"})]})]})})}async function lr(){const t=await T("/homeowner/visits");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function nt(){var s;const t=await T("/homeowner/settings"),a=(t==null?void 0:t.data)??null;return{managedByEstate:!!(a!=null&&a.managedByEstate),estateId:(a==null?void 0:a.estateId)??null,estateName:(a==null?void 0:a.estateName)??null,estateOwnerId:((s=a==null?void 0:a.subscription)==null?void 0:s.subscriptionOwnerId)??null}}async function Ht(){const t=await T("/homeowner/messages");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function nr(t){const a=await T(`/homeowner/messages/${t}`);return Array.isArray(a==null?void 0:a.data)?a.data:[]}async function or(t,a){const s=await T(`/homeowner/messages/${t}`,{method:"POST",body:JSON.stringify({text:a})});return(s==null?void 0:s.data)??null}async function ir(t,a){const s=await T(`/homeowner/messages/${t}/${a}`,{method:"DELETE"});return(s==null?void 0:s.data)??null}async function dr(t){const a=await T(`/homeowner/visits/${t}/end`,{method:"POST"});return(a==null?void 0:a.data)??null}async function cr(){const t=await T("/homeowner/doors"),a=t==null?void 0:t.data;return Array.isArray(a)?{doors:a,subscription:null}:{doors:Array.isArray(a==null?void 0:a.doors)?a.doors:[],subscription:(a==null?void 0:a.subscription)??null}}async function xr(t){const a=await T("/homeowner/doors",{method:"POST",body:JSON.stringify(t)});return(a==null?void 0:a.data)??null}async function mr(t,a){const s=await T(`/homeowner/visits/${t}/decision`,{method:"POST",body:JSON.stringify({action:a})});return(s==null?void 0:s.data)??null}async function ur(t){const a=await T(`/visitor/sessions/${t}`);return(a==null?void 0:a.data)??null}async function hr(t){const a=await T(`/visitor/sessions/${t}/messages`);return Array.isArray(a==null?void 0:a.data)?a.data:[]}async function vs(){const t=await T("/notifications/");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function br(t){const a=await T("/notifications/push-subscriptions",{method:"POST",body:JSON.stringify(t)});return(a==null?void 0:a.data)??null}async function Ss(t){const a=await T(`/notifications/${t}/read`,{method:"POST"});return typeof window<"u"&&window.dispatchEvent(new Event("qring:notifications-updated")),(a==null?void 0:a.data)??null}async function gr(){const t=await T("/notifications/read-all",{method:"POST"});return typeof window<"u"&&window.dispatchEvent(new Event("qring:notifications-updated")),(t==null?void 0:t.data)??null}async function pr(){return typeof window>"u"||typeof window.Notification>"u"?"unsupported":window.Notification.permission==="granted"?"granted":window.Notification.requestPermission()}function fr(t){if(t&&typeof t=="object")return t;if(typeof t=="string")try{return JSON.parse(t)}catch{return{}}return{}}async function jr(t){if(!t)return;const s=(await vs()).filter(r=>!(r!=null&&r.readAt)&&(r==null?void 0:r.kind)==="visitor.request").filter(r=>{var n;return((n=fr(r==null?void 0:r.payload))==null?void 0:n.sessionId)===t}).map(r=>r.id).filter(Boolean);await Promise.all(s.map(r=>Ss(r))),typeof window<"u"&&window.dispatchEvent(new Event("qring:notifications-updated"))}function kr({open:t,role:a,steps:s,onClose:r,onComplete:n,onNavigate:d}){var f;const[o,h]=l.useState(0),u=s.length,p=s[o],m=l.useMemo(()=>u?Math.round((o+1)/u*100):0,[o,u]);if(l.useEffect(()=>{t&&h(0)},[t,a]),!t||!p)return null;function x(){r==null||r()}function i(){if(o>=u-1){n==null||n();return}h(j=>j+1)}function b(){o!==0&&h(j=>j-1)}return e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-slate-950/55 p-4",children:e.jsxs("div",{className:"w-full max-w-3xl rounded-2xl border border-slate-200 bg-white shadow-soft dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("div",{className:"border-b border-slate-200 p-5 dark:border-slate-800",children:[e.jsxs("div",{className:"mb-3 flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-500",children:"QRing Onboarding"}),e.jsx("h2",{className:"mt-1 text-lg font-bold text-slate-900 dark:text-slate-100",children:a==="estate"?"Estate Manager Guide":"Homeowner Guide"}),e.jsxs("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:["Step ",o+1," of ",u,": ",p.title]})]}),e.jsx("button",{type:"button",onClick:x,className:"rounded-lg border border-slate-300 px-3 py-1.5 text-xs font-semibold dark:border-slate-700",children:"Close"})]}),e.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-slate-200 dark:bg-slate-800",children:e.jsx("div",{className:"h-full bg-brand-500 transition-all duration-300",style:{width:`${m}%`}})})]}),e.jsxs("div",{className:"space-y-4 p-5",children:[e.jsx("p",{className:"text-sm leading-relaxed text-slate-700 dark:text-slate-200",children:p.description}),(f=p.points)!=null&&f.length?e.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:p.points.map(j=>e.jsx("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3 text-xs font-medium text-slate-700 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200",children:j},j))}):null,p.route&&p.routeLabel?e.jsx("button",{type:"button",onClick:()=>d==null?void 0:d(p.route),className:"rounded-lg border border-brand-500 bg-brand-500 px-3 py-2 text-xs font-semibold text-white",children:p.routeLabel}):null,e.jsx("div",{className:"flex flex-wrap gap-2 border-t border-slate-200 pt-4 dark:border-slate-800",children:s.map((j,y)=>e.jsx("button",{type:"button",onClick:()=>h(y),className:`rounded-lg border px-2.5 py-1 text-[11px] font-semibold transition ${y===o?"border-brand-500 bg-brand-500 text-white":"border-slate-300 text-slate-600 hover:bg-slate-100 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800"}`,children:j.title},j.title))})]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 p-5 dark:border-slate-800",children:[e.jsx("button",{type:"button",onClick:b,disabled:o===0,className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold disabled:opacity-40 dark:border-slate-700",children:"Back"}),e.jsx("button",{type:"button",onClick:i,className:"rounded-lg border border-brand-500 bg-brand-500 px-3 py-2 text-xs font-semibold text-white",children:o>=u-1?"Finish":"Next"})]})]})})}const wr={homeowner:[{to:"/dashboard/homeowner/overview",label:"Overview",icon:"overview"},{to:"/dashboard/homeowner/visits",label:"Visits",icon:"visits"},{to:"/dashboard/homeowner/messages",label:"Messages",icon:"messages"},{to:"/dashboard/homeowner/doors",label:"Doors",icon:"doors"},{to:"/billing/paywall",label:"Billing",icon:"billing"},{to:"/dashboard/homeowner/settings",label:"Settings",icon:"settings"}],estate:[{to:"/dashboard/estate",label:"Overview",icon:"estate"},{to:"/dashboard/estate/create",label:"Create Estate",icon:"estate_create"},{to:"/dashboard/estate/doors",label:"Add Doors",icon:"doors"},{to:"/dashboard/estate/assign",label:"Assign Doors",icon:"assign"},{to:"/dashboard/estate/invites",label:"Invite Owners",icon:"invite"},{to:"/dashboard/estate/mappings",label:"Mappings",icon:"mappings"},{to:"/dashboard/estate/logs",label:"Access Logs",icon:"logs"},{to:"/dashboard/estate/plan",label:"Plan Rules",icon:"plans"},{to:"/billing/paywall",label:"Billing",icon:"billing"},{to:"/dashboard/estate/homes",label:"Multi-Home",icon:"homes"}],admin:[{to:"/dashboard/admin",label:"System",icon:"system"},{to:"/dashboard/admin/users",label:"Users",icon:"user_admin"},{to:"/dashboard/admin/sessions",label:"Sessions",icon:"sessions"},{to:"/dashboard/admin/payments",label:"Payments",icon:"billing"},{to:"/dashboard/admin/config",label:"Config",icon:"settings"},{to:"/dashboard/admin/audit",label:"Audit",icon:"logs"}]};function te({title:t,children:a}){const{user:s,logout:r}=ge(),{isDark:n,toggleTheme:d}=oe(),o=me(),[h,u]=l.useState(!1),[p,m]=l.useState(!1),[x,i]=l.useState([]),[b,f]=l.useState(null),[j,y]=l.useState(!1),[C,k]=l.useState(()=>typeof window<"u"&&window.Notification?window.Notification.permission:"unsupported"),[I,c]=l.useState(()=>localStorage.getItem("qring_sound_alerts")!=="false"),[P,E]=l.useState(!1),[F,L]=l.useState(!1),[w,S]=l.useState(!0),$=l.useRef(null),q=l.useRef(null),H=l.useRef([]),se=l.useRef(!1),K=l.useRef(new Set),N=l.useMemo(()=>(s==null?void 0:s.role)==="homeowner"&&(!!(b!=null&&b.managedByEstate)||typeof(s==null?void 0:s.email)=="string"&&s.email.toLowerCase().endsWith("@estate.useqring.online")),[s==null?void 0:s.role,s==null?void 0:s.email,b]),M=l.useMemo(()=>{const v=wr[s==null?void 0:s.role]??[];return(s==null?void 0:s.role)==="homeowner"&&(j||N)?v.filter(U=>U.to!=="/billing/paywall"):v},[s==null?void 0:s.role,N,j]),W=l.useMemo(()=>M.find(v=>v.to.endsWith("/settings"))??null,[M]),G=l.useMemo(()=>{if((s==null?void 0:s.role)==="homeowner"){const v=["/dashboard/homeowner/overview","/dashboard/homeowner/visits","/dashboard/homeowner/messages"],U=N?"/dashboard/homeowner/settings":"/billing/paywall";return[...v,U].map(ee=>M.find(ie=>ie.to===ee)).filter(Boolean)}return M.filter(v=>!v.to.endsWith("/settings")).slice(0,4)},[M,s==null?void 0:s.role,N]),z=(s==null?void 0:s.role)==="homeowner"||(s==null?void 0:s.role)==="estate",ae=l.useMemo(()=>Nr(s==null?void 0:s.role),[s==null?void 0:s.role]);l.useEffect(()=>{let v=!0;async function U(){if((s==null?void 0:s.role)!=="homeowner"){f(null),y(!1);return}y(!0);try{const X=await nt();if(!v)return;f(X)}catch{if(!v)return;f(null)}finally{v&&y(!1)}}return U(),()=>{v=!1}},[s==null?void 0:s.role]),l.useEffect(()=>{if(!z||F)return;const v=(s==null?void 0:s.email)??(s==null?void 0:s.id)??"anonymous",U=`qring_onboarding_seen_${s==null?void 0:s.role}_${v}`;localStorage.getItem(U)||(E(!0),localStorage.setItem(U,"true"))},[z,F,s==null?void 0:s.role,s==null?void 0:s.email,s==null?void 0:s.id]),l.useEffect(()=>{let v=!0,U=!1;async function X(){if(U)return;if(!localStorage.getItem("qring_access_token")){i([]);return}try{const he=await vs();if(!v)return;i(he)}catch(he){if(!v)return;(he==null?void 0:he.status)===401&&(U=!0),i([])}}X();const ee=setInterval(X,2e4),ie=()=>X();return window.addEventListener("qring:notifications-updated",ie),()=>{v=!1,clearInterval(ee),window.removeEventListener("qring:notifications-updated",ie)}},[]),l.useEffect(()=>{const v=X=>{X.key==="qring_sound_alerts"&&c(X.newValue!=="false")},U=()=>{c(localStorage.getItem("qring_sound_alerts")!=="false")};return window.addEventListener("storage",v),window.addEventListener("qring:sound-alerts-updated",U),()=>{window.removeEventListener("storage",v),window.removeEventListener("qring:sound-alerts-updated",U)}},[]);const R=l.useMemo(()=>x.map(v=>{let U=v.payload;if(typeof U=="string")try{U=JSON.parse(U)}catch{U={message:v.payload}}return{...v,payload:U&&typeof U=="object"?U:{}}}),[x]),Z=l.useMemo(()=>R.filter(v=>!v.readAt).length,[R]),Q=l.useMemo(()=>R.filter(v=>!v.readAt&&v.kind==="visitor.request").map(v=>v.id),[R]);l.useEffect(()=>{if(!se.current){H.current=Q,se.current=!0;return}const v=H.current;Q.some(X=>!v.includes(X))&&S(!1),H.current=Q},[Q]),l.useEffect(()=>{function v(){q.current&&(clearInterval(q.current),q.current=null)}function U(){if(typeof window>"u")return;const X=window.AudioContext||window.webkitAudioContext;if(!X)return;$.current||($.current=new X);const ee=$.current;ee.state==="suspended"&&ee.resume().catch(()=>{});const ie=ee.createGain();ie.gain.setValueAtTime(1e-4,ee.currentTime),ie.connect(ee.destination),[880,660].forEach((he,Me)=>{const xe=ee.currentTime+Me*.2,Ne=xe+.16,de=ee.createOscillator();de.type="sine",de.frequency.setValueAtTime(he,xe),de.connect(ie),ie.gain.exponentialRampToValueAtTime(.07,xe+.02),ie.gain.exponentialRampToValueAtTime(1e-4,Ne),de.start(xe),de.stop(Ne)})}if(I&&Q.length>0&&!w){U(),q.current||(q.current=setInterval(U,1800));return}return v(),v},[I,Q,w]),l.useEffect(()=>{typeof window>"u"||typeof window.Notification>"u"||window.Notification.permission==="granted"&&R.forEach(v=>{var ee;if(v.readAt||K.current.has(v.id))return;K.current.add(v.id);const U=((ee=v.payload)==null?void 0:ee.message)??"You have a new alert",X=new window.Notification("Qring Alert",{body:U});X.onclick=()=>{window.focus(),B(v)}})},[R]),l.useEffect(()=>()=>{var v,U;q.current&&clearInterval(q.current),(U=(v=$.current)==null?void 0:v.close)==null||U.call(v).catch(()=>{}),$.current=null},[]);async function B(v){if(S(!0),v!=null&&v.id&&!(v!=null&&v.readAt))try{await Ss(v.id),i(X=>X.map(ee=>ee.id===v.id?{...ee,readAt:ee.readAt||new Date().toISOString()}:ee))}catch{}((v==null?void 0:v.kind)??"").startsWith("visitor.")?o("/dashboard/homeowner/visits"):o((s==null?void 0:s.role)==="estate"?"/dashboard/estate":"/dashboard/homeowner/overview"),m(!1)}async function J(){S(!0);try{await gr(),i(v=>v.map(U=>({...U,readAt:U.readAt||new Date().toISOString()})))}catch{}}async function ue(){const v=await pr();if(k(v),v==="granted")try{await br({endpoint:"browser-notification",keys:{ua:navigator.userAgent}})}catch{}}return e.jsxs("div",{className:"min-h-screen bg-slate-100 text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsx("div",{className:"pointer-events-none fixed inset-0 -z-10 bg-[radial-gradient(circle_at_top_right,_rgba(36,86,245,0.16),_transparent_40%),radial-gradient(circle_at_bottom_left,_rgba(20,184,166,0.12),_transparent_35%)]"}),e.jsxs("div",{className:"flex min-h-screen",children:[h?e.jsx("button",{type:"button","aria-label":"Close navigation",className:"fixed inset-0 z-30 bg-slate-950/35 lg:hidden",onClick:()=>u(!1)}):null,e.jsxs("aside",{className:`fixed inset-y-0 left-0 z-40 w-72 transform border-r border-slate-200/70 bg-white/90 p-6 backdrop-blur transition-transform duration-300 dark:border-slate-800 dark:bg-slate-900/95 lg:static lg:translate-x-0 ${h?"translate-x-0":"-translate-x-full"}`,children:[e.jsxs("div",{className:"mb-8 flex items-center gap-3",children:[e.jsx("div",{className:"grid h-10 w-16 place-items-center rounded-xl  text-xs font-bold text-white shadow-soft",children:e.jsx(le,{tone:"dark",className:"h-18 w-46"})}),e.jsxs("div",{children:[e.jsx(g,{to:"/",className:"block font-heading text-2xl font-bold text-brand-500",children:"Qring"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Smart Access Communication"})]})]}),e.jsxs("nav",{className:"space-y-2",children:[M.map(v=>e.jsxs(et,{to:v.to,className:({isActive:U})=>`group relative flex items-center gap-3 rounded-xl border px-4 py-3 text-sm font-semibold transition-all ${U?"border-brand-500 bg-brand-500 text-white shadow-soft":"border-transparent text-slate-700 hover:border-slate-200 hover:bg-slate-100 dark:text-slate-200 dark:hover:border-slate-700 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"grid h-7 w-7 place-items-center rounded-lg border border-white/25 bg-white/20",children:e.jsx(Ve,{name:v.icon})}),e.jsx("span",{className:"flex-1",children:v.label})]},v.to)),z?e.jsxs("button",{type:"button",onClick:()=>{L(!1),E(!0)},className:"group relative flex w-full items-center gap-3 rounded-xl border border-transparent px-4 py-3 text-sm font-semibold text-slate-700 transition-all hover:border-slate-200 hover:bg-slate-100 dark:text-slate-200 dark:hover:border-slate-700 dark:hover:bg-slate-800",children:[e.jsx("span",{className:"grid h-7 w-7 place-items-center rounded-lg border border-white/25 bg-white/20",children:e.jsx(Ve,{name:"help"})}),e.jsx("span",{className:"flex-1 text-left",children:"Help"})]}):null]}),e.jsxs("div",{className:"mt-8 rounded-2xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Live Status"}),e.jsx("p",{className:"mt-2 text-sm font-semibold",children:"Realtime services operational"}),e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 rounded-lg bg-success/15 px-2 py-1 text-xs font-semibold text-success",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-success"}),"Connected"]})]})]}),e.jsxs("main",{className:"flex-1 p-3 pb-24 sm:p-4 sm:pb-24 lg:p-8 lg:pb-8",children:[e.jsxs("header",{className:"sticky top-3 z-30 mb-4 flex items-center justify-between rounded-2xl border border-slate-200 bg-white/80 p-3 shadow-soft backdrop-blur dark:border-slate-800 dark:bg-slate-900/70 sm:mb-6 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700 lg:hidden",onClick:()=>u(v=>!v),children:"MENU"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Dashboard"}),e.jsx("h1",{className:"font-heading text-xs font-bold lg:text-2xl",children:t})]})]}),e.jsxs("div",{className:"relative flex items-center gap-4 sm:gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>m(v=>!v),className:"relative rounded-lg border border-slate-300 p-2 text-xs font-semibold dark:border-slate-700","aria-label":"Notifications",children:[e.jsx(vr,{}),Z>0?e.jsx("span",{className:"absolute -right-1 -top-1 min-w-4 rounded-full bg-danger px-1 text-[10px] font-bold text-white",children:Z}):null]}),p?e.jsxs("div",{className:"absolute right-0 top-12 z-50 w-[min(20rem,calc(100vw-2rem))] rounded-2xl border border-slate-200 bg-white p-3 shadow-soft dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between px-2 pb-2",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Notifications"}),e.jsxs("div",{className:"flex items-center gap-2",children:[C!=="granted"&&C!=="unsupported"?e.jsx("button",{type:"button",onClick:ue,className:"rounded-md border border-brand-300 px-2 py-1 text-[10px] font-semibold text-brand-700 dark:border-brand-500/50 dark:text-brand-200",children:"Enable Alerts"}):null,e.jsx("button",{type:"button",onClick:J,className:"rounded-md border border-slate-300 px-2 py-1 text-[10px] font-semibold dark:border-slate-700",children:"Clear"})]})]}),e.jsx("div",{className:"max-h-80 space-y-2 overflow-y-auto",children:R.length===0?e.jsx("div",{className:"rounded-xl bg-slate-100 p-3 text-xs text-slate-500 dark:bg-slate-800",children:"No notifications yet."}):R.map(v=>{var U;return e.jsxs("button",{type:"button",onClick:()=>B(v),className:`block w-full rounded-xl border p-3 text-left transition hover:bg-slate-50 dark:hover:bg-slate-800 ${v.readAt?"border-slate-200 dark:border-slate-700":"border-brand-300 bg-brand-50/60 dark:border-brand-500/50 dark:bg-brand-500/10"}`,children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:v.kind}),e.jsx("p",{className:"mt-1 text-sm font-medium",children:((U=v.payload)==null?void 0:U.message)??"New activity"}),e.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:yr(v.createdAt)})]},v.id)})})]}):null,e.jsx("button",{type:"button",onClick:d,className:"hidden rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700 sm:inline-flex",children:n?"LIGHT":"DARK"}),W?e.jsx(g,{to:W.to,className:"rounded-lg border border-slate-300 p-2 text-xs font-semibold dark:border-slate-700","aria-label":"Settings",title:"Settings",children:e.jsx(Cr,{})}):null,e.jsx("span",{className:"hidden rounded-lg bg-brand-100 px-3 py-2 text-xs font-semibold text-brand-700 dark:bg-brand-500/20 dark:text-brand-100 sm:inline-flex",children:(s==null?void 0:s.role)??"guest"}),e.jsxs("div",{className:"hidden items-center gap-2 rounded-xl border border-slate-300 px-3 py-2 md:flex dark:border-slate-700",children:[e.jsx("div",{className:"grid h-7 w-7 place-items-center rounded-lg bg-brand-100 dark:bg-brand-500/30",children:e.jsx(Sr,{})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold",children:(s==null?void 0:s.fullName)??"Qring User"}),e.jsx("p",{className:"text-[10px] text-slate-500",children:(s==null?void 0:s.email)??"user@useqring.online"})]})]}),e.jsx("button",{type:"button",onClick:r,className:"rounded-lg border border-slate-300 p-2 text-xs font-semibold dark:border-slate-700","aria-label":"Logout",title:"Logout",children:e.jsx(Ar,{})})]})]}),a]})]}),G.length>0?e.jsx("nav",{className:"fixed inset-x-0 bottom-0 z-40 border-t border-slate-200 bg-white/95 px-2 py-2 backdrop-blur dark:border-slate-800 dark:bg-slate-900/95 lg:hidden",children:e.jsxs("div",{className:"flex gap-1 overflow-x-auto pb-1",children:[G.map(v=>e.jsxs(et,{to:v.to,className:({isActive:U})=>`flex min-w-[76px] flex-col items-center justify-center rounded-xl px-2 py-2 text-[11px] font-semibold transition ${U?"bg-brand-500 text-white":"text-slate-600 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"mb-1",children:e.jsx(Ve,{name:v.icon})}),e.jsx("span",{className:"leading-none",children:v.label})]},`mobile-${v.to}`)),z?e.jsxs("button",{type:"button",onClick:()=>{L(!1),E(!0)},className:"flex min-w-[76px] flex-col items-center justify-center rounded-xl px-2 py-2 text-[11px] font-semibold text-slate-600 transition hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",children:[e.jsx("span",{className:"mb-1",children:e.jsx(Ve,{name:"help"})}),e.jsx("span",{className:"leading-none",children:"Help"})]}):null]})}):null,e.jsx(kr,{open:P,role:s==null?void 0:s.role,steps:ae,onClose:()=>{L(!0),E(!1)},onComplete:()=>{L(!0),E(!1)},onNavigate:v=>{o(v),L(!0),E(!1)}})]})}function Nr(t){const a=t==="estate";return[{title:"What QRing Is",description:"QRing transforms physical doors into smart access points, giving homeowners and estate teams real-time visibility, control, and security over visits.",points:["No expensive cameras or IoT hardware needed.","QR code + software creates a digital access layer.","Works for homes, estates, rentals, offices, and gated communities."],route:a?"/dashboard/estate":"/dashboard/homeowner/overview",routeLabel:"Open Dashboard"},{title:"How Visits Work",description:"When a visitor arrives, they scan your QR code, share identity and visit reason, and QRing instantly notifies you so you can approve or deny access.",points:["Visitor scans QR at the door or gate.","Identity and intent are captured digitally.","You get instant alert and control access."],route:a?"/dashboard/estate/logs":"/dashboard/homeowner/visits",routeLabel:a?"View Access Logs":"View Visits"},{title:"Why It Matters",description:"QRing solves missed deliveries, unknown visitors, and manual logbooks by replacing reactive security with proactive, trackable, real-time access control.",points:["Homeowners know who is at the door in real time.","Estates get centralized tracking instead of manual records.","Every visit is securely logged for follow-up and accountability."],route:a?"/dashboard/estate/doors":"/dashboard/homeowner/doors",routeLabel:a?"Set Up Doors":"Manage Doors"},{title:"Your Next Steps",description:"Start by setting up your access points, then monitor incoming requests and manage approvals through your dashboard. Use Help anytime from the sidebar.",points:a?["Create or review your estate setup.","Assign doors to homes and owners.","Track logs and enforce plan rules."]:["Keep your door QR active.","Review visits and messages daily.","Control who enters even when away."],route:a?"/dashboard/estate/assign":"/dashboard/homeowner/messages",routeLabel:a?"Assign Doors":"Open Messages"}]}function yr(t){if(!t)return"";const a=new Date(t);return Number.isNaN(a.getTime())?t:a.toLocaleString()}function vr(){return e.jsxs("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M15 17h5l-1.4-1.4A2 2 0 0 1 18 14.2V11a6 6 0 1 0-12 0v3.2a2 2 0 0 1-.6 1.4L4 17h5"}),e.jsx("path",{d:"M9 17a3 3 0 0 0 6 0"})]})}function Sr(){return e.jsxs("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"8",r:"4"}),e.jsx("path",{d:"M4 21a8 8 0 0 1 16 0"})]})}function Cr(){return e.jsxs("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h0A1.65 1.65 0 0 0 9.93 3.1V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h0a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v0a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}function Ar(){return e.jsxs("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("path",{d:"M16 17l5-5-5-5"}),e.jsx("path",{d:"M21 12H9"})]})}function Ve({name:t}){const a={overview:e.jsx("path",{d:"M3 3h8v8H3zM13 3h8v5h-8zM13 10h8v11h-8zM3 13h8v8H3z"}),visits:e.jsx("path",{d:"M4 5h16M4 12h16M4 19h10"}),messages:e.jsx("path",{d:"M4 5h16v10H7l-3 3z"}),doors:e.jsx("path",{d:"M7 3h10v18H7zM10 12h.01"}),billing:e.jsx("path",{d:"M3 7h18v10H3zM3 11h18"}),estate:e.jsx("path",{d:"M3 21h18M5 21V9l7-5 7 5v12"}),estate_create:e.jsx("path",{d:"M12 5v14M5 12h14"}),homes:e.jsx("path",{d:"M3 11l9-7 9 7M5 10v11h14V10"}),invite:e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2M16 3h5v5M21 3l-7 7"}),assign:e.jsx("path",{d:"M4 12h10M10 6l6 6-6 6M19 5v14"}),mappings:e.jsx("path",{d:"M3 5h6v6H3zM15 5h6v6h-6zM9 8h6M3 17h6v6H3zM15 17h6v6h-6zM9 20h6"}),logs:e.jsx("path",{d:"M5 3h14v18H5zM8 8h8M8 12h8M8 16h5"}),system:e.jsx("path",{d:"M12 1v4M12 19v4M4.9 4.9l2.8 2.8M16.3 16.3l2.8 2.8M1 12h4M19 12h4M4.9 19.1l2.8-2.8M16.3 7.7l2.8-2.8"}),plans:e.jsx("path",{d:"M4 20V8l8-4 8 4v12M4 12h16"}),user_admin:e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm10 0v-2m0 0V7m0 2h-2m2 0h2"}),sessions:e.jsx("path",{d:"M8 7h13M8 12h13M8 17h13M3 7h.01M3 12h.01M3 17h.01"}),help:e.jsx("path",{d:"M12 17h.01M9.1 9a3 3 0 1 1 4.9 2.3c-.8.7-2 1.5-2 2.7v.5M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20z"}),settings:e.jsx("path",{d:"M12 8.5A3.5 3.5 0 1 1 8.5 12 3.5 3.5 0 0 1 12 8.5zm0-6 1.2 2.4 2.7.4.4 2.7L18.8 9l-1.5 2.3 1.5 2.3-2.5 1.2-.4 2.7-2.7.4L12 21.5l-1.2-2.4-2.7-.4-.4-2.7L5.2 13.6 6.7 11.3 5.2 9l2.5-1.2.4-2.7 2.7-.4z"})};return e.jsx("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a[t]??e.jsx("circle",{cx:"12",cy:"12",r:"9"})})}const Cs={activeVisitors:0,pendingApprovals:0,callsToday:0,unreadMessages:0},Vt={metrics:Cs,activity:[],waitingRoom:[],session:null,messages:[],traffic:[],callControls:{canAudio:!1,canVideo:!1,canMute:!1,canEnd:!1}};function at(t){return!t||typeof t!="object"?Vt:{metrics:{...Cs,...t.metrics??{}},activity:Array.isArray(t.activity)?t.activity:[],waitingRoom:Array.isArray(t.waitingRoom)?t.waitingRoom:[],session:t.session??null,messages:Array.isArray(t.messages)?t.messages:[],traffic:Array.isArray(t.traffic)?t.traffic:[],callControls:{...Vt.callControls,...t.callControls??{}}}}async function Pr(){const t=await T("/dashboard/overview");return at((t==null?void 0:t.data)??t)}let ve;function Rr(){if(!ve){const t=localStorage.getItem("qring_access_token");ve=vt(`${ce.socketUrl}${ce.dashboardNamespace}`,{path:ce.socketPath,transports:["websocket"],auth:t?{token:t}:void 0,withCredentials:!0})}return ve}function Er(){ve&&(ve.removeAllListeners(),ve.disconnect(),ve=void 0)}const Mr=at({});function Ir(){const[t,a]=l.useState(Mr),[s,r]=l.useState(!0),[n,d]=l.useState(""),[o,h]=l.useState(!1),u=l.useCallback(async()=>{r(!0),d("");try{const p=await Pr();a(p)}catch(p){d(p.message??"Unable to load dashboard")}finally{r(!1)}},[]);return l.useEffect(()=>{let p=!0;const m=Rr(),x=()=>p&&h(!0),i=()=>p&&h(!1),b=y=>{p&&a(at((y==null?void 0:y.data)??y))},f=y=>{p&&a(C=>at({...C,...(y==null?void 0:y.data)??y}))},j=y=>{p&&d((y==null?void 0:y.message)??"Realtime error")};return m.on("connect",x),m.on("disconnect",i),m.on("dashboard.snapshot",b),m.on("dashboard.patch",f),m.on("dashboard.error",j),u(),()=>{p=!1,m.off("connect",x),m.off("disconnect",i),m.off("dashboard.snapshot",b),m.off("dashboard.patch",f),m.off("dashboard.error",j),Er()}},[u]),l.useMemo(()=>({...t,loading:s,error:n,connected:o,refresh:u}),[t,s,n,o,u])}function Tr(){var m;const[t,a]=l.useState(!1),{metrics:s,activity:r,waitingRoom:n,session:d,messages:o,loading:h,error:u,connected:p}=Ir();return l.useEffect(()=>{let x=!0;async function i(){try{const b=await nt();if(!x)return;a(!!(b!=null&&b.managedByEstate))}catch{if(!x)return;a(!1)}}return i(),()=>{x=!1}},[]),e.jsxs(te,{className:"text-sm",title:"Homeowner Workspace",children:[u?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:u}):null,e.jsxs("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[e.jsx(Fe,{title:"Active Visitors",tip:"Number of visitors currently waiting or interacting right now.",value:s.activeVisitors,tone:"success",loading:h,sub:"Live now"}),e.jsx(Fe,{title:"Pending Approvals",tip:"Requests that need you to allow or deny entry.",value:s.pendingApprovals,tone:"warning",loading:h,sub:"Needs action"}),e.jsx(Fe,{title:"Calls Today",tip:"Total audio and video calls completed today.",value:s.callsToday,tone:"brand",loading:h,sub:"Audio + video"}),e.jsx(Fe,{title:"Unread Messages",tip:"Messages in visitor threads you have not opened yet.",value:s.unreadMessages,tone:"danger",loading:h,sub:"Recent threads"})]}),e.jsxs("section",{className:"mt-4 rounded-2xl border border-brand-100 bg-brand-50/70 p-4 dark:border-brand-500/30 dark:bg-brand-500/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"font-heading text-base font-bold",children:"How to use this dashboard"}),e.jsx(As,{text:"Use this quick guide to understand what each area does before taking actions."})]}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Start with pending approvals, review activity for context, then open Realtime Interaction for call and message actions."})]}),e.jsx("section",{className:"mt-4",children:e.jsx(g,{to:"/dashboard/homeowner/doors",className:"inline-flex items-center rounded-xl bg-brand-500 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-600",children:"Create a Door"})}),e.jsxs("section",{className:"mt-6 grid grid-cols-1 gap-6 xl:grid-cols-12",children:[e.jsxs("article",{className:"xl:col-span-7 rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-6 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"font-heading text-lg font-bold",children:"Recent Visitor Activity"}),e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${p?"bg-success/20 text-success":"bg-warning/20 text-warning"}`,children:p?"LIVE":"RECONNECTING"})]}),e.jsxs("div",{className:"mb-4 rounded-xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between text-xs text-slate-500",children:[e.jsx("span",{children:"Weekly Traffic"}),e.jsx("span",{children:"Last 7 Days"})]}),e.jsx(Lr,{})]}),e.jsx("div",{className:"space-y-3",children:r.length===0?e.jsx(Dr,{text:"No activity yet."}):r.map(x=>e.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-4 text-sm transition hover:-translate-y-0.5 hover:shadow-soft dark:border-slate-800 dark:bg-slate-900",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-semibold",children:x.event}),e.jsx("span",{className:"text-xs text-slate-500",children:x.time})]})},x.id??`${x.event}-${x.time}`))})]}),e.jsxs("article",{className:"xl:col-span-5 rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-6 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("h2",{className:"mb-4 font-heading text-lg font-bold",children:"Realtime Interaction"}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(ze,{title:"Waiting Room",value:`${n.length} Visitors`,tone:"warning"}),e.jsx(ze,{title:"Active Session",value:(d==null?void 0:d.id)??"No session",tone:"success"}),e.jsx(ze,{title:"Latest Message",value:((m=o[0])==null?void 0:m.text)??"No unread messages",tone:"brand"}),e.jsx(ze,{title:"Call Status",value:(d==null?void 0:d.state)??"Idle",tone:"danger"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[e.jsx(Ge,{label:"Audio",tone:"success"}),e.jsx(Ge,{label:"Video",tone:"brand"}),e.jsx(Ge,{label:"Mute",tone:"warning"}),e.jsx(Ge,{label:"End",tone:"danger"})]})]})]}),t?null:e.jsx("section",{className:"mt-6",children:e.jsx("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-6 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-heading text-lg font-bold",children:"Billing & Subscription"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Upgrade your homeowner plan and pay securely with Paystack."})]}),e.jsx(g,{to:"/billing/paywall",className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white dark:bg-white dark:text-slate-900",children:"Open Billing"})]})})})]})}function Fe({title:t,tip:a,value:s,tone:r,loading:n,sub:d}){const o={success:"bg-success/20 text-success",warning:"bg-warning/20 text-warning",danger:"bg-danger/20 text-danger",brand:"bg-brand-100 text-brand-700 dark:bg-brand-500/20 dark:text-brand-100"};return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-5 shadow-soft transition hover:-translate-y-0.5 dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-slate-500",children:t}),e.jsx(As,{text:a})]}),e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${o[r]}`,children:"Live"})]}),e.jsx("p",{className:"mt-3 font-heading text-2xl font-extrabold sm:text-3xl",children:n?"...":s}),e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:d})]})}function ze({title:t,value:a,tone:s}){const r={success:"bg-success",warning:"bg-warning",danger:"bg-danger",brand:"bg-brand-500"};return e.jsxs("div",{className:"rounded-xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`h-2 w-2 rounded-full ${r[s]}`}),e.jsx("p",{className:"text-xs text-slate-500",children:t})]}),e.jsx("p",{className:"mt-1 text-sm font-semibold",children:a})]})}function Ge({label:t,tone:a}){const s={success:"bg-success hover:bg-success/90",warning:"bg-warning hover:bg-warning/90",danger:"bg-danger hover:bg-danger/90",brand:"bg-brand-500 hover:bg-brand-600"};return e.jsx("button",{type:"button",className:`rounded-xl px-4 py-3 text-sm font-semibold text-white transition ${s[a]}`,children:t})}function Lr(){return e.jsxs("svg",{viewBox:"0 0 320 88",className:"h-16 w-full",role:"img","aria-label":"Traffic trend",children:[e.jsx("path",{d:"M0 65 L40 58 L80 60 L120 42 L160 47 L200 35 L240 30 L280 38 L320 20",fill:"none",stroke:"#2456f5",strokeWidth:"3",strokeLinecap:"round"}),e.jsx("path",{d:"M0 88 L0 65 L40 58 L80 60 L120 42 L160 47 L200 35 L240 30 L280 38 L320 20 L320 88 Z",fill:"rgba(36,86,245,0.15)"})]})}function Dr({text:t}){return e.jsx("p",{className:"rounded-xl bg-slate-100 p-4 text-sm text-slate-500 dark:bg-slate-800",children:t})}function As({text:t}){return e.jsxs("span",{className:"group relative inline-flex",children:[e.jsx("button",{type:"button",className:"grid h-5 w-5 place-items-center rounded-full bg-slate-200 text-[11px] font-bold text-slate-700 dark:bg-slate-700 dark:text-slate-100","aria-label":"More information",children:"?"}),e.jsx("span",{className:"pointer-events-none absolute left-1/2 top-7 z-10 hidden w-56 -translate-x-1/2 rounded-lg bg-slate-900 px-2 py-1 text-xs text-white shadow-lg group-hover:block group-focus-within:block",children:t})]})}const qr=[{key:"message",title:"Messages",description:"Open chat first, then move to call when ready.",buttonClass:"bg-slate-900 text-white hover:bg-slate-800"},{key:"audio",title:"Audio Call",description:"Start voice session with microphone only.",buttonClass:"bg-emerald-600 text-white hover:bg-emerald-700"},{key:"video",title:"Video Call",description:"Start live video and audio session.",buttonClass:"bg-cyan-600 text-white hover:bg-cyan-700"}];function $r({open:t,sessionId:a,onClose:s,onSelect:r}){const n=l.useMemo(()=>a?`Choose Session Mode (${a.slice(0,8)}...)`:"Choose Session Mode",[a]);return!t||!a?null:e.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-slate-900/50 p-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-slate-200 bg-white p-5 shadow-soft dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-heading text-lg font-bold",children:n}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Pick where you want to enter this session."}),e.jsx("div",{className:"mt-4 space-y-3",children:qr.map(d=>e.jsxs("button",{type:"button",onClick:()=>r(d.key),className:`w-full rounded-xl px-4 py-3 text-left transition ${d.buttonClass}`,children:[e.jsx("p",{className:"text-sm font-semibold",children:d.title}),e.jsx("p",{className:"text-xs opacity-85",children:d.description})]},d.key))}),e.jsx("button",{type:"button",onClick:s,className:"mt-4 w-full rounded-xl border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800",children:"Cancel"})]})})}function Or(){const t=me(),[a,s]=l.useState([]),[r,n]=l.useState(!0),[d,o]=l.useState(""),[h,u]=l.useState(""),[p,m]=l.useState(""),[x,i]=l.useState(!1),[b,f]=l.useState(""),j=l.useCallback(async()=>{n(!0),o("");try{const c=await lr();s(c)}catch(c){o(c.message??"Failed to load visits")}finally{n(!1)}},[]);l.useEffect(()=>{j()},[j]),l.useEffect(()=>{const c=setInterval(j,5e3);return()=>clearInterval(c)},[j]);async function y(c,P){u(c),o("");try{const E=await mr(c,P);await jr(c),s(F=>F.map(L=>L.id===c?{...L,status:(E==null?void 0:E.status)==="approved"?"Approved":"Rejected",sessionStatus:(E==null?void 0:E.status)??L.sessionStatus,canDecide:!1}:L))}catch(E){o(E.message??"Failed to update visit")}finally{u("")}}async function C(c){m(c),o("");try{await dr(c),s(P=>P.map(E=>E.id===c?{...E,status:"Completed",sessionStatus:"closed",canDecide:!1}:E))}catch(P){o(P.message??"Failed to end session")}finally{m("")}}function k(c){f(c),i(!0)}function I(c){b&&(i(!1),t(`/session/${b}/${c}`))}return e.jsxs(te,{title:"Visits",children:[d?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:d}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-6",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Visitor Log"}),e.jsx("button",{type:"button",onClick:j,className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700",children:"Refresh"})]}),r?e.jsx("p",{className:"py-2 text-sm text-slate-500",children:"Loading visits..."}):a.length===0?e.jsx("p",{className:"py-2 text-sm text-slate-500",children:"No visit records yet."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3 md:hidden",children:a.map(c=>e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:c.visitor}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:c.door})]}),e.jsx("span",{className:`rounded-full px-2 py-1 text-[11px] font-semibold ${Ft(c.status)}`,children:c.status})]}),e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:zt(c.time)}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:c.canDecide?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",disabled:h===c.id,onClick:()=>y(c.id,"approve"),className:"rounded-lg bg-success px-3 py-1.5 text-[11px] font-semibold text-white disabled:opacity-50",children:"Approve"}),e.jsx("button",{type:"button",disabled:h===c.id,onClick:()=>y(c.id,"reject"),className:"rounded-lg bg-danger px-3 py-1.5 text-[11px] font-semibold text-white disabled:opacity-50",children:"Reject"})]}):c.sessionStatus==="approved"||c.sessionStatus==="active"?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>k(c.id),className:"rounded-lg bg-brand-500 px-3 py-1.5 text-[11px] font-semibold text-white",children:"Open Session"}),e.jsx("button",{type:"button",disabled:p===c.id,onClick:()=>C(c.id),className:"rounded-lg bg-danger px-3 py-1.5 text-[11px] font-semibold text-white disabled:opacity-50",children:p===c.id?"Ending...":"End Session"})]}):null})]},c.id))}),e.jsx("div",{className:"hidden overflow-x-auto md:block",children:e.jsxs("table",{className:"w-full min-w-[520px] text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:[e.jsx("th",{className:"py-3 font-semibold",children:"Visitor"}),e.jsx("th",{className:"py-3 font-semibold",children:"Door"}),e.jsx("th",{className:"py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"py-3 font-semibold",children:"Time"}),e.jsx("th",{className:"py-3 font-semibold",children:"Action"})]})}),e.jsx("tbody",{children:a.map(c=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-3 font-medium",children:c.visitor}),e.jsx("td",{className:"py-3",children:c.door}),e.jsx("td",{className:"py-3",children:e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${Ft(c.status)}`,children:c.status})}),e.jsx("td",{className:"py-3 text-slate-500",children:zt(c.time)}),e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:c.canDecide?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",disabled:h===c.id,onClick:()=>y(c.id,"approve"),className:"rounded-lg bg-success px-3 py-1.5 text-xs font-semibold text-white disabled:opacity-50",children:"Approve"}),e.jsx("button",{type:"button",disabled:h===c.id,onClick:()=>y(c.id,"reject"),className:"rounded-lg bg-danger px-3 py-1.5 text-xs font-semibold text-white disabled:opacity-50",children:"Reject"})]}):c.sessionStatus==="approved"||c.sessionStatus==="active"?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>k(c.id),className:"rounded-lg bg-brand-500 px-3 py-1.5 text-xs font-semibold text-white",children:"Open Session"}),e.jsx("button",{type:"button",disabled:p===c.id,onClick:()=>C(c.id),className:"rounded-lg bg-danger px-3 py-1.5 text-xs font-semibold text-white disabled:opacity-50",children:p===c.id?"Ending...":"End Session"})]}):e.jsx("span",{className:"text-xs text-slate-500",children:"No action"})})})]},c.id))})]})})]})]}),e.jsx($r,{open:x,sessionId:b,onClose:()=>i(!1),onSelect:I})]})}function Ft(t){return t==="Approved"||t==="Completed"||t==="Active"?"bg-success/15 text-success":t==="Pending"?"bg-warning/20 text-warning":t==="Rejected"?"bg-danger/15 text-danger":"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200"}function zt(t){if(!t)return"-";const a=new Date(t);return Number.isNaN(a.getTime())?t:a.toLocaleString()}function _r(){const[t,a]=l.useState([]),[s,r]=l.useState(""),[n,d]=l.useState({}),[o,h]=l.useState(!0),[u,p]=l.useState(!1),[m,x]=l.useState(""),[i,b]=l.useState(!1),[f,j]=l.useState(""),[y,C]=l.useState(""),k=l.useRef(null),I=localStorage.getItem("qring_access_token");function c(w){w!=null&&w.sessionId&&a(S=>S.map($=>$.id===w.sessionId?{...$,last:w.text,time:w.at,unread:s===w.sessionId||w.senderType==="homeowner"?0:($.unread||0)+1}:$))}l.useEffect(()=>{let w=!0;async function S(){h(!0),C("");try{const $=await Ht();if(!w)return;a($),r(q=>{var H;return q||((H=$[0])==null?void 0:H.id)||""})}catch($){if(!w)return;C($.message??"Failed to load messages")}finally{w&&h(!1)}}return S(),()=>{w=!1}},[]),l.useEffect(()=>{const w=setInterval(async()=>{try{const S=await Ht();a($=>{if(!$.length)return S;const q=Object.fromEntries($.map(H=>[H.id,H.unread||0]));return S.map(H=>({...H,unread:q[H.id]??H.unread??0}))})}catch{}},8e3);return()=>clearInterval(w)},[]),l.useEffect(()=>{if(!s)return;let w=!0;return(async()=>{p(!0);try{const $=await nr(s);if(!w)return;d(q=>({...q,[s]:$})),a(q=>q.map(H=>H.id===s?{...H,unread:0}:H))}catch($){if(!w)return;C($.message??"Failed to load conversation")}finally{w&&p(!1)}})(),()=>{w=!1}},[s]),l.useEffect(()=>{if(!s)return;const w=vt(`${ce.socketUrl}${ce.signalingNamespace}`,{path:ce.socketPath,transports:["websocket","polling"],auth:I?{token:I}:void 0,withCredentials:!0});return w.on("connect",()=>{w.emit("session.join",{sessionId:s,displayName:"Homeowner"})}),w.on("chat.message",S=>{const $=S==null?void 0:S.sessionId;if(!$)return;const q={id:(S==null?void 0:S.id)??`${(S==null?void 0:S.at)||Date.now()}-${Math.random()}`,sessionId:$,text:(S==null?void 0:S.text)||"",senderType:(S==null?void 0:S.senderType)||"visitor",displayName:(S==null?void 0:S.displayName)||"Participant",at:(S==null?void 0:S.at)||new Date().toISOString()};d(H=>{const se=H[$]??[];return se.some(K=>K.id===q.id)?H:{...H,[$]:[...se,q]}}),c(q)}),()=>{w.disconnect()}},[s,I]),l.useEffect(()=>{k.current&&(k.current.scrollTop=k.current.scrollHeight)},[s,n]);const P=l.useMemo(()=>t.find(w=>w.id===s)??null,[t,s]),E=l.useMemo(()=>n[s]??[],[n,s]);async function F(w){w.preventDefault();const S=m.trim();if(!(!s||!S)){b(!0);try{const $=await or(s,S);$&&(d(q=>{const H=q[s]??[];return H.some(se=>se.id===$.id)?q:{...q,[s]:[...H,$]}}),c($)),x("")}catch($){C($.message??"Failed to send message")}finally{b(!1)}}}async function L(w){if(!(!s||!w||f)){C(""),j(w);try{const S=E.filter($=>$.id!==w);await ir(s,w),d($=>({...$,[s]:S})),a($=>$.map(q=>{if(q.id!==s)return q;const H=S[S.length-1];return{...q,last:(H==null?void 0:H.text)??"",time:(H==null?void 0:H.at)??q.time}}))}catch(S){C(S.message??"Failed to delete message")}finally{j("")}}}return e.jsxs(te,{title:"Messages",children:[y?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:y}):null,e.jsxs("section",{className:"grid gap-3 sm:gap-4 lg:grid-cols-12",children:[e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-3 sm:p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 lg:col-span-5 sm:p-5",children:[e.jsx("h2",{className:"mb-4 font-heading text-lg font-bold sm:text-xl",children:"Threads"}),o?e.jsx(Gt,{text:"Loading threads..."}):null,!o&&t.length===0?e.jsx(Gt,{text:"No messages yet."}):null,e.jsx("div",{className:"space-y-3",children:t.map(w=>e.jsxs("button",{type:"button",onClick:()=>r(w.id),className:`flex w-full items-center justify-between rounded-xl border p-3 text-left transition ${s===w.id?"border-brand-500 bg-brand-50 dark:border-brand-400 dark:bg-brand-500/10":"border-slate-200 bg-white dark:border-slate-700 dark:bg-slate-900"}`,children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"truncate text-sm font-semibold",children:w.name}),e.jsx("p",{className:"truncate text-xs text-slate-500",children:w.last})]}),e.jsxs("div",{className:"ml-3 text-right",children:[e.jsx("p",{className:"text-xs text-slate-500",children:Wt(w.time)}),w.unread>0?e.jsx("span",{className:"mt-1 inline-block rounded-full bg-brand-500 px-2 py-0.5 text-[10px] font-bold text-white",children:w.unread}):null]})]},w.id))})]}),e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-3 sm:p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 lg:col-span-7 sm:p-5",children:[e.jsx("h2",{className:"mb-4 font-heading text-lg font-bold sm:text-xl",children:"Conversation"}),P?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Visitor"}),e.jsx("p",{className:"mt-1 text-sm font-semibold",children:P.name})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Door"}),e.jsx("p",{className:"mt-1 text-sm font-semibold",children:P.door})]})]}),e.jsxs("div",{ref:k,className:"max-h-[28rem] space-y-2 overflow-y-auto rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[u?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading conversation..."}):null,!u&&E.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No messages in this session yet."}):null,E.map(w=>{const S=w.senderType==="homeowner";return e.jsxs("div",{className:`max-w-[85%] rounded-xl px-3 py-2 text-sm ${S?"ml-auto bg-brand-500 text-white":"bg-white text-slate-800 dark:bg-slate-900 dark:text-slate-100"}`,children:[e.jsx("p",{className:"text-[11px] font-semibold opacity-80",children:w.displayName}),e.jsx("p",{children:w.text}),e.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2 text-[10px] opacity-80",children:[e.jsx("p",{children:Wt(w.at)}),S?e.jsx("button",{type:"button",onClick:()=>L(w.id),disabled:f===w.id,className:"rounded-md bg-black/20 px-2 py-0.5 text-[10px] font-semibold text-inherit disabled:opacity-60",children:f===w.id?"Deleting...":"Delete"}):null]})]},w.id)})]}),e.jsxs("form",{onSubmit:F,className:"flex gap-2",children:[e.jsx("input",{value:m,onChange:w=>x(w.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 text-sm dark:border-slate-700 dark:bg-slate-900",placeholder:"Type a message to this visitor"}),e.jsx("button",{type:"submit",disabled:i||!s||!m.trim(),className:"rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:i?"Sending...":"Send"})]})]}):e.jsx("div",{className:"rounded-xl bg-slate-100 p-4 text-sm text-slate-600 dark:bg-slate-800 dark:text-slate-300",children:"Select a thread to view details."})]})]})]})}function Gt({text:t}){return e.jsx("div",{className:"mb-3 rounded-xl bg-slate-100 p-4 text-sm text-slate-600 dark:bg-slate-800 dark:text-slate-300",children:t})}function Wt(t){if(!t)return"-";const a=new Date(t);return Number.isNaN(a.getTime())?t:a.toLocaleString()}function Qr(){var ae;const[t,a]=l.useState([]),[s,r]=l.useState(null),[n,d]=l.useState(!0),[o,h]=l.useState(""),[u,p]=l.useState(""),[m,x]=l.useState(""),[i,b]=l.useState(""),[f,j]=l.useState(""),[y,C]=l.useState(!1),[k,I]=l.useState(""),[c,P]=l.useState(""),[E,F]=l.useState(!1),[L,w]=l.useState(""),[S,$]=l.useState(!0),[q,H]=l.useState({size:"240",shape:"rounded"}),se=l.useRef(null),K=!!(s&&Number(s.maxDoors??0)>0&&Number(s.usedDoors??0)>=Number(s.maxDoors??0)),N=!!(s&&Number(s.maxQrCodes??0)>0&&Number(s.usedQrCodes??0)>=Number(s.maxQrCodes??0));async function M(){var R,Z;d(!0),h("");try{const Q=await cr(),B=(Q==null?void 0:Q.doors)??[];a(B),r((Q==null?void 0:Q.subscription)??null),(R=Q==null?void 0:Q.subscription)!=null&&R.managedByEstate&&(F(!0),w(((Z=Q==null?void 0:Q.subscription)==null?void 0:Z.estateName)||"")),!i&&B.length>0&&b(B[0].id),!k&&B.length>0&&I(B[0].id)}catch(Q){h(Q.message??"Failed to load doors")}finally{d(!1)}}l.useEffect(()=>{M()},[]),l.useEffect(()=>{let R=!0;async function Z(){try{const Q=await nt();if(!R)return;F(!!(Q!=null&&Q.managedByEstate)),w((Q==null?void 0:Q.estateName)||"")}catch{if(!R)return;const Q=localStorage.getItem("qring_user");let B=!1;try{const J=Q?JSON.parse(Q):null;B=typeof(J==null?void 0:J.email)=="string"&&J.email.toLowerCase().endsWith("@estate.useqring.online")}catch{B=!1}F(B),w("")}finally{R&&$(!1)}}return Z(),()=>{R=!1}},[]);async function W(R){var Z,Q;if(R.preventDefault(),K||N){h(K?`Door limit reached (${(s==null?void 0:s.maxDoors)??0}) for your ${(s==null?void 0:s.plan)??"current"} plan.`:`QR limit reached (${(s==null?void 0:s.maxQrCodes)??0}) for your ${(s==null?void 0:s.plan)??"current"} plan.`);return}C(!0),h(""),x("");try{const B=await xr({name:f,generateQr:!0,mode:"direct",plan:"single"});if(B!=null&&B.door&&(a(J=>[B.door,...J]),b(B.door.id),I(B.door.id),(Z=B==null?void 0:B.qr)!=null&&Z.qr_id&&P(B.qr.qr_id),j("")),r(J=>J&&{...J,usedDoors:(J.usedDoors??0)+1,remainingDoors:Math.max((J.remainingDoors??0)-1,0),usedQrCodes:(J.usedQrCodes??0)+(B!=null&&B.qr?1:0),remainingQrCodes:Math.max((J.remainingQrCodes??0)-(B!=null&&B.qr?1:0),0)}),(Q=B==null?void 0:B.qr)!=null&&Q.qr_id){const J=`${window.location.origin}/scan/${B.qr.qr_id}`;try{await navigator.clipboard.writeText(J),x(`Door created and QR copied: ${J}`)}catch{x(`Door created with QR: ${J}`)}}else x("Door created successfully.")}catch(B){h(B.message??"Failed to create door")}finally{C(!1)}}const G=t.find(R=>String(R.id)===String(k))??null,z=G&&c?{doorName:G.name,scanUrl:`${window.location.origin}/scan/${c}`}:null;return e.jsxs(te,{title:"Doors",children:[o?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:o}):null,m?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:m}):null,E?e.jsxs("div",{className:"mb-4 rounded-xl border border-warning/30 bg-warning/10 px-4 py-3 text-sm text-warning",children:["Door and QR creation are managed by your estate",L?` (${L})`:"","."]}):null,s?e.jsxs("section",{className:"mb-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Subscription"}),e.jsxs("p",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:["Plan: ",s.plan," (",s.status,")"]})]}),e.jsxs("div",{className:"text-right text-xs text-slate-600 dark:text-slate-300",children:[e.jsxs("p",{children:["Doors: ",s.usedDoors,"/",s.maxDoors]}),e.jsxs("p",{children:["QR Codes: ",s.usedQrCodes,"/",s.maxQrCodes]})]})]}),s.overDoorLimit?e.jsx("p",{className:"mt-3 rounded-lg bg-warning/15 px-3 py-2 text-xs font-medium text-warning",children:"You are above your plan door limit. Upgrade your subscription."}):null]}):null,!S&&!E?e.jsxs("section",{className:"mb-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Create Door"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 sm:text-sm",children:"Enter a new door name and create it with a QR code."}),e.jsxs("form",{className:"mt-4 grid gap-3 sm:grid-cols-[1fr_auto]",onSubmit:W,children:[e.jsx("input",{type:"text",value:f,onChange:R=>j(R.target.value),placeholder:"e.g. Front Gate",className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm outline-none ring-brand-300 focus:ring-2 dark:border-slate-700 dark:bg-slate-900",required:!0}),e.jsx("button",{type:"submit",disabled:y||K||N,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:cursor-not-allowed disabled:opacity-50 dark:bg-white dark:text-slate-900",children:y?"Creating...":"Create Door + QR"})]})]}):null,n?e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-5 text-sm text-slate-500 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:"Loading doors..."}):t.length===0?e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-5 text-sm text-slate-500 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:"No doors configured yet."}):e.jsxs("section",{children:[e.jsx("h2",{className:"mb-3 font-heading text-lg font-bold sm:text-xl",children:"Doors Created"}),e.jsx("div",{className:"grid gap-3 sm:gap-4 md:grid-cols-2 xl:grid-cols-3",children:t.map(R=>{var Z;return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-5 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-heading text-lg font-bold",children:R.name}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:R.homeName})]}),e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${R.state==="Online"?"bg-success/20 text-success":"bg-danger/20 text-danger"}`,children:R.state})]}),e.jsx("p",{className:"mt-4 text-xs uppercase tracking-wide text-slate-500",children:"Linked QR Codes"}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(Z=R.qr)!=null&&Z.length?R.qr.map(Q=>e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-2 py-1 text-xs font-semibold transition hover:border-slate-300 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("img",{src:Xe(`${window.location.origin}/scan/${Q}`,40),alt:`QR ${Q}`,className:"h-5 w-5 rounded"}),e.jsx("span",{children:Q})]},`${R.id}-${Q}`)):e.jsx("span",{className:"text-xs text-slate-500",children:"No QR linked"})}),e.jsx("button",{type:"button",onClick:()=>{var Q;I(R.id),P(((Q=R.qr)==null?void 0:Q[0])??""),setTimeout(()=>{var B;(B=se.current)==null||B.scrollIntoView({behavior:"smooth",block:"start"})},0)},className:"mt-4 w-full rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:cursor-not-allowed disabled:opacity-50 dark:bg-white dark:text-slate-900",children:"View Door"})]},R.id)})})]}),G?e.jsxs("section",{ref:se,className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Door Details & QR Print"}),e.jsx("button",{type:"button",onClick:()=>{I(""),P("")},className:"rounded-lg border border-slate-300 px-3 py-1.5 text-xs font-semibold dark:border-slate-700",children:"Close"})]}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500 sm:text-sm",children:["Door: ",G.name," | QR: ",c||"None selected"]}),e.jsxs("div",{className:"mt-4 grid gap-4 lg:grid-cols-[300px_1fr]",children:[e.jsxs("div",{className:"space-y-3 rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"QR Codes Created"}),e.jsx("div",{className:"max-h-40 space-y-2 overflow-y-auto pr-1",children:(ae=G.qr)!=null&&ae.length?G.qr.map(R=>e.jsxs("button",{type:"button",onClick:()=>P(R),className:`flex w-full items-center gap-2 rounded-lg border px-2 py-2 text-left text-xs font-semibold transition ${c===R?"border-brand-500 bg-brand-50 text-brand-700 dark:bg-brand-500/10 dark:text-brand-200":"border-slate-200 bg-white hover:border-slate-300 dark:border-slate-700 dark:bg-slate-900"}`,children:[e.jsx("img",{src:Xe(`${window.location.origin}/scan/${R}`,40),alt:`QR ${R}`,className:"h-8 w-8 rounded"}),e.jsx("span",{className:"truncate",children:R})]},`${G.id}-pick-${R}`)):e.jsx("p",{className:"text-xs text-slate-500",children:"No QR codes for this door yet."})}),e.jsxs("label",{className:"block text-xs font-semibold uppercase tracking-wide text-slate-500",children:["Print Size",e.jsxs("select",{value:q.size,onChange:R=>H(Z=>({...Z,size:R.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 bg-white px-2 py-2 text-sm font-medium dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("option",{value:"180",children:"Small (180px)"}),e.jsx("option",{value:"240",children:"Medium (240px)"}),e.jsx("option",{value:"320",children:"Large (320px)"}),e.jsx("option",{value:"420",children:"XL Poster (420px)"})]})]}),e.jsxs("label",{className:"block text-xs font-semibold uppercase tracking-wide text-slate-500",children:["Gen Z Shape",e.jsxs("select",{value:q.shape,onChange:R=>H(Z=>({...Z,shape:R.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 bg-white px-2 py-2 text-sm font-medium dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("option",{value:"rounded",children:"Rounded Card"}),e.jsx("option",{value:"circle",children:"Circle Sticker"}),e.jsx("option",{value:"diamond",children:"Diamond Tilt"}),e.jsx("option",{value:"squircle",children:"Squircle"}),e.jsx("option",{value:"ticket",children:"Ticket Cut"}),e.jsx("option",{value:"home",children:"Home Badge"}),e.jsx("option",{value:"bell",children:"Bell Badge"}),e.jsx("option",{value:"star",children:"Star Pop"})]})]}),e.jsx("button",{type:"button",disabled:!z,onClick:()=>Ur(z,q),className:"w-full rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white dark:bg-white dark:text-slate-900",children:"Print QR"})]}),e.jsx("div",{className:"grid place-items-center rounded-xl border border-dashed border-slate-300 bg-white p-4 dark:border-slate-700 dark:bg-slate-900",children:z?e.jsxs("div",{className:`bg-white p-4 shadow-lg ${Jt(q.shape)}`,style:{width:`${Number(q.size)+40}px`},children:[e.jsx("div",{className:"mb-2 text-center text-xs font-semibold uppercase tracking-wide text-slate-500",children:z.doorName}),e.jsx("img",{src:Xe(z.scanUrl,Number(q.size)),alt:`QR for ${z.doorName}`,className:`mx-auto bg-white p-2 ${Jt(q.shape)}`,style:{width:`${Number(q.size)}px`,height:`${Number(q.size)}px`}}),e.jsx("div",{className:"mt-2 text-center text-[10px] font-medium text-slate-500",children:z.scanUrl})]}):e.jsx("p",{className:"text-sm text-slate-500",children:"Pick a QR code to preview and print."})})]})]}):null]})}function Xe(t,a=240){return`https://api.qrserver.com/v1/create-qr-code/?size=${a}x${a}&data=${encodeURIComponent(t)}`}function Jt(t){return t==="circle"?"rounded-full":t==="diamond"?"rotate-2 rounded-2xl":t==="squircle"?"rounded-[32px]":t==="ticket"?"rounded-[22px]":t==="home"?"rounded-[18px]":t==="bell"?"rounded-[24px]":t==="star"?"rounded-[14px]":"rounded-2xl"}function Ur(t,a){const s=Number(a.size||240),r=Xe(t.scanUrl,s),n={rounded:"border-radius:18px;",circle:"border-radius:9999px;",diamond:"border-radius:22px;transform:rotate(2deg);",squircle:"border-radius:32px;",ticket:"border-radius:22px;clip-path: polygon(6% 0,94% 0,100% 18%,100% 82%,94% 100%,6% 100%,0 82%,0 18%);",home:"clip-path: polygon(50% 0,100% 30%,100% 100%,0 100%,0 30%);border-radius:10px;",bell:"clip-path: polygon(20% 22%,30% 8%,70% 8%,80% 22%,86% 64%,74% 88%,26% 88%,14% 64%);border-radius:10px;",star:"clip-path: polygon(50% 0,61% 35%,98% 35%,68% 57%,79% 92%,50% 70%,21% 92%,32% 57%,2% 35%,39% 35%);border-radius:8px;"}[a.shape]||"border-radius:18px;",d=`
    <html>
      <head>
        <title>Print QR</title>
        <style>
          body{font-family:Inter,Arial,sans-serif;padding:24px;background:#fff;color:#111}
          .card{width:${s+40}px;padding:16px;border:1px solid #e2e8f0;${n}}
          .door{font-size:12px;font-weight:700;text-transform:uppercase;letter-spacing:.08em;text-align:center;color:#334155;margin-bottom:8px}
          .qr{width:${s}px;height:${s}px;display:block;margin:0 auto;background:#fff;padding:8px;${n}}
          .url{font-size:10px;color:#64748b;text-align:center;margin-top:8px;word-break:break-all}
        </style>
      </head>
      <body>
        <div class="card">
          <div class="door">${t.doorName}</div>
          <img class="qr" src="${r}" alt="QR" />
          <div class="url">${t.scanUrl}</div>
        </div>
        <script>window.onload = () => { window.print(); };<\/script>
      </body>
    </html>`,o=window.open("","_blank","width=700,height=800");o&&(o.document.open(),o.document.write(d),o.document.close())}async function Br(){const t=await T("/homeowner/settings");return(t==null?void 0:t.data)??null}async function Hr(t){const a=await T("/homeowner/settings",{method:"PUT",body:JSON.stringify(t)});return(a==null?void 0:a.data)??null}function Vr(){const[t,a]=l.useState({pushAlerts:!0,soundAlerts:!0,autoRejectUnknownVisitors:!1}),[s,r]=l.useState(!1),[n,d]=l.useState(""),[o,h]=l.useState(null),[u,p]=l.useState(null),[m,x]=l.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[i,b]=l.useState(!0),[f,j]=l.useState(!1),[y,C]=l.useState(!1),[k,I]=l.useState(""),[c,P]=l.useState("");l.useEffect(()=>{let L=!0;async function w(){b(!0),P("");try{const[S,$]=await Promise.all([Br(),ia()]);if(!L)return;a({pushAlerts:!!(S!=null&&S.pushAlerts),soundAlerts:!!(S!=null&&S.soundAlerts),autoRejectUnknownVisitors:!!(S!=null&&S.autoRejectUnknownVisitors)}),r(!!(S!=null&&S.managedByEstate)),d((S==null?void 0:S.estateName)||""),localStorage.setItem("qring_sound_alerts",String(!!(S!=null&&S.soundAlerts))),window.dispatchEvent(new Event("qring:sound-alerts-updated")),h((S==null?void 0:S.subscription)??null),p($)}catch(S){if(!L)return;P(S.message??"Failed to load settings")}finally{L&&b(!1)}}return w(),()=>{L=!1}},[]);async function E(L){L.preventDefault(),j(!0),P(""),I("");try{const w=await Hr(t);a({pushAlerts:!!(w!=null&&w.pushAlerts),soundAlerts:!!(w!=null&&w.soundAlerts),autoRejectUnknownVisitors:!!(w!=null&&w.autoRejectUnknownVisitors)}),localStorage.setItem("qring_sound_alerts",String(!!(w!=null&&w.soundAlerts))),window.dispatchEvent(new Event("qring:sound-alerts-updated")),I("Settings updated successfully.")}catch(w){P(w.message??"Failed to update settings")}finally{j(!1)}}async function F(L){if(L.preventDefault(),C(!0),P(""),I(""),m.newPassword!==m.confirmPassword){P("New password and confirm password do not match."),C(!1);return}try{await Ga({currentPassword:m.currentPassword,newPassword:m.newPassword}),x({currentPassword:"",newPassword:"",confirmPassword:""}),I("Password changed successfully.")}catch(w){P(w.message??"Failed to change password")}finally{C(!1)}}return e.jsxs(te,{title:"Settings",children:[c?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:c}):null,k?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:k}):null,s?e.jsxs("div",{className:"mb-4 rounded-xl border border-brand-300/40 bg-brand-50 px-4 py-3 text-sm text-brand-700 dark:bg-brand-500/10 dark:text-brand-200",children:["Your plan is managed by estate admin",n?` (${n})`:"","."]}):null,i?e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/90 p-5 text-sm text-slate-500 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:"Loading settings..."}):e.jsxs("section",{className:"grid gap-3 sm:gap-4 xl:grid-cols-12",children:[e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-6 xl:col-span-7",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Preferences"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Manage how you receive alerts and visitor auto-reject behavior."}),e.jsxs("form",{className:"mt-4 space-y-3",onSubmit:E,children:[e.jsx(gt,{label:"Push Alerts",checked:t.pushAlerts,onChange:L=>a(w=>({...w,pushAlerts:L}))}),e.jsx(gt,{label:"Sound Alerts",checked:t.soundAlerts,onChange:L=>a(w=>({...w,soundAlerts:L}))}),e.jsx(gt,{label:"Auto Reject Unknown Visitors",checked:t.autoRejectUnknownVisitors,onChange:L=>a(w=>({...w,autoRejectUnknownVisitors:L}))}),e.jsx("button",{type:"submit",disabled:f,className:"w-full rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50 sm:w-auto dark:bg-white dark:text-slate-900",children:f?"Saving...":"Save Preferences"})]})]}),e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-6 xl:col-span-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Current Subscription"}),o?e.jsxs("div",{className:"mt-4 rounded-xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Plan"}),e.jsx("p",{className:"mt-1 text-base font-semibold",children:o.plan}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Status: ",o.status]}),o.limits?e.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Limits: ",o.limits.maxDoors," doors, ",o.limits.maxQrCodes," QR codes"]}):null]}):e.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"No subscription information available."}),e.jsxs("div",{className:"mt-4 rounded-xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Referral"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Share your code. You earn NGN 2,000 when a referred user subscribes to a paid plan."}),e.jsxs("p",{className:"mt-2 text-sm font-semibold",children:["Code: ",(u==null?void 0:u.referralCode)??"N/A"]}),e.jsxs("p",{className:"mt-1 text-sm",children:["Earnings: NGN ",new Intl.NumberFormat("en-NG").format((u==null?void 0:u.earnings)??0)]}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Rewarded referrals: ",(u==null?void 0:u.rewardedReferrals)??0," / ",(u==null?void 0:u.totalReferrals)??0]})]}),e.jsxs("form",{className:"mt-6 space-y-3",onSubmit:F,children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Reset Password"}),e.jsx(pt,{label:"Current Password",value:m.currentPassword,onChange:L=>x(w=>({...w,currentPassword:L}))}),e.jsx(pt,{label:"New Password",value:m.newPassword,onChange:L=>x(w=>({...w,newPassword:L}))}),e.jsx(pt,{label:"Confirm New Password",value:m.confirmPassword,onChange:L=>x(w=>({...w,confirmPassword:L}))}),e.jsx("button",{type:"submit",disabled:y,className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold disabled:opacity-50 dark:border-slate-700",children:y?"Updating...":"Update Password"})]})]})]})]})}function gt({label:t,checked:a,onChange:s}){return e.jsxs("label",{className:"flex items-center justify-between rounded-xl border border-slate-200 px-3 py-2 dark:border-slate-700",children:[e.jsx("span",{className:"text-sm font-medium",children:t}),e.jsx("input",{type:"checkbox",checked:a,onChange:r=>s(r.target.checked),className:"h-4 w-4 accent-brand-500"})]})}function pt({label:t,value:a,onChange:s}){return e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700 dark:text-slate-300",children:t}),e.jsx("input",{type:"password",value:a,required:!0,minLength:8,onChange:r=>s(r.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm outline-none ring-brand-300 transition focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]})}function Fr(){const{user:t}=ge(),[a,s]=l.useState([]),[r,n]=l.useState(null),[d,o]=l.useState([]),[h,u]=l.useState(""),[p,m]=l.useState("monthly"),[x,i]=l.useState(""),[b,f]=l.useState(""),j=me();l.useEffect(()=>{let c=!0;async function P(){try{const[E,F,L,w]=await Promise.all([na(),oa(),fs(),(t==null?void 0:t.role)==="homeowner"?nt():Promise.resolve(null)]);if(!c)return;if((t==null?void 0:t.role)==="homeowner"&&(w!=null&&w.managedByEstate)){j("/dashboard/homeowner/overview",{replace:!0});return}n(E),s(F),o(L)}catch(E){if(!c)return;i(E.message??"Failed to load billing data")}}return P(),()=>{c=!1}},[j,t==null?void 0:t.role]);const y=l.useMemo(()=>{if(!(r!=null&&r.plan))return"Free";const c=d.find(P=>P.id===r.plan);return(c==null?void 0:c.name)??r.plan},[d,r]),C=(t==null?void 0:t.role)==="estate"?"/dashboard/estate":"/dashboard/homeowner/overview",k=(t==null?void 0:t.role)==="estate"?"Estate Dashboard":"Homeowner Dashboard";async function I(c){u(c.id),i(""),f("");try{if(c.amount===0){const P=await da(c.id);n(E=>({...E??{},...P,limits:{maxDoors:c.maxDoors,maxQrCodes:c.maxQrCodes}})),f(`Free plan activated. You can manage up to ${c.maxDoors} door${c.maxDoors===1?"":"s"} and ${c.maxQrCodes} QR code${c.maxQrCodes===1?"":"s"}.`)}else{const E=!["localhost","127.0.0.1"].includes(window.location.hostname)&&window.location.protocol==="https:"?`${window.location.origin}/billing/callback`:void 0,F=await ca(c.id,E,p);if(!(F!=null&&F.authorization_url))throw new Error("Unable to start Paystack checkout");window.location.href=F.authorization_url}}catch(P){i(P.message??"Failed to process plan request")}finally{u("")}}return e.jsxs(te,{title:"Billing & Subscription",children:[x?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:x}):null,b?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:b}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-5 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-heading text-xl font-bold",children:"Current Plan"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:y}),r!=null&&r.limits?e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Limit: ",r.limits.maxDoors," door(s), ",r.limits.maxQrCodes," QR code(s)"]}):null]}),e.jsxs("button",{type:"button",onClick:()=>j(C),className:"rounded-lg bg-brand-500 px-4 py-2 text-sm font-semibold text-white",children:["Back to ",k]})]}),e.jsxs("div",{className:"mt-4 inline-flex rounded-lg border border-slate-200 bg-slate-50 p-1 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("button",{type:"button",onClick:()=>m("monthly"),className:`rounded-md px-3 py-1.5 text-xs font-semibold transition ${p==="monthly"?"bg-slate-900 text-white dark:bg-white dark:text-slate-900":"text-slate-600 dark:text-slate-300"}`,children:"Monthly"}),e.jsx("button",{type:"button",onClick:()=>m("yearly"),className:`rounded-md px-3 py-1.5 text-xs font-semibold transition ${p==="yearly"?"bg-slate-900 text-white dark:bg-white dark:text-slate-900":"text-slate-600 dark:text-slate-300"}`,children:"Yearly"})]})]}),e.jsx("section",{className:"mt-4 grid gap-3 sm:mt-6 sm:gap-4 md:grid-cols-2 xl:grid-cols-3",children:d.map(c=>e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-5 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500",children:c.name}),e.jsxs("p",{className:"mt-2 text-2xl font-bold",children:[zr(Gr(c,p),c.currency),e.jsxs("span",{className:"ml-1 text-sm font-medium text-slate-500",children:["/",p==="yearly"?"year":"month"]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:(c.currency||"NGN").toUpperCase()}),e.jsxs("p",{className:"mt-2 text-sm text-slate-500",children:["Up to ",c.maxDoors," doors"]}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Up to ",c.maxQrCodes," QR codes"]}),e.jsx("button",{type:"button",disabled:h===c.id||(r==null?void 0:r.plan)===c.id,onClick:()=>I(c),className:"mt-4 w-full rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:cursor-not-allowed disabled:opacity-50 dark:bg-white dark:text-slate-900",children:(r==null?void 0:r.plan)===c.id?"Current plan":h===c.id?"Processing...":c.amount===0?"Activate free":`Pay with Paystack (${p==="yearly"?"Yearly":"Monthly"})`})]},c.id))}),e.jsxs("section",{className:"mt-6 rounded-2xl border border-slate-200 bg-white/90 p-5 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("h3",{className:"font-heading text-lg font-bold",children:"Manual Payment Instructions"}),a.length===0?e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No manual payment account configured."}):e.jsx("div",{className:"mt-3 space-y-3",children:a.map(c=>e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-sm font-semibold",children:c.name}),e.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:c.description}),e.jsx("p",{className:"mt-2 text-xs font-medium text-slate-500",children:c.accountInfo})]},c.id))}),e.jsxs("p",{className:"mt-4 text-xs text-slate-500",children:["Need help? ",e.jsx(g,{to:"/contact",className:"font-semibold text-brand-600 dark:text-brand-300",children:"Contact support"}),"."]})]})]})}function zr(t,a="NGN"){const s=Number(t||0),r=String(a||"NGN").toUpperCase();try{return new Intl.NumberFormat("en",{style:"currency",currency:r,maximumFractionDigits:0}).format(s)}catch{return`${r} ${s.toLocaleString("en-US")}`}}function Gr(t,a){const s=Number((t==null?void 0:t.amount)||0);return a==="yearly"?s*12:s}function Wr(){const{user:t}=ge(),[a,s]=l.useState(""),[r,n]=l.useState("Verifying payment..."),[d]=cs(),o=me();return l.useEffect(()=>{let h=!0;async function u(){const p=d.get("reference")||d.get("trxref");if(!p){s("Missing Paystack reference.");return}try{if(await xa(p),!h)return;n("Payment successful. Redirecting..."),setTimeout(()=>{const m=(t==null?void 0:t.role)==="estate"?"/dashboard/estate":"/dashboard/homeowner/overview";o(m,{replace:!0})},800)}catch(m){if(!h)return;s(m.message??"Unable to verify payment.")}}return u(),()=>{h=!1}},[o,d,t==null?void 0:t.role]),e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-100 p-6 dark:bg-slate-950",children:e.jsx("div",{className:"w-full max-w-md rounded-2xl border border-slate-200 bg-white p-6 text-center shadow-soft dark:border-slate-800 dark:bg-slate-900",children:a?e.jsx("p",{className:"text-sm font-semibold text-danger",children:a}):e.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:r})})})}async function Ee(){const t=await T("/estate/overview");return(t==null?void 0:t.data)??{}}async function Jr(t){const a=await T("/estate/",{method:"POST",body:JSON.stringify(t)});return(a==null?void 0:a.data)??null}async function Yr(t){const a=await T("/estate/homes",{method:"POST",body:JSON.stringify(t)});return(a==null?void 0:a.data)??null}async function Kr(t){const a=await T("/estate/doors",{method:"POST",body:JSON.stringify(t)});return(a==null?void 0:a.data)??null}async function Zr(t){const a=await T("/estate/doors/provision",{method:"POST",body:JSON.stringify(t)});return(a==null?void 0:a.data)??null}async function Xr(t,a){const s=await T(`/estate/doors/${t}/assign-homeowner`,{method:"POST",body:JSON.stringify({homeownerId:a})});return(s==null?void 0:s.data)??null}async function el(t){const a=await T(`/estate/homeowners/${t}/invite`,{method:"POST"});return(a==null?void 0:a.data)??null}async function tl(){const t=await T("/estate/mappings");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function sl(){const t=await T("/estate/access-logs");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function al(){const t=await T("/estate/plan-restrictions");return(t==null?void 0:t.data)??null}async function rl(t,a){const s=await T(`/estate/doors/${t}/admin-profile`,{method:"PUT",body:JSON.stringify(a)});return(s==null?void 0:s.data)??null}async function Ps(t){const a=await T("/estate/shared-qr",{method:"POST",body:JSON.stringify({estateId:t})});return(a==null?void 0:a.data)??null}async function Yt(t){const a=await T(`/estate/shared-qr?estateId=${encodeURIComponent(t)}`);return Array.isArray(a==null?void 0:a.data)?a.data:[]}const ll=[{title:"Create Estate",description:"Set up a new estate profile before adding homes and access doors."},{title:"Add Doors",description:"Register entry points so each door can be mapped and monitored."},{title:"Assign Doors To Homeowners",description:"Link doors to responsible homeowners for approvals and notifications."},{title:"Invite Homeowners",description:"Send access invites so residents can sign in and control their doors."},{title:"Manage Door Mappings",description:"Review and adjust door-to-homeowner mappings at any time."},{title:"View Access Logs",description:"Track entry attempts and approvals for audit and security review."},{title:"Plan Restrictions",description:"See usage limits and plan-based restrictions for estate operations."},{title:"Multi-Home Support",description:"Handle multiple homes under one estate workspace."}];function nl(){var d,o,h,u;const[t,a]=l.useState(null),[s,r]=l.useState("");l.useEffect(()=>{let p=!0;async function m(){try{const x=await Ee();if(!p)return;a(x)}catch(x){if(!p)return;r(x.message??"Failed to load estate data")}}return m(),()=>{p=!1}},[]);const n={estates:((d=t==null?void 0:t.estates)==null?void 0:d.length)??0,homes:((o=t==null?void 0:t.homes)==null?void 0:o.length)??0,doors:((h=t==null?void 0:t.doors)==null?void 0:h.length)??0,homeowners:((u=t==null?void 0:t.homeowners)==null?void 0:u.length)??0};return e.jsxs(te,{title:"Estate Overview",children:[s?e.jsx(ol,{tone:"danger",message:s}):null,e.jsxs("section",{className:"mb-4 grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[e.jsx(We,{label:"Estates",tip:"Total estate profiles currently configured.",value:n.estates}),e.jsx(We,{label:"Homes",tip:"Number of homes across your estate setup.",value:n.homes}),e.jsx(We,{label:"Doors",tip:"Registered access doors managed from this account.",value:n.doors}),e.jsx(We,{label:"Homeowners",tip:"Residents linked to doors and available for approvals.",value:n.homeowners})]}),e.jsxs("section",{className:"mb-4 rounded-2xl border border-brand-100 bg-brand-50/70 p-4 dark:border-brand-500/30 dark:bg-brand-500/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"font-heading text-base font-bold",children:"How to use estate dashboard"}),e.jsx(yt,{text:"Use this as your control center: configure estate structure, then manage residents and logs."})]}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Start with create estate and add doors, then assign homeowners and monitor access logs daily."})]}),e.jsx("section",{className:"mb-4",children:e.jsx(g,{to:"/dashboard/estate/create",className:"inline-flex items-center rounded-xl bg-slate-900 px-4 py-2 text-sm font-semibold text-white dark:bg-white dark:text-slate-900",children:"Create an Estate"})}),e.jsx("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:ll.map(p=>e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/80 p-5 shadow-soft dark:border-slate-800 dark:bg-slate-900/70",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"font-heading text-lg font-bold",children:p.title}),e.jsx(yt,{text:p.description})]}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:p.description})]},p.title))}),e.jsx("section",{className:"mt-4",children:e.jsx("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Billing & Subscription"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Manage estate plan limits and complete payments via Paystack."})]}),e.jsx(g,{to:"/billing/paywall",className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white dark:bg-white dark:text-slate-900",children:"Open Billing"})]})})})]})}function We({label:t,tip:a,value:s}){return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsx(yt,{text:a})]}),e.jsx("p",{className:"mt-2 text-2xl font-black",children:s})]})}function ol({tone:t,message:a}){const s=t==="danger"?"border-danger/30 bg-danger/10 text-danger":"border-brand-200 bg-brand-50 text-brand-700";return e.jsx("div",{className:`mb-4 rounded-xl border px-4 py-3 text-sm ${s}`,children:a})}function yt({text:t}){return e.jsxs("span",{className:"group relative inline-flex",children:[e.jsx("button",{type:"button",className:"grid h-5 w-5 place-items-center rounded-full bg-slate-200 text-[11px] font-bold text-slate-700 dark:bg-slate-700 dark:text-slate-100","aria-label":"More information",children:"?"}),e.jsx("span",{className:"pointer-events-none absolute left-1/2 top-7 z-10 hidden w-56 -translate-x-1/2 rounded-lg bg-slate-900 px-2 py-1 text-xs text-white shadow-lg group-hover:block group-focus-within:block",children:t})]})}function il(){const[t,a]=l.useState(""),[s,r]=l.useState([]),[n,d]=l.useState({}),[o,h]=l.useState(""),[u,p]=l.useState(""),[m,x]=l.useState(!1),[i,b]=l.useState("");async function f(){const k=await Ee();r(Array.isArray(k==null?void 0:k.estates)?k.estates:[])}l.useEffect(()=>{f().catch(k=>h(k.message??"Failed to load estates"))},[]),l.useEffect(()=>{let k=!0;async function I(){if(s.length!==0)try{const c=await Promise.all(s.map(async P=>{const E=await Yt(P.id);return[P.id,E]}));if(!k)return;d(Object.fromEntries(c))}catch{}}return I(),()=>{k=!1}},[s]);async function j(k){k.preventDefault(),x(!0),h(""),p("");try{const I=await Jr({name:t});p(`Estate created: ${(I==null?void 0:I.name)??t}`),a(""),await f()}catch(I){h(I.message??"Failed to create estate")}finally{x(!1)}}const y=l.useMemo(()=>s.map(k=>{const c=(n[k.id]??[]).find(P=>P.active!==!1)??null;return{...k,sharedQr:c}}),[s,n]);async function C(k){b(k),h(""),p("");try{const I=await Ps(k);p(`Estate QR created: ${(I==null?void 0:I.qrId)??"ready"}`);const c=await Yt(k);d(P=>({...P,[k]:c}))}catch(I){h(I.message??"Failed to create estate QR")}finally{b("")}}return e.jsxs(te,{title:"Create Estate",children:[o?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:o}):null,u?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:u}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Create Estate"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."}),e.jsxs("form",{className:"mt-4 grid gap-3 sm:grid-cols-[1fr_auto]",onSubmit:j,children:[e.jsx("input",{type:"text",value:t,onChange:k=>a(k.target.value),placeholder:"Estate name",className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm outline-none ring-brand-300 focus:ring-2 dark:border-slate-700 dark:bg-slate-900",required:!0}),e.jsx("button",{type:"submit",disabled:m,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:m?"Creating...":"Create"})]})]}),e.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Your Estates"}),e.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:[y.map(k=>e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"truncate font-semibold",children:k.name}),e.jsx("p",{className:"truncate text-xs text-slate-500",children:k.id})]}),e.jsx("button",{type:"button",onClick:()=>C(k.id),disabled:i===k.id,className:"rounded-lg bg-slate-900 px-3 py-2 text-xs font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:i===k.id?"Generating...":k.sharedQr?"Regenerate QR":"Generate QR"})]}),e.jsxs("div",{className:"mt-3 rounded-lg border border-slate-200 bg-white p-3 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Estate QR (Shared)"}),k.sharedQr?e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("p",{className:"text-sm font-semibold",children:k.sharedQr.qrId}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Doors: ",k.sharedQr.doorCount??"-"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx("a",{href:k.sharedQr.scanUrl,className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700",children:"Open Scan Page"}),e.jsx("button",{type:"button",onClick:()=>dl(`${window.location.origin}${k.sharedQr.scanUrl}`),className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700",children:"Copy Link"})]}),e.jsx("p",{className:"mt-2 text-[11px] text-slate-500",children:"This QR is a selector QR: it can route visitors to any door in the estate."})]}):e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Not generated yet. You need at least 1 home and 1 door in this estate before generating."})]})]},k.id)),y.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No estates created yet."}):null]})]})]})}async function dl(t){try{await navigator.clipboard.writeText(t),window.dispatchEvent(new CustomEvent("qring:toast",{detail:{message:"Copied"}}))}catch{}}function De(t,a=140){return`https://api.qrserver.com/v1/create-qr-code/?size=${a}x${a}&data=${encodeURIComponent(t)}`}function cl(){const[t,a]=l.useState(null),[s,r]=l.useState(""),[n,d]=l.useState(""),[o,h]=l.useState(!1),[u,p]=l.useState(!1),[m,x]=l.useState(null),[i,b]=l.useState(null),[f,j]=l.useState(""),[y,C]=l.useState(!1),[k,I]=l.useState({doorName:"",homeownerName:"",homeownerEmail:"",newPassword:""}),[c,P]=l.useState({estateId:"",homeId:"",name:"",homeName:"",homeownerFullName:"",homeownerUsername:"",homeownerPassword:""});async function E(){var M,W;const N=await Ee();a(N),!c.estateId&&((M=N==null?void 0:N.estates)!=null&&M.length)&&P(G=>({...G,estateId:N.estates[0].id})),!c.homeId&&((W=N==null?void 0:N.homes)!=null&&W.length)&&P(G=>({...G,homeId:N.homes[0].id}))}l.useEffect(()=>{E().catch(N=>r(N.message??"Failed to load door data"))},[]);const F=l.useMemo(()=>((t==null?void 0:t.homes)??[]).filter(N=>!c.estateId||N.estateId===c.estateId),[t,c.estateId]),L=l.useMemo(()=>(t==null?void 0:t.doors)??[],[t]);async function w(N){var M,W,G,z,ae;N.preventDefault(),h(!0),r(""),d(""),x(null);try{if(u){const R=await Zr({estateId:c.estateId,homeName:c.homeName,doorName:c.name,homeownerFullName:c.homeownerFullName,homeownerUsername:c.homeownerUsername,homeownerPassword:c.homeownerPassword});(M=R==null?void 0:R.qr)!=null&&M.qrId&&x({qrId:R.qr.qrId,scanUrl:`${window.location.origin}/scan/${R.qr.qrId}`,doorName:((W=R==null?void 0:R.door)==null?void 0:W.name)??c.name}),d(`Door created and linked to ${((G=R==null?void 0:R.homeowner)==null?void 0:G.username)??"homeowner"}.`)}else{const R=await Kr({estateId:c.estateId,homeId:c.homeId,name:c.name,generateQr:!0,mode:"direct",plan:"single"});(z=R==null?void 0:R.qr)!=null&&z.qrId&&x({qrId:R.qr.qrId,scanUrl:`${window.location.origin}/scan/${R.qr.qrId}`,doorName:((ae=R==null?void 0:R.door)==null?void 0:ae.name)??c.name}),d("Door created successfully.")}P(R=>({...R,name:"",homeName:"",homeownerFullName:"",homeownerUsername:"",homeownerPassword:""})),await E()}catch(R){r(R.message??"Failed to create door")}finally{h(!1)}}async function S(){if(c.estateId){r(""),d("");try{const N=await Ps(c.estateId);b({...N,fullScanUrl:`${window.location.origin}${N.scanUrl}`}),d("Estate shared QR generated. Visitors can pick a door after scanning."),await E()}catch(N){r(N.message??"Failed to generate estate shared QR")}}}async function $(N){if(N.preventDefault(),!!f){C(!0),r(""),d("");try{const M={doorName:k.doorName||void 0,homeownerName:k.homeownerName||void 0,homeownerEmail:k.homeownerEmail||void 0,newPassword:k.newPassword||void 0};await rl(f,M),d("Door admin profile updated successfully."),j(""),I({doorName:"",homeownerName:"",homeownerEmail:"",newPassword:""}),await E()}catch(M){r(M.message??"Failed to update door admin profile")}finally{C(!1)}}}function q(N){j(N.id),I({doorName:N.name??"",homeownerName:N.homeownerName??"",homeownerEmail:N.homeownerEmail??"",newPassword:""})}function H(N,M){const W=`${window.location.origin}/scan/${M}`,G=`
      <html>
        <head>
          <title>Print Door QR</title>
          <style>
            body{font-family:Arial,sans-serif;padding:24px}
            .card{width:340px;border:1px solid #cbd5e1;border-radius:16px;padding:16px}
            .title{font-size:14px;font-weight:700;text-align:center;margin-bottom:8px}
            .meta{font-size:12px;color:#475569;text-align:center;margin-bottom:8px}
            .qr{display:block;width:280px;height:280px;margin:0 auto;background:#fff;padding:8px;border-radius:10px}
            .url{font-size:10px;color:#64748b;text-align:center;margin-top:8px;word-break:break-all}
          </style>
        </head>
        <body>
          <div class="card">
            <div class="title">${N.name}</div>
            <div class="meta">${N.homeName||""}</div>
            <img class="qr" src="${De(W,280)}" alt="QR" />
            <div class="url">${W}</div>
          </div>
          <script>window.onload = () => window.print();<\/script>
        </body>
      </html>
    `,z=window.open("","_blank","width=720,height=860");z&&(z.document.open(),z.document.write(G),z.document.close())}async function se(N){const M=`${N.loginLink}?email=${encodeURIComponent(N.homeownerEmail||"")}`,W=`Homeowner: ${N.homeownerName||"N/A"}
Email: ${N.homeownerEmail||"N/A"}
Login: ${M}`;try{await navigator.clipboard.writeText(W),d(`Login details copied for ${N.name}.`),r("")}catch{r("Unable to copy login details. Please copy manually.")}}function K(){var z;if(!i)return;const N=((z=((t==null?void 0:t.estates)??[]).find(ae=>ae.id===c.estateId))==null?void 0:z.name)??"Estate Entry",M=De(i.fullScanUrl,300),W=`
      <html>
        <head>
          <title>Print Shared Estate QR</title>
          <style>
            body{font-family:Inter,Arial,sans-serif;padding:24px;background:#fff;color:#0f172a}
            .card{width:380px;border:1px solid #cbd5e1;border-radius:18px;padding:18px}
            .brand{display:flex;align-items:center;gap:10px;margin-bottom:8px}
            .logo{width:30px;height:30px;border-radius:9px;background:#0f172a;color:#fff;display:grid;place-items:center;font-weight:800}
            .name{font-size:18px;font-weight:800}
            .subtitle{font-size:12px;color:#475569;margin-bottom:10px}
            .title{font-size:12px;text-transform:uppercase;letter-spacing:.08em;color:#334155;text-align:center;margin:8px 0}
            .qr{display:block;width:320px;height:320px;margin:0 auto;background:#fff;padding:10px;border-radius:12px;border:1px solid #e2e8f0}
            .steps{margin-top:10px;font-size:11px;color:#475569;line-height:1.5}
            .url{font-size:10px;color:#64748b;text-align:center;margin-top:8px;word-break:break-all}
          </style>
        </head>
        <body>
          <div class="card">
            <div class="brand">
              <div class="logo">Q</div>
              <div>
                <div class="name">Qring</div>
                <div class="subtitle">${N}</div>
              </div>
            </div>
            <div class="title">Shared Estate Access QR</div>
            <img class="qr" src="${M}" alt="Shared Estate QR" />
            <div class="steps">
              1. Visitor scans this QR<br/>
              2. Selects door from list<br/>
              3. Sends request to specific homeowner
            </div>
            <div class="url">${i.fullScanUrl}</div>
          </div>
          <script>window.onload = () => window.print();<\/script>
        </body>
      </html>
    `,G=window.open("","_blank","width=760,height=900");G&&(G.document.open(),G.document.write(W),G.document.close())}return e.jsxs(te,{title:"Estate Doors",children:[s?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:s}):null,n?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:n}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Create Door"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Create doors and provision homeowner login in one flow."})]}),e.jsx("button",{type:"button",onClick:()=>p(N=>!N),className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700",children:u?"Use Existing Homeowner":"Provision New Homeowner Login"})]}),e.jsxs("form",{onSubmit:w,className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(Kt,{label:"Estate",value:c.estateId,onChange:N=>P(M=>({...M,estateId:N})),options:((t==null?void 0:t.estates)??[]).map(N=>({value:N.id,label:N.name}))}),u?e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Home Name"}),e.jsx("input",{value:c.homeName,onChange:N=>P(M=>({...M,homeName:N.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0})]}):e.jsx(Kt,{label:"Home",value:c.homeId,onChange:N=>P(M=>({...M,homeId:N})),options:F.map(N=>({value:N.id,label:`${N.name} (${N.homeownerName||"No homeowner"})`}))}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Door Name"}),e.jsx("input",{value:c.name,onChange:N=>P(M=>({...M,name:N.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0})]}),u?e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Homeowner Full Name"}),e.jsx("input",{value:c.homeownerFullName,onChange:N=>P(M=>({...M,homeownerFullName:N.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Username"}),e.jsx("input",{value:c.homeownerUsername,onChange:N=>P(M=>({...M,homeownerUsername:N.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Password"}),e.jsx("input",{type:"password",value:c.homeownerPassword,onChange:N=>P(M=>({...M,homeownerPassword:N.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0})]})]}):null,e.jsx("button",{type:"submit",disabled:o,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:o?"Saving...":"Create Door"})]})]}),m?e.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("h3",{className:"font-heading text-base font-bold",children:"Generated QR"}),e.jsx("p",{className:"text-xs text-slate-500",children:m.doorName}),e.jsxs("div",{className:"mt-3 inline-flex flex-col items-center rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("img",{src:De(m.scanUrl,180),alt:m.qrId,className:"h-44 w-44 rounded bg-white p-2"}),e.jsx("p",{className:"mt-2 text-xs font-semibold",children:m.qrId})]})]}):null,e.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-heading text-base font-bold",children:"Estate Shared Entry QR"}),e.jsx("p",{className:"text-xs text-slate-500",children:"One QR for the estate. Visitors scan, pick door, then request access."})]}),e.jsx("button",{type:"button",onClick:S,className:"rounded-lg bg-slate-900 px-3 py-2 text-xs font-semibold text-white dark:bg-white dark:text-slate-900",children:"Generate Shared QR"})]}),i?e.jsxs("div",{className:"mt-3 inline-flex flex-col items-center rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("img",{src:De(i.fullScanUrl,180),alt:i.qrId,className:"h-44 w-44 rounded bg-white p-2"}),e.jsx("p",{className:"mt-2 text-xs font-semibold",children:i.qrId}),e.jsx("p",{className:"text-[11px] text-slate-500",children:i.fullScanUrl}),e.jsx("button",{type:"button",onClick:K,className:"mt-3 rounded-lg bg-slate-900 px-3 py-2 text-xs font-semibold text-white dark:bg-white dark:text-slate-900",children:"Print Shared Estate QR"})]}):null]}),e.jsxs("section",{className:"mt-4",children:[e.jsx("h3",{className:"mb-3 font-heading text-lg font-bold",children:"Doors Created"}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2 2xl:grid-cols-3",children:[L.map(N=>{var G,z;const M=(G=N.qr)==null?void 0:G[0],W=`${N.loginLink}?email=${encodeURIComponent(N.homeownerEmail||"")}`;return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-heading text-lg font-bold",children:N.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[N.homeName," | ",N.state]})]}),e.jsx("button",{type:"button",onClick:()=>q(N),className:"rounded-lg border border-slate-300 px-2 py-1 text-xs font-semibold dark:border-slate-700",children:"Admin Profile"})]}),e.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Homeowner: ",N.homeownerName||"N/A"]}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Email: ",N.homeownerEmail||"N/A"]}),e.jsx("a",{href:W,target:"_blank",rel:"noreferrer",className:"mt-2 inline-block text-xs font-semibold text-brand-600 dark:text-brand-300",children:"Estate Homeowner Login Link"}),e.jsx("div",{className:"mt-2",children:e.jsx("button",{type:"button",onClick:()=>se(N),className:"rounded-lg border border-slate-300 px-2.5 py-1.5 text-xs font-semibold dark:border-slate-700",children:"Copy Login Details"})}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[(z=N.qr)!=null&&z.length?N.qr.map(ae=>e.jsxs("button",{type:"button",onClick:()=>H(N,ae),className:"rounded-lg border border-slate-200 bg-slate-50 px-2 py-1 text-xs font-semibold dark:border-slate-700 dark:bg-slate-800",children:["Print ",ae]},`${N.id}-${ae}`)):e.jsx("span",{className:"text-xs text-slate-500",children:"No QR yet"}),M?e.jsx("img",{src:De(`${window.location.origin}/scan/${M}`,64),alt:M,className:"h-12 w-12 rounded border border-slate-200 bg-white p-1 dark:border-slate-700"}):null]})]},N.id)}),L.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No doors created yet."}):null]})]}),f?e.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"font-heading text-lg font-bold",children:"Door Admin Profile"}),e.jsx("button",{type:"button",onClick:()=>j(""),className:"rounded-lg border border-slate-300 px-2 py-1 text-xs font-semibold dark:border-slate-700",children:"Close"})]}),e.jsxs("form",{onSubmit:$,className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Door Name"}),e.jsx("input",{value:k.doorName,onChange:N=>I(M=>({...M,doorName:N.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Homeowner Name"}),e.jsx("input",{value:k.homeownerName,onChange:N=>I(M=>({...M,homeownerName:N.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Homeowner Email"}),e.jsx("input",{type:"email",value:k.homeownerEmail,onChange:N=>I(M=>({...M,homeownerEmail:N.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Change Password"}),e.jsx("input",{type:"password",value:k.newPassword,onChange:N=>I(M=>({...M,newPassword:N.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",placeholder:"Leave empty to keep current password"})]}),e.jsx("button",{type:"submit",disabled:y,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:y?"Updating...":"Update Admin Profile"})]})]}):null]})}function Kt({label:t,value:a,onChange:s,options:r}){return e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsxs("select",{value:a,onChange:n=>s(n.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0,children:[r.length===0?e.jsx("option",{value:"",children:"No options available"}):null,r.map(n=>e.jsx("option",{value:n.value,children:n.label},n.value))]})]})}function xl(){const[t,a]=l.useState(null),[s,r]=l.useState({doorId:"",homeownerId:""}),[n,d]=l.useState(""),[o,h]=l.useState(""),[u,p]=l.useState(!1);async function m(){var b,f;const i=await Ee();a(i),!s.doorId&&((b=i==null?void 0:i.doors)!=null&&b.length)&&r(j=>({...j,doorId:i.doors[0].id})),!s.homeownerId&&((f=i==null?void 0:i.homeowners)!=null&&f.length)&&r(j=>({...j,homeownerId:i.homeowners[0].id}))}l.useEffect(()=>{m().catch(i=>d(i.message??"Failed to load assignment data"))},[]);async function x(i){i.preventDefault(),p(!0),d(""),h("");try{await Xr(s.doorId,s.homeownerId),h("Door assigned to homeowner."),await m()}catch(b){d(b.message??"Failed to assign door")}finally{p(!1)}}return e.jsxs(te,{title:"Assign Doors",children:[n?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:n}):null,o?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:o}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Assign Doors To Homeowners"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."}),e.jsxs("form",{onSubmit:x,className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(Zt,{label:"Door",value:s.doorId,onChange:i=>r(b=>({...b,doorId:i})),options:((t==null?void 0:t.doors)??[]).map(i=>({value:i.id,label:i.name}))}),e.jsx(Zt,{label:"Homeowner",value:s.homeownerId,onChange:i=>r(b=>({...b,homeownerId:i})),options:((t==null?void 0:t.homeowners)??[]).map(i=>({value:i.id,label:`${i.fullName} (${i.email})`}))}),e.jsx("button",{type:"submit",disabled:u,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:u?"Assigning...":"Assign Door"})]})]})]})}function Zt({label:t,value:a,onChange:s,options:r}){return e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsxs("select",{value:a,onChange:n=>s(n.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0,children:[r.length===0?e.jsx("option",{value:"",children:"No options available"}):null,r.map(n=>e.jsx("option",{value:n.value,children:n.label},n.value))]})]})}function ml(){const[t,a]=l.useState([]),[s,r]=l.useState(""),[n,d]=l.useState(""),[o,h]=l.useState("");async function u(){const m=await Ee();a(Array.isArray(m==null?void 0:m.homeowners)?m.homeowners:[])}l.useEffect(()=>{u().catch(m=>r(m.message??"Failed to load homeowners"))},[]);async function p(m){h(m),r(""),d("");try{const x=await el(m);d(`Invite sent. Token: ${(x==null?void 0:x.inviteToken)??"-"}`)}catch(x){r(x.message??"Failed to send invite")}finally{h("")}}return e.jsxs(te,{title:"Invite Homeowners",children:[s?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:s}):null,n?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:n}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Invite Homeowners"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."})]}),e.jsxs("section",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:[t.map(m=>e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("p",{className:"font-semibold",children:m.fullName}),e.jsx("p",{className:"text-xs text-slate-500",children:m.email}),e.jsx("button",{type:"button",onClick:()=>p(m.id),disabled:o===m.id,className:"mt-3 rounded-lg bg-slate-900 px-3 py-2 text-xs font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:o===m.id?"Sending...":"Send Invite"})]},m.id)),t.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No homeowners available yet."}):null]})]})}function ul(){const[t,a]=l.useState([]),[s,r]=l.useState("");return l.useEffect(()=>{let n=!0;async function d(){try{const o=await tl();if(!n)return;a(o)}catch(o){if(!n)return;r(o.message??"Failed to load mappings")}}return d(),()=>{n=!1}},[]),e.jsxs(te,{title:"Door Mappings",children:[s?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:s}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Manage Door Mappings"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."})]}),e.jsxs("section",{className:"mt-4 space-y-3",children:[t.map(n=>{var d;return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-heading text-lg font-bold",children:n.homeName}),e.jsxs("p",{className:"text-xs text-slate-500",children:[n.homeownerName," | ",n.homeownerEmail]})]}),e.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold dark:bg-slate-800",children:[((d=n.doors)==null?void 0:d.length)??0," doors"]})]}),e.jsx("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:(n.doors??[]).map(o=>e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-sm font-semibold",children:o.name}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["QR: ",(o.qr??[]).join(", ")||"None"]})]},o.id))})]},n.homeId)}),t.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No mappings created yet."}):null]})]})}function hl(){const[t,a]=l.useState([]),[s,r]=l.useState("");return l.useEffect(()=>{let n=!0;async function d(){try{const o=await sl();if(!n)return;a(o)}catch(o){if(!n)return;r(o.message??"Failed to load access logs")}}return d(),()=>{n=!1}},[]),e.jsxs(te,{title:"Access Logs",children:[s?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:s}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"View Access Logs"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."})]}),e.jsxs("section",{className:"mt-4 space-y-3",children:[t.map(n=>e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsx("p",{className:"font-semibold",children:n.visitor}),e.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs font-semibold uppercase dark:bg-slate-800",children:n.status})]}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:[n.doorName," | ",n.homeName]}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Started: ",new Date(n.startedAt).toLocaleString()]})]},n.id)),t.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No access logs yet."}):null]})]})}function bl(){const[t,a]=l.useState(null),[s,r]=l.useState("");l.useEffect(()=>{let o=!0;async function h(){try{const u=await al();if(!o)return;a(u)}catch(u){if(!o)return;r(u.message??"Failed to load plan restrictions")}}return h(),()=>{o=!1}},[]);const n=t!=null&&t.maxDoors?Math.min(Math.round(t.usedDoors/t.maxDoors*100),100):0,d=t!=null&&t.maxQrCodes?Math.min(Math.round(t.usedQrCodes/t.maxQrCodes*100),100):0;return e.jsxs(te,{title:"Plan Restrictions",children:[s?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:s}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Plan Restrictions"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."}),t?e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("p",{className:"text-sm font-semibold",children:["Plan: ",t.plan]}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Status: ",t.status]})]}),e.jsx(Xt,{label:`Doors ${t.usedDoors}/${t.maxDoors}`,percent:n}),e.jsx(Xt,{label:`QR Codes ${t.usedQrCodes}/${t.maxQrCodes}`,percent:d})]}):e.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Loading restrictions..."})]})]})}function Xt({label:t,percent:a}){return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs font-semibold text-slate-500",children:[e.jsx("span",{children:t}),e.jsxs("span",{children:[a,"%"]})]}),e.jsx("div",{className:"h-2 rounded-full bg-slate-200 dark:bg-slate-700",children:e.jsx("div",{className:"h-2 rounded-full bg-slate-900 dark:bg-slate-100",style:{width:`${a}%`}})})]})}function gl(){const[t,a]=l.useState(null),[s,r]=l.useState({estateId:"",name:"",homeownerId:""}),[n,d]=l.useState(""),[o,h]=l.useState(""),[u,p]=l.useState(!1);async function m(){var b,f;const i=await Ee();a(i),!s.estateId&&((b=i==null?void 0:i.estates)!=null&&b.length)&&r(j=>({...j,estateId:i.estates[0].id})),!s.homeownerId&&((f=i==null?void 0:i.homeowners)!=null&&f.length)&&r(j=>({...j,homeownerId:i.homeowners[0].id}))}l.useEffect(()=>{m().catch(i=>d(i.message??"Failed to load homes"))},[]);async function x(i){i.preventDefault(),p(!0),d(""),h("");try{await Yr(s),h("Home added successfully."),r(b=>({...b,name:""})),await m()}catch(b){d(b.message??"Failed to add home")}finally{p(!1)}}return e.jsxs(te,{title:"Multi-Home Support",children:[n?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:n}):null,o?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:o}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Add Home"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."}),e.jsxs("form",{onSubmit:x,className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(es,{label:"Estate",value:s.estateId,onChange:i=>r(b=>({...b,estateId:i})),options:((t==null?void 0:t.estates)??[]).map(i=>({value:i.id,label:i.name}))}),e.jsx(es,{label:"Homeowner",value:s.homeownerId,onChange:i=>r(b=>({...b,homeownerId:i})),options:((t==null?void 0:t.homeowners)??[]).map(i=>({value:i.id,label:`${i.fullName} (${i.email})`}))}),e.jsxs("label",{className:"block md:col-span-2",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Home Name"}),e.jsx("input",{value:s.name,onChange:i=>r(b=>({...b,name:i.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0})]}),e.jsx("button",{type:"submit",disabled:u,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:u?"Saving...":"Add Home"})]})]}),e.jsx("section",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:((t==null?void 0:t.homes)??[]).map(i=>e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("p",{className:"font-semibold",children:i.name}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:i.homeownerName||"No homeowner assigned"}),e.jsx("p",{className:"text-xs text-slate-500",children:i.homeownerEmail})]},i.id))})]})}function es({label:t,value:a,onChange:s,options:r}){return e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsxs("select",{value:a,onChange:n=>s(n.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0,children:[r.length===0?e.jsx("option",{value:"",children:"No options available"}):null,r.map(n=>e.jsx("option",{value:n.value,children:n.label},n.value))]})]})}async function Rs(){const t=await T("/admin/overview");return(t==null?void 0:t.data)??null}function pl(){var m,x;const[t,a]=l.useState(null),[s,r]=l.useState(!0),[n,d]=l.useState(""),[o,h]=l.useState("");l.useEffect(()=>{let i=!0;async function b(){r(!0),d("");try{const f=await Rs();if(!i)return;a(f)}catch(f){if(!i)return;f instanceof ke&&f.status===404?d("Admin overview endpoint not found (404). Restart the backend server so /api/v1/admin/overview is available."):d(f.message??"Failed to load admin overview")}finally{i&&r(!1)}}return b(),()=>{i=!1}},[]);const u=l.useMemo(()=>{var f;const i=((f=t==null?void 0:t.visits)==null?void 0:f.rows)??[],b=o.trim().toLowerCase();return b?i.filter(j=>[j.visitor,j.homeownerName,j.homeownerEmail,j.estateName,j.doorName,j.status].join(" ").toLowerCase().includes(b)):i},[t,o]),p=(t==null?void 0:t.metrics)??{};return e.jsxs(te,{title:"Admin Overview",children:[n?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:n}):null,e.jsxs("section",{className:"grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[e.jsx(Je,{label:"Total Homeowners",value:p.totalHomeowners,loading:s}),e.jsx(Je,{label:"Total Estates",value:p.totalEstates,loading:s}),e.jsx(Je,{label:"Total Visits",value:p.totalVisits,loading:s}),e.jsx(Je,{label:"Total Payments",value:s?"...":ft(p.totalPaymentAmount),loading:!1})]}),e.jsxs("section",{className:"mt-4 grid gap-4 xl:grid-cols-2",children:[e.jsx(Ye,{title:"Homeowners",loading:s,rows:(t==null?void 0:t.homeowners)??[],columns:[{key:"fullName",label:"Name"},{key:"email",label:"Email"},{key:"homeCount",label:"Homes"},{key:"doorCount",label:"Doors"},{key:"qrCount",label:"QR"},{key:"visits",label:"Visits",render:i=>{var b;return((b=i.visits)==null?void 0:b.total)??0}},{key:"plan",label:"Plan",render:i=>{var b;return((b=i.subscription)==null?void 0:b.plan)??"free"}}]}),e.jsx(Ye,{title:"Estates",loading:s,rows:(t==null?void 0:t.estates)??[],columns:[{key:"fullName",label:"Name"},{key:"email",label:"Email"},{key:"estateCount",label:"Estates"},{key:"homeownerCount",label:"Homeowners"},{key:"doorCount",label:"Doors"},{key:"qrCount",label:"QR"},{key:"plan",label:"Plan",render:i=>{var b;return((b=i.subscription)==null?void 0:b.plan)??"free"}}]})]}),e.jsxs("section",{className:"mt-4 grid gap-4 xl:grid-cols-2",children:[e.jsx(Ye,{title:"Homeowner Payment History",loading:s,rows:((m=t==null?void 0:t.payments)==null?void 0:m.homeownerHistory)??[],columns:[{key:"userName",label:"User"},{key:"userEmail",label:"Email"},{key:"plan",label:"Plan"},{key:"status",label:"Status"},{key:"amount",label:"Amount",render:i=>ft(i.amount)},{key:"startsAt",label:"Date",render:i=>jt(i.startsAt)}]}),e.jsx(Ye,{title:"Estate Payment History",loading:s,rows:((x=t==null?void 0:t.payments)==null?void 0:x.estateHistory)??[],columns:[{key:"userName",label:"User"},{key:"userEmail",label:"Email"},{key:"plan",label:"Plan"},{key:"status",label:"Status"},{key:"amount",label:"Amount",render:i=>ft(i.amount)},{key:"startsAt",label:"Date",render:i=>jt(i.startsAt)}]})]}),e.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Visits By User"}),e.jsx("input",{value:o,onChange:i=>h(i.target.value),placeholder:"Search visitor, homeowner, estate, door...",className:"w-full max-w-md rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900"})]}),s?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading visits..."}):u.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No visits found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[880px] text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:[e.jsx("th",{className:"py-2 font-semibold",children:"Visitor"}),e.jsx("th",{className:"py-2 font-semibold",children:"Status"}),e.jsx("th",{className:"py-2 font-semibold",children:"Homeowner"}),e.jsx("th",{className:"py-2 font-semibold",children:"Estate"}),e.jsx("th",{className:"py-2 font-semibold",children:"Door"}),e.jsx("th",{className:"py-2 font-semibold",children:"Started"})]})}),e.jsx("tbody",{children:u.map(i=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-2",children:i.visitor}),e.jsx("td",{className:"py-2",children:i.status}),e.jsx("td",{className:"py-2",children:i.homeownerName||"-"}),e.jsx("td",{className:"py-2",children:i.estateName||"-"}),e.jsx("td",{className:"py-2",children:i.doorName||"-"}),e.jsx("td",{className:"py-2",children:jt(i.startedAt)})]},i.id))})]})})]})]})}function Je({label:t,value:a,loading:s}){return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsx("p",{className:"mt-2 text-2xl font-black",children:s?"...":a??0})]})}function Ye({title:t,rows:a,columns:s,loading:r}){return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"mb-3 font-heading text-lg font-bold sm:text-xl",children:t}),r?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading..."}):a.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No records."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[680px] text-left text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:s.map(n=>e.jsx("th",{className:"py-2 font-semibold",children:n.label},n.label))})}),e.jsx("tbody",{children:a.slice(0,200).map(n=>e.jsx("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:s.map(d=>e.jsx("td",{className:"py-2",children:d.render?d.render(n):n[d.key]??"-"},`${n.id}-${d.label}`))},n.id))})]})})]})}function ft(t){const a=Number(t||0);return`N${new Intl.NumberFormat("en-NG").format(a)}`}function jt(t){if(!t)return"-";const a=new Date(t);return Number.isNaN(a.getTime())?t:a.toLocaleString()}function fl(){var x;const[t,a]=l.useState(null),[s,r]=l.useState(!0),[n,d]=l.useState(""),[o,h]=l.useState("");l.useEffect(()=>{let i=!0;async function b(){r(!0),d("");try{const f=await Rs();if(!i)return;a(f)}catch(f){if(!i)return;f instanceof ke&&f.status===404?d("Admin overview endpoint not found (404). Restart the backend server so /api/v1/admin/overview is available."):d(f.message??"Failed to load admin payments")}finally{i&&r(!1)}}return b(),()=>{i=!1}},[]);const u=((x=t==null?void 0:t.payments)==null?void 0:x.totalAmount)??0,p=l.useMemo(()=>{var f;const i=((f=t==null?void 0:t.payments)==null?void 0:f.homeownerHistory)??[],b=o.trim().toLowerCase();return b?i.filter(j=>[j.userName,j.userEmail,j.plan,j.status].join(" ").toLowerCase().includes(b)):i},[t,o]),m=l.useMemo(()=>{var f;const i=((f=t==null?void 0:t.payments)==null?void 0:f.estateHistory)??[],b=o.trim().toLowerCase();return b?i.filter(j=>[j.userName,j.userEmail,j.plan,j.status].join(" ").toLowerCase().includes(b)):i},[t,o]);return e.jsxs(te,{title:"Payments",children:[n?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:n}):null,e.jsxs("section",{className:"grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[e.jsx(Ke,{label:"Total Payments",value:s?"...":Es(u)}),e.jsx(Ke,{label:"Homeowner Records",value:s?"...":p.length}),e.jsx(Ke,{label:"Estate Records",value:s?"...":m.length}),e.jsx(Ke,{label:"Last Updated",value:s?"...":"now"})]}),e.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Payment History"}),e.jsx("input",{value:o,onChange:i=>h(i.target.value),placeholder:"Search name, email, plan, status...",className:"w-full max-w-md rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900"})]}),s?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading payments..."}):e.jsxs("div",{className:"grid gap-4 xl:grid-cols-2",children:[e.jsx(ts,{title:"Homeowner Payments",rows:p}),e.jsx(ts,{title:"Estate Payments",rows:m})]})]})]})}function Ke({label:t,value:a}){return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsx("p",{className:"mt-2 text-2xl font-black",children:a??0})]})}function ts({title:t,rows:a}){return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/60 p-4 dark:border-slate-800 dark:bg-slate-950/30",children:[e.jsx("h3",{className:"mb-3 font-heading text-base font-bold",children:t}),a.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No records."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[640px] text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:[e.jsx("th",{className:"py-2 font-semibold",children:"User"}),e.jsx("th",{className:"py-2 font-semibold",children:"Email"}),e.jsx("th",{className:"py-2 font-semibold",children:"Plan"}),e.jsx("th",{className:"py-2 font-semibold",children:"Status"}),e.jsx("th",{className:"py-2 font-semibold",children:"Amount"}),e.jsx("th",{className:"py-2 font-semibold",children:"Date"})]})}),e.jsx("tbody",{children:a.slice(0,200).map(s=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-2 font-semibold",children:s.userName||"-"}),e.jsx("td",{className:"py-2",children:s.userEmail||"-"}),e.jsx("td",{className:"py-2",children:s.plan||"-"}),e.jsx("td",{className:"py-2",children:s.status||"-"}),e.jsx("td",{className:"py-2",children:Es(s.amount)}),e.jsx("td",{className:"py-2",children:jl(s.startsAt)})]},s.id))})]})})]})}function Es(t){const a=Number(t||0);return`N${new Intl.NumberFormat("en-NG").format(a)}`}function jl(t){if(!t)return"-";const a=new Date(t);return Number.isNaN(a.getTime())?t:a.toLocaleString()}function kl(){const[t,a]=l.useState([]),[s,r]=l.useState(!0),[n,d]=l.useState(""),[o,h]=l.useState(""),[u,p]=l.useState(""),[m,x]=l.useState("");l.useEffect(()=>{let f=!0;async function j(){r(!0),d("");try{const y=new URLSearchParams;u&&y.set("role",u),o.trim()&&y.set("q",o.trim());const C=await T(`/admin/users?${y.toString()}`);if(!f)return;a(Array.isArray(C==null?void 0:C.data)?C.data:[])}catch(y){if(!f)return;y instanceof ke&&y.status===404?d("Admin users endpoint not found (404). Restart backend so /api/v1/admin/users is available."):d(y.message??"Failed to load users")}finally{f&&r(!1)}}return j(),()=>{f=!1}},[o,u]);const i=l.useMemo(()=>t,[t]);async function b(f){x(f.id),d("");try{const j=await T(`/admin/users/${encodeURIComponent(f.id)}`,{method:"PATCH",body:JSON.stringify({isActive:!f.active})}),y=(j==null?void 0:j.data)??null;if(!y)return;a(C=>C.map(k=>k.id===y.id?{...k,active:y.active}:k))}catch(j){d(j.message??"Failed to update user")}finally{x("")}}return e.jsxs(te,{title:"Admin Users",children:[n?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:n}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Users"}),e.jsxs("div",{className:"flex w-full flex-col gap-2 sm:w-auto sm:flex-row sm:items-center",children:[e.jsxs("select",{value:u,onChange:f=>p(f.target.value),className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("option",{value:"",children:"All roles"}),e.jsx("option",{value:"homeowner",children:"Homeowner"}),e.jsx("option",{value:"estate",children:"Estate"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsx("input",{value:o,onChange:f=>h(f.target.value),placeholder:"Search name or email...",className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900 sm:w-72"})]})]}),s?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading users..."}):i.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No users found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[820px] text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:[e.jsx("th",{className:"py-2 font-semibold",children:"Name"}),e.jsx("th",{className:"py-2 font-semibold",children:"Email"}),e.jsx("th",{className:"py-2 font-semibold",children:"Role"}),e.jsx("th",{className:"py-2 font-semibold",children:"Active"}),e.jsx("th",{className:"py-2 font-semibold",children:"Created"}),e.jsx("th",{className:"py-2 font-semibold",children:"Action"})]})}),e.jsx("tbody",{children:i.slice(0,300).map(f=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-2 font-semibold",children:f.fullName}),e.jsx("td",{className:"py-2",children:f.email}),e.jsx("td",{className:"py-2",children:f.role}),e.jsx("td",{className:"py-2",children:f.active?"Yes":"No"}),e.jsx("td",{className:"py-2",children:wl(f.createdAt)}),e.jsx("td",{className:"py-2",children:e.jsx("button",{type:"button",disabled:m===f.id,onClick:()=>b(f),className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700 disabled:opacity-50",children:m===f.id?"Saving...":f.active?"Deactivate":"Activate"})})]},f.id))})]})})]})]})}function wl(t){if(!t)return"-";const a=new Date(t);return Number.isNaN(a.getTime())?t:a.toLocaleString()}function Nl(){const[t,a]=l.useState([]),[s,r]=l.useState(!0),[n,d]=l.useState(""),[o,h]=l.useState(""),[u,p]=l.useState("");l.useEffect(()=>{let x=!0;async function i(){r(!0),d("");try{const b=new URLSearchParams;o&&b.set("status",o);const f=await T(`/admin/sessions?${b.toString()}`);if(!x)return;a(Array.isArray(f==null?void 0:f.data)?f.data:[])}catch(b){if(!x)return;b instanceof ke&&b.status===404?d("Admin sessions endpoint not found (404). Restart backend so /api/v1/admin/sessions is available."):d(b.message??"Failed to load sessions")}finally{x&&r(!1)}}return i(),()=>{x=!1}},[o]);const m=l.useMemo(()=>{const x=u.trim().toLowerCase();return x?t.filter(i=>[i.id,i.qrId,i.homeId,i.doorId,i.homeownerId,i.visitor,i.status].join(" ").toLowerCase().includes(x)):t},[t,u]);return e.jsxs(te,{title:"Admin Sessions",children:[n?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:n}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Visitor Sessions"}),e.jsxs("div",{className:"flex w-full flex-col gap-2 sm:w-auto sm:flex-row sm:items-center",children:[e.jsxs("select",{value:o,onChange:x=>h(x.target.value),className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("option",{value:"",children:"All status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsx("input",{value:u,onChange:x=>p(x.target.value),placeholder:"Search session, visitor, ids...",className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900 sm:w-80"})]})]}),s?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading sessions..."}):m.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No sessions found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[980px] text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:[e.jsx("th",{className:"py-2 font-semibold",children:"Visitor"}),e.jsx("th",{className:"py-2 font-semibold",children:"Status"}),e.jsx("th",{className:"py-2 font-semibold",children:"QR"}),e.jsx("th",{className:"py-2 font-semibold",children:"Door"}),e.jsx("th",{className:"py-2 font-semibold",children:"Homeowner"}),e.jsx("th",{className:"py-2 font-semibold",children:"Started"}),e.jsx("th",{className:"py-2 font-semibold",children:"Ended"})]})}),e.jsx("tbody",{children:m.slice(0,300).map(x=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-2 font-semibold",children:x.visitor||"-"}),e.jsx("td",{className:"py-2",children:x.status}),e.jsx("td",{className:"py-2 font-mono text-xs",children:x.qrId}),e.jsx("td",{className:"py-2 font-mono text-xs",children:x.doorId}),e.jsx("td",{className:"py-2 font-mono text-xs",children:x.homeownerId}),e.jsx("td",{className:"py-2",children:ss(x.startedAt)}),e.jsx("td",{className:"py-2",children:ss(x.endedAt)})]},x.id))})]})})]})]})}function ss(t){if(!t)return"-";const a=new Date(t);return Number.isNaN(a.getTime())?t:a.toLocaleString()}function yl(){const[t,a]=l.useState(null),[s,r]=l.useState(!0),[n,d]=l.useState("");return l.useEffect(()=>{let o=!0;async function h(){r(!0),d("");try{const u=await T("/admin/config");if(!o)return;a((u==null?void 0:u.data)??null)}catch(u){if(!o)return;u instanceof ke&&u.status===404?d("Admin config endpoint not found (404). Restart backend so /api/v1/admin/config is available."):d(u.message??"Failed to load config")}finally{o&&r(!1)}}return h(),()=>{o=!1}},[]),e.jsxs(te,{title:"Admin Config",children:[n?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:n}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Runtime Config"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Read-only status of backend configuration."}),s?e.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Loading..."}):t?e.jsxs("div",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:[e.jsx(Ce,{label:"Environment",value:String(t.environment)}),e.jsx(Ce,{label:"Debug",value:t.debug?"true":"false"}),e.jsx(Ce,{label:"Paystack Configured",value:t.paystackConfigured?"true":"false"}),e.jsx(Ce,{label:"VAPID Configured",value:t.vapidConfigured?"true":"false"}),e.jsx(Ce,{label:"Admin Signup Key Set",value:t.adminSignupKeySet?"true":"false"}),e.jsx(Ce,{label:"Frontend Base URL",value:String(t.frontendBaseUrl),mono:!0})]}):e.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"No data."})]})]})}function Ce({label:t,value:a,mono:s}){return e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsx("p",{className:`mt-1 text-sm font-semibold ${s?"font-mono text-xs":""}`,children:a})]})}function vl(){const[t,a]=l.useState([]),[s,r]=l.useState(!0),[n,d]=l.useState("");return l.useEffect(()=>{let o=!0;async function h(){r(!0),d("");try{const u=await T("/admin/audit");if(!o)return;a(Array.isArray(u==null?void 0:u.data)?u.data:[])}catch(u){if(!o)return;u instanceof ke&&u.status===404?d("Admin audit endpoint not found (404). Restart backend so /api/v1/admin/audit is available."):d(u.message??"Failed to load audit logs")}finally{o&&r(!1)}}return h(),()=>{o=!1}},[]),e.jsxs(te,{title:"Admin Audit",children:[n?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:n}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Audit Log"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Records admin actions like user toggles, subscription activations, and message deletes."}),s?e.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Loading audit logs..."}):t.length===0?e.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"No audit entries yet."}):e.jsx("div",{className:"mt-4 overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[980px] text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:[e.jsx("th",{className:"py-2 font-semibold",children:"Time"}),e.jsx("th",{className:"py-2 font-semibold",children:"Action"}),e.jsx("th",{className:"py-2 font-semibold",children:"Resource"}),e.jsx("th",{className:"py-2 font-semibold",children:"Actor"}),e.jsx("th",{className:"py-2 font-semibold",children:"Meta"})]})}),e.jsx("tbody",{children:t.slice(0,300).map(o=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-2",children:Sl(o.createdAt)}),e.jsx("td",{className:"py-2 font-semibold",children:o.action}),e.jsxs("td",{className:"py-2",children:[e.jsx("span",{className:"font-mono text-xs",children:o.resourceType}),o.resourceId?e.jsx("span",{className:"ml-2 font-mono text-xs text-slate-500",children:o.resourceId}):null]}),e.jsx("td",{className:"py-2 font-mono text-xs",children:o.actorUserId||"-"}),e.jsx("td",{className:"py-2 font-mono text-xs text-slate-500",children:Cl(o.meta||"",120)})]},o.id))})]})})]})]})}function Sl(t){if(!t)return"-";const a=new Date(t);return Number.isNaN(a.getTime())?t:a.toLocaleString()}function Cl(t,a){const s=String(t??"");return s.length<=a?s:`${s.slice(0,a)}...`}function Al(){const{qrId:t}=$e(),a=me(),[s,r]=l.useState(!0),[n,d]=l.useState(""),[o,h]=l.useState(null),[u,p]=l.useState(""),[m,x]=l.useState({sending:!1,sent:!1,sessionId:"",status:""}),[i,b]=l.useState(0),[f,j]=l.useState({name:"",purpose:""});l.useEffect(()=>{let c=!0;return(async()=>{var E;r(!0),d("");try{const F=await T(`/qr/resolve/${t}`),L=(F==null?void 0:F.data)??F;if(!c)return;h(L),p(((E=L==null?void 0:L.doors)==null?void 0:E[0])??"")}catch(F){if(!c)return;d(F.message??"QR could not be resolved")}finally{c&&r(!1)}})(),()=>{c=!1}},[t]),l.useEffect(()=>{if(!m.sent)return;const c=setInterval(()=>b(P=>P+1),1e3);return()=>clearInterval(c)},[m.sent]),l.useEffect(()=>{if(!m.sent||!m.sessionId)return;let c=!0;const P=setInterval(async()=>{try{const E=await ur(m.sessionId);if(!c||!(E!=null&&E.status))return;x(F=>({...F,status:E.status}))}catch{}},3e3);return()=>{c=!1,clearInterval(P)}},[m.sent,m.sessionId]),l.useEffect(()=>{m.sessionId&&(m.status!=="approved"&&m.status!=="active"||a(`/session/${m.sessionId}/message`,{replace:!0}))},[a,m.sessionId,m.status]);const y=async c=>{c.preventDefault(),d(""),x(P=>({...P,sending:!0}));try{const P=await T("/visitor/request",{method:"POST",body:JSON.stringify({qrId:t,doorId:u,name:f.name,purpose:f.purpose})}),E=(P==null?void 0:P.data)??P;x({sending:!1,sent:!0,sessionId:(E==null?void 0:E.sessionId)??"",status:(E==null?void 0:E.status)??"pending"})}catch(P){x(E=>({...E,sending:!1})),d(P.message??"Request failed")}},C=(o==null?void 0:o.doorOptions)??[],k=C.find(c=>c.id===u)??null,I=l.useMemo(()=>`${Math.floor(i/60)}:${String(i%60).padStart(2,"0")}`,[i]);return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsxs("article",{className:"w-full max-w-lg rounded-3xl border border-slate-200 bg-white/90 p-7 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("h1",{className:"font-heading text-3xl font-bold",children:"Qring Visitor Access"}),e.jsxs("p",{className:"mt-2 text-sm text-slate-500",children:["QR ID: ",t]}),s?e.jsx("p",{className:"mt-5 text-sm",children:"Resolving secure QR route..."}):null,n?e.jsx("p",{className:"mt-5 text-sm text-danger",children:n}):null,!s&&o&&!m.sent?e.jsxs("form",{onSubmit:y,className:"mt-6 space-y-4",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Select the door and submit your entry request."}),e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium",children:"Your Name"}),e.jsx("input",{type:"text",value:f.name,onChange:c=>j(P=>({...P,name:c.target.value})),className:"w-full rounded-xl border border-slate-300 px-3 py-3 dark:border-slate-700 dark:bg-slate-900",placeholder:"e.g. John Doe",required:!0})]}),e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium",children:"Purpose of Visit"}),e.jsx("textarea",{value:f.purpose,onChange:c=>j(P=>({...P,purpose:c.target.value})),className:"w-full rounded-xl border border-slate-300 px-3 py-3 dark:border-slate-700 dark:bg-slate-900",placeholder:"e.g. Package delivery",rows:3,required:!0})]}),e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium",children:"Door"}),e.jsx("select",{value:u,onChange:c=>p(c.target.value),className:"w-full rounded-xl border border-slate-300 px-3 py-3 dark:border-slate-700 dark:bg-slate-900",children:(C.length?C:(o.doors??[]).map(c=>({id:c,name:c}))).map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))})]}),k?e.jsxs("p",{className:"text-xs text-slate-500",children:["Home: ",k.homeName||"N/A"," | Homeowner: ",k.homeownerName||"N/A"]}):null,e.jsx("button",{type:"submit",disabled:m.sending,className:"w-full rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:m.sending?"Submitting...":"Request Access"})]}):null,m.sent?e.jsxs("div",{className:"mt-6 rounded-2xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsx("p",{className:"text-sm font-semibold",children:m.status==="approved"?"Request approved":m.status==="rejected"?"Request rejected by homeowner":"Waiting for homeowner approval"}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Timer: ",I]}),m.sessionId&&(m.status==="approved"||m.status==="active")?e.jsx("p",{className:"mt-3 text-xs text-success",children:"Homeowner is ready. Opening session automatically..."}):null,m.status==="rejected"?e.jsx("p",{className:"mt-3 text-xs font-semibold text-danger",children:"You can retry another request or contact the resident."}):null]}):null]})})}const as={good:"bg-emerald-100 text-emerald-800",slow:"bg-amber-100 text-amber-800",reconnecting:"bg-slate-200 text-slate-700"},rs={good:"Good",slow:"Slow",reconnecting:"Reconnecting"};function At({quality:t="reconnecting",detail:a="",detailClassName:s="text-slate-500"}){const r=as[t]||as.reconnecting,n=rs[t]||rs.reconnecting;return e.jsxs("div",{className:"mt-2",children:[e.jsxs("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-semibold ${r}`,children:["Network: ",n]}),a?e.jsx("p",{className:`mt-1 text-xs ${s}`,children:a}):null]})}const ls=[{key:"message",label:"Messages"},{key:"audio",label:"Audio"},{key:"video",label:"Video"}];function Pl({sessionId:t,disableCallModes:a=!1,disabledCallTooltip:s="Audio and Video are disabled until the homeowner starts a call."}){const[r,n]=l.useState(""),d=l.useRef(null);l.useEffect(()=>()=>{d.current&&clearTimeout(d.current)},[]);function o(x){n(x),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{n("")},2e3)}function h(x){return x==="audio"||x==="video"}function u(x){return`block rounded-xl px-3 py-2 text-sm font-semibold transition ${x?"bg-slate-900 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`}function p(x){return`rounded-xl px-2 py-2 text-center text-xs font-semibold ${x?"bg-slate-900 text-white":"bg-slate-100 text-slate-700"}`}function m(x){return a&&h(x)}return e.jsxs(e.Fragment,{children:[e.jsx("aside",{className:"hidden lg:col-span-3 lg:block",children:e.jsxs("section",{className:"sticky top-6 rounded-3xl border border-slate-200/80 bg-white/85 p-4 shadow-soft backdrop-blur",children:[e.jsx("p",{className:"mb-2 text-xs font-semibold uppercase tracking-[0.15em] text-slate-500",children:"Session Pages"}),e.jsx("nav",{className:"space-y-2",children:ls.map(x=>m(x.key)?e.jsx("button",{type:"button",onClick:()=>o(x.key),className:"block w-full rounded-xl bg-slate-100 px-3 py-2 text-left text-sm font-semibold text-slate-400",children:x.label},x.key):e.jsx(et,{to:`/session/${t}/${x.key}`,className:({isActive:i})=>u(i),children:x.label},x.key))}),r?e.jsx("p",{className:"mt-3 rounded-xl bg-amber-100 px-3 py-2 text-xs text-amber-800",children:s}):null]})}),e.jsxs("nav",{className:"fixed bottom-3 left-1/2 z-30 w-[min(96vw,520px)] -translate-x-1/2 rounded-2xl border border-slate-200 bg-white/95 p-2 shadow-soft backdrop-blur lg:hidden",children:[e.jsx("div",{className:"grid grid-cols-3 gap-2",children:ls.map(x=>m(x.key)?e.jsx("button",{type:"button",onClick:()=>o(x.key),className:"rounded-xl bg-slate-100 px-2 py-2 text-center text-xs font-semibold text-slate-400",children:x.label},x.key):e.jsx(et,{to:`/session/${t}/${x.key}`,className:({isActive:i})=>p(i),children:x.label},x.key))}),r?e.jsx("p",{className:"mt-2 rounded-lg bg-amber-100 px-3 py-2 text-center text-[11px] text-amber-800",children:s}):null]})]})}function Pt({open:t,hasVideo:a,onAccept:s,onReject:r}){return t?e.jsx("div",{className:"fixed inset-0 z-[90] grid place-items-center bg-slate-950/70 px-4 backdrop-blur-sm",children:e.jsxs("section",{className:"w-full max-w-md rounded-3xl border border-white/15 bg-[#111b21] p-6 text-white shadow-soft",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.16em] text-[#00a884]",children:"Incoming Call"}),e.jsx("h2",{className:"mt-2 font-heading text-2xl font-black",children:a?"Homeowner is calling (Video)":"Homeowner is calling (Audio)"}),e.jsx("p",{className:"mt-2 text-sm text-slate-300",children:"Accept to join now, or reject to stay on your current page."}),e.jsxs("div",{className:"mt-5 grid grid-cols-2 gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"rounded-xl bg-[#00a884] px-4 py-3 text-sm font-semibold text-white transition hover:bg-[#019575]",children:"Accept"}),e.jsx("button",{type:"button",onClick:r,className:"rounded-xl bg-[#e53935] px-4 py-3 text-sm font-semibold text-white transition hover:bg-[#cd2f2b]",children:"Reject"})]})]})}):null}const Ms="qring_session_call_access",Is=new Set(["incoming","connected"]),Rl=5*60*1e3;function Ts(){return typeof window<"u"&&typeof window.sessionStorage<"u"}function Rt(){if(!Ts())return{};try{const t=window.sessionStorage.getItem(Ms),a=t?JSON.parse(t):{};return a&&typeof a=="object"?a:{}}catch{return{}}}function Et(t){if(Ts())try{window.sessionStorage.setItem(Ms,JSON.stringify(t))}catch{}}function kt(t,a="incoming"){if(!t||!Is.has(a))return;const s=Rt();s[t]={state:a,expiresAt:Date.now()+Rl},Et(s)}function wt(t){if(!t)return;const a=Rt();a[t]&&(delete a[t],Et(a))}function El(t){if(!t)return!1;const a=Rt(),s=a[t];return s?Is.has(s.state)&&Number(s.expiresAt)>Date.now()?!0:(delete a[t],Et(a),!1):!1}const Ml={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}],iceCandidatePoolSize:8},Il=5e3,ns=2;function Mt(t){var Lt;const a=localStorage.getItem("qring_access_token"),s=l.useMemo(()=>{try{return JSON.parse(localStorage.getItem("qring_user")||"null")}catch{return null}},[]),r=(s==null?void 0:s.fullName)||"Visitor",n=(s==null?void 0:s.role)==="homeowner",[d,o]=l.useState(!1),[h,u]=l.useState(!1),[p,m]=l.useState("idle"),[x,i]=l.useState(!1),[b,f]=l.useState(!1),[j,y]=l.useState(!1),[C,k]=l.useState([]),[I,c]=l.useState(""),[P,E]=l.useState("reconnecting"),[F,L]=l.useState("Connecting..."),[w,S]=l.useState("idle"),[$,q]=l.useState(null),[H,se]=l.useState({pending:!1,hasVideo:!1}),K=l.useRef(null),N=l.useRef(null),M=l.useRef(null),W=l.useRef(null),G=l.useRef(null),z=l.useRef(null),ae=l.useRef([]),R=l.useRef(!1),Z=l.useRef(null),Q=l.useRef("idle"),B=l.useRef(null),J=l.useRef(null),ue=l.useRef(0),v=l.useRef(new Set),U=l.useRef(!1),X=typeof window<"u"&&typeof window.RTCPeerConnection<"u",ee=typeof navigator<"u"&&typeof((Lt=navigator.mediaDevices)==null?void 0:Lt.getUserMedia)=="function",ie=typeof window>"u"?!0:window.isSecureContext,we=l.useMemo(()=>X?ie?ee?"":"Camera/microphone APIs are unavailable in this browser.":"Camera and microphone require HTTPS on network devices. Open the app with HTTPS or localhost.":"This browser does not support WebRTC calls.",[ie,ee,X]);l.useEffect(()=>{Q.current=p},[p]);function he(A){return(s==null?void 0:s.role)==="homeowner"?A==="homeowner":s!=null&&s.role?A===s.role:A!=="homeowner"}function Me(A){const _=(A==null?void 0:A.senderType)||null;return{id:(A==null?void 0:A.id)||null,text:(A==null?void 0:A.text)||"",displayName:(A==null?void 0:A.displayName)||"Participant",senderType:_,at:(A==null?void 0:A.at)||new Date().toISOString(),mine:_!==null?he(_):(A==null?void 0:A.displayName)===r}}function xe(){if(N.current)return N.current;const A=new RTCPeerConnection(Ml);return A.ontrack=_=>{var re;const V=(re=_.streams)==null?void 0:re[0];V&&(G.current&&(G.current.srcObject=V,G.current.play().catch(()=>{})),z.current&&(z.current.srcObject=V,z.current.muted=!1,z.current.volume=1,z.current.play().catch(()=>{})))},A.onicecandidate=_=>{!_.candidate||!K.current||K.current.emit("webrtc.ice",{sessionId:t,candidate:_.candidate})},A.onconnectionstatechange=()=>{const _=A.connectionState;_==="connected"&&(m("connected"),S("idle"),q(null),n||kt(t,"connected")),(_==="failed"||_==="disconnected"||_==="closed")&&(m("ended"),S("idle"),q(null),wt(t))},N.current=A,A}function Ne(A="Realtime connection is stable."){E("good"),L(A)}function de(A="Network is unstable. Trying to keep the session active."){E("slow"),L(A)}function ot(A="Reconnecting to session..."){E("reconnecting"),L(A)}function ye(){B.current&&(clearTimeout(B.current),B.current=null)}function It(){ye(),B.current=setTimeout(()=>{if(Q.current==="ringing"&&!(!J.current||!K.current)){if(ue.current>=ns){c("Network looks slow. Keep this page open while we continue trying."),de("Signaling is delayed. Keeping call setup in progress.");return}ue.current+=1,K.current.emit("webrtc.offer",{sessionId:t,sdp:J.current,retryAttempt:ue.current}),de("Retrying call request due to network delay."),c(`Network is slow. Retrying call request (${ue.current}/${ns})...`),It()}},Il)}async function it({video:A}){if(we)throw new Error(we);if(M.current){const be=!!A;if(M.current.getVideoTracks().length>0===be)return M.current;M.current.getTracks().forEach(O=>O.stop()),M.current=null}const _=await navigator.mediaDevices.getUserMedia({audio:!0,video:!!A});M.current=_,W.current&&(W.current.srcObject=_,W.current.muted=!0,W.current.play().catch(()=>{}));const V=xe();return V.getSenders().forEach(be=>{be.track&&V.removeTrack(be)}),_.getTracks().forEach(be=>V.addTrack(be,_)),y(!!A),m("ready"),_}async function Tt({video:A}){var _;try{if(c(""),S("preparing"),q(Date.now()),ue.current=0,ye(),we){c(we),S("idle"),q(null);return}if(!h){c("Joining session room..."),S("waiting");return}await it({video:A}),S("signaling");const V=xe();R.current=!0;const re=await V.createOffer();await V.setLocalDescription(re),(_=K.current)==null||_.emit("webrtc.offer",{sessionId:t,sdp:re}),J.current=re,m("ringing"),S("ringing"),It()}catch(V){c((V==null?void 0:V.message)??"Unable to start call"),S("idle"),q(null)}finally{R.current=!1}}function Ls(){if(!n){c("Only homeowner can start calls. Wait for incoming call.");return}Tt({video:!1})}function Ds(){if(!n){c("Only homeowner can start calls. Wait for incoming call.");return}Tt({video:!0})}async function qs(){var _;if(!H.pending)return;const A=Z.current;if(A!=null&&A.sdp)try{c(""),await it({video:H.hasVideo}),await dt(A.sdp);const V=xe(),re=await V.createAnswer();await V.setLocalDescription(re),(_=K.current)==null||_.emit("webrtc.answer",{sessionId:t,sdp:re}),m("connected"),S("idle"),q(null),ye(),kt(t,"connected"),se({pending:!1,hasVideo:!1}),Z.current=null}catch(V){c((V==null?void 0:V.message)??"Failed to accept incoming call")}}function $s(){var A;H.pending&&((A=K.current)==null||A.emit("session.control",{sessionId:t,action:"call_rejected"}),c("Incoming call rejected"),m("idle"),S("idle"),q(null),ye(),se({pending:!1,hasVideo:!1}),Z.current=null,wt(t))}async function dt(A){const _=xe();await _.setRemoteDescription(new RTCSessionDescription(A));for(const V of ae.current)try{await _.addIceCandidate(new RTCIceCandidate(V))}catch{}ae.current=[]}function Os(A){const _=(A||"").trim();if(!_||!K.current||!h)return!1;const V=`local-${Date.now()}-${Math.random().toString(36).slice(2,7)}`;return v.current.add(V),k(re=>[...re,Me({id:V,text:_,displayName:r,senderType:(s==null?void 0:s.role)||"visitor",at:new Date().toISOString()})]),K.current.emit("chat.message",{sessionId:t,text:_,displayName:r,clientId:V}),!0}function _s(){var _;if(!M.current)return;const A=!x;M.current.getAudioTracks().forEach(V=>{V.enabled=!A}),i(A),(_=K.current)==null||_.emit("session.control",{sessionId:t,action:A?"mute":"unmute"})}function Oe(A=!0){var _;A&&((_=K.current)==null||_.emit("session.control",{sessionId:t,action:"end"})),N.current&&(N.current.getSenders().forEach(V=>{V.track&&V.track.stop()}),N.current.close(),N.current=null),M.current&&(M.current.getTracks().forEach(V=>V.stop()),M.current=null),W.current&&(W.current.srcObject=null),G.current&&(G.current.srcObject=null),z.current&&(z.current.srcObject=null),m("ended"),S("idle"),q(null),y(!1),i(!1),f(!1),se({pending:!1,hasVideo:!1}),Z.current=null,ye(),J.current=null,ue.current=0,wt(t)}return l.useEffect(()=>{let A=!0;return(async()=>{try{const V=await hr(t);if(!A)return;k(V.map(re=>Me(re)))}catch{A&&c(V=>V||"Unable to load message history")}})(),()=>{A=!1}},[t]),l.useEffect(()=>{const A=vt(`${ce.socketUrl}${ce.signalingNamespace}`,{path:ce.socketPath,transports:["websocket","polling"],rememberUpgrade:!0,reconnection:!0,reconnectionAttempts:10,reconnectionDelay:400,reconnectionDelayMax:2e3,timeout:7e3,auth:a?{token:a}:void 0,withCredentials:!0});K.current=A,A.on("connect",()=>{o(!0),U.current=!0,ot("Connected to signaling. Joining session room..."),A.emit("session.join",{sessionId:t,displayName:r})}),A.on("disconnect",()=>{o(!1),u(!1),ot(U.current?"Connection lost. Reconnecting...":"Connecting...")}),A.on("connect_error",O=>{c((O==null?void 0:O.message)??"Socket connection failed"),de("Unable to reach signaling server. Retrying...")}),A.on("session.joined",O=>{O!=null&&O.sid&&(u(!0),c("Session connected"),Ne("Session connected."))}),A.on("session.participant_joined",async()=>{var O;if(!R.current&&(c("Participant joined"),M.current&&((O=N.current)==null?void 0:O.signalingState)==="stable"))try{R.current=!0;const Y=await N.current.createOffer();await N.current.setLocalDescription(Y),A.emit("webrtc.offer",{sessionId:t,sdp:Y}),m("ringing")}catch{}finally{R.current=!1}}),A.on("session.participant_left",()=>c("Participant left")),A.on("webrtc.offer",async O=>{var Y;if((O==null?void 0:O.sessionId)===t)try{const ne=typeof((Y=O==null?void 0:O.sdp)==null?void 0:Y.sdp)=="string"&&O.sdp.sdp.includes("m=video");if(!n){Z.current=O,se({pending:!0,hasVideo:ne}),m("incoming"),c(ne?"Incoming video call":"Incoming audio call"),kt(t,"incoming");return}await it({video:ne}),await dt(O.sdp);const pe=xe(),fe=await pe.createAnswer();await pe.setLocalDescription(fe),A.emit("webrtc.answer",{sessionId:t,sdp:fe}),m("connected"),S("idle"),q(null)}catch(ne){c((ne==null?void 0:ne.message)??"Failed to handle incoming call")}}),A.on("webrtc.answer",async O=>{if((O==null?void 0:O.sessionId)===t)try{await dt(O.sdp),m("connected"),S("idle"),q(null),ye(),J.current=null,ue.current=0,Ne("Call connected.")}catch(Y){c((Y==null?void 0:Y.message)??"Failed to establish call"),de("Call signaling is unstable.")}}),A.on("webrtc.ice",async O=>{if((O==null?void 0:O.sessionId)!==t)return;const Y=O==null?void 0:O.candidate;if(!Y)return;const ne=xe();if(ne.remoteDescription)try{await ne.addIceCandidate(new RTCIceCandidate(Y))}catch{}else ae.current.push(Y)}),A.on("chat.message",O=>{if((O==null?void 0:O.sessionId)!==t)return;Ne("Realtime messages synced.");const Y=Me(O);k(ne=>{const pe=O==null?void 0:O.clientId;return pe&&v.current.has(pe)?(v.current.delete(pe),ne.map(fe=>fe.id===pe?{...Y,id:Y.id||pe}:fe)):Y.id&&ne.some(fe=>fe.id&&fe.id===Y.id)?ne:[...ne,Y]})}),A.on("session.control",O=>{if((O==null?void 0:O.sessionId)!==t)return;const Y=O==null?void 0:O.action;Y==="mute"&&(f(!0),c("Other participant muted microphone")),Y==="unmute"&&(f(!1),c("Other participant unmuted microphone")),Y==="end"&&(c("Call ended by participant"),Oe(!1)),Y==="call_rejected"&&(c("Call rejected by visitor"),Oe(!1))});const _=A.io,V=()=>{ot("Reconnecting to signaling...")},re=()=>{Ne("Reconnected.")},be=()=>{de("Reconnect attempt failed. Retrying...")},ct=()=>{de("Could not reconnect automatically.")};return _.on("reconnect_attempt",V),_.on("reconnect",re),_.on("reconnect_error",be),_.on("reconnect_failed",ct),()=>{ye(),_.off("reconnect_attempt",V),_.off("reconnect",re),_.off("reconnect_error",be),_.off("reconnect_failed",ct),A.disconnect(),Oe(!1)}},[t,r,a,n]),{connected:d,joined:h,callState:p,muted:x,cameraOn:j,messages:C,status:I,networkQuality:P,networkDetail:F,callLaunchStage:w,callLaunchStartedAt:$,featureError:we,localVideoRef:W,remoteVideoRef:G,remoteAudioRef:z,localStreamRef:M,remoteMuted:b,incomingCall:H,canStartCall:n,sendMessage:Os,toggleMute:_s,endCall:Oe,startAudioCall:Ls,startVideoCall:Ds,acceptIncomingCall:qs,rejectIncomingCall:$s}}function Tl(){const{sessionId:t}=$e(),[a,s]=l.useState(""),{connected:r,joined:n,callState:d,messages:o,status:h,networkQuality:u,networkDetail:p,featureError:m,incomingCall:x,canStartCall:i,sendMessage:b,acceptIncomingCall:f,rejectIncomingCall:j}=Mt(t);function y(C){C.preventDefault(),b(a)&&s("")}return e.jsxs("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top_left,_#fef3c7_0,_#f8fafc_38%,_#e0f2fe_72%,_#dbeafe_100%)] p-4 text-slate-900",children:[e.jsxs("div",{className:"mx-auto w-full max-w-7xl py-6",children:[e.jsxs("header",{className:"mb-4 rounded-3xl border border-slate-200/80 bg-white/80 p-5 shadow-soft backdrop-blur",children:[e.jsx("h1",{className:"font-heading text-2xl font-black md:text-3xl",children:"Session Messages"}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Session ",t," | ",r?"Signaling Online":"Connecting"," |"," ",n?"Room Joined":"Waiting Room"," | Call: ",d]}),e.jsx(At,{quality:u,detail:p}),m?e.jsx("p",{className:"mt-2 text-sm text-rose-700",children:m}):null,h?e.jsx("p",{className:"mt-2 text-sm text-amber-700",children:h}):null]}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-12",children:[e.jsx(Pl,{sessionId:t,disableCallModes:!i&&!x.pending&&d!=="connected"}),e.jsx("section",{className:"space-y-4 lg:col-span-9",children:e.jsxs("article",{className:"rounded-3xl border border-slate-200/80 bg-white/90 p-4 shadow-soft",children:[e.jsx("h2",{className:"font-heading text-lg font-bold",children:"Conversation"}),e.jsxs("div",{className:"mt-3 max-h-[28rem] space-y-2 overflow-y-auto rounded-2xl bg-slate-100/90 p-3",children:[o.map(C=>e.jsxs("div",{className:`max-w-[85%] rounded-xl px-3 py-2 text-sm ${C.mine?"ml-auto bg-cyan-600 text-white":"bg-white text-slate-700"}`,children:[e.jsx("p",{className:"text-[11px] font-semibold",children:C.displayName}),e.jsx("p",{children:C.text})]},C.id||`${C.at}-${C.text}`)),o.length===0?e.jsx("p",{className:"text-xs text-slate-500",children:"No messages yet."}):null]}),e.jsxs("form",{onSubmit:y,className:"mt-3 flex gap-2",children:[e.jsx("input",{value:a,onChange:C=>s(C.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 text-sm",placeholder:"Type a message"}),e.jsx("button",{type:"submit",className:"rounded-xl bg-slate-900 px-4 py-3 text-sm font-semibold text-white",children:"Send"})]})]})})]})]}),e.jsx(Pt,{open:x.pending&&!i,hasVideo:x.hasVideo,onAccept:f,onReject:j})]})}function Ll(){const{sessionId:t}=$e(),{connected:a,joined:s,callState:r,muted:n,remoteMuted:d,localStreamRef:o,remoteAudioRef:h,status:u,networkQuality:p,networkDetail:m,featureError:x,callLaunchStage:i,callLaunchStartedAt:b,incomingCall:f,canStartCall:j,toggleMute:y,endCall:C,startAudioCall:k,acceptIncomingCall:I,rejectIncomingCall:c}=Mt(t),[P,E]=l.useState(0),F=j&&(i!=="idle"||r==="ringing"),L=F||r==="connected";return l.useEffect(()=>{if(!F||!b){E(0);return}const w=()=>{E(Math.max(0,Math.floor((Date.now()-b)/1e3)))};w();const S=setInterval(w,1e3);return()=>clearInterval(S)},[b,F]),e.jsxs("div",{className:"min-h-screen bg-[#0c1317] p-4 text-slate-100 sm:p-6",children:[e.jsxs("div",{className:"mx-auto w-full max-w-5xl py-3",children:[e.jsxs("header",{className:"mb-4 flex items-center justify-between rounded-3xl border border-white/10 bg-[#1f2c34] p-4 shadow-soft",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-heading text-2xl font-black",children:"Audio Call"}),e.jsxs("p",{className:"text-xs text-slate-400",children:["Session ",t]})]}),e.jsx(g,{to:"/dashboard",className:"rounded-xl bg-[#00a884] px-4 py-2 text-xs font-semibold text-white",children:"Go Back Home"})]}),e.jsxs("section",{className:"rounded-3xl border border-white/10 bg-[#111b21] p-6 shadow-soft",children:[e.jsx("audio",{ref:h,autoPlay:!0,playsInline:!0}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(os,{label:"Visitor",state:r==="connected"&&!d?"Speaking":"Listening",muted:d}),e.jsx(os,{label:"You",state:n?"Microphone muted":"Microphone active",muted:n})]}),e.jsxs("div",{className:"mt-4 rounded-2xl bg-[#1f2c34] p-4 text-center text-white",children:[e.jsx("p",{className:"text-sm font-semibold",children:r==="ringing"?"Calling...":"In audio room"}),e.jsx("p",{className:"mt-1 text-xs text-slate-300",children:o.current?"Audio stream connected":"Start call to connect microphone"}),e.jsxs("p",{className:"mt-1 text-xs text-slate-300",children:[a?"Signaling Online":"Connecting"," | ",s?"Room Joined":"Waiting Room"," | Call:"," ",r]})]}),x?e.jsx("p",{className:"mt-3 text-sm text-rose-400",children:x}):null,e.jsx(At,{quality:p,detail:m,detailClassName:"text-slate-300"}),u?e.jsx("p",{className:"mt-2 text-sm text-amber-300",children:u}):null,F?e.jsxs("section",{className:"mt-3 rounded-2xl border border-[#00a884]/35 bg-[#0f2428] p-4",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.14em] text-[#00a884]",children:"Call Setup In Progress"}),e.jsx("p",{className:"mt-1 text-sm text-slate-100",children:r==="ringing"?"Call request sent. Waiting for visitor to accept.":"Preparing call and connecting signaling services."}),e.jsxs("p",{className:"mt-1 text-xs text-slate-300",children:["Elapsed: ",P,"s"]}),P>=8?e.jsx("p",{className:"mt-2 rounded-xl bg-amber-500/20 px-3 py-2 text-xs text-amber-200",children:"Network looks slow. Keep this page open while we continue trying."}):null]}):null,e.jsxs("div",{className:"mt-5 grid grid-cols-3 gap-3",children:[e.jsx("button",{type:"button",onClick:k,disabled:!!x||!j||L,className:"rounded-xl bg-[#00a884] px-3 py-3 text-xs font-semibold text-white disabled:opacity-50",children:L?"Starting...":"Start"}),e.jsx("button",{type:"button",onClick:y,disabled:!o.current,className:"rounded-xl bg-[#8696a0] px-3 py-3 text-xs font-semibold text-white disabled:opacity-50",children:n?"Unmute":"Mute"}),e.jsx("button",{type:"button",onClick:C,className:"rounded-xl bg-[#e53935] px-3 py-3 text-xs font-semibold text-white",children:"End"})]})]})]}),e.jsx(Pt,{open:f.pending&&!j,hasVideo:f.hasVideo,onAccept:I,onReject:c})]})}function os({label:t,state:a,muted:s}){return e.jsxs("article",{className:"rounded-2xl bg-[#1f2c34] p-6 text-center",children:[e.jsx("div",{className:"mx-auto h-28 w-28 rounded-full bg-[#00a884]/20 p-2",children:e.jsx("div",{className:`grid h-full place-items-center rounded-full text-lg font-bold text-white ${s?"bg-[#8696a0]":"bg-[#00a884] animate-pulse"}`,children:t==="You"?"YOU":"VIS"})}),e.jsx("p",{className:"mt-4 text-base font-semibold",children:t}),e.jsx("p",{className:"mt-1 text-xs text-slate-300",children:a})]})}function Dl(){const{sessionId:t}=$e(),{connected:a,joined:s,callState:r,muted:n,remoteMuted:d,localStreamRef:o,status:h,networkQuality:u,networkDetail:p,featureError:m,callLaunchStage:x,callLaunchStartedAt:i,localVideoRef:b,remoteVideoRef:f,remoteAudioRef:j,incomingCall:y,canStartCall:C,toggleMute:k,endCall:I,startVideoCall:c,acceptIncomingCall:P,rejectIncomingCall:E}=Mt(t),[F,L]=l.useState(0),w=C&&(x!=="idle"||r==="ringing"),S=w||r==="connected";return l.useEffect(()=>{if(!w||!i){L(0);return}const $=()=>{L(Math.max(0,Math.floor((Date.now()-i)/1e3)))};$();const q=setInterval($,1e3);return()=>clearInterval(q)},[i,w]),e.jsxs("div",{className:"min-h-screen bg-[#0c1317] p-4 text-slate-100 sm:p-6",children:[e.jsxs("div",{className:"mx-auto w-full max-w-6xl py-3",children:[e.jsxs("header",{className:"mb-4 flex items-center justify-between rounded-3xl border border-white/10 bg-[#1f2c34] p-4 shadow-soft",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-heading text-2xl font-black",children:"Video Call"}),e.jsxs("p",{className:"text-xs text-slate-400",children:["Session ",t]})]}),e.jsx(g,{to:"/dashboard",className:"rounded-xl bg-[#00a884] px-4 py-2 text-xs font-semibold text-white",children:"Go Back Home"})]}),e.jsxs("section",{className:"rounded-3xl border border-white/10 bg-[#111b21] p-3 shadow-soft",children:[e.jsx("audio",{ref:j,autoPlay:!0,playsInline:!0}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("article",{className:"relative overflow-hidden rounded-2xl bg-black",children:[e.jsx("video",{ref:f,autoPlay:!0,playsInline:!0,className:"h-[300px] w-full rounded-2xl bg-slate-950 object-cover sm:h-[420px]"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent px-3 pb-2 pt-8",children:e.jsx("p",{className:"text-xs font-semibold text-white",children:"Visitor"})})]}),e.jsxs("article",{className:"relative overflow-hidden rounded-2xl bg-black",children:[e.jsx("video",{ref:b,autoPlay:!0,playsInline:!0,className:"h-[300px] w-full rounded-2xl bg-slate-900 object-cover sm:h-[420px]"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent px-3 pb-2 pt-8",children:e.jsx("p",{className:"text-xs font-semibold text-white",children:"You"})})]})]}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-[#1f2c34] px-4 py-3 text-xs text-slate-200",children:[a?"Signaling Online":"Connecting"," | ",s?"Room Joined":"Waiting Room"," | Call:"," ",r," | ",o.current?"Media ready":"Media not started"," | Remote mic:"," ",d?"Muted":"Active"]}),e.jsx(At,{quality:u,detail:p,detailClassName:"text-slate-300"}),m?e.jsx("p",{className:"mt-2 text-sm text-rose-700",children:m}):null,h?e.jsx("p",{className:"mt-2 text-sm text-amber-700",children:h}):null,w?e.jsxs("section",{className:"mt-3 rounded-2xl border border-[#00a884]/35 bg-[#0f2428] p-4",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.14em] text-[#00a884]",children:"Call Setup In Progress"}),e.jsx("p",{className:"mt-1 text-sm text-slate-100",children:r==="ringing"?"Call request sent. Waiting for visitor to accept.":"Preparing camera/microphone and signaling connection."}),e.jsxs("p",{className:"mt-1 text-xs text-slate-300",children:["Elapsed: ",F,"s"]}),F>=8?e.jsx("p",{className:"mt-2 rounded-xl bg-amber-500/20 px-3 py-2 text-xs text-amber-200",children:"Network looks slow. Keep this page open while the call request continues."}):null]}):null,e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[e.jsx("button",{type:"button",onClick:c,disabled:!!m||!C||S,className:"rounded-xl bg-[#00a884] px-3 py-3 text-xs font-semibold text-white disabled:opacity-50",children:S?"Starting...":"Start Video"}),e.jsx("button",{type:"button",onClick:k,disabled:!o.current,className:"rounded-xl bg-[#8696a0] px-3 py-3 text-xs font-semibold text-white disabled:opacity-50",children:n?"Unmute":"Mute"}),e.jsx("button",{type:"button",onClick:I,className:"rounded-xl bg-[#e53935] px-3 py-3 text-xs font-semibold text-white",children:"End"})]})]})]}),e.jsx(Pt,{open:y.pending&&!C,hasVideo:y.hasVideo,onAccept:P,onReject:E})]})}function ql(){return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-8 text-center shadow-soft dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h1",{className:"font-heading text-3xl font-bold",children:"Access Restricted"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"You do not have permission to view this route."}),e.jsx(g,{to:"/",className:"mt-5 inline-block rounded-xl bg-brand-500 px-5 py-2 text-sm font-semibold text-white",children:"Return Home"})]})})}function $l(){return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-8 text-center shadow-soft dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h1",{className:"font-heading text-3xl font-bold",children:"404"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Page not found."}),e.jsx(g,{to:"/",className:"mt-5 inline-block rounded-xl bg-brand-500 px-5 py-2 text-sm font-semibold text-white",children:"Go to Landing Page"})]})})}function Ol(){const{isAuthenticated:t}=ge(),a=qe(),s=!!localStorage.getItem("qring_access_token");return!t||!s?e.jsx(Ae,{to:"/login",replace:!0,state:{from:a}}):e.jsx(xs,{})}function Ze({allowedRoles:t}){const{user:a}=ge();return!(a!=null&&a.role)||!t.includes(a.role)?e.jsx(Ae,{to:"/unauthorized",replace:!0}):e.jsx(xs,{})}function _l(){try{return JSON.parse(localStorage.getItem("qring_user")||"null")}catch{return null}}function is({children:t}){const{sessionId:a}=$e(),s=_l();return(s==null?void 0:s.role)==="homeowner"||El(a)?t:e.jsx(Ae,{to:`/session/${a}/message`,replace:!0})}const ds={success:"border-emerald-200 bg-emerald-50 text-emerald-900",error:"border-rose-200 bg-rose-50 text-rose-900",warning:"border-amber-200 bg-amber-50 text-amber-900",info:"border-sky-200 bg-sky-50 text-sky-900"};function Ql(){const[t,a]=l.useState(null),s=l.useRef(null);l.useEffect(()=>{const n=d=>{const o=(d==null?void 0:d.detail)??{},h=String(o.message??"").trim();if(!h)return;const u=o.type??"info",p=o.title??(u==="success"?"Success":u==="error"?"Action failed":u==="warning"?"Attention":"Notice"),m=Number.isFinite(Number(o.duration))?Number(o.duration):3600;a({message:h,type:u,title:p}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>a(null),Math.max(1200,m))};return window.addEventListener("qring:toast",n),window.addEventListener("qring:flash",n),()=>{window.removeEventListener("qring:toast",n),window.removeEventListener("qring:flash",n),window.clearTimeout(s.current)}},[]);const r=l.useMemo(()=>ds[t==null?void 0:t.type]??ds.info,[t==null?void 0:t.type]);return t?e.jsx("div",{className:"pointer-events-none fixed inset-0 z-50 flex items-start justify-center px-4 pt-6",children:e.jsxs("div",{className:`pointer-events-auto w-full max-w-md rounded-2xl border p-4 shadow-2xl backdrop-blur-sm transition-all duration-300 ${r}`,role:"status","aria-live":"polite",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide opacity-80",children:t.title}),e.jsx("p",{className:"mt-1 text-sm font-medium",children:t.message})]})}):null}function Ul(){return e.jsx(ta,{children:e.jsx(Ya,{children:e.jsxs(Us,{children:[e.jsx(Ql,{}),e.jsx(Bl,{}),e.jsxs(Bs,{children:[e.jsx(D,{path:"/",element:e.jsx(ma,{})}),e.jsx(D,{path:"/about",element:e.jsx(ga,{})}),e.jsx(D,{path:"/pricing",element:e.jsx(ja,{})}),e.jsx(D,{path:"/contact",element:e.jsx(wa,{})}),e.jsx(D,{path:"/platform",element:e.jsx(Na,{})}),e.jsx(D,{path:"/security",element:e.jsx(ya,{})}),e.jsx(D,{path:"/api-docs",element:e.jsx(va,{})}),e.jsx(D,{path:"/company",element:e.jsx(Sa,{})}),e.jsx(D,{path:"/blog",element:e.jsx(Ca,{})}),e.jsx(D,{path:"/careers",element:e.jsx(Aa,{})}),e.jsx(D,{path:"/legal",element:e.jsx(Pa,{})}),e.jsx(D,{path:"/privacy",element:e.jsx(Ra,{})}),e.jsx(D,{path:"/terms",element:e.jsx(Ea,{})}),e.jsx(D,{path:"/compliance",element:e.jsx(Ma,{})}),e.jsx(D,{path:"/login",element:e.jsx(Za,{})}),e.jsx(D,{path:"/admin/login",element:e.jsx(Xa,{})}),e.jsx(D,{path:"/admin/signup",element:e.jsx(er,{})}),e.jsx(D,{path:"/signup",element:e.jsx(tr,{})}),e.jsx(D,{path:"/google-role",element:e.jsx(ar,{})}),e.jsx(D,{path:"/forgot-password",element:e.jsx(rr,{})}),e.jsx(D,{path:"/scan/:qrId",element:e.jsx(Al,{})}),e.jsx(D,{path:"/session/:sessionId",element:e.jsx(Ae,{to:"message",replace:!0})}),e.jsx(D,{path:"/session/:sessionId/message",element:e.jsx(Tl,{})}),e.jsx(D,{path:"/session/:sessionId/audio",element:e.jsx(is,{children:e.jsx(Ll,{})})}),e.jsx(D,{path:"/session/:sessionId/video",element:e.jsx(is,{children:e.jsx(Dl,{})})}),e.jsxs(D,{element:e.jsx(Ol,{}),children:[e.jsxs(D,{element:e.jsx(Ze,{allowedRoles:["homeowner","estate"]}),children:[e.jsx(D,{path:"/billing/paywall",element:e.jsx(Fr,{})}),e.jsx(D,{path:"/billing/callback",element:e.jsx(Wr,{})})]}),e.jsxs(D,{element:e.jsx(Ze,{allowedRoles:["homeowner"]}),children:[e.jsx(D,{path:"/dashboard/homeowner",element:e.jsx(Ae,{to:"/dashboard/homeowner/overview",replace:!0})}),e.jsx(D,{path:"/dashboard/homeowner/overview",element:e.jsx(Tr,{})}),e.jsx(D,{path:"/dashboard/homeowner/visits",element:e.jsx(Or,{})}),e.jsx(D,{path:"/dashboard/homeowner/messages",element:e.jsx(_r,{})}),e.jsx(D,{path:"/dashboard/homeowner/doors",element:e.jsx(Qr,{})}),e.jsx(D,{path:"/dashboard/homeowner/settings",element:e.jsx(Vr,{})})]}),e.jsxs(D,{element:e.jsx(Ze,{allowedRoles:["estate"]}),children:[e.jsx(D,{path:"/dashboard/estate",element:e.jsx(nl,{})}),e.jsx(D,{path:"/dashboard/estate/create",element:e.jsx(il,{})}),e.jsx(D,{path:"/dashboard/estate/doors",element:e.jsx(cl,{})}),e.jsx(D,{path:"/dashboard/estate/assign",element:e.jsx(xl,{})}),e.jsx(D,{path:"/dashboard/estate/invites",element:e.jsx(ml,{})}),e.jsx(D,{path:"/dashboard/estate/mappings",element:e.jsx(ul,{})}),e.jsx(D,{path:"/dashboard/estate/logs",element:e.jsx(hl,{})}),e.jsx(D,{path:"/dashboard/estate/plan",element:e.jsx(bl,{})}),e.jsx(D,{path:"/dashboard/estate/homes",element:e.jsx(gl,{})})]}),e.jsxs(D,{element:e.jsx(Ze,{allowedRoles:["admin"]}),children:[e.jsx(D,{path:"/dashboard/admin",element:e.jsx(pl,{})}),e.jsx(D,{path:"/dashboard/admin/users",element:e.jsx(kl,{})}),e.jsx(D,{path:"/dashboard/admin/sessions",element:e.jsx(Nl,{})}),e.jsx(D,{path:"/dashboard/admin/payments",element:e.jsx(fl,{})}),e.jsx(D,{path:"/dashboard/admin/config",element:e.jsx(yl,{})}),e.jsx(D,{path:"/dashboard/admin/audit",element:e.jsx(vl,{})})]})]}),e.jsx(D,{path:"/unauthorized",element:e.jsx(ql,{})}),e.jsx(D,{path:"/dashboard",element:e.jsx(Ae,{to:"/dashboard/homeowner/overview",replace:!0})}),e.jsx(D,{path:"*",element:e.jsx($l,{})})]})]})})})}function Bl(){const t=qe(),a=me();return l.useEffect(()=>{const r=new URLSearchParams(t.search).get("redirect");r&&(!r.startsWith("/")||r.startsWith("//")||a(r,{replace:!0}))},[t.search,a]),null}Nt.createRoot(document.getElementById("root")).render(e.jsx(Hs.StrictMode,{children:e.jsx(Ul,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.getRegistrations().then(t=>{t.forEach(a=>a.unregister())})});
