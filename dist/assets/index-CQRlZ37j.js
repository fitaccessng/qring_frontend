import{r as l,a as xs,L as p,u as Ht,b as ie,c as ye,N as Qe,d as ve,e as be,O as Ut,B as ms,R as hs,f as q,g as us}from"./router-DcMusYyV.js";import{i as bs,g as gs,s as ps,b as fs,G as js,a as Bt}from"./firebase-CdJF-HnM.js";import{l as dt}from"./socket-CyTcV1HU.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const d of n)if(d.type==="childList")for(const o of d.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const d={};return n.integrity&&(d.integrity=n.integrity),n.referrerPolicy&&(d.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?d.credentials="include":n.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(n){if(n.ep)return;n.ep=!0;const d=s(n);fetch(n.href,d)}})();var Vt={exports:{}},Be={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ks=l,ws=Symbol.for("react.element"),Ns=Symbol.for("react.fragment"),ys=Object.prototype.hasOwnProperty,vs=ks.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ss={key:!0,ref:!0,__self:!0,__source:!0};function Ft(t,a,s){var r,n={},d=null,o=null;s!==void 0&&(d=""+s),a.key!==void 0&&(d=""+a.key),a.ref!==void 0&&(o=a.ref);for(r in a)ys.call(a,r)&&!Ss.hasOwnProperty(r)&&(n[r]=a[r]);if(t&&t.defaultProps)for(r in a=t.defaultProps,a)n[r]===void 0&&(n[r]=a[r]);return{$$typeof:ws,type:t,key:d,ref:o,props:n,_owner:vs.current}}Be.Fragment=Ns;Be.jsx=Ft;Be.jsxs=Ft;Vt.exports=Be;var e=Vt.exports,ot={},ut=xs;ot.createRoot=ut.createRoot,ot.hydrateRoot=ut.hydrateRoot;const zt=l.createContext(null);function Cs({children:t}){const[a,s]=l.useState(()=>localStorage.getItem("qring_theme")??"light");l.useEffect(()=>{document.documentElement.classList.toggle("dark",a==="dark"),localStorage.setItem("qring_theme",a)},[a]);const r=l.useMemo(()=>({theme:a,isDark:a==="dark",toggleTheme:()=>s(n=>n==="dark"?"light":"dark")}),[a]);return e.jsx(zt.Provider,{value:r,children:t})}function ne(){const t=l.useContext(zt);if(!t)throw new Error("useTheme must be used inside ThemeProvider");return t}function ce(){const t=l.useRef(null),[a,s]=l.useState(!1);return l.useEffect(()=>{if(!t.current)return;const r=new IntersectionObserver(([n])=>s(n.isIntersecting),{threshold:.2});return r.observe(t.current),()=>r.disconnect()},[]),{ref:t,visible:a}}function re({className:t="",tone:a="dark",alt:s="Qring"}){const[r,n]=l.useState(!1),d=a==="light"?"invert":"";return r?e.jsx("span",{"aria-label":s,className:`grid place-items-center rounded-md bg-slate-900 text-white ${t}`,children:"Q"}):e.jsx("img",{src:"/qring_logo.png",alt:s,className:`${d} ${t}`,onError:()=>n(!0),draggable:!1})}const ge=t=>(t==null?void 0:t.replace(/\/+$/,""))??"",Wt=t=>/^https?:\/\//i.test(t??""),Gt=t=>/^[a-z0-9.-]+\.[a-z]{2,}(\/.*)?$/i.test(t??""),_e="https://qring-backend-1.onrender.com",bt=typeof window<"u"?`${_e}/api/v1`:`${_e}/api/v1`,gt=_e;function As(t){const a="".trim();return a?Wt(a)?ge(a):Gt(a)?ge(`https://${a}`):a.startsWith("/")&&typeof window<"u"?ge(`${window.location.origin}${a}`):bt:bt}function Ps(t){const a="".trim();return a?Wt(a)?ge(a):Gt(a)?ge(`https://${a}`):a.startsWith("/")&&typeof window<"u"?ge(`${window.location.origin}${a}`):gt:gt}const oe={apiBaseUrl:As(),socketUrl:Ps(),socketPath:"/socket.io",dashboardNamespace:"/realtime/dashboard",signalingNamespace:"/realtime/signaling"};class xe extends Error{constructor(a,s,r){super(a),this.name="ApiError",this.status=s,this.payload=r}}let je=null;function pt(t,a="error"){typeof window>"u"||window.dispatchEvent(new CustomEvent("qring:toast",{detail:{message:t,type:a}}))}async function Es(){if(je)return je;const t=localStorage.getItem("qring_refresh_token");if(!t)return null;je=(async()=>{const a=await fetch(`${oe.apiBaseUrl}/auth/refresh-token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})}),s=await a.text();let r=null;if(s)try{r=JSON.parse(s)}catch{r={raw:s}}if(!a.ok)return null;const n=(r==null?void 0:r.data)??r;return n!=null&&n.accessToken?(localStorage.setItem("qring_access_token",n.accessToken),n!=null&&n.refreshToken&&localStorage.setItem("qring_refresh_token",n.refreshToken),n.accessToken):null})();try{return await je}finally{je=null}}function Rs(){localStorage.removeItem("qring_access_token"),localStorage.removeItem("qring_refresh_token"),localStorage.removeItem("qring_user")}async function $(t,a={},s=0){const r=localStorage.getItem("qring_access_token"),n={"Content-Type":"application/json",...a.headers??{}};r&&(n.Authorization=`Bearer ${r}`);const d=await fetch(`${oe.apiBaseUrl}${t}`,{...a,headers:n}),o=await d.text();let g=null;if(o)try{g=JSON.parse(o)}catch{g={raw:o}}if(d.ok&&!g){const b=`API returned an empty/non-JSON success response. Check VITE_API_BASE_URL (${oe.apiBaseUrl}) and backend routing.`;throw pt(b,"error"),new xe(b,d.status,{raw:o})}if(!d.ok){if(d.status===401&&s===0){if(await Es())return $(t,a,1);Rs()}const b=(g==null?void 0:g.message)??(g==null?void 0:g.detail)??`Request failed (${d.status})`;throw pt(b,"error"),new xe(b,d.status,g)}return g}async function Ms(){const t=await $("/payment/subscription/me");return(t==null?void 0:t.data)??null}async function Jt(){const t=await $("/payment/plans");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function Is(){const t=await $("/payment/purposes");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function Ts(t){const a=await $("/payment/subscription/request",{method:"POST",body:JSON.stringify({plan:t})});return(a==null?void 0:a.data)??null}async function Ds(t,a){const s=await $("/payment/paystack/initialize",{method:"POST",body:JSON.stringify({plan:t,callbackUrl:a})});return(s==null?void 0:s.data)??null}async function Ls(t){const a=await $(`/payment/paystack/verify/${encodeURIComponent(t)}`);return(a==null?void 0:a.data)??null}const ft=[{title:"Home",href:"/"},{title:"About",href:"/about"},{title:"Pricing",href:"/pricing"},{title:"Contact",href:"/contact"}],ke=[{name:"Aisha Mohammed",role:"Estate Manager, Lekki Gardens",quote:"Reduced unauthorized entries by 87%. Our residents feel safer and love the convenience."},{name:"Chukwudi Okafor",role:"Homeowner, Abuja",quote:"No more missed deliveries. I approve visitors from anywhere, anytime. Game changer."},{name:"Jennifer Adebayo",role:"Property Developer",quote:"Deployed across 15 properties. The ROI is undeniable and tenants now expect this."}];function qs(){const{isDark:t,toggleTheme:a}=ne(),[s,r]=l.useState("monthly"),[n,d]=l.useState(0),[o,g]=l.useState(!1),[b,f]=l.useState([]),[c,m]=l.useState(""),i=ce(),h=ce(),u=ce(),k=ce(),y=ce();ce(),ce();const E=ce();return l.useEffect(()=>{const j=setInterval(()=>{d(I=>(I+1)%ke.length)},5e3);return()=>clearInterval(j)},[]),l.useEffect(()=>{let j=!0;async function I(){m("");try{const x=await Jt();if(!j)return;const R=$s(x);f(R)}catch(x){if(!j)return;f([]),m((x==null?void 0:x.message)??"Unable to load pricing plans.")}}return I(),()=>{j=!1}},[]),e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 sm:h-12 sm:w-12 dark:bg-white",children:e.jsx(re,{tone:"light",className:"h-6 w-6 sm:h-7 sm:w-7 dark:invert-0"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("p",{className:"text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsx("div",{className:"hidden items-center gap-8 md:flex lg:gap-10",children:ft.map(j=>e.jsx(p,{to:j.href,className:"text-sm font-semibold text-slate-600 transition hover:text-slate-900 dark:text-slate-300 dark:hover:text-white",children:j.title},j.href))}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(p,{to:"/login",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white transition hover:bg-slate-800 sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Login"}),e.jsx("button",{type:"button",onClick:()=>g(!o),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:o?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),o&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[ft.map(j=>e.jsx(p,{to:j.href,onClick:()=>g(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:j.title},j.href)),e.jsx(p,{to:"/login",onClick:()=>g(!1),className:"block rounded-lg bg-slate-900 px-3 py-2 text-base font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Login"})]})})]}),e.jsxs("main",{children:[e.jsx("section",{ref:i.ref,className:`mx-auto w-full max-w-7xl px-4 py-12 transition-all duration-700 sm:px-6 sm:py-16 lg:px-10 lg:py-24 ${i.visible?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:e.jsxs("div",{className:"grid gap-10 lg:grid-cols-2 lg:gap-14 xl:gap-20",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-3 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-slate-400"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-white"})]}),e.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-200",children:"Live System"})]}),e.jsxs("h2",{className:"mt-6 text-4xl font-black leading-tight tracking-tight sm:text-5xl lg:mt-8 lg:text-6xl xl:text-7xl",children:["Modern Door",e.jsx("br",{}),"Access Control"]}),e.jsx("p",{className:"mt-5 text-base leading-relaxed text-slate-600 sm:text-lg lg:mt-6 lg:text-xl dark:text-slate-300",children:"Qring replaces outdated doorbells with QR-powered realtime communication, visitor verification, and secure video sessions."}),e.jsxs("div",{className:"mt-8 flex flex-wrap gap-3 sm:gap-4 lg:mt-10",children:[e.jsx(p,{to:"/signup",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 sm:px-8 sm:py-4 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Start Free Trial"}),e.jsx(p,{to:"/contact",className:"rounded-lg border border-slate-200 bg-white px-6 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-50 sm:px-8 sm:py-4 dark:border-slate-700 dark:bg-slate-950 dark:text-slate-100 dark:hover:bg-slate-900",children:"Book Demo"})]}),e.jsxs("div",{className:"mt-10 grid grid-cols-3 gap-4 sm:gap-6 lg:mt-12",children:[e.jsx(Je,{value:"99.9%",label:"Uptime"}),e.jsx(Je,{value:"<1s",label:"Response"}),e.jsx(Je,{value:"24/7",label:"Support"})]})]}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-xl dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("div",{className:"border-b border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-slate-300 dark:bg-slate-500"}),e.jsx("div",{className:"h-3 w-3 rounded-full bg-slate-300 dark:bg-slate-500"}),e.jsx("div",{className:"h-3 w-3 rounded-full bg-slate-300 dark:bg-slate-500"}),e.jsx("span",{className:"ml-auto text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Live Activity"})]})}),e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ce,{title:"Visitor request at Gate A",time:"Just now",status:"active"}),e.jsx(Ce,{title:"Access approved",time:"2m ago",status:"success"}),e.jsx(Ce,{title:"Video call established",time:"4m ago",status:"complete"}),e.jsx(Ce,{title:"Session ended",time:"8m ago",status:"complete"})]}),e.jsxs("div",{className:"mt-5 rounded-lg border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:"Today's Activity"}),e.jsx("span",{className:"text-sm font-bold",children:"+12%"})]}),e.jsx("div",{className:"h-2 overflow-hidden rounded-full bg-slate-200 dark:bg-slate-700",children:e.jsx("div",{className:"h-full w-3/4 bg-slate-900 dark:bg-white"})})]})]})]})})]})}),e.jsx("section",{ref:h.ref,className:`border-y border-slate-200 bg-slate-50 py-12 transition-all duration-700 sm:py-16 lg:py-20 dark:border-slate-800 dark:bg-slate-900/40 ${h.visible?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-10",children:[e.jsxs("div",{className:"mb-10 text-center sm:mb-12 lg:mb-16",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:"Features"}),e.jsx("h2",{className:"mt-3 text-3xl font-black tracking-tight sm:text-4xl lg:mt-4 lg:text-5xl",children:"Everything You Need"})]}),e.jsxs("div",{className:"grid gap-4 sm:gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsx(he,{icon:"Alert",title:"Instant Notifications",description:"Get realtime alerts the moment someone scans your QR code."}),e.jsx(he,{icon:"Route",title:"Smart Routing",description:"Automatically direct visitors to the right person and door."}),e.jsx(he,{icon:"Secure",title:"Strong Security",description:"JWT auth, encrypted sessions, and strict permission controls."}),e.jsx(he,{icon:"Web",title:"No App Required",description:"Visitors use their browser with zero friction."}),e.jsx(he,{icon:"Call",title:"HD Video Calls",description:"Reliable WebRTC video and audio visitor sessions."}),e.jsx(he,{icon:"Logs",title:"Complete Analytics",description:"Track visitor patterns and security events over time."})]})]})}),e.jsxs("section",{ref:u.ref,className:`mx-auto w-full max-w-7xl px-4 py-12 transition-all duration-700 sm:px-6 sm:py-16 lg:px-10 lg:py-20 ${u.visible?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:[e.jsxs("div",{className:"mb-10 text-center sm:mb-12 lg:mb-16",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:"Process"}),e.jsx("h2",{className:"mt-3 text-3xl font-black tracking-tight sm:text-4xl lg:mt-4 lg:text-5xl",children:"How It Works"})]}),e.jsxs("div",{className:"grid gap-6 sm:gap-8 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(Ae,{number:"01",title:"Visitor Scans",description:"Visitor scans a unique QR code at the entry point."}),e.jsx(Ae,{number:"02",title:"System Validates",description:"Backend verifies code and checks routing permissions."}),e.jsx(Ae,{number:"03",title:"You Approve",description:"You receive an alert and approve or deny the request."}),e.jsx(Ae,{number:"04",title:"Access Granted",description:"Secure chat, voice, or video session opens immediately."})]})]}),e.jsx("section",{ref:k.ref,className:`border-y border-slate-200 bg-slate-50 py-12 transition-all duration-700 sm:py-16 lg:py-20 dark:border-slate-800 dark:bg-slate-900/40 ${k.visible?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-10",children:[e.jsxs("div",{className:"mb-10 text-center sm:mb-12",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:"Platform Statistics"}),e.jsx("h3",{className:"mt-3 text-3xl font-black tracking-tight sm:text-4xl lg:mt-4",children:"Trusted Worldwide"})]}),e.jsxs("div",{className:"grid gap-4 sm:gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(Pe,{value:"24,000+",label:"Active Users"}),e.jsx(Pe,{value:"1.2M",label:"Monthly Scans"}),e.jsx(Pe,{value:"94%",label:"Approval Rate"}),e.jsx(Pe,{value:"<1s",label:"Avg Response"})]})]})}),e.jsxs("section",{ref:y.ref,className:`mx-auto w-full max-w-7xl px-4 py-12 transition-all duration-700 sm:px-6 sm:py-16 lg:px-10 lg:py-20 ${y.visible?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:[e.jsxs("div",{className:"mb-10 text-center sm:mb-12",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:"Testimonials"}),e.jsx("h3",{className:"mt-3 text-3xl font-black tracking-tight sm:text-4xl lg:mt-4",children:"What Our Users Say"})]}),e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white p-6 shadow-lg sm:p-8 lg:p-12 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("div",{className:"mx-auto max-w-3xl text-center",children:[e.jsxs("p",{className:"text-lg font-medium leading-relaxed text-slate-700 sm:text-xl lg:text-2xl dark:text-slate-200",children:['"',ke[n].quote,'"']}),e.jsxs("div",{className:"mt-6 sm:mt-8",children:[e.jsx("p",{className:"text-lg font-bold sm:text-xl",children:ke[n].name}),e.jsx("p",{className:"mt-1 text-sm font-medium text-slate-600 dark:text-slate-300",children:ke[n].role})]})]}),e.jsx("div",{className:"mt-8 flex justify-center gap-2 sm:mt-10",children:ke.map((j,I)=>e.jsx("button",{type:"button",onClick:()=>d(I),className:`h-2 rounded-full transition-all ${I===n?"w-8 bg-slate-900 dark:bg-white":"w-2 bg-slate-300 dark:bg-slate-600"}`},I))})]})]}),e.jsx("section",{ref:E.ref,className:`border-y border-slate-200 bg-slate-900 py-12 transition-all duration-700 sm:py-16 lg:py-20 dark:border-slate-800 ${E.visible?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:e.jsxs("div",{className:"mx-auto w-full max-w-4xl px-4 text-center sm:px-6",children:[e.jsx("h2",{className:"text-3xl font-black tracking-tight text-white sm:text-4xl lg:text-5xl",children:"Ready To Get Started?"}),e.jsx("p",{className:"mt-4 text-base text-slate-300 sm:mt-6 sm:text-xl",children:"Join thousands using Qring. Start your free trial today with no credit card required."}),e.jsxs("div",{className:"mt-8 flex flex-wrap justify-center gap-3 sm:mt-10 sm:gap-4",children:[e.jsx(p,{to:"/signup",className:"rounded-lg bg-white px-6 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-100 sm:px-10 sm:py-4",children:"Start Free Trial"}),e.jsx(p,{to:"/contact",className:"rounded-lg border border-slate-700 bg-transparent px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 sm:px-10 sm:py-4",children:"Contact Sales"})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap justify-center gap-4 text-xs text-slate-400 sm:mt-8 sm:gap-6 sm:text-sm",children:[e.jsx("span",{children:"14-day free trial"}),e.jsx("span",{children:"No credit card needed"}),e.jsx("span",{children:"Cancel anytime"})]})]})})]}),e.jsx("footer",{className:"border-t border-slate-200 bg-white py-10 sm:py-12 dark:border-slate-800 dark:bg-slate-950",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-10",children:[e.jsxs("div",{className:"grid gap-8 sm:gap-10 md:grid-cols-2 lg:grid-cols-4 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("span",{className:"text-xl font-black",children:"Qring"})}),e.jsx("p",{className:"mt-4 text-sm text-slate-600 dark:text-slate-300",children:"Modern door access control for homes and estates."})]}),e.jsx(Ge,{title:"Product",links:[{to:"/platform",label:"Platform"},{to:"/pricing",label:"Pricing"},{to:"/security",label:"Security"},{to:"/api-docs",label:"API Docs"}]}),e.jsx(Ge,{title:"Company",links:[{to:"/about",label:"About"},{to:"/blog",label:"Blog"},{to:"/careers",label:"Careers"},{to:"/contact",label:"Contact"}]}),e.jsx(Ge,{title:"Legal",links:[{to:"/privacy",label:"Privacy"},{to:"/terms",label:"Terms"},{to:"/compliance",label:"Compliance"}]})]}),e.jsxs("div",{className:"mt-10 border-t border-slate-200 pt-6 text-center text-sm text-slate-600 dark:border-slate-800 dark:text-slate-300",children:[e.jsx("p",{children:"2026 Qring Technologies. All rights reserved."}),e.jsx("p",{className:"mt-1",children:"techspareng.online"})]})]})})]})}function Ge({title:t,links:a}){return e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wider",children:t}),e.jsx("ul",{className:"mt-4 space-y-2 text-sm",children:a.map(s=>e.jsx("li",{children:e.jsx(p,{to:s.to,className:"text-slate-600 transition hover:text-slate-900 dark:text-slate-300 dark:hover:text-white",children:s.label})},s.label))})]})}function Je({value:t,label:a}){return e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-black sm:text-3xl",children:t}),e.jsx("p",{className:"mt-1 text-[11px] font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:a})]})}function Ce({title:t,time:a,status:s}){const r={active:"border-slate-900 bg-slate-50 dark:border-slate-400 dark:bg-slate-800",success:"border-slate-300 bg-white dark:border-slate-700 dark:bg-slate-900",complete:"border-slate-200 bg-white dark:border-slate-700 dark:bg-slate-900"};return e.jsxs("div",{className:`flex items-center justify-between rounded-lg border p-3 ${r[s]}`,children:[e.jsx("p",{className:"text-sm font-semibold",children:t}),e.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:a})]})}function he({icon:t,title:a,description:s}){return e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-white p-6 transition hover:shadow-lg sm:p-8 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("div",{className:"mb-4 inline-flex rounded-md border border-slate-200 bg-slate-50 px-2 py-1 text-xs font-semibold uppercase tracking-wider dark:border-slate-700 dark:bg-slate-800",children:t}),e.jsx("h4",{className:"text-xl font-bold",children:a}),e.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:s})]})}function Ae({number:t,title:a,description:s}){return e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-white p-6 text-center dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full border-2 border-slate-900 bg-white dark:border-white dark:bg-slate-900",children:e.jsx("span",{className:"text-sm font-black sm:text-base",children:t})}),e.jsx("h4",{className:"text-lg font-bold",children:a}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:s})]})}function Pe({value:t,label:a}){return e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-white p-6 text-center sm:p-8 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("p",{className:"text-3xl font-black sm:text-4xl",children:t}),e.jsx("p",{className:"mt-2 text-sm font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:a})]})}function $s(t){var d;const r=(Array.isArray(t)?t:[]).filter(o=>o&&o.active!==!1).map(o=>{const g=Number(o.amount||0),b=g*12,f=o.maxDoors??null,c=o.maxQrCodes??null,m=[];return typeof f=="number"&&m.push(`Up to ${f} doors`),typeof c=="number"&&m.push(`Up to ${c} QR codes`),{id:o.id,name:o.name??o.id,monthly:g,yearly:b,note:m.length?m.join(" • "):"Flexible access control plan",highlight:!1}}),n=r.some(o=>o.id==="doors_40")?"doors_40":(d=r.find(o=>o.monthly>0))==null?void 0:d.id;return r.map(o=>({...o,highlight:o.id===n}))}const Os=[{title:"Security by design",text:"Every session, route, and permission is scoped with strict role boundaries and auditability."},{title:"Realtime reliability",text:"Qring is engineered for low-latency alerts, resilient socket delivery, and stable communication."},{title:"Scalable architecture",text:"Modular services support growth from single properties to large multi-estate deployments."}],Qs=[{year:"2024",event:"Qring concept and architecture blueprint defined."},{year:"2025",event:"Core QR routing and visitor flow launched in pilot communities."},{year:"2026",event:"Realtime session suite and estate operations dashboard released."}];function _s(){const{isDark:t,toggleTheme:a}=ne(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(p,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(re,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(p,{to:"/pricing",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"Pricing"}),e.jsx(p,{to:"/signup",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Get Started"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(p,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(p,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"}),e.jsx(p,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(p,{to:"/signup",onClick:()=>r(!1),className:"block rounded-lg bg-slate-900 px-3 py-2 text-base font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Get Started"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-7xl px-4 py-10 sm:px-6 sm:py-12 lg:px-10 lg:py-16",children:[e.jsxs("section",{className:"grid gap-8 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft sm:p-8 lg:grid-cols-2 dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:"About Qring"}),e.jsx("h1",{className:"mt-3 text-3xl font-black tracking-tight sm:text-4xl lg:text-5xl",children:"Building trusted access communication for modern communities"}),e.jsx("p",{className:"mt-4 text-sm leading-relaxed text-slate-600 sm:text-base dark:text-slate-300",children:"Qring replaces analog doorbell friction with a secure digital-first experience for homeowners, estate managers, and visitors."}),e.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 sm:text-base dark:text-slate-300",children:"We focus on clarity, speed, and control so communities can manage access confidently from anywhere."})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-5 sm:p-6 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:"Mission"}),e.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 sm:text-base dark:text-slate-300",children:"Make door access communication secure, instant, and auditable while preserving user privacy and operational boundaries."}),e.jsxs("div",{className:"mt-5 grid grid-cols-3 gap-3 text-center sm:gap-4",children:[e.jsx(Ye,{value:"150k+",label:"Sessions handled"}),e.jsx(Ye,{value:"98%",label:"Approval speed"}),e.jsx(Ye,{value:"24/7",label:"Platform ops"})]})]})]}),e.jsx("section",{className:"mt-8 grid gap-4 sm:mt-10 sm:gap-6 md:grid-cols-3",children:Os.map(n=>e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-white p-5 sm:p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h2",{className:"text-xl font-bold",children:n.title}),e.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:n.text})]},n.title))}),e.jsxs("section",{className:"mt-8 rounded-2xl border border-slate-200 bg-white p-6 sm:mt-10 sm:p-8 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h2",{className:"text-2xl font-black tracking-tight sm:text-3xl",children:"Journey"}),e.jsx("div",{className:"mt-5 grid gap-4 sm:mt-6 md:grid-cols-3",children:Qs.map(n=>e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-slate-50 p-5 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:n.year}),e.jsx("p",{className:"mt-2 text-sm font-medium leading-relaxed",children:n.event})]},n.year))})]}),e.jsxs("section",{className:"mt-8 rounded-2xl bg-slate-900 p-6 text-white sm:mt-10 sm:p-8 lg:flex lg:items-center lg:justify-between dark:bg-white dark:text-slate-900",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black tracking-tight sm:text-3xl",children:"Ready to deploy Qring?"}),e.jsx("p",{className:"mt-2 text-sm text-slate-300 dark:text-slate-600",children:"Talk to our team about your building or estate setup."})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-3 lg:mt-0",children:[e.jsx(p,{to:"/contact",className:"rounded-lg bg-white px-5 py-3 text-sm font-semibold text-slate-900 dark:bg-slate-900 dark:text-white",children:"Contact Sales"}),e.jsx(p,{to:"/",className:"rounded-lg border border-white px-5 py-3 text-sm font-semibold dark:border-slate-900",children:"Back Home"})]})]})]})]})}function Ye({value:t,label:a}){return e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("p",{className:"text-2xl font-black sm:text-3xl",children:t}),e.jsx("p",{className:"mt-1 text-[11px] font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:a})]})}const Hs="₦",Us=[{id:"free",name:"Free",monthly:0,yearly:0,bestFor:"Single homeowner getting started",features:["1 door","1 QR code","Realtime alerts","Basic access history"]},{id:"doors_20",name:"1-20 Doors",monthly:2e4,yearly:24e4,bestFor:"Small compounds",features:["Up to 20 doors","Up to 20 QR codes","Realtime approvals","Chat and calls"]},{id:"doors_40",name:"1-40 Doors",monthly:5e4,yearly:6e5,bestFor:"Growing estates",features:["Up to 40 doors","Up to 40 QR codes","Session logs","Priority support"],popular:!0},{id:"doors_80",name:"1-80 Doors",monthly:8e4,yearly:96e4,bestFor:"Large compounds",features:["Up to 80 doors","Up to 80 QR codes","Advanced analytics","Realtime controls"]},{id:"doors_100",name:"1-100 Doors",monthly:12e4,yearly:144e4,bestFor:"Enterprise estates",features:["Up to 100 doors","Up to 100 QR codes","Dedicated onboarding","Priority SLA"]}];function Bs(){const{isDark:t,toggleTheme:a}=ne(),[s,r]=l.useState("monthly"),[n,d]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(p,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(re,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(p,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(p,{to:"/contact",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Contact"}),e.jsx("button",{type:"button",onClick:()=>d(!n),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:n?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),n&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(p,{to:"/",onClick:()=>d(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(p,{to:"/about",onClick:()=>d(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(p,{to:"/contact",onClick:()=>d(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"}),e.jsx(p,{to:"/signup",onClick:()=>d(!1),className:"block rounded-lg bg-slate-900 px-3 py-2 text-base font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Get Started"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-7xl px-4 py-10 sm:px-6 sm:py-12 lg:px-10 lg:py-16",children:[e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-soft sm:p-8 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:"Pricing Plans"}),e.jsx("h1",{className:"mt-2 text-3xl font-black tracking-tight sm:text-4xl lg:text-5xl",children:"Paystack-ready pricing for every property size"}),e.jsx("p",{className:"mt-4 max-w-2xl text-sm leading-relaxed text-slate-600 sm:text-base dark:text-slate-300",children:"Choose a plan based on your number of doors. Free plan supports one door and one QR code."}),e.jsxs("div",{className:"mt-6 inline-flex rounded-lg border border-slate-200 bg-slate-50 p-1 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("button",{type:"button",onClick:()=>r("monthly"),className:`rounded-md px-4 py-2 text-sm font-semibold transition ${s==="monthly"?"bg-slate-900 text-white dark:bg-white dark:text-slate-900":"text-slate-600 dark:text-slate-300"}`,children:"Monthly"}),e.jsx("button",{type:"button",onClick:()=>r("yearly"),className:`rounded-md px-4 py-2 text-sm font-semibold transition ${s==="yearly"?"bg-slate-900 text-white dark:bg-white dark:text-slate-900":"text-slate-600 dark:text-slate-300"}`,children:"Yearly"})]})]}),e.jsx("section",{className:"mt-8 grid gap-4 sm:gap-6 md:grid-cols-2 xl:grid-cols-3",children:Us.map(o=>e.jsxs("article",{className:`rounded-xl border bg-white p-6 transition hover:shadow-xl sm:p-8 dark:bg-slate-900 ${o.popular?"border-slate-900 shadow-lg dark:border-white":"border-slate-200 dark:border-slate-700"}`,children:[o.popular?e.jsx("div",{className:"mb-4 inline-block rounded-full bg-slate-900 px-3 py-1 text-xs font-semibold uppercase tracking-wider text-white dark:bg-white dark:text-slate-900",children:"Popular"}):null,e.jsx("p",{className:"text-sm font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:o.name}),e.jsxs("p",{className:"mt-4 text-4xl font-black tracking-tight sm:text-5xl",children:[Hs,Vs(s==="monthly"?o.monthly:o.yearly)]}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-300",children:s==="monthly"?"per month":"per year"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:o.bestFor}),e.jsx("ul",{className:"mt-5 space-y-2 text-sm text-slate-700 dark:text-slate-200",children:o.features.map(g=>e.jsxs("li",{children:["- ",g]},g))}),e.jsxs(p,{to:"/billing/paywall",className:`mt-8 block rounded-lg py-3 text-center text-sm font-semibold transition ${o.popular?"bg-slate-900 text-white hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200":"border border-slate-200 text-slate-900 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-100 dark:hover:bg-slate-800"}`,children:["Choose ",o.name]})]},o.id))})]})]})}function Vs(t){return new Intl.NumberFormat("en-NG").format(t)}function Fs(){const{isDark:t,toggleTheme:a}=ne(),[s,r]=l.useState(!1),[n,d]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(p,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(re,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(p,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(p,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>d(!n),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:n?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),n&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(p,{to:"/",onClick:()=>d(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(p,{to:"/about",onClick:()=>d(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(p,{to:"/pricing",onClick:()=>d(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(p,{to:"/signup",onClick:()=>d(!1),className:"block rounded-lg bg-slate-900 px-3 py-2 text-base font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Get Started"})]})})]}),e.jsxs("main",{className:"mx-auto grid w-full max-w-7xl gap-6 px-4 py-10 sm:px-6 sm:py-12 lg:grid-cols-12 lg:px-10 lg:py-16",children:[e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-soft sm:p-8 lg:col-span-5 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:"Contact"}),e.jsx("h1",{className:"mt-3 text-3xl font-black tracking-tight sm:text-4xl",children:"Talk to the Qring team"}),e.jsx("p",{className:"mt-4 text-sm leading-relaxed text-slate-600 sm:text-base dark:text-slate-300",children:"Reach out for deployment planning, technical onboarding, or custom estate pricing."}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx(Ee,{label:"General",value:"hello@useqring.online"}),e.jsx(Ee,{label:"Support",value:"support@useqring.online"}),e.jsx(Ee,{label:"Sales",value:"sales@useqring.online"}),e.jsx(Ee,{label:"Response time",value:"Within 1 business day"})]})]}),e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-soft sm:p-8 lg:col-span-7 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h2",{className:"text-2xl font-black tracking-tight sm:text-3xl",children:"Send a message"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Tell us about your property setup and goals."}),e.jsxs("form",{onSubmit:o=>{o.preventDefault(),r(!0)},className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(we,{label:"First name",placeholder:"Your first name"}),e.jsx(we,{label:"Last name",placeholder:"Your last name"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(we,{label:"Email",type:"email",placeholder:"you@company.com"}),e.jsx(we,{label:"Phone",placeholder:"+234..."})]}),e.jsx(we,{label:"Company / Estate",placeholder:"Property name"}),e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-2 block font-semibold text-slate-700 dark:text-slate-200",children:"Message"}),e.jsx("textarea",{required:!0,rows:5,placeholder:"Share your requirements...",className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-3 outline-none ring-0 transition focus:border-slate-500 dark:border-slate-700 dark:bg-slate-950"})]}),s?e.jsx("p",{className:"rounded-lg border border-green-200 bg-green-50 px-3 py-2 text-sm text-green-700 dark:border-green-900 dark:bg-green-950/40 dark:text-green-300",children:"Message received. We will contact you shortly."}):null,e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{type:"submit",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Send Message"}),e.jsx(p,{to:"/",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Back Home"})]})]})]})]})]})}function we({label:t,placeholder:a,type:s="text"}){return e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-2 block font-semibold text-slate-700 dark:text-slate-200",children:t}),e.jsx("input",{required:!0,type:s,placeholder:a,className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-3 outline-none ring-0 transition focus:border-slate-500 dark:border-slate-700 dark:bg-slate-950"})]})}function Ee({label:t,value:a}){return e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:t}),e.jsx("p",{className:"mt-1 text-sm font-medium",children:a})]})}function zs(){const{isDark:t,toggleTheme:a}=ne(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(p,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(re,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(p,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(p,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(p,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(p,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(p,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(p,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-5xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:[e.jsxs("div",{className:"mb-16",children:[e.jsx("h1",{className:"text-4xl font-black tracking-tight sm:text-5xl",children:"Platform Overview"}),e.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300",children:"Qring is a modern smart access control platform that replaces traditional doorbells with QR-powered realtime communication and visitor verification."})]}),e.jsxs("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-xl font-bold",children:"QR Code Scanning"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:"Visitors scan unique QR codes at entry points to request access. Instant notifications reach homeowners with full context."})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Realtime Communication"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:"WebSocket-powered messaging, voice, and video calls connect homeowners and visitors instantly with no lag."})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Smart Routing"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:"Automatically direct visitors to the right person, door, or building based on QR code assignments."})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Session Management"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:"Create, approve, deny, or revoke access sessions with configurable time limits on-the-fly."})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Complete Audit Logs"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:"Every action is logged for compliance, security investigations, and operational transparency."})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Multi-Level Access"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:"Role-based access control for homeowners, estate managers, residents, and visitors."})]})]}),e.jsxs("div",{className:"mt-16",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"How It Works"}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-900 text-sm font-bold text-white dark:bg-white dark:text-slate-900",children:"1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"Visitor Scans QR Code"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Visitor scans a unique QR code at the entry point or gate"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-900 text-sm font-bold text-white dark:bg-white dark:text-slate-900",children:"2"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"System Validates & Notifies"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Qring backend verifies the code and sends instant notification to the homeowner"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-900 text-sm font-bold text-white dark:bg-white dark:text-slate-900",children:"3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"Homeowner Responds"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Homeowner approves or denies access from their phone or dashboard"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-900 text-sm font-bold text-white dark:bg-white dark:text-slate-900",children:"4"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"Session Established"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Secure chat, voice, or video session opens immediately for communication"})]})]})]})]}),e.jsxs("div",{className:"mt-16 flex flex-wrap justify-center gap-4",children:[e.jsx(p,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(p,{to:"/pricing",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"View Pricing"}),e.jsx(p,{to:"/signup",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Start Free Trial"})]})]})]})}function Ws(){const{isDark:t,toggleTheme:a}=ne(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(p,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(re,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(p,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(p,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(p,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(p,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(p,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(p,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-5xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:[e.jsxs("div",{className:"mb-16",children:[e.jsx("h1",{className:"text-4xl font-black tracking-tight sm:text-5xl",children:"Security & Privacy"}),e.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300",children:"Qring employs industry-standard security practices to protect your data, sessions, and access control."})]}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Encryption & Data Protection"}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"End-to-End Encryption"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"All realtime communication (messages, voice, video) is encrypted using WebRTC protocols and TLS 1.2+."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"JWT Authentication"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Sessions are secured with JSON Web Tokens with configurable expiration. Tokens are stored securely on client devices."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Password Security"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Passwords are hashed with bcrypt (10+ rounds). We enforce strong password policies and support two-factor authentication."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Database Encryption"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Sensitive data at rest is encrypted using AES-256 encryption. Database backups are regularly tested and encrypted."})]})]})]}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Access Control & Permissions"}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Role-Based Access Control (RBAC)"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Granular permissions for admins, estate managers, homeowners, and visitors. Each role has strict scope boundaries."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Session Scoping"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Each session is scoped to specific users, doors, and time windows. Access is automatically revoked on expiration."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Audit Logging"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Every authentication, authorization, and access event is logged with timestamp, user, IP, and outcome."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Rate Limiting"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"API endpoints are rate-limited to prevent brute-force attacks and abuse."})]})]})]}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Infrastructure & Compliance"}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"HTTPS/TLS"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"All traffic is encrypted in transit using HTTPS with TLS 1.2 or higher. Certificate pinning for mobile apps."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Secure Infrastructure"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Application runs on managed cloud infrastructure with DDoS protection, firewalls, and intrusion detection."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Regular Security Audits"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Third-party security assessments, penetration testing, and code reviews are conducted regularly."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Vulnerability Disclosure"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"We follow responsible disclosure practices. Report security issues to security@useqring.online"})]})]})]}),e.jsxs("div",{className:"mt-16 flex flex-wrap justify-center gap-4",children:[e.jsx(p,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(p,{to:"/compliance",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"View Compliance"})]})]})]})}function Gs(){const{isDark:t,toggleTheme:a}=ne(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(p,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(re,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(p,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(p,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(p,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(p,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(p,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(p,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsx("main",{className:"mx-auto w-full max-w-4xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-4 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-slate-400"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-white"})]}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-200",children:"Coming Soon"})]}),e.jsx("h1",{className:"mt-6 text-4xl font-black tracking-tight sm:text-5xl lg:text-6xl",children:"API Documentation"}),e.jsx("p",{className:"mt-6 text-lg leading-relaxed text-slate-600 dark:text-slate-300",children:"Comprehensive API reference, code examples, and integration guides are coming soon. Build with Qring."}),e.jsxs("div",{className:"mt-10 flex flex-wrap justify-center gap-4",children:[e.jsx(p,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(p,{to:"/contact",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Get Started"})]})]})})]})}function Js(){const{isDark:t,toggleTheme:a}=ne(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(p,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(re,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(p,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(p,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(p,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(p,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(p,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(p,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsx("main",{className:"mx-auto w-full max-w-4xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-4 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-slate-400"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-white"})]}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-200",children:"Coming Soon"})]}),e.jsx("h1",{className:"mt-6 text-4xl font-black tracking-tight sm:text-5xl lg:text-6xl",children:"Company"}),e.jsx("p",{className:"mt-6 text-lg leading-relaxed text-slate-600 dark:text-slate-300",children:"Learn more about Qring company information, team, and our mission. Detailed company page coming soon."}),e.jsxs("div",{className:"mt-10 flex flex-wrap justify-center gap-4",children:[e.jsx(p,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(p,{to:"/contact",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Contact Us"})]})]})})]})}function Ys(){const{isDark:t,toggleTheme:a}=ne(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(p,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(re,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(p,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(p,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(p,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(p,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(p,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(p,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsx("main",{className:"mx-auto w-full max-w-4xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-4 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-slate-400"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-white"})]}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-200",children:"Coming Soon"})]}),e.jsx("h1",{className:"mt-6 text-4xl font-black tracking-tight sm:text-5xl lg:text-6xl",children:"Blog"}),e.jsx("p",{className:"mt-6 text-lg leading-relaxed text-slate-600 dark:text-slate-300",children:"Insights, updates, and stories about smart access control. Our blog is coming soon."}),e.jsxs("div",{className:"mt-10 flex flex-wrap justify-center gap-4",children:[e.jsx(p,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(p,{to:"/contact",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Subscribe to Updates"})]})]})})]})}function Ks(){const{isDark:t,toggleTheme:a}=ne(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(p,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(re,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(p,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(p,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(p,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(p,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(p,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(p,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsx("main",{className:"mx-auto w-full max-w-4xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-4 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-slate-400"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-white"})]}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-200",children:"Coming Soon"})]}),e.jsx("h1",{className:"mt-6 text-4xl font-black tracking-tight sm:text-5xl lg:text-6xl",children:"Careers"}),e.jsx("p",{className:"mt-6 text-lg leading-relaxed text-slate-600 dark:text-slate-300",children:"Join our team and help build the future of access control. Career opportunities coming soon."}),e.jsxs("div",{className:"mt-10 flex flex-wrap justify-center gap-4",children:[e.jsx(p,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(p,{to:"/contact",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Get In Touch"})]})]})})]})}function Zs(){const{isDark:t,toggleTheme:a}=ne(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(p,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(re,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(p,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(p,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(p,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(p,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(p,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(p,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsx("main",{className:"mx-auto w-full max-w-4xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-4 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-slate-400"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-white"})]}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-200",children:"Coming Soon"})]}),e.jsx("h1",{className:"mt-6 text-4xl font-black tracking-tight sm:text-5xl lg:text-6xl",children:"Legal"}),e.jsx("p",{className:"mt-6 text-lg leading-relaxed text-slate-600 dark:text-slate-300",children:"Legal information and documentation coming soon. Check back for Privacy, Terms, and Compliance information."}),e.jsxs("div",{className:"mt-10 flex flex-wrap justify-center gap-4",children:[e.jsx(p,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(p,{to:"/contact",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Contact Us"})]})]})})]})}function Xs(){const{isDark:t,toggleTheme:a}=ne(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(p,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(re,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(p,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(p,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(p,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(p,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(p,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(p,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-5xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:[e.jsxs("div",{className:"mb-16",children:[e.jsx("h1",{className:"text-4xl font-black tracking-tight sm:text-5xl",children:"Privacy Policy"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Last updated: January 2025"}),e.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300",children:"We respect your privacy and are committed to protecting your personal data. This policy explains how we collect, use, and safeguard your information."})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"1. Information We Collect"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Account Information:"})," Name, email address, phone number, password, and profile details provided during registration."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Session Data:"})," QR code scans, access requests, visitor interactions, and device information for each session."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Communication Data:"})," Messages, voice recordings, and video data shared through our realtime communication features (encrypted end-to-end)."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Technical Data:"})," IP address, browser type, device information, and usage patterns for analytics and security."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Payment Information:"})," Billing address and payment method data (processed securely by third-party providers, we do not store full credit card numbers)."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"2. How We Use Your Information"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Provide and improve our smart access control platform and services"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Process transactions, payments, and account management"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Communicate service updates, security alerts, and support responses"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Generate audit logs for security, compliance, and troubleshooting"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Analyze usage patterns to enhance user experience and platform performance"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Comply with legal obligations and enforce our terms of service"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"3. Data Retention"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Active Account:"})," Your account information is retained for the duration of your subscription."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Audit Logs:"})," Session logs and access records are retained for 90 days to 1 year for security and compliance purposes."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Communication Data:"})," Realtime communication is not stored unless explicitly backed up by the user."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"After Account Deletion:"})," We delete or anonymize personal data within 30 days of account closure, except where required by law."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"4. Data Sharing & Third Parties"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"We do not sell, rent, or trade your personal data. We may share information only:"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• With service providers (hosting, payment processing, analytics) under data processing agreements"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• When required by law, court order, or government authority"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• To protect against security threats or fraud (with minimal data shared)"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• In case of business restructuring or acquisition (with privacy terms maintained)"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"5. Your Rights & Controls"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Access:"})," You can view and download your personal data through account settings."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Correction:"})," Update or correct account information in your profile at any time."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Deletion:"})," Request deletion of your account and associated personal data (some data retained for audit/legal purposes)."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Opt-Out:"})," Disable marketing emails and notifications through account preferences."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"GDPR Rights:"})," If you're in the EU, you have additional rights under GDPR. Contact us for a formal data request."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"6. Cookies & Tracking"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"We use cookies and localStorage to maintain sessions, remember preferences, and analyze platform usage. You can control cookie settings in your browser."}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"We use Google Analytics for aggregated usage insights. No personally identifiable information is sent to Google."})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"7. Security Measures"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Data encrypted in transit (HTTPS/TLS 1.2+) and at rest (AES-256)"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Passwords hashed with bcrypt to prevent unauthorized access"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• End-to-end encryption for realtime communications"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Regular security audits and penetration testing"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Multi-factor authentication available for enhanced account protection"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"8. Children's Privacy"}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"Our service is not intended for users under 18. We do not knowingly collect data from minors. If we discover such data, we delete it promptly."})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"9. Policy Changes"}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"We may update this policy periodically. Significant changes will be notified via email or in-app notice. Continued use after changes constitutes acceptance."})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"10. Contact Us"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Privacy Questions:"})," privacy@useqring.online"]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"GDPR/Data Requests:"})," dpo@useqring.online"]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Security Concerns:"})," security@useqring.online"]})]})]})]}),e.jsxs("div",{className:"mt-16 flex flex-wrap justify-center gap-4 border-t border-slate-200 pt-8 dark:border-slate-800",children:[e.jsx(p,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(p,{to:"/terms",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"View Terms"})]})]})]})}function ea(){const{isDark:t,toggleTheme:a}=ne(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(p,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(re,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(p,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(p,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(p,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(p,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(p,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(p,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-5xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:[e.jsxs("div",{className:"mb-16",children:[e.jsx("h1",{className:"text-4xl font-black tracking-tight sm:text-5xl",children:"Terms of Service"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Last updated: January 2025"}),e.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300",children:"These Terms of Service govern your use of the Qring platform. By accessing or using our service, you agree to be bound by these terms."})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"1. Acceptance of Terms"}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"By accessing, using, or registering with Qring, you agree to comply with these Terms of Service and all applicable laws and regulations. If you do not agree with any part of these terms, you may not use our service."})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"2. Service Description"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"Qring is a smart access control platform that enables estate managers and homeowners to manage visitor access through QR codes, realtime communication, and digital session management."}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"We reserve the right to modify, suspend, or discontinue service at any time with reasonable notice."})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"3. User Accounts & Responsibilities"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Registration:"})," You must provide accurate, complete information during registration and keep it updated."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Account Security:"})," You are responsible for maintaining the confidentiality of your password. You agree not to share account credentials and are liable for all activities under your account."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Lawful Use:"})," You must use the service only for lawful purposes and in accordance with these terms."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"4. User Conduct Restrictions"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"You agree NOT to:"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Attempt unauthorized access or hack the platform"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Transmit malware, viruses, or malicious code"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Use the service for illegal activities or harassment"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Violate intellectual property rights of others"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Reverse engineer, decompile, or attempt to derive source code"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Spam, abuse, or harass other users"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"5. Intellectual Property Rights"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"All content, features, and functionality of Qring are owned by Qring or its licensors, including logos, trademarks, and software code. You may not reproduce, modify, or distribute any content without express written permission."}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"You retain ownership of content you create and upload, but grant us a license to use, display, and process it for service delivery."})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"6. Payment & Billing"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Fees:"})," Subscription fees are as listed on the pricing page and are subject to change with 30 days notice."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Billing:"})," You authorize us to charge your payment method on the billing date. Failed payments may result in service suspension."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Refunds:"})," Refunds are available within 30 days of payment for first-time subscribers. Other refunds are at our discretion."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"7. Limitation of Liability"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Disclaimer:"}),' The service is provided "as-is" without warranties of any kind, express or implied.']}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Limitation:"})," To the maximum extent permitted by law, Qring shall not be liable for indirect, incidental, special, consequential, or punitive damages."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Maximum Liability:"})," Our total liability to you shall not exceed the amount you paid in the 12 months preceding the claim."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"8. Indemnification"}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"You agree to indemnify, defend, and hold harmless Qring from any claims, damages, losses, or expenses arising from your violation of these terms, your use of the service, or your infringement of any rights."})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"9. Termination"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Account Termination:"})," You may terminate your account anytime through account settings. No refund of unused subscription fees will be issued."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Our Right to Terminate:"})," We may terminate or suspend your account for violation of these terms, non-payment, or abuse of service."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"10. Dispute Resolution"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Governing Law:"})," These terms are governed by applicable international law."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Arbitration:"})," Disputes shall be resolved through informal resolution or binding arbitration, not court proceedings."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"11. Modifications to Terms"}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"We may update these terms at any time. Major changes will be notified via email or in-app notice. Your continued use after changes constitutes acceptance."})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"12. Contact for Disputes"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Support:"})," support@useqring.online"]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Legal Issues:"})," legal@useqring.online"]})]})]})]}),e.jsxs("div",{className:"mt-16 flex flex-wrap justify-center gap-4 border-t border-slate-200 pt-8 dark:border-slate-800",children:[e.jsx(p,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(p,{to:"/privacy",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"View Privacy"})]})]})]})}function ta(){const{isDark:t,toggleTheme:a}=ne(),[s,r]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(p,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(re,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(p,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(p,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(p,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(p,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(p,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(p,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-5xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:[e.jsxs("div",{className:"mb-16",children:[e.jsx("h1",{className:"text-4xl font-black tracking-tight sm:text-5xl",children:"Compliance & Standards"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Last updated: January 2025"}),e.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300",children:"Qring adheres to stringent compliance requirements and best practices for data protection, security, and operational integrity."})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Data Protection Regulations"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"GDPR Compliance"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Qring complies with the General Data Protection Regulation (GDPR). We honor user rights including data access, correction, deletion, and portability. Our Data Processing Agreements are available upon request."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"CCPA & Privacy Laws"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"For users in California and other jurisdictions with privacy laws, we provide transparency about personal information, allow opt-out options, and facilitate data rights requests."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"UK Data Protection Act (UKDPA)"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Qring honors obligations under the UK Data Protection Act 2018 and recognizes all GDPR rights for UK-based users."})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Security Frameworks"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"NIST Cybersecurity Framework"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Our security practices align with NIST guidelines for identifying, protecting, detecting, responding to, and recovering from cybersecurity incidents."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"OWASP Top 10"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Qring development follows OWASP Top 10 security recommendations to prevent common application vulnerabilities including injection, broken authentication, and sensitive data exposure."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Encryption Standards"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"All data is encrypted using industry-standard protocols: TLS 1.2+ for transport, AES-256 for data at rest, and WebRTC for realtime communications."})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Compliance Certifications"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Security Audits"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Qring undergoes regular third-party security assessments and penetration testing to identify and remediate vulnerabilities."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Incident Response Plan"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"We maintain a documented incident response plan to detect and respond to security incidents within acceptable timeframes and notify affected users."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Business Continuity"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Qring maintains backup and disaster recovery procedures with regular testing to ensure service availability and data integrity."})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Access Control & Authentication"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Role-Based Access Control (RBAC)"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Granular permissions ensure users only access data and features required for their role. Regular access reviews are conducted."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Multi-Factor Authentication"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"MFA is available for all accounts and required for administrative functions to prevent unauthorized access."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Session Management"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Sessions are scoped, time-limited, and automatically revoked. All session events are logged for audit purposes."})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Audit & Logging"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Comprehensive Logging:"})," All authentication, authorization, and data access events are logged with timestamps, user identifiers, IP addresses, and action details."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Log Retention:"})," Audit logs are retained for 12 months and protected against tampering and unauthorized access."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Log Review:"})," Logs are regularly reviewed for suspicious activities and security events."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Third-Party Security"}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"All third-party service providers are vetted for security and compliance. Data Processing Agreements are in place for any processor handling personal data."})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Compliance Contact"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Compliance Officer:"})," compliance@useqring.online"]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Data Protection Officer:"})," dpo@useqring.online"]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Security Team:"})," security@useqring.online"]})]})]})]}),e.jsxs("div",{className:"mt-16 flex flex-wrap justify-center gap-4 border-t border-slate-200 pt-8 dark:border-slate-800",children:[e.jsx(p,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(p,{to:"/security",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"View Security"})]})]})]})}function pe({title:t,subtitle:a,children:s}){return e.jsxs("div",{className:"w-full max-w-md rounded-3xl border border-slate-200 bg-white/90 p-7 shadow-soft backdrop-blur dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"mb-5 flex items-center gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(re,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500",children:"Qring"}),e.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Secure Access"})]})]}),e.jsx("h1",{className:"font-heading text-3xl font-bold",children:t}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:a}),e.jsx("div",{className:"mt-6",children:s})]})}const sa={apiKey:"AIzaSyAg0TIlKOOk3AcDn-VGh9HlDQi2eDjk088",authDomain:"qring-7ced9.firebaseapp.com",projectId:"qring-7ced9",storageBucket:"qring-7ced9.firebasestorage.app",messagingSenderId:"103048317220",appId:"1:103048317220:web:72f9667db6daae62504bb1",measurementId:"G-3B48QKGTH7"},aa=bs(sa),ct=gs(aa);ps(ct,fs).catch(t=>{console.error("Error setting Firebase persistence:",t)});const Ve=new js;Ve.addScope("profile");Ve.addScope("email");async function Yt(){try{const a=(await Bt(ct,Ve)).user,s=await a.getIdToken(!0);return await $("/auth/google-signin",{method:"POST",body:JSON.stringify({idToken:s,email:a.email,displayName:a.displayName,photoURL:a.photoURL})})}catch(t){throw t.code==="auth/popup-closed-by-user"?new Error("Sign-in popup was closed"):t.code==="auth/popup-blocked"?new Error("Sign-in popup was blocked. Please allow popups."):new Error(t.message||"Google sign-in failed")}}async function Kt(t="homeowner"){try{const a=(await Bt(ct,Ve)).user,s=await a.getIdToken(!0),r=await $("/auth/google-signup",{method:"POST",body:JSON.stringify({idToken:s,email:a.email,displayName:a.displayName,photoURL:a.photoURL,role:t})}),n=(r==null?void 0:r.data)??r;if(!(n!=null&&n.accessToken)&&!(n!=null&&n.user))throw new Error("Google signup API returned no auth payload. Check VITE_API_BASE_URL and backend /auth/google-signup deployment.");return r}catch(a){throw a.code==="auth/popup-closed-by-user"?new Error("Sign-up popup was closed"):a.code==="auth/popup-blocked"?new Error("Sign-up popup was blocked. Please allow popups."):new Error(a.message||"Google sign-up failed")}}async function Zt(t){return $("/auth/login",{method:"POST",body:JSON.stringify(t)})}async function ra(){return Yt()}async function la(t){return Kt(t)}async function na(){return Yt()}async function oa(){return Kt("admin")}async function ia(t){return $("/auth/signup",{method:"POST",body:JSON.stringify(t)})}async function da(t){return $("/auth/admin-signup",{method:"POST",body:JSON.stringify(t)})}async function ca(t){return $("/auth/forgot-password",{method:"POST",body:JSON.stringify(t)})}async function xa(t){return $("/auth/reset-password",{method:"POST",body:JSON.stringify(t)})}async function He(t){return $("/auth/logout",{method:"POST",body:JSON.stringify(t)})}async function ma(t){return $("/auth/change-password",{method:"POST",body:JSON.stringify(t)})}const Xt=l.createContext(null);function ha(t,a){const s=localStorage.getItem(t);if(!s)return a;try{return JSON.parse(s)}catch{return a}}function ua(t){if(!t||typeof t!="string"||!t.includes("."))return null;try{const s=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=s.padEnd(s.length+(4-s.length%4)%4,"=");return JSON.parse(atob(r))}catch{return null}}function Ke(t){const a=(t==null?void 0:t.data)??t,s=(a==null?void 0:a.data)??a,r=(s==null?void 0:s.accessToken)??(a==null?void 0:a.accessToken)??"",n=(s==null?void 0:s.refreshToken)??(a==null?void 0:a.refreshToken)??"",d=ua(r),o=(d==null?void 0:d.role)??null,g=(s==null?void 0:s.user)??(a==null?void 0:a.user)??null,b=g?{...g,role:g.role??g.userRole??o??null}:o?{role:o}:null;return{accessToken:r,refreshToken:n,user:b}}function ba({children:t}){const[a,s]=l.useState(()=>localStorage.getItem("qring_access_token")??""),[r,n]=l.useState(()=>localStorage.getItem("qring_access_token")?ha("qring_user",null):null),[d,o]=l.useState(!1),g=async u=>{o(!0);try{const k=await Zt(u),y=Ke(k);return y.accessToken&&(localStorage.setItem("qring_access_token",y.accessToken),s(y.accessToken)),y.refreshToken&&localStorage.setItem("qring_refresh_token",y.refreshToken),y.user&&(localStorage.setItem("qring_user",JSON.stringify(y.user)),n(y.user)),y}finally{o(!1)}},b=async u=>{o(!0);try{return await ia(u)}finally{o(!1)}},f=async()=>{o(!0);try{const u=await ra(),k=Ke(u);return k.accessToken&&(localStorage.setItem("qring_access_token",k.accessToken),s(k.accessToken)),k.refreshToken&&localStorage.setItem("qring_refresh_token",k.refreshToken),k.user&&(localStorage.setItem("qring_user",JSON.stringify(k.user)),n(k.user)),k}finally{o(!1)}},c=async u=>{var k;o(!0);try{const y=await la(u),E=Ke(y);return!((k=E.user)!=null&&k.role)&&E.accessToken&&(E.user={...E.user??{},role:u}),E.accessToken&&(localStorage.setItem("qring_access_token",E.accessToken),s(E.accessToken)),E.refreshToken&&localStorage.setItem("qring_refresh_token",E.refreshToken),E.user&&(localStorage.setItem("qring_user",JSON.stringify(E.user)),n(E.user)),E}finally{o(!1)}},m=async u=>ca({email:u}),i=async()=>{try{const u=localStorage.getItem("qring_refresh_token");u&&await He({refreshToken:u})}finally{localStorage.removeItem("qring_access_token"),localStorage.removeItem("qring_refresh_token"),localStorage.removeItem("qring_user"),s(""),n(null)}},h=l.useMemo(()=>({user:r,loading:d,isAuthenticated:!!(r&&a),login:g,signup:b,googleSignIn:f,googleSignUp:c,forgotPassword:m,logout:i}),[r,a,d]);return e.jsx(Xt.Provider,{value:h,children:t})}function de(){const t=l.useContext(Xt);if(!t)throw new Error("useAuth must be used inside AuthProvider");return t}const ga={homeowner:"/dashboard/homeowner/overview",admin:"/dashboard/admin",estate:"/dashboard/estate"};function jt(t,a){var n;const s=(n=t==null?void 0:t.user)==null?void 0:n.role;if(!s)return null;const r=ga[s];if(!r)throw new Error(`Login succeeded but role '${s}' is not supported in this app.`);return a??r}function pa(){const{login:t,googleSignIn:a,loading:s}=de(),[r]=Ht(),n=r.get("email")??r.get("username")??"",[d,o]=l.useState({email:n,password:""}),[g,b]=l.useState(""),f=ie(),c=ye(),m=async h=>{var u,k;h.preventDefault(),b("");try{const y=await t(d),E=jt(y,(k=(u=c.state)==null?void 0:u.from)==null?void 0:k.pathname);if(!E)throw new Error("Login succeeded but no user role was returned. Please contact support.");f(E,{replace:!0})}catch(y){b(y.message??"Login failed")}},i=async()=>{var h,u,k,y;b("");try{const E=await a(),j=jt(E,(u=(h=c.state)==null?void 0:h.from)==null?void 0:u.pathname);if(!j){f("/google-role",{replace:!0,state:{from:(y=(k=c.state)==null?void 0:k.from)==null?void 0:y.pathname}});return}f(j,{replace:!0})}catch(E){b(E.message??"Google sign-in failed")}};return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsx(pe,{title:"Login",subtitle:"Access your secure Qring workspace",children:e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsx(kt,{label:"Email or Username",type:"text",value:d.email,onChange:h=>o(u=>({...u,email:h}))}),e.jsx(kt,{label:"Password",type:"password",value:d.password,onChange:h=>o(u=>({...u,password:h}))}),g?e.jsx("p",{className:"text-sm text-danger",children:g}):null,e.jsx("button",{type:"submit",disabled:s,className:"w-full rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:s?"Signing In...":"Sign In"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-300 dark:border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-slate-50 px-2 text-slate-500 dark:bg-slate-950 dark:text-slate-400",children:"Or"})})]}),e.jsxs("button",{type:"button",onClick:i,disabled:s,className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-900 dark:text-white dark:hover:bg-slate-800",children:[e.jsxs("svg",{className:"mb-0.5 mr-2 inline h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s?"Signing in...":"Sign in with Google"]}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[e.jsx(p,{to:"/forgot-password",className:"hover:text-brand-500",children:"Forgot password?"}),e.jsx(p,{to:"/signup",className:"hover:text-brand-500",children:"Create account"})]})]})})})}function kt({label:t,type:a,value:s,onChange:r}){return e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:t}),e.jsx("input",{required:!0,type:a,value:s,onChange:n=>r(n.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]})}function fa(){const[t,a]=l.useState({email:"",password:""}),[s,r]=l.useState(""),[n,d]=l.useState(!1);ie();const o=ye(),g=async f=>{var c,m,i;f.preventDefault(),r(""),d(!0);try{const h=await Zt(t),u=(h==null?void 0:h.data)??h;if(u!=null&&u.accessToken&&localStorage.setItem("qring_access_token",u.accessToken),u!=null&&u.refreshToken&&localStorage.setItem("qring_refresh_token",u.refreshToken),u!=null&&u.user&&localStorage.setItem("qring_user",JSON.stringify(u.user)),((c=u==null?void 0:u.user)==null?void 0:c.role)!=="admin"){const y=localStorage.getItem("qring_refresh_token");if(y)try{await He({refreshToken:y})}catch{}localStorage.removeItem("qring_access_token"),localStorage.removeItem("qring_refresh_token"),localStorage.removeItem("qring_user"),r("Admin account required.");return}const k=((i=(m=o.state)==null?void 0:m.from)==null?void 0:i.pathname)??"/dashboard/admin";window.location.assign(k)}catch(h){r(h.message??"Admin login failed")}finally{d(!1)}},b=async()=>{var f,c,m;r(""),d(!0);try{const i=await na(),h=(i==null?void 0:i.data)??i;if(h!=null&&h.accessToken&&localStorage.setItem("qring_access_token",h.accessToken),h!=null&&h.refreshToken&&localStorage.setItem("qring_refresh_token",h.refreshToken),h!=null&&h.user&&localStorage.setItem("qring_user",JSON.stringify(h.user)),((f=h==null?void 0:h.user)==null?void 0:f.role)!=="admin"){const k=localStorage.getItem("qring_refresh_token");if(k)try{await He({refreshToken:k})}catch{}localStorage.removeItem("qring_access_token"),localStorage.removeItem("qring_refresh_token"),localStorage.removeItem("qring_user"),r("Admin account required.");return}const u=((m=(c=o.state)==null?void 0:c.from)==null?void 0:m.pathname)??"/dashboard/admin";window.location.assign(u)}catch(i){r(i.message??"Google admin sign-in failed")}finally{d(!1)}};return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsx(pe,{title:"Admin Login",subtitle:"Restricted access for platform administrators",children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsx(wt,{label:"Admin Email or Username",type:"text",value:t.email,onChange:f=>a(c=>({...c,email:f}))}),e.jsx(wt,{label:"Password",type:"password",value:t.password,onChange:f=>a(c=>({...c,password:f}))}),s?e.jsx("p",{className:"text-sm text-danger",children:s}):null,e.jsx("button",{type:"submit",disabled:n,className:"w-full rounded-xl bg-slate-900 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:n?"Signing In...":"Enter Admin Dashboard"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-300 dark:border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-slate-50 px-2 text-slate-500 dark:bg-slate-950 dark:text-slate-400",children:"Or"})})]}),e.jsxs("button",{type:"button",onClick:b,disabled:n,className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-900 dark:text-white dark:hover:bg-slate-800",children:[e.jsxs("svg",{className:"mb-0.5 mr-2 inline h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n?"Signing in...":"Sign in with Google"]}),e.jsx("div",{className:"text-center text-xs text-slate-500",children:e.jsxs("div",{className:"space-x-3",children:[e.jsx(p,{to:"/admin/signup",className:"hover:text-brand-500",children:"Create admin"}),e.jsx(p,{to:"/login",className:"hover:text-brand-500",children:"User login"})]})})]})})})}function wt({label:t,type:a,value:s,onChange:r}){return e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:t}),e.jsx("input",{required:!0,type:a,value:s,onChange:n=>r(n.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]})}function ja(){const[t,a]=l.useState({fullName:"",email:"",password:""}),[s,r]=l.useState(!1),[n,d]=l.useState(""),o=ie();async function g(f){f.preventDefault(),r(!0),d("");try{await da(t),setTimeout(()=>o("/admin/login"),500)}catch(c){d(c.message??"Admin signup failed")}finally{r(!1)}}async function b(){var f;d(""),r(!0);try{const c=await oa(),m=(c==null?void 0:c.data)??c;if(m!=null&&m.accessToken&&localStorage.setItem("qring_access_token",m.accessToken),m!=null&&m.refreshToken&&localStorage.setItem("qring_refresh_token",m.refreshToken),m!=null&&m.user&&localStorage.setItem("qring_user",JSON.stringify(m.user)),((f=m==null?void 0:m.user)==null?void 0:f.role)!=="admin"){const i=localStorage.getItem("qring_refresh_token");if(i)try{await He({refreshToken:i})}catch{}localStorage.removeItem("qring_access_token"),localStorage.removeItem("qring_refresh_token"),localStorage.removeItem("qring_user"),d("Admin account required.");return}setTimeout(()=>o("/admin/login"),500)}catch(c){d(c.message??"Google admin sign-up failed")}finally{r(!1)}}return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsx(pe,{title:"Create Admin Account",subtitle:"Creates an admin user account",children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsx(Ze,{label:"Full Name",type:"text",value:t.fullName,onChange:f=>a(c=>({...c,fullName:f}))}),e.jsx(Ze,{label:"Email",type:"email",value:t.email,onChange:f=>a(c=>({...c,email:f}))}),e.jsx(Ze,{label:"Password",type:"password",value:t.password,onChange:f=>a(c=>({...c,password:f}))}),n?e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:n}):null,e.jsx("button",{type:"submit",disabled:s,className:"w-full rounded-xl bg-slate-900 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:s?"Creating...":"Create Admin"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-300 dark:border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-slate-50 px-2 text-slate-500 dark:bg-slate-950 dark:text-slate-400",children:"Or"})})]}),e.jsxs("button",{type:"button",onClick:b,disabled:s,className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-900 dark:text-white dark:hover:bg-slate-800",children:[e.jsxs("svg",{className:"mb-0.5 mr-2 inline h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s?"Creating admin...":"Sign up with Google"]}),e.jsxs("p",{className:"text-center text-xs text-slate-500",children:["Already have admin account?"," ",e.jsx(p,{to:"/admin/login",className:"font-semibold hover:text-slate-700 dark:hover:text-slate-300",children:"Admin login"})]})]})})})}function Ze({label:t,type:a,value:s,onChange:r}){return e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:t}),e.jsx("input",{required:!0,type:a,value:s,onChange:n=>r(n.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-slate-900 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]})}function ka(){const{signup:t,googleSignUp:a}=de(),[s,r]=l.useState({fullName:"",email:"",password:"",role:"homeowner"}),[n,d]=l.useState(""),[o,g]=l.useState(!1),b=ie(),f=async m=>{m.preventDefault(),d(""),g(!0);try{await t(s),b("/login")}catch(i){d(i.message??"Signup failed")}finally{g(!1)}},c=async()=>{d(""),g(!0);try{const m=await a(s.role);b("/login")}catch(m){d(m.message??"Google sign-up failed")}finally{g(!1)}};return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsx(pe,{title:"Create Account",subtitle:"Start with secure QR access",children:e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsx(Xe,{label:"Full name",type:"text",value:s.fullName,onChange:m=>r(i=>({...i,fullName:m}))}),e.jsx(Xe,{label:"Email",type:"email",value:s.email,onChange:m=>r(i=>({...i,email:m}))}),e.jsx(Xe,{label:"Password",type:"password",value:s.password,onChange:m=>r(i=>({...i,password:m}))}),e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:"Role"}),e.jsxs("select",{value:s.role,onChange:m=>r(i=>({...i,role:m.target.value})),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("option",{value:"homeowner",children:"Homeowner"}),e.jsx("option",{value:"estate",children:"Estate User"})]})]}),n?e.jsx("p",{className:"text-sm text-danger",children:n}):null,e.jsx("button",{type:"submit",disabled:o,className:"w-full rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:o?"Creating...":"Create Account"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-300 dark:border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-slate-50 px-2 text-slate-500 dark:bg-slate-950 dark:text-slate-400",children:"Or"})})]}),e.jsxs("button",{type:"button",onClick:c,disabled:o,className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-900 dark:text-white dark:hover:bg-slate-800",children:[e.jsxs("svg",{className:"mb-0.5 mr-2 inline h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),o?"Creating account...":"Sign up with Google"]}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Already have an account?"," ",e.jsx(p,{to:"/login",className:"font-semibold hover:text-brand-500",children:"Login"})]})]})})})}function Xe({label:t,type:a,value:s,onChange:r}){return e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:t}),e.jsx("input",{required:!0,type:a,value:s,onChange:n=>r(n.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]})}const wa={homeowner:"/dashboard/homeowner/overview",admin:"/dashboard/admin",estate:"/dashboard/estate"};function Na(){const{googleSignUp:t,loading:a}=de(),[s,r]=l.useState("homeowner"),[n,d]=l.useState(""),o=ie(),g=ye();async function b(f){var c,m;f.preventDefault(),d("");try{const i=await t(s),h=(()=>{try{return JSON.parse(localStorage.getItem("qring_user")??"null")}catch{return null}})(),u=((c=i==null?void 0:i.user)==null?void 0:c.role)??(h==null?void 0:h.role);if(!u)throw new Error("Account setup completed but role was not returned.");const k=wa[u];if(!k)throw new Error(`Account setup completed but role '${u}' is not supported.`);const y=((m=g.state)==null?void 0:m.from)??k;o(y,{replace:!0})}catch(i){d(i.message??"Unable to finish Google account setup")}}return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsx(pe,{title:"Choose Your Role",subtitle:"Select how you want to use Qring on this account",children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:"Role"}),e.jsxs("select",{value:s,onChange:f=>r(f.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("option",{value:"homeowner",children:"Homeowner"}),e.jsx("option",{value:"estate",children:"Estate User"})]})]}),n?e.jsx("p",{className:"text-sm text-danger",children:n}):null,e.jsx("button",{type:"submit",disabled:a,className:"w-full rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:a?"Setting up...":"Continue"})]})})})}function ya(){const{forgotPassword:t}=de(),[a,s]=l.useState(""),[r,n]=l.useState(""),[d,o]=l.useState(1),[g,b]=l.useState({loading:!1,error:"",done:!1,message:""}),f=async m=>{m.preventDefault(),b({loading:!0,error:"",done:!1,message:""});try{const i=await t(a),h=(i==null?void 0:i.data)??i;b({loading:!1,error:"",done:!0,message:(h==null?void 0:h.status)==="email_verified"?"Email found. Set your new password.":"Email verified."}),o(2)}catch(i){b({loading:!1,error:i.message??"Request failed",done:!1,message:""})}},c=async m=>{m.preventDefault(),b(i=>({...i,loading:!0,error:""}));try{await xa({email:a,newPassword:r}),b({loading:!1,error:"",done:!0,message:"Password reset successful. You can now login."}),o(3)}catch(i){b(h=>({...h,loading:!1,error:i.message??"Reset failed"}))}};return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsxs(pe,{title:"Forgot Password",subtitle:"Verify your email and set a new password",children:[d===1?e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:"Email"}),e.jsx("input",{required:!0,type:"email",value:a,onChange:m=>s(m.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]}),g.error?e.jsx("p",{className:"text-sm text-danger",children:g.error}):null,e.jsx("button",{type:"submit",disabled:g.loading,className:"w-full rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:g.loading?"Checking...":"Continue"})]}):null,d===2?e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsx("p",{className:"rounded-xl bg-slate-100 p-3 text-xs text-slate-600 dark:bg-slate-800 dark:text-slate-300",children:g.message||"Set your new password."}),e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:"New Password"}),e.jsx("input",{required:!0,minLength:8,type:"password",value:r,onChange:m=>n(m.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]}),g.error?e.jsx("p",{className:"text-sm text-danger",children:g.error}):null,e.jsx("button",{type:"submit",disabled:g.loading,className:"w-full rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:g.loading?"Resetting...":"Reset Password"})]}):null,d===3?e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-success",children:g.message}),e.jsx(p,{to:"/login",className:"block w-full rounded-xl bg-slate-900 px-4 py-3 text-center text-sm font-semibold text-white dark:bg-white dark:text-slate-900",children:"Back to Login"})]}):null,e.jsxs("p",{className:"mt-4 text-xs text-slate-500",children:["Back to"," ",e.jsx(p,{to:"/login",className:"font-semibold hover:text-brand-500",children:"Login"})]})]})})}async function va(){const t=await $("/homeowner/visits");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function Fe(){var s;const t=await $("/homeowner/settings"),a=(t==null?void 0:t.data)??null;return{managedByEstate:!!(a!=null&&a.managedByEstate),estateId:(a==null?void 0:a.estateId)??null,estateName:(a==null?void 0:a.estateName)??null,estateOwnerId:((s=a==null?void 0:a.subscription)==null?void 0:s.subscriptionOwnerId)??null}}async function Nt(){const t=await $("/homeowner/messages");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function Sa(t){const a=await $(`/homeowner/messages/${t}`);return Array.isArray(a==null?void 0:a.data)?a.data:[]}async function Ca(t,a){const s=await $(`/homeowner/messages/${t}`,{method:"POST",body:JSON.stringify({text:a})});return(s==null?void 0:s.data)??null}async function Aa(t,a){const s=await $(`/homeowner/messages/${t}/${a}`,{method:"DELETE"});return(s==null?void 0:s.data)??null}async function Pa(t){const a=await $(`/homeowner/visits/${t}/end`,{method:"POST"});return(a==null?void 0:a.data)??null}async function Ea(){const t=await $("/homeowner/doors"),a=t==null?void 0:t.data;return Array.isArray(a)?{doors:a,subscription:null}:{doors:Array.isArray(a==null?void 0:a.doors)?a.doors:[],subscription:(a==null?void 0:a.subscription)??null}}async function Ra(t){const a=await $("/homeowner/doors",{method:"POST",body:JSON.stringify(t)});return(a==null?void 0:a.data)??null}async function Ma(t,a){const s=await $(`/homeowner/visits/${t}/decision`,{method:"POST",body:JSON.stringify({action:a})});return(s==null?void 0:s.data)??null}async function Ia(t){const a=await $(`/visitor/sessions/${t}`);return(a==null?void 0:a.data)??null}async function Ta(t){const a=await $(`/visitor/sessions/${t}/messages`);return Array.isArray(a==null?void 0:a.data)?a.data:[]}async function es(){const t=await $("/notifications/");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function Da(t){const a=await $("/notifications/push-subscriptions",{method:"POST",body:JSON.stringify(t)});return(a==null?void 0:a.data)??null}async function ts(t){const a=await $(`/notifications/${t}/read`,{method:"POST"});return typeof window<"u"&&window.dispatchEvent(new Event("qring:notifications-updated")),(a==null?void 0:a.data)??null}async function La(){const t=await $("/notifications/read-all",{method:"POST"});return typeof window<"u"&&window.dispatchEvent(new Event("qring:notifications-updated")),(t==null?void 0:t.data)??null}async function qa(){return typeof window>"u"||typeof window.Notification>"u"?"unsupported":window.Notification.permission==="granted"?"granted":window.Notification.requestPermission()}function $a(t){if(t&&typeof t=="object")return t;if(typeof t=="string")try{return JSON.parse(t)}catch{return{}}return{}}async function Oa(t){if(!t)return;const s=(await es()).filter(r=>!(r!=null&&r.readAt)&&(r==null?void 0:r.kind)==="visitor.request").filter(r=>{var n;return((n=$a(r==null?void 0:r.payload))==null?void 0:n.sessionId)===t}).map(r=>r.id).filter(Boolean);await Promise.all(s.map(r=>ts(r))),typeof window<"u"&&window.dispatchEvent(new Event("qring:notifications-updated"))}function Qa({open:t,role:a,steps:s,onClose:r,onComplete:n,onNavigate:d}){var u;const[o,g]=l.useState(0),b=s.length,f=s[o],c=l.useMemo(()=>b?Math.round((o+1)/b*100):0,[o,b]);if(l.useEffect(()=>{t&&g(0)},[t,a]),!t||!f)return null;function m(){r==null||r()}function i(){if(o>=b-1){n==null||n();return}g(k=>k+1)}function h(){o!==0&&g(k=>k-1)}return e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-slate-950/55 p-4",children:e.jsxs("div",{className:"w-full max-w-3xl rounded-2xl border border-slate-200 bg-white shadow-soft dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("div",{className:"border-b border-slate-200 p-5 dark:border-slate-800",children:[e.jsxs("div",{className:"mb-3 flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-brand-500",children:"QRing Onboarding"}),e.jsx("h2",{className:"mt-1 text-lg font-bold text-slate-900 dark:text-slate-100",children:a==="estate"?"Estate Manager Guide":"Homeowner Guide"}),e.jsxs("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:["Step ",o+1," of ",b,": ",f.title]})]}),e.jsx("button",{type:"button",onClick:m,className:"rounded-lg border border-slate-300 px-3 py-1.5 text-xs font-semibold dark:border-slate-700",children:"Close"})]}),e.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-slate-200 dark:bg-slate-800",children:e.jsx("div",{className:"h-full bg-brand-500 transition-all duration-300",style:{width:`${c}%`}})})]}),e.jsxs("div",{className:"space-y-4 p-5",children:[e.jsx("p",{className:"text-sm leading-relaxed text-slate-700 dark:text-slate-200",children:f.description}),(u=f.points)!=null&&u.length?e.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:f.points.map(k=>e.jsx("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3 text-xs font-medium text-slate-700 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200",children:k},k))}):null,f.route&&f.routeLabel?e.jsx("button",{type:"button",onClick:()=>d==null?void 0:d(f.route),className:"rounded-lg border border-brand-500 bg-brand-500 px-3 py-2 text-xs font-semibold text-white",children:f.routeLabel}):null,e.jsx("div",{className:"flex flex-wrap gap-2 border-t border-slate-200 pt-4 dark:border-slate-800",children:s.map((k,y)=>e.jsx("button",{type:"button",onClick:()=>g(y),className:`rounded-lg border px-2.5 py-1 text-[11px] font-semibold transition ${y===o?"border-brand-500 bg-brand-500 text-white":"border-slate-300 text-slate-600 hover:bg-slate-100 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800"}`,children:k.title},k.title))})]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 p-5 dark:border-slate-800",children:[e.jsx("button",{type:"button",onClick:h,disabled:o===0,className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold disabled:opacity-40 dark:border-slate-700",children:"Back"}),e.jsx("button",{type:"button",onClick:i,className:"rounded-lg border border-brand-500 bg-brand-500 px-3 py-2 text-xs font-semibold text-white",children:o>=b-1?"Finish":"Next"})]})]})})}const _a={homeowner:[{to:"/dashboard/homeowner/overview",label:"Overview",icon:"overview"},{to:"/dashboard/homeowner/visits",label:"Visits",icon:"visits"},{to:"/dashboard/homeowner/messages",label:"Messages",icon:"messages"},{to:"/dashboard/homeowner/doors",label:"Doors",icon:"doors"},{to:"/billing/paywall",label:"Billing",icon:"billing"},{to:"/dashboard/homeowner/settings",label:"Settings",icon:"settings"}],estate:[{to:"/dashboard/estate",label:"Overview",icon:"estate"},{to:"/dashboard/estate/create",label:"Create Estate",icon:"estate_create"},{to:"/dashboard/estate/doors",label:"Add Doors",icon:"doors"},{to:"/dashboard/estate/assign",label:"Assign Doors",icon:"assign"},{to:"/dashboard/estate/invites",label:"Invite Owners",icon:"invite"},{to:"/dashboard/estate/mappings",label:"Mappings",icon:"mappings"},{to:"/dashboard/estate/logs",label:"Access Logs",icon:"logs"},{to:"/dashboard/estate/plan",label:"Plan Rules",icon:"plans"},{to:"/billing/paywall",label:"Billing",icon:"billing"},{to:"/dashboard/estate/homes",label:"Multi-Home",icon:"homes"}],admin:[{to:"/dashboard/admin",label:"System",icon:"system"},{to:"/dashboard/admin/users",label:"Users",icon:"user_admin"},{to:"/dashboard/admin/sessions",label:"Sessions",icon:"sessions"},{to:"/dashboard/admin/payments",label:"Payments",icon:"billing"},{to:"/dashboard/admin/config",label:"Config",icon:"settings"},{to:"/dashboard/admin/audit",label:"Audit",icon:"logs"}]};function X({title:t,children:a}){const{user:s,logout:r}=de(),{isDark:n,toggleTheme:d}=ne(),o=ie(),[g,b]=l.useState(!1),[f,c]=l.useState(!1),[m,i]=l.useState([]),[h,u]=l.useState(null),[k,y]=l.useState(!1),[E,j]=l.useState(()=>typeof window<"u"&&window.Notification?window.Notification.permission:"unsupported"),[I,x]=l.useState(()=>localStorage.getItem("qring_sound_alerts")!=="false"),[R,C]=l.useState(!1),[M,D]=l.useState(!1),[A,L]=l.useState(!0),Q=l.useRef(null),_=l.useRef(null),B=l.useRef([]),ee=l.useRef(!1),se=l.useRef(new Set),w=l.useMemo(()=>(s==null?void 0:s.role)==="homeowner"&&(!!(h!=null&&h.managedByEstate)||typeof(s==null?void 0:s.email)=="string"&&s.email.toLowerCase().endsWith("@estate.useqring.online")),[s==null?void 0:s.role,s==null?void 0:s.email,h]),O=l.useMemo(()=>{const N=_a[s==null?void 0:s.role]??[];return(s==null?void 0:s.role)==="homeowner"&&(k||w)?N.filter(H=>H.to!=="/billing/paywall"):N},[s==null?void 0:s.role,w,k]),G=l.useMemo(()=>O.find(N=>N.to.endsWith("/settings"))??null,[O]),F=l.useMemo(()=>{if((s==null?void 0:s.role)==="homeowner"){const N=["/dashboard/homeowner/overview","/dashboard/homeowner/visits","/dashboard/homeowner/messages"],H=w?"/dashboard/homeowner/settings":"/billing/paywall";return[...N,H].map(Z=>O.find(le=>le.to===Z)).filter(Boolean)}return O.filter(N=>!N.to.endsWith("/settings")).slice(0,4)},[O,s==null?void 0:s.role,w]),W=(s==null?void 0:s.role)==="homeowner"||(s==null?void 0:s.role)==="estate",ae=l.useMemo(()=>Ha(s==null?void 0:s.role),[s==null?void 0:s.role]);l.useEffect(()=>{let N=!0;async function H(){if((s==null?void 0:s.role)!=="homeowner"){u(null),y(!1);return}y(!0);try{const K=await Fe();if(!N)return;u(K)}catch{if(!N)return;u(null)}finally{N&&y(!1)}}return H(),()=>{N=!1}},[s==null?void 0:s.role]),l.useEffect(()=>{if(!W||M)return;const N=(s==null?void 0:s.email)??(s==null?void 0:s.id)??"anonymous",H=`qring_onboarding_seen_${s==null?void 0:s.role}_${N}`;localStorage.getItem(H)||(C(!0),localStorage.setItem(H,"true"))},[W,M,s==null?void 0:s.role,s==null?void 0:s.email,s==null?void 0:s.id]),l.useEffect(()=>{let N=!0,H=!1;async function K(){if(H)return;if(!localStorage.getItem("qring_access_token")){i([]);return}try{const S=await es();if(!N)return;i(S)}catch(S){if(!N)return;(S==null?void 0:S.status)===401&&(H=!0),i([])}}K();const Z=setInterval(K,2e4),le=()=>K();return window.addEventListener("qring:notifications-updated",le),()=>{N=!1,clearInterval(Z),window.removeEventListener("qring:notifications-updated",le)}},[]),l.useEffect(()=>{const N=K=>{K.key==="qring_sound_alerts"&&x(K.newValue!=="false")},H=()=>{x(localStorage.getItem("qring_sound_alerts")!=="false")};return window.addEventListener("storage",N),window.addEventListener("qring:sound-alerts-updated",H),()=>{window.removeEventListener("storage",N),window.removeEventListener("qring:sound-alerts-updated",H)}},[]);const P=l.useMemo(()=>m.map(N=>{let H=N.payload;if(typeof H=="string")try{H=JSON.parse(H)}catch{H={message:N.payload}}return{...N,payload:H&&typeof H=="object"?H:{}}}),[m]),Y=l.useMemo(()=>P.filter(N=>!N.readAt).length,[P]),U=l.useMemo(()=>P.filter(N=>!N.readAt&&N.kind==="visitor.request").map(N=>N.id),[P]);l.useEffect(()=>{if(!ee.current){B.current=U,ee.current=!0;return}const N=B.current;U.some(K=>!N.includes(K))&&L(!1),B.current=U},[U]),l.useEffect(()=>{function N(){_.current&&(clearInterval(_.current),_.current=null)}function H(){if(typeof window>"u")return;const K=window.AudioContext||window.webkitAudioContext;if(!K)return;Q.current||(Q.current=new K);const Z=Q.current;Z.state==="suspended"&&Z.resume().catch(()=>{});const le=Z.createGain();le.gain.setValueAtTime(1e-4,Z.currentTime),le.connect(Z.destination),[880,660].forEach((S,v)=>{const T=Z.currentTime+v*.2,z=T+.16,te=Z.createOscillator();te.type="sine",te.frequency.setValueAtTime(S,T),te.connect(le),le.gain.exponentialRampToValueAtTime(.07,T+.02),le.gain.exponentialRampToValueAtTime(1e-4,z),te.start(T),te.stop(z)})}if(I&&U.length>0&&!A){H(),_.current||(_.current=setInterval(H,1800));return}return N(),N},[I,U,A]),l.useEffect(()=>{typeof window>"u"||typeof window.Notification>"u"||window.Notification.permission==="granted"&&P.forEach(N=>{var Z;if(N.readAt||se.current.has(N.id))return;se.current.add(N.id);const H=((Z=N.payload)==null?void 0:Z.message)??"You have a new alert",K=new window.Notification("Qring Alert",{body:H});K.onclick=()=>{window.focus(),V(N)}})},[P]),l.useEffect(()=>()=>{var N,H;_.current&&clearInterval(_.current),(H=(N=Q.current)==null?void 0:N.close)==null||H.call(N).catch(()=>{}),Q.current=null},[]);async function V(N){if(L(!0),N!=null&&N.id&&!(N!=null&&N.readAt))try{await ts(N.id),i(K=>K.map(Z=>Z.id===N.id?{...Z,readAt:Z.readAt||new Date().toISOString()}:Z))}catch{}((N==null?void 0:N.kind)??"").startsWith("visitor.")?o("/dashboard/homeowner/visits"):o((s==null?void 0:s.role)==="estate"?"/dashboard/estate":"/dashboard/homeowner/overview"),c(!1)}async function J(){L(!0);try{await La(),i(N=>N.map(H=>({...H,readAt:H.readAt||new Date().toISOString()})))}catch{}}async function ze(){const N=await qa();if(j(N),N==="granted")try{await Da({endpoint:"browser-notification",keys:{ua:navigator.userAgent}})}catch{}}return e.jsxs("div",{className:"min-h-screen bg-slate-100 text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsx("div",{className:"pointer-events-none fixed inset-0 -z-10 bg-[radial-gradient(circle_at_top_right,_rgba(36,86,245,0.16),_transparent_40%),radial-gradient(circle_at_bottom_left,_rgba(20,184,166,0.12),_transparent_35%)]"}),e.jsxs("div",{className:"flex min-h-screen",children:[g?e.jsx("button",{type:"button","aria-label":"Close navigation",className:"fixed inset-0 z-30 bg-slate-950/35 lg:hidden",onClick:()=>b(!1)}):null,e.jsxs("aside",{className:`fixed inset-y-0 left-0 z-40 w-72 transform border-r border-slate-200/70 bg-white/90 p-6 backdrop-blur transition-transform duration-300 dark:border-slate-800 dark:bg-slate-900/95 lg:static lg:translate-x-0 ${g?"translate-x-0":"-translate-x-full"}`,children:[e.jsxs("div",{className:"mb-8 flex items-center gap-3",children:[e.jsx("div",{className:"grid h-10 w-16 place-items-center rounded-xl  text-xs font-bold text-white shadow-soft",children:e.jsx(re,{tone:"dark",className:"h-18 w-46"})}),e.jsxs("div",{children:[e.jsx(p,{to:"/",className:"block font-heading text-2xl font-bold text-brand-500",children:"Qring"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Smart Access Communication"})]})]}),e.jsxs("nav",{className:"space-y-2",children:[O.map(N=>e.jsxs(Qe,{to:N.to,className:({isActive:H})=>`group relative flex items-center gap-3 rounded-xl border px-4 py-3 text-sm font-semibold transition-all ${H?"border-brand-500 bg-brand-500 text-white shadow-soft":"border-transparent text-slate-700 hover:border-slate-200 hover:bg-slate-100 dark:text-slate-200 dark:hover:border-slate-700 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"grid h-7 w-7 place-items-center rounded-lg border border-white/25 bg-white/20",children:e.jsx(et,{name:N.icon})}),e.jsx("span",{className:"flex-1",children:N.label})]},N.to)),W?e.jsxs("button",{type:"button",onClick:()=>{D(!1),C(!0)},className:"group relative flex w-full items-center gap-3 rounded-xl border border-transparent px-4 py-3 text-sm font-semibold text-slate-700 transition-all hover:border-slate-200 hover:bg-slate-100 dark:text-slate-200 dark:hover:border-slate-700 dark:hover:bg-slate-800",children:[e.jsx("span",{className:"grid h-7 w-7 place-items-center rounded-lg border border-white/25 bg-white/20",children:e.jsx(et,{name:"help"})}),e.jsx("span",{className:"flex-1 text-left",children:"Help"})]}):null]}),e.jsxs("div",{className:"mt-8 rounded-2xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Live Status"}),e.jsx("p",{className:"mt-2 text-sm font-semibold",children:"Realtime services operational"}),e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 rounded-lg bg-success/15 px-2 py-1 text-xs font-semibold text-success",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-success"}),"Connected"]})]})]}),e.jsxs("main",{className:"flex-1 p-3 pb-24 sm:p-4 sm:pb-24 lg:p-8 lg:pb-8",children:[e.jsxs("header",{className:"sticky top-3 z-30 mb-4 flex items-center justify-between rounded-2xl border border-slate-200 bg-white/80 p-3 shadow-soft backdrop-blur dark:border-slate-800 dark:bg-slate-900/70 sm:mb-6 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700 lg:hidden",onClick:()=>b(N=>!N),children:"MENU"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Dashboard"}),e.jsx("h1",{className:"font-heading text-xs font-bold lg:text-2xl",children:t})]})]}),e.jsxs("div",{className:"relative flex items-center gap-4 sm:gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>c(N=>!N),className:"relative rounded-lg border border-slate-300 p-2 text-xs font-semibold dark:border-slate-700","aria-label":"Notifications",children:[e.jsx(Ba,{}),Y>0?e.jsx("span",{className:"absolute -right-1 -top-1 min-w-4 rounded-full bg-danger px-1 text-[10px] font-bold text-white",children:Y}):null]}),f?e.jsxs("div",{className:"absolute right-0 top-12 z-50 w-[min(20rem,calc(100vw-2rem))] rounded-2xl border border-slate-200 bg-white p-3 shadow-soft dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between px-2 pb-2",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Notifications"}),e.jsxs("div",{className:"flex items-center gap-2",children:[E!=="granted"&&E!=="unsupported"?e.jsx("button",{type:"button",onClick:ze,className:"rounded-md border border-brand-300 px-2 py-1 text-[10px] font-semibold text-brand-700 dark:border-brand-500/50 dark:text-brand-200",children:"Enable Alerts"}):null,e.jsx("button",{type:"button",onClick:J,className:"rounded-md border border-slate-300 px-2 py-1 text-[10px] font-semibold dark:border-slate-700",children:"Clear"})]})]}),e.jsx("div",{className:"max-h-80 space-y-2 overflow-y-auto",children:P.length===0?e.jsx("div",{className:"rounded-xl bg-slate-100 p-3 text-xs text-slate-500 dark:bg-slate-800",children:"No notifications yet."}):P.map(N=>{var H;return e.jsxs("button",{type:"button",onClick:()=>V(N),className:`block w-full rounded-xl border p-3 text-left transition hover:bg-slate-50 dark:hover:bg-slate-800 ${N.readAt?"border-slate-200 dark:border-slate-700":"border-brand-300 bg-brand-50/60 dark:border-brand-500/50 dark:bg-brand-500/10"}`,children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:N.kind}),e.jsx("p",{className:"mt-1 text-sm font-medium",children:((H=N.payload)==null?void 0:H.message)??"New activity"}),e.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:Ua(N.createdAt)})]},N.id)})})]}):null,e.jsx("button",{type:"button",onClick:d,className:"hidden rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700 sm:inline-flex",children:n?"LIGHT":"DARK"}),G?e.jsx(p,{to:G.to,className:"rounded-lg border border-slate-300 p-2 text-xs font-semibold dark:border-slate-700","aria-label":"Settings",title:"Settings",children:e.jsx(Fa,{})}):null,e.jsx("span",{className:"hidden rounded-lg bg-brand-100 px-3 py-2 text-xs font-semibold text-brand-700 dark:bg-brand-500/20 dark:text-brand-100 sm:inline-flex",children:(s==null?void 0:s.role)??"guest"}),e.jsxs("div",{className:"hidden items-center gap-2 rounded-xl border border-slate-300 px-3 py-2 md:flex dark:border-slate-700",children:[e.jsx("div",{className:"grid h-7 w-7 place-items-center rounded-lg bg-brand-100 dark:bg-brand-500/30",children:e.jsx(Va,{})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold",children:(s==null?void 0:s.fullName)??"Qring User"}),e.jsx("p",{className:"text-[10px] text-slate-500",children:(s==null?void 0:s.email)??"user@useqring.online"})]})]}),e.jsx("button",{type:"button",onClick:r,className:"rounded-lg border border-slate-300 p-2 text-xs font-semibold dark:border-slate-700","aria-label":"Logout",title:"Logout",children:e.jsx(za,{})})]})]}),a]})]}),F.length>0?e.jsx("nav",{className:"fixed inset-x-0 bottom-0 z-40 border-t border-slate-200 bg-white/95 px-2 py-2 backdrop-blur dark:border-slate-800 dark:bg-slate-900/95 lg:hidden",children:e.jsx("div",{className:"flex gap-1 overflow-x-auto pb-1",children:F.map(N=>e.jsxs(Qe,{to:N.to,className:({isActive:H})=>`flex min-w-[76px] flex-col items-center justify-center rounded-xl px-2 py-2 text-[11px] font-semibold transition ${H?"bg-brand-500 text-white":"text-slate-600 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"mb-1",children:e.jsx(et,{name:N.icon})}),e.jsx("span",{className:"leading-none",children:N.label})]},`mobile-${N.to}`))})}):null,e.jsx(Qa,{open:R,role:s==null?void 0:s.role,steps:ae,onClose:()=>{D(!0),C(!1)},onComplete:()=>{D(!0),C(!1)},onNavigate:N=>{o(N),D(!0),C(!1)}})]})}function Ha(t){const a=t==="estate";return[{title:"What QRing Is",description:"QRing transforms physical doors into smart access points, giving homeowners and estate teams real-time visibility, control, and security over visits.",points:["No expensive cameras or IoT hardware needed.","QR code + software creates a digital access layer.","Works for homes, estates, rentals, offices, and gated communities."],route:a?"/dashboard/estate":"/dashboard/homeowner/overview",routeLabel:"Open Dashboard"},{title:"How Visits Work",description:"When a visitor arrives, they scan your QR code, share identity and visit reason, and QRing instantly notifies you so you can approve or deny access.",points:["Visitor scans QR at the door or gate.","Identity and intent are captured digitally.","You get instant alert and control access."],route:a?"/dashboard/estate/logs":"/dashboard/homeowner/visits",routeLabel:a?"View Access Logs":"View Visits"},{title:"Why It Matters",description:"QRing solves missed deliveries, unknown visitors, and manual logbooks by replacing reactive security with proactive, trackable, real-time access control.",points:["Homeowners know who is at the door in real time.","Estates get centralized tracking instead of manual records.","Every visit is securely logged for follow-up and accountability."],route:a?"/dashboard/estate/doors":"/dashboard/homeowner/doors",routeLabel:a?"Set Up Doors":"Manage Doors"},{title:"Your Next Steps",description:"Start by setting up your access points, then monitor incoming requests and manage approvals through your dashboard. Use Help anytime from the sidebar.",points:a?["Create or review your estate setup.","Assign doors to homes and owners.","Track logs and enforce plan rules."]:["Keep your door QR active.","Review visits and messages daily.","Control who enters even when away."],route:a?"/dashboard/estate/assign":"/dashboard/homeowner/messages",routeLabel:a?"Assign Doors":"Open Messages"}]}function Ua(t){if(!t)return"";const a=new Date(t);return Number.isNaN(a.getTime())?t:a.toLocaleString()}function Ba(){return e.jsxs("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M15 17h5l-1.4-1.4A2 2 0 0 1 18 14.2V11a6 6 0 1 0-12 0v3.2a2 2 0 0 1-.6 1.4L4 17h5"}),e.jsx("path",{d:"M9 17a3 3 0 0 0 6 0"})]})}function Va(){return e.jsxs("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"8",r:"4"}),e.jsx("path",{d:"M4 21a8 8 0 0 1 16 0"})]})}function Fa(){return e.jsxs("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h0A1.65 1.65 0 0 0 9.93 3.1V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h0a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v0a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}function za(){return e.jsxs("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("path",{d:"M16 17l5-5-5-5"}),e.jsx("path",{d:"M21 12H9"})]})}function et({name:t}){const a={overview:e.jsx("path",{d:"M3 3h8v8H3zM13 3h8v5h-8zM13 10h8v11h-8zM3 13h8v8H3z"}),visits:e.jsx("path",{d:"M4 5h16M4 12h16M4 19h10"}),messages:e.jsx("path",{d:"M4 5h16v10H7l-3 3z"}),doors:e.jsx("path",{d:"M7 3h10v18H7zM10 12h.01"}),billing:e.jsx("path",{d:"M3 7h18v10H3zM3 11h18"}),estate:e.jsx("path",{d:"M3 21h18M5 21V9l7-5 7 5v12"}),estate_create:e.jsx("path",{d:"M12 5v14M5 12h14"}),homes:e.jsx("path",{d:"M3 11l9-7 9 7M5 10v11h14V10"}),invite:e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2M16 3h5v5M21 3l-7 7"}),assign:e.jsx("path",{d:"M4 12h10M10 6l6 6-6 6M19 5v14"}),mappings:e.jsx("path",{d:"M3 5h6v6H3zM15 5h6v6h-6zM9 8h6M3 17h6v6H3zM15 17h6v6h-6zM9 20h6"}),logs:e.jsx("path",{d:"M5 3h14v18H5zM8 8h8M8 12h8M8 16h5"}),system:e.jsx("path",{d:"M12 1v4M12 19v4M4.9 4.9l2.8 2.8M16.3 16.3l2.8 2.8M1 12h4M19 12h4M4.9 19.1l2.8-2.8M16.3 7.7l2.8-2.8"}),plans:e.jsx("path",{d:"M4 20V8l8-4 8 4v12M4 12h16"}),user_admin:e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm10 0v-2m0 0V7m0 2h-2m2 0h2"}),sessions:e.jsx("path",{d:"M8 7h13M8 12h13M8 17h13M3 7h.01M3 12h.01M3 17h.01"}),help:e.jsx("path",{d:"M12 17h.01M9.1 9a3 3 0 1 1 4.9 2.3c-.8.7-2 1.5-2 2.7v.5M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20z"}),settings:e.jsx("path",{d:"M12 8.5A3.5 3.5 0 1 1 8.5 12 3.5 3.5 0 0 1 12 8.5zm0-6 1.2 2.4 2.7.4.4 2.7L18.8 9l-1.5 2.3 1.5 2.3-2.5 1.2-.4 2.7-2.7.4L12 21.5l-1.2-2.4-2.7-.4-.4-2.7L5.2 13.6 6.7 11.3 5.2 9l2.5-1.2.4-2.7 2.7-.4z"})};return e.jsx("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a[t]??e.jsx("circle",{cx:"12",cy:"12",r:"9"})})}const ss={activeVisitors:0,pendingApprovals:0,callsToday:0,unreadMessages:0},yt={metrics:ss,activity:[],waitingRoom:[],session:null,messages:[],traffic:[],callControls:{canAudio:!1,canVideo:!1,canMute:!1,canEnd:!1}};function Ue(t){return!t||typeof t!="object"?yt:{metrics:{...ss,...t.metrics??{}},activity:Array.isArray(t.activity)?t.activity:[],waitingRoom:Array.isArray(t.waitingRoom)?t.waitingRoom:[],session:t.session??null,messages:Array.isArray(t.messages)?t.messages:[],traffic:Array.isArray(t.traffic)?t.traffic:[],callControls:{...yt.callControls,...t.callControls??{}}}}async function Wa(){const t=await $("/dashboard/overview");return Ue((t==null?void 0:t.data)??t)}let me;function Ga(){if(!me){const t=localStorage.getItem("qring_access_token");me=dt(`${oe.socketUrl}${oe.dashboardNamespace}`,{path:oe.socketPath,transports:["websocket"],auth:t?{token:t}:void 0,withCredentials:!0})}return me}function Ja(){me&&(me.removeAllListeners(),me.disconnect(),me=void 0)}const Ya=Ue({});function Ka(){const[t,a]=l.useState(Ya),[s,r]=l.useState(!0),[n,d]=l.useState(""),[o,g]=l.useState(!1),b=l.useCallback(async()=>{r(!0),d("");try{const f=await Wa();a(f)}catch(f){d(f.message??"Unable to load dashboard")}finally{r(!1)}},[]);return l.useEffect(()=>{let f=!0;const c=Ga(),m=()=>f&&g(!0),i=()=>f&&g(!1),h=y=>{f&&a(Ue((y==null?void 0:y.data)??y))},u=y=>{f&&a(E=>Ue({...E,...(y==null?void 0:y.data)??y}))},k=y=>{f&&d((y==null?void 0:y.message)??"Realtime error")};return c.on("connect",m),c.on("disconnect",i),c.on("dashboard.snapshot",h),c.on("dashboard.patch",u),c.on("dashboard.error",k),b(),()=>{f=!1,c.off("connect",m),c.off("disconnect",i),c.off("dashboard.snapshot",h),c.off("dashboard.patch",u),c.off("dashboard.error",k),Ja()}},[b]),l.useMemo(()=>({...t,loading:s,error:n,connected:o,refresh:b}),[t,s,n,o,b])}function Za(){var c;const[t,a]=l.useState(!1),{metrics:s,activity:r,waitingRoom:n,session:d,messages:o,loading:g,error:b,connected:f}=Ka();return l.useEffect(()=>{let m=!0;async function i(){try{const h=await Fe();if(!m)return;a(!!(h!=null&&h.managedByEstate))}catch{if(!m)return;a(!1)}}return i(),()=>{m=!1}},[]),e.jsxs(X,{className:"text-sm",title:"Homeowner Workspace",children:[b?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:b}):null,e.jsxs("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[e.jsx(Re,{title:"Active Visitors",tip:"Number of visitors currently waiting or interacting right now.",value:s.activeVisitors,tone:"success",loading:g,sub:"Live now"}),e.jsx(Re,{title:"Pending Approvals",tip:"Requests that need you to allow or deny entry.",value:s.pendingApprovals,tone:"warning",loading:g,sub:"Needs action"}),e.jsx(Re,{title:"Calls Today",tip:"Total audio and video calls completed today.",value:s.callsToday,tone:"brand",loading:g,sub:"Audio + video"}),e.jsx(Re,{title:"Unread Messages",tip:"Messages in visitor threads you have not opened yet.",value:s.unreadMessages,tone:"danger",loading:g,sub:"Recent threads"})]}),e.jsxs("section",{className:"mt-4 rounded-2xl border border-brand-100 bg-brand-50/70 p-4 dark:border-brand-500/30 dark:bg-brand-500/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"font-heading text-base font-bold",children:"How to use this dashboard"}),e.jsx(as,{text:"Use this quick guide to understand what each area does before taking actions."})]}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Start with pending approvals, review activity for context, then open Realtime Interaction for call and message actions."})]}),e.jsx("section",{className:"mt-4",children:e.jsx(p,{to:"/dashboard/homeowner/doors",className:"inline-flex items-center rounded-xl bg-brand-500 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-600",children:"Create a Door"})}),e.jsxs("section",{className:"mt-6 grid grid-cols-1 gap-6 xl:grid-cols-12",children:[e.jsxs("article",{className:"xl:col-span-7 rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-6 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"font-heading text-lg font-bold",children:"Recent Visitor Activity"}),e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${f?"bg-success/20 text-success":"bg-warning/20 text-warning"}`,children:f?"LIVE":"RECONNECTING"})]}),e.jsxs("div",{className:"mb-4 rounded-xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between text-xs text-slate-500",children:[e.jsx("span",{children:"Weekly Traffic"}),e.jsx("span",{children:"Last 7 Days"})]}),e.jsx(Xa,{})]}),e.jsx("div",{className:"space-y-3",children:r.length===0?e.jsx(er,{text:"No activity yet."}):r.map(m=>e.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-4 text-sm transition hover:-translate-y-0.5 hover:shadow-soft dark:border-slate-800 dark:bg-slate-900",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-semibold",children:m.event}),e.jsx("span",{className:"text-xs text-slate-500",children:m.time})]})},m.id??`${m.event}-${m.time}`))})]}),e.jsxs("article",{className:"xl:col-span-5 rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-6 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("h2",{className:"mb-4 font-heading text-lg font-bold",children:"Realtime Interaction"}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(Me,{title:"Waiting Room",value:`${n.length} Visitors`,tone:"warning"}),e.jsx(Me,{title:"Active Session",value:(d==null?void 0:d.id)??"No session",tone:"success"}),e.jsx(Me,{title:"Latest Message",value:((c=o[0])==null?void 0:c.text)??"No unread messages",tone:"brand"}),e.jsx(Me,{title:"Call Status",value:(d==null?void 0:d.state)??"Idle",tone:"danger"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[e.jsx(Ie,{label:"Audio",tone:"success"}),e.jsx(Ie,{label:"Video",tone:"brand"}),e.jsx(Ie,{label:"Mute",tone:"warning"}),e.jsx(Ie,{label:"End",tone:"danger"})]})]})]}),t?null:e.jsx("section",{className:"mt-6",children:e.jsx("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-6 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-heading text-lg font-bold",children:"Billing & Subscription"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Upgrade your homeowner plan and pay securely with Paystack."})]}),e.jsx(p,{to:"/billing/paywall",className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white dark:bg-white dark:text-slate-900",children:"Open Billing"})]})})})]})}function Re({title:t,tip:a,value:s,tone:r,loading:n,sub:d}){const o={success:"bg-success/20 text-success",warning:"bg-warning/20 text-warning",danger:"bg-danger/20 text-danger",brand:"bg-brand-100 text-brand-700 dark:bg-brand-500/20 dark:text-brand-100"};return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-5 shadow-soft transition hover:-translate-y-0.5 dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-slate-500",children:t}),e.jsx(as,{text:a})]}),e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${o[r]}`,children:"Live"})]}),e.jsx("p",{className:"mt-3 font-heading text-2xl font-extrabold sm:text-3xl",children:n?"...":s}),e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:d})]})}function Me({title:t,value:a,tone:s}){const r={success:"bg-success",warning:"bg-warning",danger:"bg-danger",brand:"bg-brand-500"};return e.jsxs("div",{className:"rounded-xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`h-2 w-2 rounded-full ${r[s]}`}),e.jsx("p",{className:"text-xs text-slate-500",children:t})]}),e.jsx("p",{className:"mt-1 text-sm font-semibold",children:a})]})}function Ie({label:t,tone:a}){const s={success:"bg-success hover:bg-success/90",warning:"bg-warning hover:bg-warning/90",danger:"bg-danger hover:bg-danger/90",brand:"bg-brand-500 hover:bg-brand-600"};return e.jsx("button",{type:"button",className:`rounded-xl px-4 py-3 text-sm font-semibold text-white transition ${s[a]}`,children:t})}function Xa(){return e.jsxs("svg",{viewBox:"0 0 320 88",className:"h-16 w-full",role:"img","aria-label":"Traffic trend",children:[e.jsx("path",{d:"M0 65 L40 58 L80 60 L120 42 L160 47 L200 35 L240 30 L280 38 L320 20",fill:"none",stroke:"#2456f5",strokeWidth:"3",strokeLinecap:"round"}),e.jsx("path",{d:"M0 88 L0 65 L40 58 L80 60 L120 42 L160 47 L200 35 L240 30 L280 38 L320 20 L320 88 Z",fill:"rgba(36,86,245,0.15)"})]})}function er({text:t}){return e.jsx("p",{className:"rounded-xl bg-slate-100 p-4 text-sm text-slate-500 dark:bg-slate-800",children:t})}function as({text:t}){return e.jsxs("span",{className:"group relative inline-flex",children:[e.jsx("button",{type:"button",className:"grid h-5 w-5 place-items-center rounded-full bg-slate-200 text-[11px] font-bold text-slate-700 dark:bg-slate-700 dark:text-slate-100","aria-label":"More information",children:"?"}),e.jsx("span",{className:"pointer-events-none absolute left-1/2 top-7 z-10 hidden w-56 -translate-x-1/2 rounded-lg bg-slate-900 px-2 py-1 text-xs text-white shadow-lg group-hover:block group-focus-within:block",children:t})]})}const tr=[{key:"message",title:"Messages",description:"Open chat first, then move to call when ready.",buttonClass:"bg-slate-900 text-white hover:bg-slate-800"},{key:"audio",title:"Audio Call",description:"Start voice session with microphone only.",buttonClass:"bg-emerald-600 text-white hover:bg-emerald-700"},{key:"video",title:"Video Call",description:"Start live video and audio session.",buttonClass:"bg-cyan-600 text-white hover:bg-cyan-700"}];function sr({open:t,sessionId:a,onClose:s,onSelect:r}){const n=l.useMemo(()=>a?`Choose Session Mode (${a.slice(0,8)}...)`:"Choose Session Mode",[a]);return!t||!a?null:e.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-slate-900/50 p-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-slate-200 bg-white p-5 shadow-soft dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-heading text-lg font-bold",children:n}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Pick where you want to enter this session."}),e.jsx("div",{className:"mt-4 space-y-3",children:tr.map(d=>e.jsxs("button",{type:"button",onClick:()=>r(d.key),className:`w-full rounded-xl px-4 py-3 text-left transition ${d.buttonClass}`,children:[e.jsx("p",{className:"text-sm font-semibold",children:d.title}),e.jsx("p",{className:"text-xs opacity-85",children:d.description})]},d.key))}),e.jsx("button",{type:"button",onClick:s,className:"mt-4 w-full rounded-xl border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800",children:"Cancel"})]})})}function ar(){const t=ie(),[a,s]=l.useState([]),[r,n]=l.useState(!0),[d,o]=l.useState(""),[g,b]=l.useState(""),[f,c]=l.useState(""),[m,i]=l.useState(!1),[h,u]=l.useState(""),k=l.useCallback(async()=>{n(!0),o("");try{const x=await va();s(x)}catch(x){o(x.message??"Failed to load visits")}finally{n(!1)}},[]);l.useEffect(()=>{k()},[k]),l.useEffect(()=>{const x=setInterval(k,5e3);return()=>clearInterval(x)},[k]);async function y(x,R){b(x),o("");try{const C=await Ma(x,R);await Oa(x),s(M=>M.map(D=>D.id===x?{...D,status:(C==null?void 0:C.status)==="approved"?"Approved":"Rejected",sessionStatus:(C==null?void 0:C.status)??D.sessionStatus,canDecide:!1}:D))}catch(C){o(C.message??"Failed to update visit")}finally{b("")}}async function E(x){c(x),o("");try{await Pa(x),s(R=>R.map(C=>C.id===x?{...C,status:"Completed",sessionStatus:"closed",canDecide:!1}:C))}catch(R){o(R.message??"Failed to end session")}finally{c("")}}function j(x){u(x),i(!0)}function I(x){h&&(i(!1),t(`/session/${h}/${x}`))}return e.jsxs(X,{title:"Visits",children:[d?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:d}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-6",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Visitor Log"}),e.jsx("button",{type:"button",onClick:k,className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700",children:"Refresh"})]}),r?e.jsx("p",{className:"py-2 text-sm text-slate-500",children:"Loading visits..."}):a.length===0?e.jsx("p",{className:"py-2 text-sm text-slate-500",children:"No visit records yet."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3 md:hidden",children:a.map(x=>e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:x.visitor}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:x.door})]}),e.jsx("span",{className:`rounded-full px-2 py-1 text-[11px] font-semibold ${vt(x.status)}`,children:x.status})]}),e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:St(x.time)}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:x.canDecide?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",disabled:g===x.id,onClick:()=>y(x.id,"approve"),className:"rounded-lg bg-success px-3 py-1.5 text-[11px] font-semibold text-white disabled:opacity-50",children:"Approve"}),e.jsx("button",{type:"button",disabled:g===x.id,onClick:()=>y(x.id,"reject"),className:"rounded-lg bg-danger px-3 py-1.5 text-[11px] font-semibold text-white disabled:opacity-50",children:"Reject"})]}):x.sessionStatus==="approved"||x.sessionStatus==="active"?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>j(x.id),className:"rounded-lg bg-brand-500 px-3 py-1.5 text-[11px] font-semibold text-white",children:"Open Session"}),e.jsx("button",{type:"button",disabled:f===x.id,onClick:()=>E(x.id),className:"rounded-lg bg-danger px-3 py-1.5 text-[11px] font-semibold text-white disabled:opacity-50",children:f===x.id?"Ending...":"End Session"})]}):null})]},x.id))}),e.jsx("div",{className:"hidden overflow-x-auto md:block",children:e.jsxs("table",{className:"w-full min-w-[520px] text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:[e.jsx("th",{className:"py-3 font-semibold",children:"Visitor"}),e.jsx("th",{className:"py-3 font-semibold",children:"Door"}),e.jsx("th",{className:"py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"py-3 font-semibold",children:"Time"}),e.jsx("th",{className:"py-3 font-semibold",children:"Action"})]})}),e.jsx("tbody",{children:a.map(x=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-3 font-medium",children:x.visitor}),e.jsx("td",{className:"py-3",children:x.door}),e.jsx("td",{className:"py-3",children:e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${vt(x.status)}`,children:x.status})}),e.jsx("td",{className:"py-3 text-slate-500",children:St(x.time)}),e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:x.canDecide?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",disabled:g===x.id,onClick:()=>y(x.id,"approve"),className:"rounded-lg bg-success px-3 py-1.5 text-xs font-semibold text-white disabled:opacity-50",children:"Approve"}),e.jsx("button",{type:"button",disabled:g===x.id,onClick:()=>y(x.id,"reject"),className:"rounded-lg bg-danger px-3 py-1.5 text-xs font-semibold text-white disabled:opacity-50",children:"Reject"})]}):x.sessionStatus==="approved"||x.sessionStatus==="active"?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>j(x.id),className:"rounded-lg bg-brand-500 px-3 py-1.5 text-xs font-semibold text-white",children:"Open Session"}),e.jsx("button",{type:"button",disabled:f===x.id,onClick:()=>E(x.id),className:"rounded-lg bg-danger px-3 py-1.5 text-xs font-semibold text-white disabled:opacity-50",children:f===x.id?"Ending...":"End Session"})]}):e.jsx("span",{className:"text-xs text-slate-500",children:"No action"})})})]},x.id))})]})})]})]}),e.jsx(sr,{open:m,sessionId:h,onClose:()=>i(!1),onSelect:I})]})}function vt(t){return t==="Approved"||t==="Completed"||t==="Active"?"bg-success/15 text-success":t==="Pending"?"bg-warning/20 text-warning":t==="Rejected"?"bg-danger/15 text-danger":"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200"}function St(t){if(!t)return"-";const a=new Date(t);return Number.isNaN(a.getTime())?t:a.toLocaleString()}function rr(){const[t,a]=l.useState([]),[s,r]=l.useState(""),[n,d]=l.useState({}),[o,g]=l.useState(!0),[b,f]=l.useState(!1),[c,m]=l.useState(""),[i,h]=l.useState(!1),[u,k]=l.useState(""),[y,E]=l.useState(""),j=l.useRef(null),I=localStorage.getItem("qring_access_token");function x(A){A!=null&&A.sessionId&&a(L=>L.map(Q=>Q.id===A.sessionId?{...Q,last:A.text,time:A.at,unread:s===A.sessionId||A.senderType==="homeowner"?0:(Q.unread||0)+1}:Q))}l.useEffect(()=>{let A=!0;async function L(){g(!0),E("");try{const Q=await Nt();if(!A)return;a(Q),r(_=>{var B;return _||((B=Q[0])==null?void 0:B.id)||""})}catch(Q){if(!A)return;E(Q.message??"Failed to load messages")}finally{A&&g(!1)}}return L(),()=>{A=!1}},[]),l.useEffect(()=>{const A=setInterval(async()=>{try{const L=await Nt();a(Q=>{if(!Q.length)return L;const _=Object.fromEntries(Q.map(B=>[B.id,B.unread||0]));return L.map(B=>({...B,unread:_[B.id]??B.unread??0}))})}catch{}},8e3);return()=>clearInterval(A)},[]),l.useEffect(()=>{if(!s)return;let A=!0;return(async()=>{f(!0);try{const Q=await Sa(s);if(!A)return;d(_=>({..._,[s]:Q})),a(_=>_.map(B=>B.id===s?{...B,unread:0}:B))}catch(Q){if(!A)return;E(Q.message??"Failed to load conversation")}finally{A&&f(!1)}})(),()=>{A=!1}},[s]),l.useEffect(()=>{if(!s)return;const A=dt(`${oe.socketUrl}${oe.signalingNamespace}`,{path:oe.socketPath,transports:["websocket","polling"],auth:I?{token:I}:void 0,withCredentials:!0});return A.on("connect",()=>{A.emit("session.join",{sessionId:s,displayName:"Homeowner"})}),A.on("chat.message",L=>{const Q=L==null?void 0:L.sessionId;if(!Q)return;const _={id:(L==null?void 0:L.id)??`${(L==null?void 0:L.at)||Date.now()}-${Math.random()}`,sessionId:Q,text:(L==null?void 0:L.text)||"",senderType:(L==null?void 0:L.senderType)||"visitor",displayName:(L==null?void 0:L.displayName)||"Participant",at:(L==null?void 0:L.at)||new Date().toISOString()};d(B=>{const ee=B[Q]??[];return ee.some(se=>se.id===_.id)?B:{...B,[Q]:[...ee,_]}}),x(_)}),()=>{A.disconnect()}},[s,I]),l.useEffect(()=>{j.current&&(j.current.scrollTop=j.current.scrollHeight)},[s,n]);const R=l.useMemo(()=>t.find(A=>A.id===s)??null,[t,s]),C=l.useMemo(()=>n[s]??[],[n,s]);async function M(A){A.preventDefault();const L=c.trim();if(!(!s||!L)){h(!0);try{const Q=await Ca(s,L);Q&&(d(_=>{const B=_[s]??[];return B.some(ee=>ee.id===Q.id)?_:{..._,[s]:[...B,Q]}}),x(Q)),m("")}catch(Q){E(Q.message??"Failed to send message")}finally{h(!1)}}}async function D(A){if(!(!s||!A||u)){E(""),k(A);try{const L=C.filter(Q=>Q.id!==A);await Aa(s,A),d(Q=>({...Q,[s]:L})),a(Q=>Q.map(_=>{if(_.id!==s)return _;const B=L[L.length-1];return{..._,last:(B==null?void 0:B.text)??"",time:(B==null?void 0:B.at)??_.time}}))}catch(L){E(L.message??"Failed to delete message")}finally{k("")}}}return e.jsxs(X,{title:"Messages",children:[y?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:y}):null,e.jsxs("section",{className:"grid gap-3 sm:gap-4 lg:grid-cols-12",children:[e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-3 sm:p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 lg:col-span-5 sm:p-5",children:[e.jsx("h2",{className:"mb-4 font-heading text-lg font-bold sm:text-xl",children:"Threads"}),o?e.jsx(Ct,{text:"Loading threads..."}):null,!o&&t.length===0?e.jsx(Ct,{text:"No messages yet."}):null,e.jsx("div",{className:"space-y-3",children:t.map(A=>e.jsxs("button",{type:"button",onClick:()=>r(A.id),className:`flex w-full items-center justify-between rounded-xl border p-3 text-left transition ${s===A.id?"border-brand-500 bg-brand-50 dark:border-brand-400 dark:bg-brand-500/10":"border-slate-200 bg-white dark:border-slate-700 dark:bg-slate-900"}`,children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"truncate text-sm font-semibold",children:A.name}),e.jsx("p",{className:"truncate text-xs text-slate-500",children:A.last})]}),e.jsxs("div",{className:"ml-3 text-right",children:[e.jsx("p",{className:"text-xs text-slate-500",children:At(A.time)}),A.unread>0?e.jsx("span",{className:"mt-1 inline-block rounded-full bg-brand-500 px-2 py-0.5 text-[10px] font-bold text-white",children:A.unread}):null]})]},A.id))})]}),e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-3 sm:p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 lg:col-span-7 sm:p-5",children:[e.jsx("h2",{className:"mb-4 font-heading text-lg font-bold sm:text-xl",children:"Conversation"}),R?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Visitor"}),e.jsx("p",{className:"mt-1 text-sm font-semibold",children:R.name})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Door"}),e.jsx("p",{className:"mt-1 text-sm font-semibold",children:R.door})]})]}),e.jsxs("div",{ref:j,className:"max-h-[28rem] space-y-2 overflow-y-auto rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[b?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading conversation..."}):null,!b&&C.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No messages in this session yet."}):null,C.map(A=>{const L=A.senderType==="homeowner";return e.jsxs("div",{className:`max-w-[85%] rounded-xl px-3 py-2 text-sm ${L?"ml-auto bg-brand-500 text-white":"bg-white text-slate-800 dark:bg-slate-900 dark:text-slate-100"}`,children:[e.jsx("p",{className:"text-[11px] font-semibold opacity-80",children:A.displayName}),e.jsx("p",{children:A.text}),e.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2 text-[10px] opacity-80",children:[e.jsx("p",{children:At(A.at)}),L?e.jsx("button",{type:"button",onClick:()=>D(A.id),disabled:u===A.id,className:"rounded-md bg-black/20 px-2 py-0.5 text-[10px] font-semibold text-inherit disabled:opacity-60",children:u===A.id?"Deleting...":"Delete"}):null]})]},A.id)})]}),e.jsxs("form",{onSubmit:M,className:"flex gap-2",children:[e.jsx("input",{value:c,onChange:A=>m(A.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 text-sm dark:border-slate-700 dark:bg-slate-900",placeholder:"Type a message to this visitor"}),e.jsx("button",{type:"submit",disabled:i||!s||!c.trim(),className:"rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:i?"Sending...":"Send"})]})]}):e.jsx("div",{className:"rounded-xl bg-slate-100 p-4 text-sm text-slate-600 dark:bg-slate-800 dark:text-slate-300",children:"Select a thread to view details."})]})]})]})}function Ct({text:t}){return e.jsx("div",{className:"mb-3 rounded-xl bg-slate-100 p-4 text-sm text-slate-600 dark:bg-slate-800 dark:text-slate-300",children:t})}function At(t){if(!t)return"-";const a=new Date(t);return Number.isNaN(a.getTime())?t:a.toLocaleString()}function lr(){var ae;const[t,a]=l.useState([]),[s,r]=l.useState(null),[n,d]=l.useState(!0),[o,g]=l.useState(""),[b,f]=l.useState(""),[c,m]=l.useState(""),[i,h]=l.useState(""),[u,k]=l.useState(""),[y,E]=l.useState(!1),[j,I]=l.useState(""),[x,R]=l.useState(""),[C,M]=l.useState(!1),[D,A]=l.useState(""),[L,Q]=l.useState(!0),[_,B]=l.useState({size:"240",shape:"rounded"}),ee=l.useRef(null),se=!!(s&&Number(s.maxDoors??0)>0&&Number(s.usedDoors??0)>=Number(s.maxDoors??0)),w=!!(s&&Number(s.maxQrCodes??0)>0&&Number(s.usedQrCodes??0)>=Number(s.maxQrCodes??0));async function O(){var P,Y;d(!0),g("");try{const U=await Ea(),V=(U==null?void 0:U.doors)??[];a(V),r((U==null?void 0:U.subscription)??null),(P=U==null?void 0:U.subscription)!=null&&P.managedByEstate&&(M(!0),A(((Y=U==null?void 0:U.subscription)==null?void 0:Y.estateName)||"")),!i&&V.length>0&&h(V[0].id),!j&&V.length>0&&I(V[0].id)}catch(U){g(U.message??"Failed to load doors")}finally{d(!1)}}l.useEffect(()=>{O()},[]),l.useEffect(()=>{let P=!0;async function Y(){try{const U=await Fe();if(!P)return;M(!!(U!=null&&U.managedByEstate)),A((U==null?void 0:U.estateName)||"")}catch{if(!P)return;const U=localStorage.getItem("qring_user");let V=!1;try{const J=U?JSON.parse(U):null;V=typeof(J==null?void 0:J.email)=="string"&&J.email.toLowerCase().endsWith("@estate.useqring.online")}catch{V=!1}M(V),A("")}finally{P&&Q(!1)}}return Y(),()=>{P=!1}},[]);async function G(P){var Y,U;if(P.preventDefault(),se||w){g(se?`Door limit reached (${(s==null?void 0:s.maxDoors)??0}) for your ${(s==null?void 0:s.plan)??"current"} plan.`:`QR limit reached (${(s==null?void 0:s.maxQrCodes)??0}) for your ${(s==null?void 0:s.plan)??"current"} plan.`);return}E(!0),g(""),m("");try{const V=await Ra({name:u,generateQr:!0,mode:"direct",plan:"single"});if(V!=null&&V.door&&(a(J=>[V.door,...J]),h(V.door.id),I(V.door.id),(Y=V==null?void 0:V.qr)!=null&&Y.qr_id&&R(V.qr.qr_id),k("")),r(J=>J&&{...J,usedDoors:(J.usedDoors??0)+1,remainingDoors:Math.max((J.remainingDoors??0)-1,0),usedQrCodes:(J.usedQrCodes??0)+(V!=null&&V.qr?1:0),remainingQrCodes:Math.max((J.remainingQrCodes??0)-(V!=null&&V.qr?1:0),0)}),(U=V==null?void 0:V.qr)!=null&&U.qr_id){const J=`${window.location.origin}/scan/${V.qr.qr_id}`;try{await navigator.clipboard.writeText(J),m(`Door created and QR copied: ${J}`)}catch{m(`Door created with QR: ${J}`)}}else m("Door created successfully.")}catch(V){g(V.message??"Failed to create door")}finally{E(!1)}}const F=t.find(P=>String(P.id)===String(j))??null,W=F&&x?{doorName:F.name,scanUrl:`${window.location.origin}/scan/${x}`}:null;return e.jsxs(X,{title:"Doors",children:[o?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:o}):null,c?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:c}):null,C?e.jsxs("div",{className:"mb-4 rounded-xl border border-warning/30 bg-warning/10 px-4 py-3 text-sm text-warning",children:["Door and QR creation are managed by your estate",D?` (${D})`:"","."]}):null,s?e.jsxs("section",{className:"mb-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Subscription"}),e.jsxs("p",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:["Plan: ",s.plan," (",s.status,")"]})]}),e.jsxs("div",{className:"text-right text-xs text-slate-600 dark:text-slate-300",children:[e.jsxs("p",{children:["Doors: ",s.usedDoors,"/",s.maxDoors]}),e.jsxs("p",{children:["QR Codes: ",s.usedQrCodes,"/",s.maxQrCodes]})]})]}),s.overDoorLimit?e.jsx("p",{className:"mt-3 rounded-lg bg-warning/15 px-3 py-2 text-xs font-medium text-warning",children:"You are above your plan door limit. Upgrade your subscription."}):null]}):null,!L&&!C?e.jsxs("section",{className:"mb-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Create Door"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 sm:text-sm",children:"Enter a new door name and create it with a QR code."}),e.jsxs("form",{className:"mt-4 grid gap-3 sm:grid-cols-[1fr_auto]",onSubmit:G,children:[e.jsx("input",{type:"text",value:u,onChange:P=>k(P.target.value),placeholder:"e.g. Front Gate",className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm outline-none ring-brand-300 focus:ring-2 dark:border-slate-700 dark:bg-slate-900",required:!0}),e.jsx("button",{type:"submit",disabled:y||se||w,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:cursor-not-allowed disabled:opacity-50 dark:bg-white dark:text-slate-900",children:y?"Creating...":"Create Door + QR"})]})]}):null,n?e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-5 text-sm text-slate-500 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:"Loading doors..."}):t.length===0?e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-5 text-sm text-slate-500 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:"No doors configured yet."}):e.jsxs("section",{children:[e.jsx("h2",{className:"mb-3 font-heading text-lg font-bold sm:text-xl",children:"Doors Created"}),e.jsx("div",{className:"grid gap-3 sm:gap-4 md:grid-cols-2 xl:grid-cols-3",children:t.map(P=>{var Y;return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-5 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-heading text-lg font-bold",children:P.name}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:P.homeName})]}),e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${P.state==="Online"?"bg-success/20 text-success":"bg-danger/20 text-danger"}`,children:P.state})]}),e.jsx("p",{className:"mt-4 text-xs uppercase tracking-wide text-slate-500",children:"Linked QR Codes"}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(Y=P.qr)!=null&&Y.length?P.qr.map(U=>e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-2 py-1 text-xs font-semibold transition hover:border-slate-300 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("img",{src:Oe(`${window.location.origin}/scan/${U}`,40),alt:`QR ${U}`,className:"h-5 w-5 rounded"}),e.jsx("span",{children:U})]},`${P.id}-${U}`)):e.jsx("span",{className:"text-xs text-slate-500",children:"No QR linked"})}),e.jsx("button",{type:"button",onClick:()=>{var U;I(P.id),R(((U=P.qr)==null?void 0:U[0])??""),setTimeout(()=>{var V;(V=ee.current)==null||V.scrollIntoView({behavior:"smooth",block:"start"})},0)},className:"mt-4 w-full rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:cursor-not-allowed disabled:opacity-50 dark:bg-white dark:text-slate-900",children:"View Door"})]},P.id)})})]}),F?e.jsxs("section",{ref:ee,className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Door Details & QR Print"}),e.jsx("button",{type:"button",onClick:()=>{I(""),R("")},className:"rounded-lg border border-slate-300 px-3 py-1.5 text-xs font-semibold dark:border-slate-700",children:"Close"})]}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500 sm:text-sm",children:["Door: ",F.name," | QR: ",x||"None selected"]}),e.jsxs("div",{className:"mt-4 grid gap-4 lg:grid-cols-[300px_1fr]",children:[e.jsxs("div",{className:"space-y-3 rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"QR Codes Created"}),e.jsx("div",{className:"max-h-40 space-y-2 overflow-y-auto pr-1",children:(ae=F.qr)!=null&&ae.length?F.qr.map(P=>e.jsxs("button",{type:"button",onClick:()=>R(P),className:`flex w-full items-center gap-2 rounded-lg border px-2 py-2 text-left text-xs font-semibold transition ${x===P?"border-brand-500 bg-brand-50 text-brand-700 dark:bg-brand-500/10 dark:text-brand-200":"border-slate-200 bg-white hover:border-slate-300 dark:border-slate-700 dark:bg-slate-900"}`,children:[e.jsx("img",{src:Oe(`${window.location.origin}/scan/${P}`,40),alt:`QR ${P}`,className:"h-8 w-8 rounded"}),e.jsx("span",{className:"truncate",children:P})]},`${F.id}-pick-${P}`)):e.jsx("p",{className:"text-xs text-slate-500",children:"No QR codes for this door yet."})}),e.jsxs("label",{className:"block text-xs font-semibold uppercase tracking-wide text-slate-500",children:["Print Size",e.jsxs("select",{value:_.size,onChange:P=>B(Y=>({...Y,size:P.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 bg-white px-2 py-2 text-sm font-medium dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("option",{value:"180",children:"Small (180px)"}),e.jsx("option",{value:"240",children:"Medium (240px)"}),e.jsx("option",{value:"320",children:"Large (320px)"}),e.jsx("option",{value:"420",children:"XL Poster (420px)"})]})]}),e.jsxs("label",{className:"block text-xs font-semibold uppercase tracking-wide text-slate-500",children:["Gen Z Shape",e.jsxs("select",{value:_.shape,onChange:P=>B(Y=>({...Y,shape:P.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 bg-white px-2 py-2 text-sm font-medium dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("option",{value:"rounded",children:"Rounded Card"}),e.jsx("option",{value:"circle",children:"Circle Sticker"}),e.jsx("option",{value:"diamond",children:"Diamond Tilt"}),e.jsx("option",{value:"squircle",children:"Squircle"}),e.jsx("option",{value:"ticket",children:"Ticket Cut"}),e.jsx("option",{value:"home",children:"Home Badge"}),e.jsx("option",{value:"bell",children:"Bell Badge"}),e.jsx("option",{value:"star",children:"Star Pop"})]})]}),e.jsx("button",{type:"button",disabled:!W,onClick:()=>nr(W,_),className:"w-full rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white dark:bg-white dark:text-slate-900",children:"Print QR"})]}),e.jsx("div",{className:"grid place-items-center rounded-xl border border-dashed border-slate-300 bg-white p-4 dark:border-slate-700 dark:bg-slate-900",children:W?e.jsxs("div",{className:`bg-white p-4 shadow-lg ${Pt(_.shape)}`,style:{width:`${Number(_.size)+40}px`},children:[e.jsx("div",{className:"mb-2 text-center text-xs font-semibold uppercase tracking-wide text-slate-500",children:W.doorName}),e.jsx("img",{src:Oe(W.scanUrl,Number(_.size)),alt:`QR for ${W.doorName}`,className:`mx-auto bg-white p-2 ${Pt(_.shape)}`,style:{width:`${Number(_.size)}px`,height:`${Number(_.size)}px`}}),e.jsx("div",{className:"mt-2 text-center text-[10px] font-medium text-slate-500",children:W.scanUrl})]}):e.jsx("p",{className:"text-sm text-slate-500",children:"Pick a QR code to preview and print."})})]})]}):null]})}function Oe(t,a=240){return`https://api.qrserver.com/v1/create-qr-code/?size=${a}x${a}&data=${encodeURIComponent(t)}`}function Pt(t){return t==="circle"?"rounded-full":t==="diamond"?"rotate-2 rounded-2xl":t==="squircle"?"rounded-[32px]":t==="ticket"?"rounded-[22px]":t==="home"?"rounded-[18px]":t==="bell"?"rounded-[24px]":t==="star"?"rounded-[14px]":"rounded-2xl"}function nr(t,a){const s=Number(a.size||240),r=Oe(t.scanUrl,s),n={rounded:"border-radius:18px;",circle:"border-radius:9999px;",diamond:"border-radius:22px;transform:rotate(2deg);",squircle:"border-radius:32px;",ticket:"border-radius:22px;clip-path: polygon(6% 0,94% 0,100% 18%,100% 82%,94% 100%,6% 100%,0 82%,0 18%);",home:"clip-path: polygon(50% 0,100% 30%,100% 100%,0 100%,0 30%);border-radius:10px;",bell:"clip-path: polygon(20% 22%,30% 8%,70% 8%,80% 22%,86% 64%,74% 88%,26% 88%,14% 64%);border-radius:10px;",star:"clip-path: polygon(50% 0,61% 35%,98% 35%,68% 57%,79% 92%,50% 70%,21% 92%,32% 57%,2% 35%,39% 35%);border-radius:8px;"}[a.shape]||"border-radius:18px;",d=`
    <html>
      <head>
        <title>Print QR</title>
        <style>
          body{font-family:Inter,Arial,sans-serif;padding:24px;background:#fff;color:#111}
          .card{width:${s+40}px;padding:16px;border:1px solid #e2e8f0;${n}}
          .door{font-size:12px;font-weight:700;text-transform:uppercase;letter-spacing:.08em;text-align:center;color:#334155;margin-bottom:8px}
          .qr{width:${s}px;height:${s}px;display:block;margin:0 auto;background:#fff;padding:8px;${n}}
          .url{font-size:10px;color:#64748b;text-align:center;margin-top:8px;word-break:break-all}
        </style>
      </head>
      <body>
        <div class="card">
          <div class="door">${t.doorName}</div>
          <img class="qr" src="${r}" alt="QR" />
          <div class="url">${t.scanUrl}</div>
        </div>
        <script>window.onload = () => { window.print(); };<\/script>
      </body>
    </html>`,o=window.open("","_blank","width=700,height=800");o&&(o.document.open(),o.document.write(d),o.document.close())}async function or(){const t=await $("/homeowner/settings");return(t==null?void 0:t.data)??null}async function ir(t){const a=await $("/homeowner/settings",{method:"PUT",body:JSON.stringify(t)});return(a==null?void 0:a.data)??null}function dr(){const[t,a]=l.useState({pushAlerts:!0,soundAlerts:!0,autoRejectUnknownVisitors:!1}),[s,r]=l.useState(!1),[n,d]=l.useState(""),[o,g]=l.useState(null),[b,f]=l.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[c,m]=l.useState(!0),[i,h]=l.useState(!1),[u,k]=l.useState(!1),[y,E]=l.useState(""),[j,I]=l.useState("");l.useEffect(()=>{let C=!0;async function M(){m(!0),I("");try{const D=await or();if(!C)return;a({pushAlerts:!!(D!=null&&D.pushAlerts),soundAlerts:!!(D!=null&&D.soundAlerts),autoRejectUnknownVisitors:!!(D!=null&&D.autoRejectUnknownVisitors)}),r(!!(D!=null&&D.managedByEstate)),d((D==null?void 0:D.estateName)||""),localStorage.setItem("qring_sound_alerts",String(!!(D!=null&&D.soundAlerts))),window.dispatchEvent(new Event("qring:sound-alerts-updated")),g((D==null?void 0:D.subscription)??null)}catch(D){if(!C)return;I(D.message??"Failed to load settings")}finally{C&&m(!1)}}return M(),()=>{C=!1}},[]);async function x(C){C.preventDefault(),h(!0),I(""),E("");try{const M=await ir(t);a({pushAlerts:!!(M!=null&&M.pushAlerts),soundAlerts:!!(M!=null&&M.soundAlerts),autoRejectUnknownVisitors:!!(M!=null&&M.autoRejectUnknownVisitors)}),localStorage.setItem("qring_sound_alerts",String(!!(M!=null&&M.soundAlerts))),window.dispatchEvent(new Event("qring:sound-alerts-updated")),E("Settings updated successfully.")}catch(M){I(M.message??"Failed to update settings")}finally{h(!1)}}async function R(C){if(C.preventDefault(),k(!0),I(""),E(""),b.newPassword!==b.confirmPassword){I("New password and confirm password do not match."),k(!1);return}try{await ma({currentPassword:b.currentPassword,newPassword:b.newPassword}),f({currentPassword:"",newPassword:"",confirmPassword:""}),E("Password changed successfully.")}catch(M){I(M.message??"Failed to change password")}finally{k(!1)}}return e.jsxs(X,{title:"Settings",children:[j?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:j}):null,y?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:y}):null,s?e.jsxs("div",{className:"mb-4 rounded-xl border border-brand-300/40 bg-brand-50 px-4 py-3 text-sm text-brand-700 dark:bg-brand-500/10 dark:text-brand-200",children:["Your plan is managed by estate admin",n?` (${n})`:"","."]}):null,c?e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/90 p-5 text-sm text-slate-500 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:"Loading settings..."}):e.jsxs("section",{className:"grid gap-3 sm:gap-4 xl:grid-cols-12",children:[e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-6 xl:col-span-7",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Preferences"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Manage how you receive alerts and visitor auto-reject behavior."}),e.jsxs("form",{className:"mt-4 space-y-3",onSubmit:x,children:[e.jsx(tt,{label:"Push Alerts",checked:t.pushAlerts,onChange:C=>a(M=>({...M,pushAlerts:C}))}),e.jsx(tt,{label:"Sound Alerts",checked:t.soundAlerts,onChange:C=>a(M=>({...M,soundAlerts:C}))}),e.jsx(tt,{label:"Auto Reject Unknown Visitors",checked:t.autoRejectUnknownVisitors,onChange:C=>a(M=>({...M,autoRejectUnknownVisitors:C}))}),e.jsx("button",{type:"submit",disabled:i,className:"w-full rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50 sm:w-auto dark:bg-white dark:text-slate-900",children:i?"Saving...":"Save Preferences"})]})]}),e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-6 xl:col-span-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Current Subscription"}),o?e.jsxs("div",{className:"mt-4 rounded-xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Plan"}),e.jsx("p",{className:"mt-1 text-base font-semibold",children:o.plan}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Status: ",o.status]}),o.limits?e.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Limits: ",o.limits.maxDoors," doors, ",o.limits.maxQrCodes," QR codes"]}):null]}):e.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"No subscription information available."}),e.jsxs("form",{className:"mt-6 space-y-3",onSubmit:R,children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Reset Password"}),e.jsx(st,{label:"Current Password",value:b.currentPassword,onChange:C=>f(M=>({...M,currentPassword:C}))}),e.jsx(st,{label:"New Password",value:b.newPassword,onChange:C=>f(M=>({...M,newPassword:C}))}),e.jsx(st,{label:"Confirm New Password",value:b.confirmPassword,onChange:C=>f(M=>({...M,confirmPassword:C}))}),e.jsx("button",{type:"submit",disabled:u,className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold disabled:opacity-50 dark:border-slate-700",children:u?"Updating...":"Update Password"})]})]})]})]})}function tt({label:t,checked:a,onChange:s}){return e.jsxs("label",{className:"flex items-center justify-between rounded-xl border border-slate-200 px-3 py-2 dark:border-slate-700",children:[e.jsx("span",{className:"text-sm font-medium",children:t}),e.jsx("input",{type:"checkbox",checked:a,onChange:r=>s(r.target.checked),className:"h-4 w-4 accent-brand-500"})]})}function st({label:t,value:a,onChange:s}){return e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700 dark:text-slate-300",children:t}),e.jsx("input",{type:"password",value:a,required:!0,minLength:8,onChange:r=>s(r.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm outline-none ring-brand-300 transition focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]})}const Et="₦";function cr(){const{user:t}=de(),[a,s]=l.useState([]),[r,n]=l.useState(null),[d,o]=l.useState([]),[g,b]=l.useState(""),[f,c]=l.useState(""),[m,i]=l.useState(""),h=ie();l.useEffect(()=>{let j=!0;async function I(){try{const[x,R,C,M]=await Promise.all([Ms(),Is(),Jt(),(t==null?void 0:t.role)==="homeowner"?Fe():Promise.resolve(null)]);if(!j)return;if((t==null?void 0:t.role)==="homeowner"&&(M!=null&&M.managedByEstate)){h("/dashboard/homeowner/overview",{replace:!0});return}n(x),s(R),o(C)}catch(x){if(!j)return;c(x.message??"Failed to load billing data")}}return I(),()=>{j=!1}},[h,t==null?void 0:t.role]);const u=l.useMemo(()=>{if(!(r!=null&&r.plan))return"Free";const j=d.find(I=>I.id===r.plan);return(j==null?void 0:j.name)??r.plan},[d,r]),k=(t==null?void 0:t.role)==="estate"?"/dashboard/estate":"/dashboard/homeowner/overview",y=(t==null?void 0:t.role)==="estate"?"Estate Dashboard":"Homeowner Dashboard";async function E(j){b(j.id),c(""),i("");try{if(j.amount===0){const I=await Ts(j.id);n(x=>({...x??{},...I,limits:{maxDoors:j.maxDoors,maxQrCodes:j.maxQrCodes}})),i("Free plan activated. You can manage up to 1 door and 1 QR code.")}else{const x=!["localhost","127.0.0.1"].includes(window.location.hostname)&&window.location.protocol==="https:"?`${window.location.origin}/billing/callback`:void 0,R=await Ds(j.id,x);if(!(R!=null&&R.authorization_url))throw new Error("Unable to start Paystack checkout");window.location.href=R.authorization_url}}catch(I){c(I.message??"Failed to process plan request")}finally{b("")}}return e.jsxs(X,{title:"Billing & Subscription",children:[f?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:f}):null,m?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:m}):null,e.jsx("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-5 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-heading text-xl font-bold",children:"Current Plan"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:u}),r!=null&&r.limits?e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Limit: ",r.limits.maxDoors," door(s), ",r.limits.maxQrCodes," QR code(s)"]}):null]}),e.jsxs("button",{type:"button",onClick:()=>h(k),className:"rounded-lg bg-brand-500 px-4 py-2 text-sm font-semibold text-white",children:["Back to ",y]})]})}),e.jsx("section",{className:"mt-4 grid gap-3 sm:mt-6 sm:gap-4 md:grid-cols-2 xl:grid-cols-3",children:d.map(j=>e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-5 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500",children:j.name}),e.jsxs("p",{className:"mt-2 text-2xl font-bold",children:[j.amount===0?`${Et}0`:`${Et}${new Intl.NumberFormat("en-NG").format(j.amount)}`,e.jsx("span",{className:"ml-1 text-sm font-medium text-slate-500",children:"/month"})]}),e.jsxs("p",{className:"mt-2 text-sm text-slate-500",children:["Up to ",j.maxDoors," doors"]}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Up to ",j.maxQrCodes," QR codes"]}),e.jsx("button",{type:"button",disabled:g===j.id||(r==null?void 0:r.plan)===j.id,onClick:()=>E(j),className:"mt-4 w-full rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:cursor-not-allowed disabled:opacity-50 dark:bg-white dark:text-slate-900",children:(r==null?void 0:r.plan)===j.id?"Current plan":g===j.id?"Processing...":j.amount===0?"Activate free":"Pay with Paystack"})]},j.id))}),e.jsxs("section",{className:"mt-6 rounded-2xl border border-slate-200 bg-white/90 p-5 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("h3",{className:"font-heading text-lg font-bold",children:"Manual Payment Instructions"}),a.length===0?e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No manual payment account configured."}):e.jsx("div",{className:"mt-3 space-y-3",children:a.map(j=>e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-sm font-semibold",children:j.name}),e.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:j.description}),e.jsx("p",{className:"mt-2 text-xs font-medium text-slate-500",children:j.accountInfo})]},j.id))}),e.jsxs("p",{className:"mt-4 text-xs text-slate-500",children:["Need help? ",e.jsx(p,{to:"/contact",className:"font-semibold text-brand-600 dark:text-brand-300",children:"Contact support"}),"."]})]})]})}function xr(){const{user:t}=de(),[a,s]=l.useState(""),[r,n]=l.useState("Verifying payment..."),[d]=Ht(),o=ie();return l.useEffect(()=>{let g=!0;async function b(){const f=d.get("reference")||d.get("trxref");if(!f){s("Missing Paystack reference.");return}try{if(await Ls(f),!g)return;n("Payment successful. Redirecting..."),setTimeout(()=>{const c=(t==null?void 0:t.role)==="estate"?"/dashboard/estate":"/dashboard/homeowner/overview";o(c,{replace:!0})},800)}catch(c){if(!g)return;s(c.message??"Unable to verify payment.")}}return b(),()=>{g=!1}},[o,d,t==null?void 0:t.role]),e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-100 p-6 dark:bg-slate-950",children:e.jsx("div",{className:"w-full max-w-md rounded-2xl border border-slate-200 bg-white p-6 text-center shadow-soft dark:border-slate-800 dark:bg-slate-900",children:a?e.jsx("p",{className:"text-sm font-semibold text-danger",children:a}):e.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:r})})})}async function fe(){const t=await $("/estate/overview");return(t==null?void 0:t.data)??{}}async function mr(t){const a=await $("/estate/",{method:"POST",body:JSON.stringify(t)});return(a==null?void 0:a.data)??null}async function hr(t){const a=await $("/estate/homes",{method:"POST",body:JSON.stringify(t)});return(a==null?void 0:a.data)??null}async function ur(t){const a=await $("/estate/doors",{method:"POST",body:JSON.stringify(t)});return(a==null?void 0:a.data)??null}async function br(t){const a=await $("/estate/doors/provision",{method:"POST",body:JSON.stringify(t)});return(a==null?void 0:a.data)??null}async function gr(t,a){const s=await $(`/estate/doors/${t}/assign-homeowner`,{method:"POST",body:JSON.stringify({homeownerId:a})});return(s==null?void 0:s.data)??null}async function pr(t){const a=await $(`/estate/homeowners/${t}/invite`,{method:"POST"});return(a==null?void 0:a.data)??null}async function fr(){const t=await $("/estate/mappings");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function jr(){const t=await $("/estate/access-logs");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function kr(){const t=await $("/estate/plan-restrictions");return(t==null?void 0:t.data)??null}async function wr(t,a){const s=await $(`/estate/doors/${t}/admin-profile`,{method:"PUT",body:JSON.stringify(a)});return(s==null?void 0:s.data)??null}async function rs(t){const a=await $("/estate/shared-qr",{method:"POST",body:JSON.stringify({estateId:t})});return(a==null?void 0:a.data)??null}async function Rt(t){const a=await $(`/estate/shared-qr?estateId=${encodeURIComponent(t)}`);return Array.isArray(a==null?void 0:a.data)?a.data:[]}const Nr=[{title:"Create Estate",description:"Set up a new estate profile before adding homes and access doors."},{title:"Add Doors",description:"Register entry points so each door can be mapped and monitored."},{title:"Assign Doors To Homeowners",description:"Link doors to responsible homeowners for approvals and notifications."},{title:"Invite Homeowners",description:"Send access invites so residents can sign in and control their doors."},{title:"Manage Door Mappings",description:"Review and adjust door-to-homeowner mappings at any time."},{title:"View Access Logs",description:"Track entry attempts and approvals for audit and security review."},{title:"Plan Restrictions",description:"See usage limits and plan-based restrictions for estate operations."},{title:"Multi-Home Support",description:"Handle multiple homes under one estate workspace."}];function yr(){var d,o,g,b;const[t,a]=l.useState(null),[s,r]=l.useState("");l.useEffect(()=>{let f=!0;async function c(){try{const m=await fe();if(!f)return;a(m)}catch(m){if(!f)return;r(m.message??"Failed to load estate data")}}return c(),()=>{f=!1}},[]);const n={estates:((d=t==null?void 0:t.estates)==null?void 0:d.length)??0,homes:((o=t==null?void 0:t.homes)==null?void 0:o.length)??0,doors:((g=t==null?void 0:t.doors)==null?void 0:g.length)??0,homeowners:((b=t==null?void 0:t.homeowners)==null?void 0:b.length)??0};return e.jsxs(X,{title:"Estate Overview",children:[s?e.jsx(vr,{tone:"danger",message:s}):null,e.jsxs("section",{className:"mb-4 grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[e.jsx(Te,{label:"Estates",tip:"Total estate profiles currently configured.",value:n.estates}),e.jsx(Te,{label:"Homes",tip:"Number of homes across your estate setup.",value:n.homes}),e.jsx(Te,{label:"Doors",tip:"Registered access doors managed from this account.",value:n.doors}),e.jsx(Te,{label:"Homeowners",tip:"Residents linked to doors and available for approvals.",value:n.homeowners})]}),e.jsxs("section",{className:"mb-4 rounded-2xl border border-brand-100 bg-brand-50/70 p-4 dark:border-brand-500/30 dark:bg-brand-500/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"font-heading text-base font-bold",children:"How to use estate dashboard"}),e.jsx(it,{text:"Use this as your control center: configure estate structure, then manage residents and logs."})]}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Start with create estate and add doors, then assign homeowners and monitor access logs daily."})]}),e.jsx("section",{className:"mb-4",children:e.jsx(p,{to:"/dashboard/estate/create",className:"inline-flex items-center rounded-xl bg-slate-900 px-4 py-2 text-sm font-semibold text-white dark:bg-white dark:text-slate-900",children:"Create an Estate"})}),e.jsx("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:Nr.map(f=>e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/80 p-5 shadow-soft dark:border-slate-800 dark:bg-slate-900/70",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"font-heading text-lg font-bold",children:f.title}),e.jsx(it,{text:f.description})]}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:f.description})]},f.title))}),e.jsx("section",{className:"mt-4",children:e.jsx("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Billing & Subscription"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Manage estate plan limits and complete payments via Paystack."})]}),e.jsx(p,{to:"/billing/paywall",className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white dark:bg-white dark:text-slate-900",children:"Open Billing"})]})})})]})}function Te({label:t,tip:a,value:s}){return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsx(it,{text:a})]}),e.jsx("p",{className:"mt-2 text-2xl font-black",children:s})]})}function vr({tone:t,message:a}){const s=t==="danger"?"border-danger/30 bg-danger/10 text-danger":"border-brand-200 bg-brand-50 text-brand-700";return e.jsx("div",{className:`mb-4 rounded-xl border px-4 py-3 text-sm ${s}`,children:a})}function it({text:t}){return e.jsxs("span",{className:"group relative inline-flex",children:[e.jsx("button",{type:"button",className:"grid h-5 w-5 place-items-center rounded-full bg-slate-200 text-[11px] font-bold text-slate-700 dark:bg-slate-700 dark:text-slate-100","aria-label":"More information",children:"?"}),e.jsx("span",{className:"pointer-events-none absolute left-1/2 top-7 z-10 hidden w-56 -translate-x-1/2 rounded-lg bg-slate-900 px-2 py-1 text-xs text-white shadow-lg group-hover:block group-focus-within:block",children:t})]})}function Sr(){const[t,a]=l.useState(""),[s,r]=l.useState([]),[n,d]=l.useState({}),[o,g]=l.useState(""),[b,f]=l.useState(""),[c,m]=l.useState(!1),[i,h]=l.useState("");async function u(){const j=await fe();r(Array.isArray(j==null?void 0:j.estates)?j.estates:[])}l.useEffect(()=>{u().catch(j=>g(j.message??"Failed to load estates"))},[]),l.useEffect(()=>{let j=!0;async function I(){if(s.length!==0)try{const x=await Promise.all(s.map(async R=>{const C=await Rt(R.id);return[R.id,C]}));if(!j)return;d(Object.fromEntries(x))}catch{}}return I(),()=>{j=!1}},[s]);async function k(j){j.preventDefault(),m(!0),g(""),f("");try{const I=await mr({name:t});f(`Estate created: ${(I==null?void 0:I.name)??t}`),a(""),await u()}catch(I){g(I.message??"Failed to create estate")}finally{m(!1)}}const y=l.useMemo(()=>s.map(j=>{const x=(n[j.id]??[]).find(R=>R.active!==!1)??null;return{...j,sharedQr:x}}),[s,n]);async function E(j){h(j),g(""),f("");try{const I=await rs(j);f(`Estate QR created: ${(I==null?void 0:I.qrId)??"ready"}`);const x=await Rt(j);d(R=>({...R,[j]:x}))}catch(I){g(I.message??"Failed to create estate QR")}finally{h("")}}return e.jsxs(X,{title:"Create Estate",children:[o?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:o}):null,b?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:b}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Create Estate"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."}),e.jsxs("form",{className:"mt-4 grid gap-3 sm:grid-cols-[1fr_auto]",onSubmit:k,children:[e.jsx("input",{type:"text",value:t,onChange:j=>a(j.target.value),placeholder:"Estate name",className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm outline-none ring-brand-300 focus:ring-2 dark:border-slate-700 dark:bg-slate-900",required:!0}),e.jsx("button",{type:"submit",disabled:c,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:c?"Creating...":"Create"})]})]}),e.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Your Estates"}),e.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:[y.map(j=>e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"truncate font-semibold",children:j.name}),e.jsx("p",{className:"truncate text-xs text-slate-500",children:j.id})]}),e.jsx("button",{type:"button",onClick:()=>E(j.id),disabled:i===j.id,className:"rounded-lg bg-slate-900 px-3 py-2 text-xs font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:i===j.id?"Generating...":j.sharedQr?"Regenerate QR":"Generate QR"})]}),e.jsxs("div",{className:"mt-3 rounded-lg border border-slate-200 bg-white p-3 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Estate QR (Shared)"}),j.sharedQr?e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("p",{className:"text-sm font-semibold",children:j.sharedQr.qrId}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Doors: ",j.sharedQr.doorCount??"-"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx("a",{href:j.sharedQr.scanUrl,className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700",children:"Open Scan Page"}),e.jsx("button",{type:"button",onClick:()=>Cr(`${window.location.origin}${j.sharedQr.scanUrl}`),className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700",children:"Copy Link"})]}),e.jsx("p",{className:"mt-2 text-[11px] text-slate-500",children:"This QR is a selector QR: it can route visitors to any door in the estate."})]}):e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Not generated yet. You need at least 1 home and 1 door in this estate before generating."})]})]},j.id)),y.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No estates created yet."}):null]})]})]})}async function Cr(t){try{await navigator.clipboard.writeText(t),window.dispatchEvent(new CustomEvent("qring:toast",{detail:{message:"Copied"}}))}catch{}}function Ne(t,a=140){return`https://api.qrserver.com/v1/create-qr-code/?size=${a}x${a}&data=${encodeURIComponent(t)}`}function Ar(){const[t,a]=l.useState(null),[s,r]=l.useState(""),[n,d]=l.useState(""),[o,g]=l.useState(!1),[b,f]=l.useState(!1),[c,m]=l.useState(null),[i,h]=l.useState(null),[u,k]=l.useState(""),[y,E]=l.useState(!1),[j,I]=l.useState({doorName:"",homeownerName:"",homeownerEmail:"",newPassword:""}),[x,R]=l.useState({estateId:"",homeId:"",name:"",homeName:"",homeownerFullName:"",homeownerUsername:"",homeownerPassword:""});async function C(){var O,G;const w=await fe();a(w),!x.estateId&&((O=w==null?void 0:w.estates)!=null&&O.length)&&R(F=>({...F,estateId:w.estates[0].id})),!x.homeId&&((G=w==null?void 0:w.homes)!=null&&G.length)&&R(F=>({...F,homeId:w.homes[0].id}))}l.useEffect(()=>{C().catch(w=>r(w.message??"Failed to load door data"))},[]);const M=l.useMemo(()=>((t==null?void 0:t.homes)??[]).filter(w=>!x.estateId||w.estateId===x.estateId),[t,x.estateId]),D=l.useMemo(()=>(t==null?void 0:t.doors)??[],[t]);async function A(w){var O,G,F,W,ae;w.preventDefault(),g(!0),r(""),d(""),m(null);try{if(b){const P=await br({estateId:x.estateId,homeName:x.homeName,doorName:x.name,homeownerFullName:x.homeownerFullName,homeownerUsername:x.homeownerUsername,homeownerPassword:x.homeownerPassword});(O=P==null?void 0:P.qr)!=null&&O.qrId&&m({qrId:P.qr.qrId,scanUrl:`${window.location.origin}/scan/${P.qr.qrId}`,doorName:((G=P==null?void 0:P.door)==null?void 0:G.name)??x.name}),d(`Door created and linked to ${((F=P==null?void 0:P.homeowner)==null?void 0:F.username)??"homeowner"}.`)}else{const P=await ur({estateId:x.estateId,homeId:x.homeId,name:x.name,generateQr:!0,mode:"direct",plan:"single"});(W=P==null?void 0:P.qr)!=null&&W.qrId&&m({qrId:P.qr.qrId,scanUrl:`${window.location.origin}/scan/${P.qr.qrId}`,doorName:((ae=P==null?void 0:P.door)==null?void 0:ae.name)??x.name}),d("Door created successfully.")}R(P=>({...P,name:"",homeName:"",homeownerFullName:"",homeownerUsername:"",homeownerPassword:""})),await C()}catch(P){r(P.message??"Failed to create door")}finally{g(!1)}}async function L(){if(x.estateId){r(""),d("");try{const w=await rs(x.estateId);h({...w,fullScanUrl:`${window.location.origin}${w.scanUrl}`}),d("Estate shared QR generated. Visitors can pick a door after scanning."),await C()}catch(w){r(w.message??"Failed to generate estate shared QR")}}}async function Q(w){if(w.preventDefault(),!!u){E(!0),r(""),d("");try{const O={doorName:j.doorName||void 0,homeownerName:j.homeownerName||void 0,homeownerEmail:j.homeownerEmail||void 0,newPassword:j.newPassword||void 0};await wr(u,O),d("Door admin profile updated successfully."),k(""),I({doorName:"",homeownerName:"",homeownerEmail:"",newPassword:""}),await C()}catch(O){r(O.message??"Failed to update door admin profile")}finally{E(!1)}}}function _(w){k(w.id),I({doorName:w.name??"",homeownerName:w.homeownerName??"",homeownerEmail:w.homeownerEmail??"",newPassword:""})}function B(w,O){const G=`${window.location.origin}/scan/${O}`,F=`
      <html>
        <head>
          <title>Print Door QR</title>
          <style>
            body{font-family:Arial,sans-serif;padding:24px}
            .card{width:340px;border:1px solid #cbd5e1;border-radius:16px;padding:16px}
            .title{font-size:14px;font-weight:700;text-align:center;margin-bottom:8px}
            .meta{font-size:12px;color:#475569;text-align:center;margin-bottom:8px}
            .qr{display:block;width:280px;height:280px;margin:0 auto;background:#fff;padding:8px;border-radius:10px}
            .url{font-size:10px;color:#64748b;text-align:center;margin-top:8px;word-break:break-all}
          </style>
        </head>
        <body>
          <div class="card">
            <div class="title">${w.name}</div>
            <div class="meta">${w.homeName||""}</div>
            <img class="qr" src="${Ne(G,280)}" alt="QR" />
            <div class="url">${G}</div>
          </div>
          <script>window.onload = () => window.print();<\/script>
        </body>
      </html>
    `,W=window.open("","_blank","width=720,height=860");W&&(W.document.open(),W.document.write(F),W.document.close())}async function ee(w){const O=`${w.loginLink}?email=${encodeURIComponent(w.homeownerEmail||"")}`,G=`Homeowner: ${w.homeownerName||"N/A"}
Email: ${w.homeownerEmail||"N/A"}
Login: ${O}`;try{await navigator.clipboard.writeText(G),d(`Login details copied for ${w.name}.`),r("")}catch{r("Unable to copy login details. Please copy manually.")}}function se(){var W;if(!i)return;const w=((W=((t==null?void 0:t.estates)??[]).find(ae=>ae.id===x.estateId))==null?void 0:W.name)??"Estate Entry",O=Ne(i.fullScanUrl,300),G=`
      <html>
        <head>
          <title>Print Shared Estate QR</title>
          <style>
            body{font-family:Inter,Arial,sans-serif;padding:24px;background:#fff;color:#0f172a}
            .card{width:380px;border:1px solid #cbd5e1;border-radius:18px;padding:18px}
            .brand{display:flex;align-items:center;gap:10px;margin-bottom:8px}
            .logo{width:30px;height:30px;border-radius:9px;background:#0f172a;color:#fff;display:grid;place-items:center;font-weight:800}
            .name{font-size:18px;font-weight:800}
            .subtitle{font-size:12px;color:#475569;margin-bottom:10px}
            .title{font-size:12px;text-transform:uppercase;letter-spacing:.08em;color:#334155;text-align:center;margin:8px 0}
            .qr{display:block;width:320px;height:320px;margin:0 auto;background:#fff;padding:10px;border-radius:12px;border:1px solid #e2e8f0}
            .steps{margin-top:10px;font-size:11px;color:#475569;line-height:1.5}
            .url{font-size:10px;color:#64748b;text-align:center;margin-top:8px;word-break:break-all}
          </style>
        </head>
        <body>
          <div class="card">
            <div class="brand">
              <div class="logo">Q</div>
              <div>
                <div class="name">Qring</div>
                <div class="subtitle">${w}</div>
              </div>
            </div>
            <div class="title">Shared Estate Access QR</div>
            <img class="qr" src="${O}" alt="Shared Estate QR" />
            <div class="steps">
              1. Visitor scans this QR<br/>
              2. Selects door from list<br/>
              3. Sends request to specific homeowner
            </div>
            <div class="url">${i.fullScanUrl}</div>
          </div>
          <script>window.onload = () => window.print();<\/script>
        </body>
      </html>
    `,F=window.open("","_blank","width=760,height=900");F&&(F.document.open(),F.document.write(G),F.document.close())}return e.jsxs(X,{title:"Estate Doors",children:[s?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:s}):null,n?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:n}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Create Door"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Create doors and provision homeowner login in one flow."})]}),e.jsx("button",{type:"button",onClick:()=>f(w=>!w),className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700",children:b?"Use Existing Homeowner":"Provision New Homeowner Login"})]}),e.jsxs("form",{onSubmit:A,className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(Mt,{label:"Estate",value:x.estateId,onChange:w=>R(O=>({...O,estateId:w})),options:((t==null?void 0:t.estates)??[]).map(w=>({value:w.id,label:w.name}))}),b?e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Home Name"}),e.jsx("input",{value:x.homeName,onChange:w=>R(O=>({...O,homeName:w.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0})]}):e.jsx(Mt,{label:"Home",value:x.homeId,onChange:w=>R(O=>({...O,homeId:w})),options:M.map(w=>({value:w.id,label:`${w.name} (${w.homeownerName||"No homeowner"})`}))}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Door Name"}),e.jsx("input",{value:x.name,onChange:w=>R(O=>({...O,name:w.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0})]}),b?e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Homeowner Full Name"}),e.jsx("input",{value:x.homeownerFullName,onChange:w=>R(O=>({...O,homeownerFullName:w.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Username"}),e.jsx("input",{value:x.homeownerUsername,onChange:w=>R(O=>({...O,homeownerUsername:w.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Password"}),e.jsx("input",{type:"password",value:x.homeownerPassword,onChange:w=>R(O=>({...O,homeownerPassword:w.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0})]})]}):null,e.jsx("button",{type:"submit",disabled:o,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:o?"Saving...":"Create Door"})]})]}),c?e.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("h3",{className:"font-heading text-base font-bold",children:"Generated QR"}),e.jsx("p",{className:"text-xs text-slate-500",children:c.doorName}),e.jsxs("div",{className:"mt-3 inline-flex flex-col items-center rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("img",{src:Ne(c.scanUrl,180),alt:c.qrId,className:"h-44 w-44 rounded bg-white p-2"}),e.jsx("p",{className:"mt-2 text-xs font-semibold",children:c.qrId})]})]}):null,e.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-heading text-base font-bold",children:"Estate Shared Entry QR"}),e.jsx("p",{className:"text-xs text-slate-500",children:"One QR for the estate. Visitors scan, pick door, then request access."})]}),e.jsx("button",{type:"button",onClick:L,className:"rounded-lg bg-slate-900 px-3 py-2 text-xs font-semibold text-white dark:bg-white dark:text-slate-900",children:"Generate Shared QR"})]}),i?e.jsxs("div",{className:"mt-3 inline-flex flex-col items-center rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("img",{src:Ne(i.fullScanUrl,180),alt:i.qrId,className:"h-44 w-44 rounded bg-white p-2"}),e.jsx("p",{className:"mt-2 text-xs font-semibold",children:i.qrId}),e.jsx("p",{className:"text-[11px] text-slate-500",children:i.fullScanUrl}),e.jsx("button",{type:"button",onClick:se,className:"mt-3 rounded-lg bg-slate-900 px-3 py-2 text-xs font-semibold text-white dark:bg-white dark:text-slate-900",children:"Print Shared Estate QR"})]}):null]}),e.jsxs("section",{className:"mt-4",children:[e.jsx("h3",{className:"mb-3 font-heading text-lg font-bold",children:"Doors Created"}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2 2xl:grid-cols-3",children:[D.map(w=>{var F,W;const O=(F=w.qr)==null?void 0:F[0],G=`${w.loginLink}?email=${encodeURIComponent(w.homeownerEmail||"")}`;return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-heading text-lg font-bold",children:w.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[w.homeName," | ",w.state]})]}),e.jsx("button",{type:"button",onClick:()=>_(w),className:"rounded-lg border border-slate-300 px-2 py-1 text-xs font-semibold dark:border-slate-700",children:"Admin Profile"})]}),e.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Homeowner: ",w.homeownerName||"N/A"]}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Email: ",w.homeownerEmail||"N/A"]}),e.jsx("a",{href:G,target:"_blank",rel:"noreferrer",className:"mt-2 inline-block text-xs font-semibold text-brand-600 dark:text-brand-300",children:"Estate Homeowner Login Link"}),e.jsx("div",{className:"mt-2",children:e.jsx("button",{type:"button",onClick:()=>ee(w),className:"rounded-lg border border-slate-300 px-2.5 py-1.5 text-xs font-semibold dark:border-slate-700",children:"Copy Login Details"})}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[(W=w.qr)!=null&&W.length?w.qr.map(ae=>e.jsxs("button",{type:"button",onClick:()=>B(w,ae),className:"rounded-lg border border-slate-200 bg-slate-50 px-2 py-1 text-xs font-semibold dark:border-slate-700 dark:bg-slate-800",children:["Print ",ae]},`${w.id}-${ae}`)):e.jsx("span",{className:"text-xs text-slate-500",children:"No QR yet"}),O?e.jsx("img",{src:Ne(`${window.location.origin}/scan/${O}`,64),alt:O,className:"h-12 w-12 rounded border border-slate-200 bg-white p-1 dark:border-slate-700"}):null]})]},w.id)}),D.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No doors created yet."}):null]})]}),u?e.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"font-heading text-lg font-bold",children:"Door Admin Profile"}),e.jsx("button",{type:"button",onClick:()=>k(""),className:"rounded-lg border border-slate-300 px-2 py-1 text-xs font-semibold dark:border-slate-700",children:"Close"})]}),e.jsxs("form",{onSubmit:Q,className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Door Name"}),e.jsx("input",{value:j.doorName,onChange:w=>I(O=>({...O,doorName:w.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Homeowner Name"}),e.jsx("input",{value:j.homeownerName,onChange:w=>I(O=>({...O,homeownerName:w.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Homeowner Email"}),e.jsx("input",{type:"email",value:j.homeownerEmail,onChange:w=>I(O=>({...O,homeownerEmail:w.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Change Password"}),e.jsx("input",{type:"password",value:j.newPassword,onChange:w=>I(O=>({...O,newPassword:w.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",placeholder:"Leave empty to keep current password"})]}),e.jsx("button",{type:"submit",disabled:y,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:y?"Updating...":"Update Admin Profile"})]})]}):null]})}function Mt({label:t,value:a,onChange:s,options:r}){return e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsxs("select",{value:a,onChange:n=>s(n.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0,children:[r.length===0?e.jsx("option",{value:"",children:"No options available"}):null,r.map(n=>e.jsx("option",{value:n.value,children:n.label},n.value))]})]})}function Pr(){const[t,a]=l.useState(null),[s,r]=l.useState({doorId:"",homeownerId:""}),[n,d]=l.useState(""),[o,g]=l.useState(""),[b,f]=l.useState(!1);async function c(){var h,u;const i=await fe();a(i),!s.doorId&&((h=i==null?void 0:i.doors)!=null&&h.length)&&r(k=>({...k,doorId:i.doors[0].id})),!s.homeownerId&&((u=i==null?void 0:i.homeowners)!=null&&u.length)&&r(k=>({...k,homeownerId:i.homeowners[0].id}))}l.useEffect(()=>{c().catch(i=>d(i.message??"Failed to load assignment data"))},[]);async function m(i){i.preventDefault(),f(!0),d(""),g("");try{await gr(s.doorId,s.homeownerId),g("Door assigned to homeowner."),await c()}catch(h){d(h.message??"Failed to assign door")}finally{f(!1)}}return e.jsxs(X,{title:"Assign Doors",children:[n?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:n}):null,o?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:o}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Assign Doors To Homeowners"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."}),e.jsxs("form",{onSubmit:m,className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(It,{label:"Door",value:s.doorId,onChange:i=>r(h=>({...h,doorId:i})),options:((t==null?void 0:t.doors)??[]).map(i=>({value:i.id,label:i.name}))}),e.jsx(It,{label:"Homeowner",value:s.homeownerId,onChange:i=>r(h=>({...h,homeownerId:i})),options:((t==null?void 0:t.homeowners)??[]).map(i=>({value:i.id,label:`${i.fullName} (${i.email})`}))}),e.jsx("button",{type:"submit",disabled:b,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:b?"Assigning...":"Assign Door"})]})]})]})}function It({label:t,value:a,onChange:s,options:r}){return e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsxs("select",{value:a,onChange:n=>s(n.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0,children:[r.length===0?e.jsx("option",{value:"",children:"No options available"}):null,r.map(n=>e.jsx("option",{value:n.value,children:n.label},n.value))]})]})}function Er(){const[t,a]=l.useState([]),[s,r]=l.useState(""),[n,d]=l.useState(""),[o,g]=l.useState("");async function b(){const c=await fe();a(Array.isArray(c==null?void 0:c.homeowners)?c.homeowners:[])}l.useEffect(()=>{b().catch(c=>r(c.message??"Failed to load homeowners"))},[]);async function f(c){g(c),r(""),d("");try{const m=await pr(c);d(`Invite sent. Token: ${(m==null?void 0:m.inviteToken)??"-"}`)}catch(m){r(m.message??"Failed to send invite")}finally{g("")}}return e.jsxs(X,{title:"Invite Homeowners",children:[s?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:s}):null,n?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:n}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Invite Homeowners"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."})]}),e.jsxs("section",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:[t.map(c=>e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("p",{className:"font-semibold",children:c.fullName}),e.jsx("p",{className:"text-xs text-slate-500",children:c.email}),e.jsx("button",{type:"button",onClick:()=>f(c.id),disabled:o===c.id,className:"mt-3 rounded-lg bg-slate-900 px-3 py-2 text-xs font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:o===c.id?"Sending...":"Send Invite"})]},c.id)),t.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No homeowners available yet."}):null]})]})}function Rr(){const[t,a]=l.useState([]),[s,r]=l.useState("");return l.useEffect(()=>{let n=!0;async function d(){try{const o=await fr();if(!n)return;a(o)}catch(o){if(!n)return;r(o.message??"Failed to load mappings")}}return d(),()=>{n=!1}},[]),e.jsxs(X,{title:"Door Mappings",children:[s?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:s}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Manage Door Mappings"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."})]}),e.jsxs("section",{className:"mt-4 space-y-3",children:[t.map(n=>{var d;return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-heading text-lg font-bold",children:n.homeName}),e.jsxs("p",{className:"text-xs text-slate-500",children:[n.homeownerName," | ",n.homeownerEmail]})]}),e.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold dark:bg-slate-800",children:[((d=n.doors)==null?void 0:d.length)??0," doors"]})]}),e.jsx("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:(n.doors??[]).map(o=>e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-sm font-semibold",children:o.name}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["QR: ",(o.qr??[]).join(", ")||"None"]})]},o.id))})]},n.homeId)}),t.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No mappings created yet."}):null]})]})}function Mr(){const[t,a]=l.useState([]),[s,r]=l.useState("");return l.useEffect(()=>{let n=!0;async function d(){try{const o=await jr();if(!n)return;a(o)}catch(o){if(!n)return;r(o.message??"Failed to load access logs")}}return d(),()=>{n=!1}},[]),e.jsxs(X,{title:"Access Logs",children:[s?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:s}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"View Access Logs"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."})]}),e.jsxs("section",{className:"mt-4 space-y-3",children:[t.map(n=>e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsx("p",{className:"font-semibold",children:n.visitor}),e.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs font-semibold uppercase dark:bg-slate-800",children:n.status})]}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:[n.doorName," | ",n.homeName]}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Started: ",new Date(n.startedAt).toLocaleString()]})]},n.id)),t.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No access logs yet."}):null]})]})}function Ir(){const[t,a]=l.useState(null),[s,r]=l.useState("");l.useEffect(()=>{let o=!0;async function g(){try{const b=await kr();if(!o)return;a(b)}catch(b){if(!o)return;r(b.message??"Failed to load plan restrictions")}}return g(),()=>{o=!1}},[]);const n=t!=null&&t.maxDoors?Math.min(Math.round(t.usedDoors/t.maxDoors*100),100):0,d=t!=null&&t.maxQrCodes?Math.min(Math.round(t.usedQrCodes/t.maxQrCodes*100),100):0;return e.jsxs(X,{title:"Plan Restrictions",children:[s?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:s}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Plan Restrictions"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."}),t?e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("p",{className:"text-sm font-semibold",children:["Plan: ",t.plan]}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Status: ",t.status]})]}),e.jsx(Tt,{label:`Doors ${t.usedDoors}/${t.maxDoors}`,percent:n}),e.jsx(Tt,{label:`QR Codes ${t.usedQrCodes}/${t.maxQrCodes}`,percent:d})]}):e.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Loading restrictions..."})]})]})}function Tt({label:t,percent:a}){return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs font-semibold text-slate-500",children:[e.jsx("span",{children:t}),e.jsxs("span",{children:[a,"%"]})]}),e.jsx("div",{className:"h-2 rounded-full bg-slate-200 dark:bg-slate-700",children:e.jsx("div",{className:"h-2 rounded-full bg-slate-900 dark:bg-slate-100",style:{width:`${a}%`}})})]})}function Tr(){const[t,a]=l.useState(null),[s,r]=l.useState({estateId:"",name:"",homeownerId:""}),[n,d]=l.useState(""),[o,g]=l.useState(""),[b,f]=l.useState(!1);async function c(){var h,u;const i=await fe();a(i),!s.estateId&&((h=i==null?void 0:i.estates)!=null&&h.length)&&r(k=>({...k,estateId:i.estates[0].id})),!s.homeownerId&&((u=i==null?void 0:i.homeowners)!=null&&u.length)&&r(k=>({...k,homeownerId:i.homeowners[0].id}))}l.useEffect(()=>{c().catch(i=>d(i.message??"Failed to load homes"))},[]);async function m(i){i.preventDefault(),f(!0),d(""),g("");try{await hr(s),g("Home added successfully."),r(h=>({...h,name:""})),await c()}catch(h){d(h.message??"Failed to add home")}finally{f(!1)}}return e.jsxs(X,{title:"Multi-Home Support",children:[n?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:n}):null,o?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:o}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Add Home"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."}),e.jsxs("form",{onSubmit:m,className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(Dt,{label:"Estate",value:s.estateId,onChange:i=>r(h=>({...h,estateId:i})),options:((t==null?void 0:t.estates)??[]).map(i=>({value:i.id,label:i.name}))}),e.jsx(Dt,{label:"Homeowner",value:s.homeownerId,onChange:i=>r(h=>({...h,homeownerId:i})),options:((t==null?void 0:t.homeowners)??[]).map(i=>({value:i.id,label:`${i.fullName} (${i.email})`}))}),e.jsxs("label",{className:"block md:col-span-2",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Home Name"}),e.jsx("input",{value:s.name,onChange:i=>r(h=>({...h,name:i.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0})]}),e.jsx("button",{type:"submit",disabled:b,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:b?"Saving...":"Add Home"})]})]}),e.jsx("section",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:((t==null?void 0:t.homes)??[]).map(i=>e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("p",{className:"font-semibold",children:i.name}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:i.homeownerName||"No homeowner assigned"}),e.jsx("p",{className:"text-xs text-slate-500",children:i.homeownerEmail})]},i.id))})]})}function Dt({label:t,value:a,onChange:s,options:r}){return e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsxs("select",{value:a,onChange:n=>s(n.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0,children:[r.length===0?e.jsx("option",{value:"",children:"No options available"}):null,r.map(n=>e.jsx("option",{value:n.value,children:n.label},n.value))]})]})}async function ls(){const t=await $("/admin/overview");return(t==null?void 0:t.data)??null}function Dr(){var c,m;const[t,a]=l.useState(null),[s,r]=l.useState(!0),[n,d]=l.useState(""),[o,g]=l.useState("");l.useEffect(()=>{let i=!0;async function h(){r(!0),d("");try{const u=await ls();if(!i)return;a(u)}catch(u){if(!i)return;u instanceof xe&&u.status===404?d("Admin overview endpoint not found (404). Restart the backend server so /api/v1/admin/overview is available."):d(u.message??"Failed to load admin overview")}finally{i&&r(!1)}}return h(),()=>{i=!1}},[]);const b=l.useMemo(()=>{var u;const i=((u=t==null?void 0:t.visits)==null?void 0:u.rows)??[],h=o.trim().toLowerCase();return h?i.filter(k=>[k.visitor,k.homeownerName,k.homeownerEmail,k.estateName,k.doorName,k.status].join(" ").toLowerCase().includes(h)):i},[t,o]),f=(t==null?void 0:t.metrics)??{};return e.jsxs(X,{title:"Admin Overview",children:[n?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:n}):null,e.jsxs("section",{className:"grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[e.jsx(De,{label:"Total Homeowners",value:f.totalHomeowners,loading:s}),e.jsx(De,{label:"Total Estates",value:f.totalEstates,loading:s}),e.jsx(De,{label:"Total Visits",value:f.totalVisits,loading:s}),e.jsx(De,{label:"Total Payments",value:s?"...":at(f.totalPaymentAmount),loading:!1})]}),e.jsxs("section",{className:"mt-4 grid gap-4 xl:grid-cols-2",children:[e.jsx(Le,{title:"Homeowners",loading:s,rows:(t==null?void 0:t.homeowners)??[],columns:[{key:"fullName",label:"Name"},{key:"email",label:"Email"},{key:"homeCount",label:"Homes"},{key:"doorCount",label:"Doors"},{key:"qrCount",label:"QR"},{key:"visits",label:"Visits",render:i=>{var h;return((h=i.visits)==null?void 0:h.total)??0}},{key:"plan",label:"Plan",render:i=>{var h;return((h=i.subscription)==null?void 0:h.plan)??"free"}}]}),e.jsx(Le,{title:"Estates",loading:s,rows:(t==null?void 0:t.estates)??[],columns:[{key:"fullName",label:"Name"},{key:"email",label:"Email"},{key:"estateCount",label:"Estates"},{key:"homeownerCount",label:"Homeowners"},{key:"doorCount",label:"Doors"},{key:"qrCount",label:"QR"},{key:"plan",label:"Plan",render:i=>{var h;return((h=i.subscription)==null?void 0:h.plan)??"free"}}]})]}),e.jsxs("section",{className:"mt-4 grid gap-4 xl:grid-cols-2",children:[e.jsx(Le,{title:"Homeowner Payment History",loading:s,rows:((c=t==null?void 0:t.payments)==null?void 0:c.homeownerHistory)??[],columns:[{key:"userName",label:"User"},{key:"userEmail",label:"Email"},{key:"plan",label:"Plan"},{key:"status",label:"Status"},{key:"amount",label:"Amount",render:i=>at(i.amount)},{key:"startsAt",label:"Date",render:i=>rt(i.startsAt)}]}),e.jsx(Le,{title:"Estate Payment History",loading:s,rows:((m=t==null?void 0:t.payments)==null?void 0:m.estateHistory)??[],columns:[{key:"userName",label:"User"},{key:"userEmail",label:"Email"},{key:"plan",label:"Plan"},{key:"status",label:"Status"},{key:"amount",label:"Amount",render:i=>at(i.amount)},{key:"startsAt",label:"Date",render:i=>rt(i.startsAt)}]})]}),e.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Visits By User"}),e.jsx("input",{value:o,onChange:i=>g(i.target.value),placeholder:"Search visitor, homeowner, estate, door...",className:"w-full max-w-md rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900"})]}),s?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading visits..."}):b.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No visits found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[880px] text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:[e.jsx("th",{className:"py-2 font-semibold",children:"Visitor"}),e.jsx("th",{className:"py-2 font-semibold",children:"Status"}),e.jsx("th",{className:"py-2 font-semibold",children:"Homeowner"}),e.jsx("th",{className:"py-2 font-semibold",children:"Estate"}),e.jsx("th",{className:"py-2 font-semibold",children:"Door"}),e.jsx("th",{className:"py-2 font-semibold",children:"Started"})]})}),e.jsx("tbody",{children:b.map(i=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-2",children:i.visitor}),e.jsx("td",{className:"py-2",children:i.status}),e.jsx("td",{className:"py-2",children:i.homeownerName||"-"}),e.jsx("td",{className:"py-2",children:i.estateName||"-"}),e.jsx("td",{className:"py-2",children:i.doorName||"-"}),e.jsx("td",{className:"py-2",children:rt(i.startedAt)})]},i.id))})]})})]})]})}function De({label:t,value:a,loading:s}){return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsx("p",{className:"mt-2 text-2xl font-black",children:s?"...":a??0})]})}function Le({title:t,rows:a,columns:s,loading:r}){return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"mb-3 font-heading text-lg font-bold sm:text-xl",children:t}),r?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading..."}):a.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No records."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[680px] text-left text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:s.map(n=>e.jsx("th",{className:"py-2 font-semibold",children:n.label},n.label))})}),e.jsx("tbody",{children:a.slice(0,200).map(n=>e.jsx("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:s.map(d=>e.jsx("td",{className:"py-2",children:d.render?d.render(n):n[d.key]??"-"},`${n.id}-${d.label}`))},n.id))})]})})]})}function at(t){const a=Number(t||0);return`N${new Intl.NumberFormat("en-NG").format(a)}`}function rt(t){if(!t)return"-";const a=new Date(t);return Number.isNaN(a.getTime())?t:a.toLocaleString()}function Lr(){var m;const[t,a]=l.useState(null),[s,r]=l.useState(!0),[n,d]=l.useState(""),[o,g]=l.useState("");l.useEffect(()=>{let i=!0;async function h(){r(!0),d("");try{const u=await ls();if(!i)return;a(u)}catch(u){if(!i)return;u instanceof xe&&u.status===404?d("Admin overview endpoint not found (404). Restart the backend server so /api/v1/admin/overview is available."):d(u.message??"Failed to load admin payments")}finally{i&&r(!1)}}return h(),()=>{i=!1}},[]);const b=((m=t==null?void 0:t.payments)==null?void 0:m.totalAmount)??0,f=l.useMemo(()=>{var u;const i=((u=t==null?void 0:t.payments)==null?void 0:u.homeownerHistory)??[],h=o.trim().toLowerCase();return h?i.filter(k=>[k.userName,k.userEmail,k.plan,k.status].join(" ").toLowerCase().includes(h)):i},[t,o]),c=l.useMemo(()=>{var u;const i=((u=t==null?void 0:t.payments)==null?void 0:u.estateHistory)??[],h=o.trim().toLowerCase();return h?i.filter(k=>[k.userName,k.userEmail,k.plan,k.status].join(" ").toLowerCase().includes(h)):i},[t,o]);return e.jsxs(X,{title:"Payments",children:[n?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:n}):null,e.jsxs("section",{className:"grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[e.jsx(qe,{label:"Total Payments",value:s?"...":ns(b)}),e.jsx(qe,{label:"Homeowner Records",value:s?"...":f.length}),e.jsx(qe,{label:"Estate Records",value:s?"...":c.length}),e.jsx(qe,{label:"Last Updated",value:s?"...":"now"})]}),e.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Payment History"}),e.jsx("input",{value:o,onChange:i=>g(i.target.value),placeholder:"Search name, email, plan, status...",className:"w-full max-w-md rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900"})]}),s?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading payments..."}):e.jsxs("div",{className:"grid gap-4 xl:grid-cols-2",children:[e.jsx(Lt,{title:"Homeowner Payments",rows:f}),e.jsx(Lt,{title:"Estate Payments",rows:c})]})]})]})}function qe({label:t,value:a}){return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsx("p",{className:"mt-2 text-2xl font-black",children:a??0})]})}function Lt({title:t,rows:a}){return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/60 p-4 dark:border-slate-800 dark:bg-slate-950/30",children:[e.jsx("h3",{className:"mb-3 font-heading text-base font-bold",children:t}),a.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No records."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[640px] text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:[e.jsx("th",{className:"py-2 font-semibold",children:"User"}),e.jsx("th",{className:"py-2 font-semibold",children:"Email"}),e.jsx("th",{className:"py-2 font-semibold",children:"Plan"}),e.jsx("th",{className:"py-2 font-semibold",children:"Status"}),e.jsx("th",{className:"py-2 font-semibold",children:"Amount"}),e.jsx("th",{className:"py-2 font-semibold",children:"Date"})]})}),e.jsx("tbody",{children:a.slice(0,200).map(s=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-2 font-semibold",children:s.userName||"-"}),e.jsx("td",{className:"py-2",children:s.userEmail||"-"}),e.jsx("td",{className:"py-2",children:s.plan||"-"}),e.jsx("td",{className:"py-2",children:s.status||"-"}),e.jsx("td",{className:"py-2",children:ns(s.amount)}),e.jsx("td",{className:"py-2",children:qr(s.startsAt)})]},s.id))})]})})]})}function ns(t){const a=Number(t||0);return`N${new Intl.NumberFormat("en-NG").format(a)}`}function qr(t){if(!t)return"-";const a=new Date(t);return Number.isNaN(a.getTime())?t:a.toLocaleString()}function $r(){const[t,a]=l.useState([]),[s,r]=l.useState(!0),[n,d]=l.useState(""),[o,g]=l.useState(""),[b,f]=l.useState(""),[c,m]=l.useState("");l.useEffect(()=>{let u=!0;async function k(){r(!0),d("");try{const y=new URLSearchParams;b&&y.set("role",b),o.trim()&&y.set("q",o.trim());const E=await $(`/admin/users?${y.toString()}`);if(!u)return;a(Array.isArray(E==null?void 0:E.data)?E.data:[])}catch(y){if(!u)return;y instanceof xe&&y.status===404?d("Admin users endpoint not found (404). Restart backend so /api/v1/admin/users is available."):d(y.message??"Failed to load users")}finally{u&&r(!1)}}return k(),()=>{u=!1}},[o,b]);const i=l.useMemo(()=>t,[t]);async function h(u){m(u.id),d("");try{const k=await $(`/admin/users/${encodeURIComponent(u.id)}`,{method:"PATCH",body:JSON.stringify({isActive:!u.active})}),y=(k==null?void 0:k.data)??null;if(!y)return;a(E=>E.map(j=>j.id===y.id?{...j,active:y.active}:j))}catch(k){d(k.message??"Failed to update user")}finally{m("")}}return e.jsxs(X,{title:"Admin Users",children:[n?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:n}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Users"}),e.jsxs("div",{className:"flex w-full flex-col gap-2 sm:w-auto sm:flex-row sm:items-center",children:[e.jsxs("select",{value:b,onChange:u=>f(u.target.value),className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("option",{value:"",children:"All roles"}),e.jsx("option",{value:"homeowner",children:"Homeowner"}),e.jsx("option",{value:"estate",children:"Estate"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsx("input",{value:o,onChange:u=>g(u.target.value),placeholder:"Search name or email...",className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900 sm:w-72"})]})]}),s?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading users..."}):i.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No users found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[820px] text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:[e.jsx("th",{className:"py-2 font-semibold",children:"Name"}),e.jsx("th",{className:"py-2 font-semibold",children:"Email"}),e.jsx("th",{className:"py-2 font-semibold",children:"Role"}),e.jsx("th",{className:"py-2 font-semibold",children:"Active"}),e.jsx("th",{className:"py-2 font-semibold",children:"Created"}),e.jsx("th",{className:"py-2 font-semibold",children:"Action"})]})}),e.jsx("tbody",{children:i.slice(0,300).map(u=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-2 font-semibold",children:u.fullName}),e.jsx("td",{className:"py-2",children:u.email}),e.jsx("td",{className:"py-2",children:u.role}),e.jsx("td",{className:"py-2",children:u.active?"Yes":"No"}),e.jsx("td",{className:"py-2",children:Or(u.createdAt)}),e.jsx("td",{className:"py-2",children:e.jsx("button",{type:"button",disabled:c===u.id,onClick:()=>h(u),className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700 disabled:opacity-50",children:c===u.id?"Saving...":u.active?"Deactivate":"Activate"})})]},u.id))})]})})]})]})}function Or(t){if(!t)return"-";const a=new Date(t);return Number.isNaN(a.getTime())?t:a.toLocaleString()}function Qr(){const[t,a]=l.useState([]),[s,r]=l.useState(!0),[n,d]=l.useState(""),[o,g]=l.useState(""),[b,f]=l.useState("");l.useEffect(()=>{let m=!0;async function i(){r(!0),d("");try{const h=new URLSearchParams;o&&h.set("status",o);const u=await $(`/admin/sessions?${h.toString()}`);if(!m)return;a(Array.isArray(u==null?void 0:u.data)?u.data:[])}catch(h){if(!m)return;h instanceof xe&&h.status===404?d("Admin sessions endpoint not found (404). Restart backend so /api/v1/admin/sessions is available."):d(h.message??"Failed to load sessions")}finally{m&&r(!1)}}return i(),()=>{m=!1}},[o]);const c=l.useMemo(()=>{const m=b.trim().toLowerCase();return m?t.filter(i=>[i.id,i.qrId,i.homeId,i.doorId,i.homeownerId,i.visitor,i.status].join(" ").toLowerCase().includes(m)):t},[t,b]);return e.jsxs(X,{title:"Admin Sessions",children:[n?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:n}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Visitor Sessions"}),e.jsxs("div",{className:"flex w-full flex-col gap-2 sm:w-auto sm:flex-row sm:items-center",children:[e.jsxs("select",{value:o,onChange:m=>g(m.target.value),className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("option",{value:"",children:"All status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsx("input",{value:b,onChange:m=>f(m.target.value),placeholder:"Search session, visitor, ids...",className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900 sm:w-80"})]})]}),s?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading sessions..."}):c.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No sessions found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[980px] text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:[e.jsx("th",{className:"py-2 font-semibold",children:"Visitor"}),e.jsx("th",{className:"py-2 font-semibold",children:"Status"}),e.jsx("th",{className:"py-2 font-semibold",children:"QR"}),e.jsx("th",{className:"py-2 font-semibold",children:"Door"}),e.jsx("th",{className:"py-2 font-semibold",children:"Homeowner"}),e.jsx("th",{className:"py-2 font-semibold",children:"Started"}),e.jsx("th",{className:"py-2 font-semibold",children:"Ended"})]})}),e.jsx("tbody",{children:c.slice(0,300).map(m=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-2 font-semibold",children:m.visitor||"-"}),e.jsx("td",{className:"py-2",children:m.status}),e.jsx("td",{className:"py-2 font-mono text-xs",children:m.qrId}),e.jsx("td",{className:"py-2 font-mono text-xs",children:m.doorId}),e.jsx("td",{className:"py-2 font-mono text-xs",children:m.homeownerId}),e.jsx("td",{className:"py-2",children:qt(m.startedAt)}),e.jsx("td",{className:"py-2",children:qt(m.endedAt)})]},m.id))})]})})]})]})}function qt(t){if(!t)return"-";const a=new Date(t);return Number.isNaN(a.getTime())?t:a.toLocaleString()}function _r(){const[t,a]=l.useState(null),[s,r]=l.useState(!0),[n,d]=l.useState("");return l.useEffect(()=>{let o=!0;async function g(){r(!0),d("");try{const b=await $("/admin/config");if(!o)return;a((b==null?void 0:b.data)??null)}catch(b){if(!o)return;b instanceof xe&&b.status===404?d("Admin config endpoint not found (404). Restart backend so /api/v1/admin/config is available."):d(b.message??"Failed to load config")}finally{o&&r(!1)}}return g(),()=>{o=!1}},[]),e.jsxs(X,{title:"Admin Config",children:[n?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:n}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Runtime Config"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Read-only status of backend configuration."}),s?e.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Loading..."}):t?e.jsxs("div",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:[e.jsx(ue,{label:"Environment",value:String(t.environment)}),e.jsx(ue,{label:"Debug",value:t.debug?"true":"false"}),e.jsx(ue,{label:"Paystack Configured",value:t.paystackConfigured?"true":"false"}),e.jsx(ue,{label:"VAPID Configured",value:t.vapidConfigured?"true":"false"}),e.jsx(ue,{label:"Admin Signup Key Set",value:t.adminSignupKeySet?"true":"false"}),e.jsx(ue,{label:"Frontend Base URL",value:String(t.frontendBaseUrl),mono:!0})]}):e.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"No data."})]})]})}function ue({label:t,value:a,mono:s}){return e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsx("p",{className:`mt-1 text-sm font-semibold ${s?"font-mono text-xs":""}`,children:a})]})}function Hr(){const[t,a]=l.useState([]),[s,r]=l.useState(!0),[n,d]=l.useState("");return l.useEffect(()=>{let o=!0;async function g(){r(!0),d("");try{const b=await $("/admin/audit");if(!o)return;a(Array.isArray(b==null?void 0:b.data)?b.data:[])}catch(b){if(!o)return;b instanceof xe&&b.status===404?d("Admin audit endpoint not found (404). Restart backend so /api/v1/admin/audit is available."):d(b.message??"Failed to load audit logs")}finally{o&&r(!1)}}return g(),()=>{o=!1}},[]),e.jsxs(X,{title:"Admin Audit",children:[n?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:n}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Audit Log"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Records admin actions like user toggles, subscription activations, and message deletes."}),s?e.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Loading audit logs..."}):t.length===0?e.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"No audit entries yet."}):e.jsx("div",{className:"mt-4 overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[980px] text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:[e.jsx("th",{className:"py-2 font-semibold",children:"Time"}),e.jsx("th",{className:"py-2 font-semibold",children:"Action"}),e.jsx("th",{className:"py-2 font-semibold",children:"Resource"}),e.jsx("th",{className:"py-2 font-semibold",children:"Actor"}),e.jsx("th",{className:"py-2 font-semibold",children:"Meta"})]})}),e.jsx("tbody",{children:t.slice(0,300).map(o=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-2",children:Ur(o.createdAt)}),e.jsx("td",{className:"py-2 font-semibold",children:o.action}),e.jsxs("td",{className:"py-2",children:[e.jsx("span",{className:"font-mono text-xs",children:o.resourceType}),o.resourceId?e.jsx("span",{className:"ml-2 font-mono text-xs text-slate-500",children:o.resourceId}):null]}),e.jsx("td",{className:"py-2 font-mono text-xs",children:o.actorUserId||"-"}),e.jsx("td",{className:"py-2 font-mono text-xs text-slate-500",children:Br(o.meta||"",120)})]},o.id))})]})})]})]})}function Ur(t){if(!t)return"-";const a=new Date(t);return Number.isNaN(a.getTime())?t:a.toLocaleString()}function Br(t,a){const s=String(t??"");return s.length<=a?s:`${s.slice(0,a)}...`}function Vr(){const{qrId:t}=ve(),a=ie(),[s,r]=l.useState(!0),[n,d]=l.useState(""),[o,g]=l.useState(null),[b,f]=l.useState(""),[c,m]=l.useState({sending:!1,sent:!1,sessionId:"",status:""}),[i,h]=l.useState(0),[u,k]=l.useState({name:"",purpose:""});l.useEffect(()=>{let x=!0;return(async()=>{var C;r(!0),d("");try{const M=await $(`/qr/resolve/${t}`),D=(M==null?void 0:M.data)??M;if(!x)return;g(D),f(((C=D==null?void 0:D.doors)==null?void 0:C[0])??"")}catch(M){if(!x)return;d(M.message??"QR could not be resolved")}finally{x&&r(!1)}})(),()=>{x=!1}},[t]),l.useEffect(()=>{if(!c.sent)return;const x=setInterval(()=>h(R=>R+1),1e3);return()=>clearInterval(x)},[c.sent]),l.useEffect(()=>{if(!c.sent||!c.sessionId)return;let x=!0;const R=setInterval(async()=>{try{const C=await Ia(c.sessionId);if(!x||!(C!=null&&C.status))return;m(M=>({...M,status:C.status}))}catch{}},3e3);return()=>{x=!1,clearInterval(R)}},[c.sent,c.sessionId]),l.useEffect(()=>{c.sessionId&&(c.status!=="approved"&&c.status!=="active"||a(`/session/${c.sessionId}/message`,{replace:!0}))},[a,c.sessionId,c.status]);const y=async x=>{x.preventDefault(),d(""),m(R=>({...R,sending:!0}));try{const R=await $("/visitor/request",{method:"POST",body:JSON.stringify({qrId:t,doorId:b,name:u.name,purpose:u.purpose})}),C=(R==null?void 0:R.data)??R;m({sending:!1,sent:!0,sessionId:(C==null?void 0:C.sessionId)??"",status:(C==null?void 0:C.status)??"pending"})}catch(R){m(C=>({...C,sending:!1})),d(R.message??"Request failed")}},E=(o==null?void 0:o.doorOptions)??[],j=E.find(x=>x.id===b)??null,I=l.useMemo(()=>`${Math.floor(i/60)}:${String(i%60).padStart(2,"0")}`,[i]);return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsxs("article",{className:"w-full max-w-lg rounded-3xl border border-slate-200 bg-white/90 p-7 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("h1",{className:"font-heading text-3xl font-bold",children:"Qring Visitor Access"}),e.jsxs("p",{className:"mt-2 text-sm text-slate-500",children:["QR ID: ",t]}),s?e.jsx("p",{className:"mt-5 text-sm",children:"Resolving secure QR route..."}):null,n?e.jsx("p",{className:"mt-5 text-sm text-danger",children:n}):null,!s&&o&&!c.sent?e.jsxs("form",{onSubmit:y,className:"mt-6 space-y-4",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Select the door and submit your entry request."}),e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium",children:"Your Name"}),e.jsx("input",{type:"text",value:u.name,onChange:x=>k(R=>({...R,name:x.target.value})),className:"w-full rounded-xl border border-slate-300 px-3 py-3 dark:border-slate-700 dark:bg-slate-900",placeholder:"e.g. John Doe",required:!0})]}),e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium",children:"Purpose of Visit"}),e.jsx("textarea",{value:u.purpose,onChange:x=>k(R=>({...R,purpose:x.target.value})),className:"w-full rounded-xl border border-slate-300 px-3 py-3 dark:border-slate-700 dark:bg-slate-900",placeholder:"e.g. Package delivery",rows:3,required:!0})]}),e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium",children:"Door"}),e.jsx("select",{value:b,onChange:x=>f(x.target.value),className:"w-full rounded-xl border border-slate-300 px-3 py-3 dark:border-slate-700 dark:bg-slate-900",children:(E.length?E:(o.doors??[]).map(x=>({id:x,name:x}))).map(x=>e.jsx("option",{value:x.id,children:x.name},x.id))})]}),j?e.jsxs("p",{className:"text-xs text-slate-500",children:["Home: ",j.homeName||"N/A"," | Homeowner: ",j.homeownerName||"N/A"]}):null,e.jsx("button",{type:"submit",disabled:c.sending,className:"w-full rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:c.sending?"Submitting...":"Request Access"})]}):null,c.sent?e.jsxs("div",{className:"mt-6 rounded-2xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsx("p",{className:"text-sm font-semibold",children:c.status==="approved"?"Request approved":c.status==="rejected"?"Request rejected by homeowner":"Waiting for homeowner approval"}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Timer: ",I]}),c.sessionId&&(c.status==="approved"||c.status==="active")?e.jsx("p",{className:"mt-3 text-xs text-success",children:"Homeowner is ready. Opening session automatically..."}):null,c.status==="rejected"?e.jsx("p",{className:"mt-3 text-xs font-semibold text-danger",children:"You can retry another request or contact the resident."}):null]}):null]})})}const $t=[{key:"message",label:"Messages"},{key:"audio",label:"Audio"},{key:"video",label:"Video"}];function Fr({sessionId:t}){return e.jsxs(e.Fragment,{children:[e.jsx("aside",{className:"hidden lg:col-span-3 lg:block",children:e.jsxs("section",{className:"sticky top-6 rounded-3xl border border-slate-200/80 bg-white/85 p-4 shadow-soft backdrop-blur",children:[e.jsx("p",{className:"mb-2 text-xs font-semibold uppercase tracking-[0.15em] text-slate-500",children:"Session Pages"}),e.jsx("nav",{className:"space-y-2",children:$t.map(a=>e.jsx(Qe,{to:`/session/${t}/${a.key}`,className:({isActive:s})=>`block rounded-xl px-3 py-2 text-sm font-semibold transition ${s?"bg-slate-900 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:a.label},a.key))})]})}),e.jsx("nav",{className:"fixed bottom-3 left-1/2 z-30 w-[min(96vw,520px)] -translate-x-1/2 rounded-2xl border border-slate-200 bg-white/95 p-2 shadow-soft backdrop-blur lg:hidden",children:e.jsx("div",{className:"grid grid-cols-3 gap-2",children:$t.map(a=>e.jsx(Qe,{to:`/session/${t}/${a.key}`,className:({isActive:s})=>`rounded-xl px-2 py-2 text-center text-xs font-semibold ${s?"bg-slate-900 text-white":"bg-slate-100 text-slate-700"}`,children:a.label},a.key))})})]})}const os="qring_session_call_access",is=new Set(["incoming","connected"]),zr=5*60*1e3;function ds(){return typeof window<"u"&&typeof window.sessionStorage<"u"}function xt(){if(!ds())return{};try{const t=window.sessionStorage.getItem(os),a=t?JSON.parse(t):{};return a&&typeof a=="object"?a:{}}catch{return{}}}function mt(t){if(ds())try{window.sessionStorage.setItem(os,JSON.stringify(t))}catch{}}function lt(t,a="incoming"){if(!t||!is.has(a))return;const s=xt();s[t]={state:a,expiresAt:Date.now()+zr},mt(s)}function nt(t){if(!t)return;const a=xt();a[t]&&(delete a[t],mt(a))}function Wr(t){if(!t)return!1;const a=xt(),s=a[t];return s?is.has(s.state)&&Number(s.expiresAt)>Date.now()?!0:(delete a[t],mt(a),!1):!1}const Gr={iceServers:[{urls:"stun:stun.l.google.com:19302"}]};function ht(t){var Se;const a=localStorage.getItem("qring_access_token"),s=l.useMemo(()=>{try{return JSON.parse(localStorage.getItem("qring_user")||"null")}catch{return null}},[]),r=(s==null?void 0:s.fullName)||"Visitor",n=(s==null?void 0:s.role)==="homeowner",[d,o]=l.useState(!1),[g,b]=l.useState(!1),[f,c]=l.useState("idle"),[m,i]=l.useState(!1),[h,u]=l.useState(!1),[k,y]=l.useState(!1),[E,j]=l.useState([]),[I,x]=l.useState(""),[R,C]=l.useState({pending:!1,hasVideo:!1}),M=l.useRef(null),D=l.useRef(null),A=l.useRef(null),L=l.useRef(null),Q=l.useRef(null),_=l.useRef(null),B=l.useRef([]),ee=l.useRef(!1),se=l.useRef(null),w=typeof window<"u"&&typeof window.RTCPeerConnection<"u",O=typeof navigator<"u"&&typeof((Se=navigator.mediaDevices)==null?void 0:Se.getUserMedia)=="function",G=typeof window>"u"?!0:window.isSecureContext,F=l.useMemo(()=>w?G?O?"":"Camera/microphone APIs are unavailable in this browser.":"Camera and microphone require HTTPS on network devices. Open the app with HTTPS or localhost.":"This browser does not support WebRTC calls.",[G,O,w]);function W(S){return(s==null?void 0:s.role)==="homeowner"?S==="homeowner":s!=null&&s.role?S===s.role:S!=="homeowner"}function ae(S){const v=(S==null?void 0:S.senderType)||null;return{id:(S==null?void 0:S.id)||null,text:(S==null?void 0:S.text)||"",displayName:(S==null?void 0:S.displayName)||"Participant",senderType:v,at:(S==null?void 0:S.at)||new Date().toISOString(),mine:v!==null?W(v):(S==null?void 0:S.displayName)===r}}function P(){if(D.current)return D.current;const S=new RTCPeerConnection(Gr);return S.ontrack=v=>{var z;const T=(z=v.streams)==null?void 0:z[0];T&&(Q.current&&(Q.current.srcObject=T,Q.current.play().catch(()=>{})),_.current&&(_.current.srcObject=T,_.current.muted=!1,_.current.volume=1,_.current.play().catch(()=>{})))},S.onicecandidate=v=>{!v.candidate||!M.current||M.current.emit("webrtc.ice",{sessionId:t,candidate:v.candidate})},S.onconnectionstatechange=()=>{const v=S.connectionState;v==="connected"&&(c("connected"),n||lt(t,"connected")),(v==="failed"||v==="disconnected"||v==="closed")&&(c("ended"),nt(t))},D.current=S,S}async function Y({video:S}){if(F)throw new Error(F);if(A.current){const te=!!S;if(A.current.getVideoTracks().length>0===te)return A.current;A.current.getTracks().forEach(cs=>cs.stop()),A.current=null}const v=await navigator.mediaDevices.getUserMedia({audio:!0,video:!!S});A.current=v,L.current&&(L.current.srcObject=v,L.current.muted=!0,L.current.play().catch(()=>{}));const T=P();return T.getSenders().forEach(te=>{te.track&&T.removeTrack(te)}),v.getTracks().forEach(te=>T.addTrack(te,v)),y(!!S),c("ready"),v}async function U({video:S}){var v;try{if(x(""),F){x(F);return}if(!g){x("Joining session room...");return}await Y({video:S});const T=P();ee.current=!0;const z=await T.createOffer();await T.setLocalDescription(z),(v=M.current)==null||v.emit("webrtc.offer",{sessionId:t,sdp:z}),c("ringing")}catch(T){x((T==null?void 0:T.message)??"Unable to start call")}finally{ee.current=!1}}function V(){if(!n){x("Only homeowner can start calls. Wait for incoming call.");return}U({video:!1})}function J(){if(!n){x("Only homeowner can start calls. Wait for incoming call.");return}U({video:!0})}async function ze(){var v;if(!R.pending)return;const S=se.current;if(S!=null&&S.sdp)try{x(""),await Y({video:R.hasVideo}),await H(S.sdp);const T=P(),z=await T.createAnswer();await T.setLocalDescription(z),(v=M.current)==null||v.emit("webrtc.answer",{sessionId:t,sdp:z}),c("connected"),lt(t,"connected"),C({pending:!1,hasVideo:!1}),se.current=null}catch(T){x((T==null?void 0:T.message)??"Failed to accept incoming call")}}function N(){var S;R.pending&&((S=M.current)==null||S.emit("session.control",{sessionId:t,action:"call_rejected"}),x("Incoming call rejected"),c("idle"),C({pending:!1,hasVideo:!1}),se.current=null,nt(t))}async function H(S){const v=P();await v.setRemoteDescription(new RTCSessionDescription(S));for(const T of B.current)try{await v.addIceCandidate(new RTCIceCandidate(T))}catch{}B.current=[]}function K(S){const v=(S||"").trim();return!v||!M.current||!g?!1:(M.current.emit("chat.message",{sessionId:t,text:v,displayName:r}),!0)}function Z(){var v;if(!A.current)return;const S=!m;A.current.getAudioTracks().forEach(T=>{T.enabled=!S}),i(S),(v=M.current)==null||v.emit("session.control",{sessionId:t,action:S?"mute":"unmute"})}function le(S=!0){var v;S&&((v=M.current)==null||v.emit("session.control",{sessionId:t,action:"end"})),D.current&&(D.current.getSenders().forEach(T=>{T.track&&T.track.stop()}),D.current.close(),D.current=null),A.current&&(A.current.getTracks().forEach(T=>T.stop()),A.current=null),L.current&&(L.current.srcObject=null),Q.current&&(Q.current.srcObject=null),_.current&&(_.current.srcObject=null),c("ended"),y(!1),i(!1),u(!1),C({pending:!1,hasVideo:!1}),se.current=null,nt(t)}return l.useEffect(()=>{let S=!0;return(async()=>{try{const T=await Ta(t);if(!S)return;j(T.map(z=>ae(z)))}catch{S&&x(T=>T||"Unable to load message history")}})(),()=>{S=!1}},[t]),l.useEffect(()=>{const S=dt(`${oe.socketUrl}${oe.signalingNamespace}`,{path:oe.socketPath,transports:["websocket","polling"],auth:a?{token:a}:void 0,withCredentials:!0});return M.current=S,S.on("connect",()=>{o(!0),S.emit("session.join",{sessionId:t,displayName:r})}),S.on("disconnect",()=>{o(!1),b(!1)}),S.on("connect_error",v=>{x((v==null?void 0:v.message)??"Socket connection failed")}),S.on("session.joined",v=>{v!=null&&v.sid&&(b(!0),x("Session connected"))}),S.on("session.participant_joined",async()=>{var v;if(!ee.current&&(x("Participant joined"),A.current&&((v=D.current)==null?void 0:v.signalingState)==="stable"))try{ee.current=!0;const T=await D.current.createOffer();await D.current.setLocalDescription(T),S.emit("webrtc.offer",{sessionId:t,sdp:T}),c("ringing")}catch{}finally{ee.current=!1}}),S.on("session.participant_left",()=>x("Participant left")),S.on("webrtc.offer",async v=>{var T;if((v==null?void 0:v.sessionId)===t)try{const z=typeof((T=v==null?void 0:v.sdp)==null?void 0:T.sdp)=="string"&&v.sdp.sdp.includes("m=video");if(!n){se.current=v,C({pending:!0,hasVideo:z}),c("incoming"),x(z?"Incoming video call":"Incoming audio call"),lt(t,"incoming");return}await Y({video:z}),await H(v.sdp);const te=P(),We=await te.createAnswer();await te.setLocalDescription(We),S.emit("webrtc.answer",{sessionId:t,sdp:We}),c("connected")}catch(z){x((z==null?void 0:z.message)??"Failed to handle incoming call")}}),S.on("webrtc.answer",async v=>{if((v==null?void 0:v.sessionId)===t)try{await H(v.sdp),c("connected")}catch(T){x((T==null?void 0:T.message)??"Failed to establish call")}}),S.on("webrtc.ice",async v=>{if((v==null?void 0:v.sessionId)!==t)return;const T=v==null?void 0:v.candidate;if(!T)return;const z=P();if(z.remoteDescription)try{await z.addIceCandidate(new RTCIceCandidate(T))}catch{}else B.current.push(T)}),S.on("chat.message",v=>{if((v==null?void 0:v.sessionId)!==t)return;const T=ae(v);j(z=>T.id&&z.some(te=>te.id&&te.id===T.id)?z:[...z,T])}),S.on("session.control",v=>{if((v==null?void 0:v.sessionId)!==t)return;const T=v==null?void 0:v.action;T==="mute"&&(u(!0),x("Other participant muted microphone")),T==="unmute"&&(u(!1),x("Other participant unmuted microphone")),T==="end"&&(x("Call ended by participant"),le(!1)),T==="call_rejected"&&(x("Call rejected by visitor"),le(!1))}),()=>{S.disconnect(),le(!1)}},[t,r,a,n]),{connected:d,joined:g,callState:f,muted:m,cameraOn:k,messages:E,status:I,featureError:F,localVideoRef:L,remoteVideoRef:Q,remoteAudioRef:_,localStreamRef:A,remoteMuted:h,incomingCall:R,canStartCall:n,sendMessage:K,toggleMute:Z,endCall:le,startAudioCall:V,startVideoCall:J,acceptIncomingCall:ze,rejectIncomingCall:N}}function Jr(){const{sessionId:t}=ve(),a=ie(),[s,r]=l.useState(""),{connected:n,joined:d,callState:o,messages:g,status:b,featureError:f,incomingCall:c,sendMessage:m}=ht(t);l.useEffect(()=>{c!=null&&c.pending&&a(`/session/${t}/${c.hasVideo?"video":"audio"}`)},[c,a,t]);function i(h){h.preventDefault(),m(s)&&r("")}return e.jsx("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top_left,_#fef3c7_0,_#f8fafc_38%,_#e0f2fe_72%,_#dbeafe_100%)] p-4 text-slate-900",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl py-6",children:[e.jsxs("header",{className:"mb-4 rounded-3xl border border-slate-200/80 bg-white/80 p-5 shadow-soft backdrop-blur",children:[e.jsx("h1",{className:"font-heading text-2xl font-black md:text-3xl",children:"Session Messages"}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Session ",t," | ",n?"Signaling Online":"Connecting"," |"," ",d?"Room Joined":"Waiting Room"," | Call: ",o]}),f?e.jsx("p",{className:"mt-2 text-sm text-rose-700",children:f}):null,b?e.jsx("p",{className:"mt-2 text-sm text-amber-700",children:b}):null]}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-12",children:[e.jsx(Fr,{sessionId:t}),e.jsx("section",{className:"space-y-4 lg:col-span-9",children:e.jsxs("article",{className:"rounded-3xl border border-slate-200/80 bg-white/90 p-4 shadow-soft",children:[e.jsx("h2",{className:"font-heading text-lg font-bold",children:"Conversation"}),e.jsxs("div",{className:"mt-3 max-h-[28rem] space-y-2 overflow-y-auto rounded-2xl bg-slate-100/90 p-3",children:[g.map(h=>e.jsxs("div",{className:`max-w-[85%] rounded-xl px-3 py-2 text-sm ${h.mine?"ml-auto bg-cyan-600 text-white":"bg-white text-slate-700"}`,children:[e.jsx("p",{className:"text-[11px] font-semibold",children:h.displayName}),e.jsx("p",{children:h.text})]},h.id||`${h.at}-${h.text}`)),g.length===0?e.jsx("p",{className:"text-xs text-slate-500",children:"No messages yet."}):null]}),e.jsxs("form",{onSubmit:i,className:"mt-3 flex gap-2",children:[e.jsx("input",{value:s,onChange:h=>r(h.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 text-sm",placeholder:"Type a message"}),e.jsx("button",{type:"submit",className:"rounded-xl bg-slate-900 px-4 py-3 text-sm font-semibold text-white",children:"Send"})]})]})})]})]})})}function Yr(){const{sessionId:t}=ve(),{connected:a,joined:s,callState:r,muted:n,remoteMuted:d,localStreamRef:o,remoteAudioRef:g,status:b,featureError:f,incomingCall:c,canStartCall:m,toggleMute:i,endCall:h,startAudioCall:u,acceptIncomingCall:k,rejectIncomingCall:y}=ht(t);return e.jsx("div",{className:"min-h-screen bg-[#0c1317] p-4 text-slate-100 sm:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-5xl py-3",children:[e.jsxs("header",{className:"mb-4 flex items-center justify-between rounded-3xl border border-white/10 bg-[#1f2c34] p-4 shadow-soft",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-heading text-2xl font-black",children:"Audio Call"}),e.jsxs("p",{className:"text-xs text-slate-400",children:["Session ",t]})]}),e.jsx(p,{to:"/dashboard",className:"rounded-xl bg-[#00a884] px-4 py-2 text-xs font-semibold text-white",children:"Go Back Home"})]}),e.jsxs("section",{className:"rounded-3xl border border-white/10 bg-[#111b21] p-6 shadow-soft",children:[e.jsx("audio",{ref:g,autoPlay:!0,playsInline:!0}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(Ot,{label:"Visitor",state:r==="connected"&&!d?"Speaking":"Listening",muted:d}),e.jsx(Ot,{label:"You",state:n?"Microphone muted":"Microphone active",muted:n})]}),e.jsxs("div",{className:"mt-4 rounded-2xl bg-[#1f2c34] p-4 text-center text-white",children:[e.jsx("p",{className:"text-sm font-semibold",children:r==="ringing"?"Calling...":"In audio room"}),e.jsx("p",{className:"mt-1 text-xs text-slate-300",children:o.current?"Audio stream connected":"Start call to connect microphone"}),e.jsxs("p",{className:"mt-1 text-xs text-slate-300",children:[a?"Signaling Online":"Connecting"," | ",s?"Room Joined":"Waiting Room"," | Call:"," ",r]})]}),f?e.jsx("p",{className:"mt-3 text-sm text-rose-400",children:f}):null,b?e.jsx("p",{className:"mt-2 text-sm text-amber-300",children:b}):null,e.jsxs("div",{className:"mt-5 grid grid-cols-3 gap-3",children:[c.pending?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:k,className:"rounded-xl bg-[#00a884] px-3 py-3 text-xs font-semibold text-white",children:"Accept"}),e.jsx("button",{type:"button",onClick:y,className:"rounded-xl bg-[#e53935] px-3 py-3 text-xs font-semibold text-white",children:"Reject"})]}):e.jsx("button",{type:"button",onClick:u,disabled:!!f||!m,className:"rounded-xl bg-[#00a884] px-3 py-3 text-xs font-semibold text-white disabled:opacity-50",children:"Start"}),e.jsx("button",{type:"button",onClick:i,disabled:!o.current,className:"rounded-xl bg-[#8696a0] px-3 py-3 text-xs font-semibold text-white disabled:opacity-50",children:n?"Unmute":"Mute"}),e.jsx("button",{type:"button",onClick:h,className:"rounded-xl bg-[#e53935] px-3 py-3 text-xs font-semibold text-white",children:"End"})]})]})]})})}function Ot({label:t,state:a,muted:s}){return e.jsxs("article",{className:"rounded-2xl bg-[#1f2c34] p-6 text-center",children:[e.jsx("div",{className:"mx-auto h-28 w-28 rounded-full bg-[#00a884]/20 p-2",children:e.jsx("div",{className:`grid h-full place-items-center rounded-full text-lg font-bold text-white ${s?"bg-[#8696a0]":"bg-[#00a884] animate-pulse"}`,children:t==="You"?"YOU":"VIS"})}),e.jsx("p",{className:"mt-4 text-base font-semibold",children:t}),e.jsx("p",{className:"mt-1 text-xs text-slate-300",children:a})]})}function Kr(){const{sessionId:t}=ve(),{connected:a,joined:s,callState:r,muted:n,remoteMuted:d,localStreamRef:o,status:g,featureError:b,localVideoRef:f,remoteVideoRef:c,remoteAudioRef:m,incomingCall:i,canStartCall:h,toggleMute:u,endCall:k,startVideoCall:y,acceptIncomingCall:E,rejectIncomingCall:j}=ht(t);return e.jsx("div",{className:"min-h-screen bg-[#0c1317] p-4 text-slate-100 sm:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-6xl py-3",children:[e.jsxs("header",{className:"mb-4 flex items-center justify-between rounded-3xl border border-white/10 bg-[#1f2c34] p-4 shadow-soft",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-heading text-2xl font-black",children:"Video Call"}),e.jsxs("p",{className:"text-xs text-slate-400",children:["Session ",t]})]}),e.jsx(p,{to:"/dashboard",className:"rounded-xl bg-[#00a884] px-4 py-2 text-xs font-semibold text-white",children:"Go Back Home"})]}),e.jsxs("section",{className:"rounded-3xl border border-white/10 bg-[#111b21] p-3 shadow-soft",children:[e.jsx("audio",{ref:m,autoPlay:!0,playsInline:!0}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("article",{className:"relative overflow-hidden rounded-2xl bg-black",children:[e.jsx("video",{ref:c,autoPlay:!0,playsInline:!0,className:"h-[300px] w-full rounded-2xl bg-slate-950 object-cover sm:h-[420px]"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent px-3 pb-2 pt-8",children:e.jsx("p",{className:"text-xs font-semibold text-white",children:"Visitor"})})]}),e.jsxs("article",{className:"relative overflow-hidden rounded-2xl bg-black",children:[e.jsx("video",{ref:f,autoPlay:!0,playsInline:!0,className:"h-[300px] w-full rounded-2xl bg-slate-900 object-cover sm:h-[420px]"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent px-3 pb-2 pt-8",children:e.jsx("p",{className:"text-xs font-semibold text-white",children:"You"})})]})]}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-[#1f2c34] px-4 py-3 text-xs text-slate-200",children:[a?"Signaling Online":"Connecting"," | ",s?"Room Joined":"Waiting Room"," | Call:"," ",r," | ",o.current?"Media ready":"Media not started"," | Remote mic:"," ",d?"Muted":"Active"]}),b?e.jsx("p",{className:"mt-2 text-sm text-rose-700",children:b}):null,g?e.jsx("p",{className:"mt-2 text-sm text-amber-700",children:g}):null,e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[i.pending?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:E,className:"rounded-xl bg-[#00a884] px-3 py-3 text-xs font-semibold text-white",children:"Accept"}),e.jsx("button",{type:"button",onClick:j,className:"rounded-xl bg-[#e53935] px-3 py-3 text-xs font-semibold text-white",children:"Reject"})]}):e.jsx("button",{type:"button",onClick:y,disabled:!!b||!h,className:"rounded-xl bg-[#00a884] px-3 py-3 text-xs font-semibold text-white disabled:opacity-50",children:"Start Video"}),e.jsx("button",{type:"button",onClick:u,disabled:!o.current,className:"rounded-xl bg-[#8696a0] px-3 py-3 text-xs font-semibold text-white disabled:opacity-50",children:n?"Unmute":"Mute"}),e.jsx("button",{type:"button",onClick:k,className:"rounded-xl bg-[#e53935] px-3 py-3 text-xs font-semibold text-white",children:"End"})]})]})]})})}function Zr(){return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-8 text-center shadow-soft dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h1",{className:"font-heading text-3xl font-bold",children:"Access Restricted"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"You do not have permission to view this route."}),e.jsx(p,{to:"/",className:"mt-5 inline-block rounded-xl bg-brand-500 px-5 py-2 text-sm font-semibold text-white",children:"Return Home"})]})})}function Xr(){return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-8 text-center shadow-soft dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h1",{className:"font-heading text-3xl font-bold",children:"404"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Page not found."}),e.jsx(p,{to:"/",className:"mt-5 inline-block rounded-xl bg-brand-500 px-5 py-2 text-sm font-semibold text-white",children:"Go to Landing Page"})]})})}function el(){const{isAuthenticated:t}=de(),a=ye(),s=!!localStorage.getItem("qring_access_token");return!t||!s?e.jsx(be,{to:"/login",replace:!0,state:{from:a}}):e.jsx(Ut,{})}function $e({allowedRoles:t}){const{user:a}=de();return!(a!=null&&a.role)||!t.includes(a.role)?e.jsx(be,{to:"/unauthorized",replace:!0}):e.jsx(Ut,{})}function tl(){try{return JSON.parse(localStorage.getItem("qring_user")||"null")}catch{return null}}function Qt({children:t}){const{sessionId:a}=ve(),s=tl();return(s==null?void 0:s.role)==="homeowner"||Wr(a)?t:e.jsx(be,{to:`/session/${a}/message`,replace:!0})}const _t={success:"border-emerald-200 bg-emerald-50 text-emerald-900",error:"border-rose-200 bg-rose-50 text-rose-900",warning:"border-amber-200 bg-amber-50 text-amber-900",info:"border-sky-200 bg-sky-50 text-sky-900"};function sl(){const[t,a]=l.useState(null),s=l.useRef(null);l.useEffect(()=>{const n=d=>{const o=(d==null?void 0:d.detail)??{},g=String(o.message??"").trim();if(!g)return;const b=o.type??"info",f=o.title??(b==="success"?"Success":b==="error"?"Action failed":b==="warning"?"Attention":"Notice"),c=Number.isFinite(Number(o.duration))?Number(o.duration):3600;a({message:g,type:b,title:f}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>a(null),Math.max(1200,c))};return window.addEventListener("qring:toast",n),window.addEventListener("qring:flash",n),()=>{window.removeEventListener("qring:toast",n),window.removeEventListener("qring:flash",n),window.clearTimeout(s.current)}},[]);const r=l.useMemo(()=>_t[t==null?void 0:t.type]??_t.info,[t==null?void 0:t.type]);return t?e.jsx("div",{className:"pointer-events-none fixed inset-0 z-50 flex items-start justify-center px-4 pt-6",children:e.jsxs("div",{className:`pointer-events-auto w-full max-w-md rounded-2xl border p-4 shadow-2xl backdrop-blur-sm transition-all duration-300 ${r}`,role:"status","aria-live":"polite",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide opacity-80",children:t.title}),e.jsx("p",{className:"mt-1 text-sm font-medium",children:t.message})]})}):null}function al(){return e.jsx(Cs,{children:e.jsx(ba,{children:e.jsxs(ms,{children:[e.jsx(sl,{}),e.jsx(rl,{}),e.jsxs(hs,{children:[e.jsx(q,{path:"/",element:e.jsx(qs,{})}),e.jsx(q,{path:"/about",element:e.jsx(_s,{})}),e.jsx(q,{path:"/pricing",element:e.jsx(Bs,{})}),e.jsx(q,{path:"/contact",element:e.jsx(Fs,{})}),e.jsx(q,{path:"/platform",element:e.jsx(zs,{})}),e.jsx(q,{path:"/security",element:e.jsx(Ws,{})}),e.jsx(q,{path:"/api-docs",element:e.jsx(Gs,{})}),e.jsx(q,{path:"/company",element:e.jsx(Js,{})}),e.jsx(q,{path:"/blog",element:e.jsx(Ys,{})}),e.jsx(q,{path:"/careers",element:e.jsx(Ks,{})}),e.jsx(q,{path:"/legal",element:e.jsx(Zs,{})}),e.jsx(q,{path:"/privacy",element:e.jsx(Xs,{})}),e.jsx(q,{path:"/terms",element:e.jsx(ea,{})}),e.jsx(q,{path:"/compliance",element:e.jsx(ta,{})}),e.jsx(q,{path:"/login",element:e.jsx(pa,{})}),e.jsx(q,{path:"/admin/login",element:e.jsx(fa,{})}),e.jsx(q,{path:"/admin/signup",element:e.jsx(ja,{})}),e.jsx(q,{path:"/signup",element:e.jsx(ka,{})}),e.jsx(q,{path:"/google-role",element:e.jsx(Na,{})}),e.jsx(q,{path:"/forgot-password",element:e.jsx(ya,{})}),e.jsx(q,{path:"/scan/:qrId",element:e.jsx(Vr,{})}),e.jsx(q,{path:"/session/:sessionId",element:e.jsx(be,{to:"message",replace:!0})}),e.jsx(q,{path:"/session/:sessionId/message",element:e.jsx(Jr,{})}),e.jsx(q,{path:"/session/:sessionId/audio",element:e.jsx(Qt,{children:e.jsx(Yr,{})})}),e.jsx(q,{path:"/session/:sessionId/video",element:e.jsx(Qt,{children:e.jsx(Kr,{})})}),e.jsxs(q,{element:e.jsx(el,{}),children:[e.jsxs(q,{element:e.jsx($e,{allowedRoles:["homeowner","estate"]}),children:[e.jsx(q,{path:"/billing/paywall",element:e.jsx(cr,{})}),e.jsx(q,{path:"/billing/callback",element:e.jsx(xr,{})})]}),e.jsxs(q,{element:e.jsx($e,{allowedRoles:["homeowner"]}),children:[e.jsx(q,{path:"/dashboard/homeowner",element:e.jsx(be,{to:"/dashboard/homeowner/overview",replace:!0})}),e.jsx(q,{path:"/dashboard/homeowner/overview",element:e.jsx(Za,{})}),e.jsx(q,{path:"/dashboard/homeowner/visits",element:e.jsx(ar,{})}),e.jsx(q,{path:"/dashboard/homeowner/messages",element:e.jsx(rr,{})}),e.jsx(q,{path:"/dashboard/homeowner/doors",element:e.jsx(lr,{})}),e.jsx(q,{path:"/dashboard/homeowner/settings",element:e.jsx(dr,{})})]}),e.jsxs(q,{element:e.jsx($e,{allowedRoles:["estate"]}),children:[e.jsx(q,{path:"/dashboard/estate",element:e.jsx(yr,{})}),e.jsx(q,{path:"/dashboard/estate/create",element:e.jsx(Sr,{})}),e.jsx(q,{path:"/dashboard/estate/doors",element:e.jsx(Ar,{})}),e.jsx(q,{path:"/dashboard/estate/assign",element:e.jsx(Pr,{})}),e.jsx(q,{path:"/dashboard/estate/invites",element:e.jsx(Er,{})}),e.jsx(q,{path:"/dashboard/estate/mappings",element:e.jsx(Rr,{})}),e.jsx(q,{path:"/dashboard/estate/logs",element:e.jsx(Mr,{})}),e.jsx(q,{path:"/dashboard/estate/plan",element:e.jsx(Ir,{})}),e.jsx(q,{path:"/dashboard/estate/homes",element:e.jsx(Tr,{})})]}),e.jsxs(q,{element:e.jsx($e,{allowedRoles:["admin"]}),children:[e.jsx(q,{path:"/dashboard/admin",element:e.jsx(Dr,{})}),e.jsx(q,{path:"/dashboard/admin/users",element:e.jsx($r,{})}),e.jsx(q,{path:"/dashboard/admin/sessions",element:e.jsx(Qr,{})}),e.jsx(q,{path:"/dashboard/admin/payments",element:e.jsx(Lr,{})}),e.jsx(q,{path:"/dashboard/admin/config",element:e.jsx(_r,{})}),e.jsx(q,{path:"/dashboard/admin/audit",element:e.jsx(Hr,{})})]})]}),e.jsx(q,{path:"/unauthorized",element:e.jsx(Zr,{})}),e.jsx(q,{path:"/dashboard",element:e.jsx(be,{to:"/dashboard/homeowner/overview",replace:!0})}),e.jsx(q,{path:"*",element:e.jsx(Xr,{})})]})]})})})}function rl(){const t=ye(),a=ie();return l.useEffect(()=>{const r=new URLSearchParams(t.search).get("redirect");r&&(!r.startsWith("/")||r.startsWith("//")||a(r,{replace:!0}))},[t.search,a]),null}ot.createRoot(document.getElementById("root")).render(e.jsx(us.StrictMode,{children:e.jsx(al,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.getRegistrations().then(t=>{t.forEach(a=>a.unregister())})});
