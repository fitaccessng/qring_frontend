import{r as n,a as la,L as g,u as Ss,b as me,c as Ie,N as xt,d as Ue,e as Me,O as Cs,B as oa,R as ia,f as q,g as da}from"./router-DcMusYyV.js";import{i as ca,g as xa,s as ma,b as ua,G as ha,a as ba,c as ga,d as pa}from"./firebase-DnOCTw5U.js";import{l as Ot}from"./socket-CyTcV1HU.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(l){if(l.ep)return;l.ep=!0;const i=a(l);fetch(l.href,i)}})();var As={exports:{}},bt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fa=n,ja=Symbol.for("react.element"),ka=Symbol.for("react.fragment"),wa=Object.prototype.hasOwnProperty,Na=fa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ya={key:!0,ref:!0,__self:!0,__source:!0};function Ps(t,s,a){var r,l={},i=null,o=null;a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(o=s.ref);for(r in s)wa.call(s,r)&&!ya.hasOwnProperty(r)&&(l[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)l[r]===void 0&&(l[r]=s[r]);return{$$typeof:ja,type:t,key:i,ref:o,props:l,_owner:Na.current}}bt.Fragment=ka;bt.jsx=Ps;bt.jsxs=Ps;As.exports=bt;var e=As.exports,qt={},Yt=la;qt.createRoot=Yt.createRoot,qt.hydrateRoot=Yt.hydrateRoot;const Rs=n.createContext(null);function va({children:t}){const[s,a]=n.useState(()=>localStorage.getItem("qring_theme")??"light");n.useEffect(()=>{document.documentElement.classList.toggle("dark",s==="dark"),localStorage.setItem("qring_theme",s)},[s]);const r=n.useMemo(()=>({theme:s,isDark:s==="dark",toggleTheme:()=>a(l=>l==="dark"?"light":"dark")}),[s]);return e.jsx(Rs.Provider,{value:r,children:t})}function ie(){const t=n.useContext(Rs);if(!t)throw new Error("useTheme must be used inside ThemeProvider");return t}function je(){const t=n.useRef(null),[s,a]=n.useState(!1);return n.useEffect(()=>{if(!t.current)return;if(typeof window>"u"||typeof window.IntersectionObserver>"u"){a(!0);return}const r=new IntersectionObserver(([l])=>a(l.isIntersecting),{threshold:.2});return r.observe(t.current),()=>r.disconnect()},[]),{ref:t,visible:s}}function oe({className:t="",tone:s="dark",alt:a="Qring"}){const[r,l]=n.useState(!1),i=s==="light"?"invert":"";return r?e.jsx("span",{"aria-label":a,className:`grid place-items-center rounded-md bg-slate-900 text-white ${t}`,children:"Q"}):e.jsx("img",{src:"/qring_logo.png",alt:a,className:`${i} ${t}`,onError:()=>l(!0),draggable:!1})}const xe=t=>(t==null?void 0:t.replace(/\/+$/,""))??"",Qt=t=>/^https?:\/\//i.test(t??""),Bt=t=>/^[a-z0-9.-]+\.[a-z]{2,}(\/.*)?$/i.test(t??""),Es="https://qring-backend-1.onrender.com",Ms=!1,Kt=typeof window<"u"&&Ms?`${window.location.origin}/api/v1`:`${Es}/api/v1`,Xt=typeof window<"u"&&Ms?window.location.origin:Es,Zt=typeof window<"u"?window.location.origin:"https://qring.io";function Sa(t){const s="".trim();return s?Qt(s)?xe(s):Bt(s)?xe(`https://${s}`):s.startsWith("/")&&typeof window<"u"?xe(`${window.location.origin}${s}`):Kt:Kt}function Ca(t){const s="".trim();return s?Qt(s)?xe(s):Bt(s)?xe(`https://${s}`):s.startsWith("/")&&typeof window<"u"?xe(`${window.location.origin}${s}`):Xt:Xt}function Aa(t){const s="".trim();return s?Qt(s)?xe(s):Bt(s)?xe(`https://${s}`):s.startsWith("/")&&typeof window<"u"?xe(`${window.location.origin}${s}`):xe(Zt):xe(Zt)}const le={apiBaseUrl:Sa(),socketUrl:Ca(),publicAppUrl:Aa(),socketPath:"/socket.io",dashboardNamespace:"/realtime/dashboard",signalingNamespace:"/realtime/signaling"};class ge extends Error{constructor(s,a,r){super(s),this.name="ApiError",this.status=a,this.payload=r}}let qe=null,_e=null;async function Pa(){var t;if(_e!==null)return _e;try{const a=await import("@capacitor/core"),r=a==null?void 0:a.Capacitor,l=a==null?void 0:a.CapacitorHttp;_e={isNative:!!((t=r==null?void 0:r.isNativePlatform)!=null&&t.call(r)),http:l}}catch{_e={isNative:!1,http:null}}return _e}function Ra(t,s){const a=t==null?void 0:t[s];if(a)return a;const r=s.toLowerCase();for(const[l,i]of Object.entries(t??{}))if(l.toLowerCase()===r)return i;return""}function Ea(t,s){if(t==null)return;const a=String(Ra(s,"Content-Type")??"");if(typeof t=="string"&&a.includes("application/json"))try{return JSON.parse(t)}catch{return t}return t}async function Is(t,s){const a=await Pa();if(a.isNative&&a.http){const o=await a.http.request({url:t,method:s.method??"GET",headers:s.headers??{},data:Ea(s.body,s.headers),connectTimeout:3e4,readTimeout:3e4}),b=Number((o==null?void 0:o.status)??0),m=b>=200&&b<300,u=o==null?void 0:o.data;let d=null,x="";if(u!=null)if(typeof u=="string"){x=u;try{d=JSON.parse(u)}catch{d={raw:u}}}else{d=u;try{x=JSON.stringify(u)}catch{x=String(u)}}return{ok:m,status:b,payload:d,raw:x}}const r=await fetch(t,s),l=await r.text();let i=null;if(l)try{i=JSON.parse(l)}catch{i={raw:l}}return{ok:r.ok,status:r.status,payload:i,raw:l}}function Nt(t,s="error"){typeof window>"u"||window.dispatchEvent(new CustomEvent("qring:toast",{detail:{message:t,type:s}}))}async function Ma(){if(qe)return qe;const t=localStorage.getItem("qring_refresh_token");if(!t)return null;qe=(async()=>{let s;try{s=await Is(`${le.apiBaseUrl}/auth/refresh-token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})})}catch{return null}if(!s.ok)return null;const a=s.payload,r=(a==null?void 0:a.data)??a;return r!=null&&r.accessToken?(localStorage.setItem("qring_access_token",r.accessToken),r!=null&&r.refreshToken&&localStorage.setItem("qring_refresh_token",r.refreshToken),r.accessToken):null})();try{return await qe}finally{qe=null}}function Ia(){localStorage.removeItem("qring_access_token"),localStorage.removeItem("qring_refresh_token"),localStorage.removeItem("qring_user")}async function _(t,s={},a=0){const r=localStorage.getItem("qring_access_token"),l={"Content-Type":"application/json",...s.headers??{}};r&&(l.Authorization=`Bearer ${r}`);let i;try{i=await Is(`${le.apiBaseUrl}${t}`,{method:s.method??"GET",headers:l,body:s.body})}catch(m){const u=`Network request failed. Verify backend availability and CORS for this app origin. API: ${le.apiBaseUrl}`;throw Nt(u,"error"),new ge(u,0,{reason:(m==null?void 0:m.message)??"fetch failed",apiBaseUrl:le.apiBaseUrl,path:t})}const o=i.raw,b=i.payload;if(i.ok&&!b){const m=`API returned an empty/non-JSON success response. Check VITE_API_BASE_URL (${le.apiBaseUrl}) and backend routing.`;throw Nt(m,"error"),new ge(m,i.status,{raw:o})}if(!i.ok){if(i.status===401&&a===0){if(await Ma())return _(t,s,1);Ia()}const m=(b==null?void 0:b.message)??(b==null?void 0:b.detail)??`Request failed (${i.status})`;throw Nt(m,"error"),new ge(m,i.status,b)}return b}async function Ta(){const t=await _("/payment/subscription/me");return(t==null?void 0:t.data)??null}async function Ts(){const t=await _("/payment/plans");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function La(){const t=await _("/payment/purposes");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function Da(){const t=await _("/payment/referral/me");return(t==null?void 0:t.data)??null}async function qa(t){const s=await _("/payment/subscription/request",{method:"POST",body:JSON.stringify({plan:t})});return(s==null?void 0:s.data)??null}async function _a(t,s,a="monthly"){const r=await _("/payment/paystack/initialize",{method:"POST",body:JSON.stringify({plan:t,callbackUrl:s,billingCycle:a})});return(r==null?void 0:r.data)??null}async function $a(t){const s=await _(`/payment/paystack/verify/${encodeURIComponent(t)}`);return(s==null?void 0:s.data)??null}const es=[{title:"Home",href:"/"},{title:"About",href:"/about"},{title:"Pricing",href:"/pricing"},{title:"Contact",href:"/contact"}],$e=[{name:"Aisha Mohammed",role:"Estate Manager, Lekki Gardens",quote:"Reduced unauthorized entries by 87%. Our residents feel safer and love the convenience."},{name:"Chukwudi Okafor",role:"Homeowner, Abuja",quote:"No more missed deliveries. I approve visitors from anywhere, anytime. Game changer."},{name:"Jennifer Adebayo",role:"Property Developer",quote:"Deployed across 15 properties. The ROI is undeniable and tenants now expect this."}];function Oa(){const{isDark:t,toggleTheme:s}=ie(),[a,r]=n.useState("monthly"),[l,i]=n.useState(0),[o,b]=n.useState(!1),[m,u]=n.useState([]),[d,x]=n.useState(""),c=je(),h=je(),p=je(),k=je(),S=je();je(),je();const v=je();return n.useEffect(()=>{const j=setInterval(()=>{i(T=>(T+1)%$e.length)},5e3);return()=>clearInterval(j)},[]),n.useEffect(()=>{let j=!0;async function T(){x("");try{const f=await Ts();if(!j)return;const w=Qa(f);u(w)}catch(f){if(!j)return;u([]),x((f==null?void 0:f.message)??"Unable to load pricing plans.")}}return T(),()=>{j=!1}},[]),e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 sm:h-12 sm:w-12 dark:bg-white",children:e.jsx(oe,{tone:"light",className:"h-6 w-6 sm:h-7 sm:w-7 dark:invert-0"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("p",{className:"text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsx("div",{className:"hidden items-center gap-8 md:flex lg:gap-10",children:es.map(j=>e.jsx(g,{to:j.href,className:"text-sm font-semibold text-slate-600 transition hover:text-slate-900 dark:text-slate-300 dark:hover:text-white",children:j.title},j.href))}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/login",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white transition hover:bg-slate-800 sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Login"}),e.jsx("button",{type:"button",onClick:()=>b(!o),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:o?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),o&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[es.map(j=>e.jsx(g,{to:j.href,onClick:()=>b(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:j.title},j.href)),e.jsx(g,{to:"/login",onClick:()=>b(!1),className:"block rounded-lg bg-slate-900 px-3 py-2 text-base font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Login"})]})})]}),e.jsxs("main",{children:[e.jsx("section",{ref:c.ref,className:`mx-auto w-full max-w-7xl px-4 py-12 transition-all duration-700 sm:px-6 sm:py-16 lg:px-10 lg:py-24 ${c.visible?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:e.jsxs("div",{className:"grid gap-10 lg:grid-cols-2 lg:gap-14 xl:gap-20",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-3 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-slate-400"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-white"})]}),e.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-200",children:"Live System"})]}),e.jsxs("h2",{className:"mt-6 text-4xl font-black leading-tight tracking-tight sm:text-5xl lg:mt-8 lg:text-6xl xl:text-7xl",children:["Modern Door",e.jsx("br",{}),"Access Control"]}),e.jsx("p",{className:"mt-5 text-base leading-relaxed text-slate-600 sm:text-lg lg:mt-6 lg:text-xl dark:text-slate-300",children:"Qring replaces outdated doorbells with QR-powered realtime communication, visitor verification, and secure video sessions."}),e.jsxs("div",{className:"mt-8 flex flex-wrap gap-3 sm:gap-4 lg:mt-10",children:[e.jsx(g,{to:"/signup",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 sm:px-8 sm:py-4 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Start Free Trial"}),e.jsx(g,{to:"/contact",className:"rounded-lg border border-slate-200 bg-white px-6 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-50 sm:px-8 sm:py-4 dark:border-slate-700 dark:bg-slate-950 dark:text-slate-100 dark:hover:bg-slate-900",children:"Book Demo"})]}),e.jsxs("div",{className:"mt-10 grid grid-cols-3 gap-4 sm:gap-6 lg:mt-12",children:[e.jsx(vt,{value:"99.9%",label:"Uptime"}),e.jsx(vt,{value:"<1s",label:"Response"}),e.jsx(vt,{value:"24/7",label:"Support"})]})]}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-xl dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("div",{className:"border-b border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-slate-300 dark:bg-slate-500"}),e.jsx("div",{className:"h-3 w-3 rounded-full bg-slate-300 dark:bg-slate-500"}),e.jsx("div",{className:"h-3 w-3 rounded-full bg-slate-300 dark:bg-slate-500"}),e.jsx("span",{className:"ml-auto text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Live Activity"})]})}),e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ge,{title:"Visitor request at Gate A",time:"Just now",status:"active"}),e.jsx(Ge,{title:"Access approved",time:"2m ago",status:"success"}),e.jsx(Ge,{title:"Video call established",time:"4m ago",status:"complete"}),e.jsx(Ge,{title:"Session ended",time:"8m ago",status:"complete"})]}),e.jsxs("div",{className:"mt-5 rounded-lg border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:"Today's Activity"}),e.jsx("span",{className:"text-sm font-bold",children:"+12%"})]}),e.jsx("div",{className:"h-2 overflow-hidden rounded-full bg-slate-200 dark:bg-slate-700",children:e.jsx("div",{className:"h-full w-3/4 bg-slate-900 dark:bg-white"})})]})]})]})})]})}),e.jsx("section",{ref:h.ref,className:`border-y border-slate-200 bg-slate-50 py-12 transition-all duration-700 sm:py-16 lg:py-20 dark:border-slate-800 dark:bg-slate-900/40 ${h.visible?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-10",children:[e.jsxs("div",{className:"mb-10 text-center sm:mb-12 lg:mb-16",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:"Features"}),e.jsx("h2",{className:"mt-3 text-3xl font-black tracking-tight sm:text-4xl lg:mt-4 lg:text-5xl",children:"Everything You Need"})]}),e.jsxs("div",{className:"grid gap-4 sm:gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsx(Re,{icon:"Alert",title:"Instant Notifications",description:"Get realtime alerts the moment someone scans your QR code."}),e.jsx(Re,{icon:"Route",title:"Smart Routing",description:"Automatically direct visitors to the right person and door."}),e.jsx(Re,{icon:"Secure",title:"Strong Security",description:"JWT auth, encrypted sessions, and strict permission controls."}),e.jsx(Re,{icon:"Web",title:"No App Required",description:"Visitors use their browser with zero friction."}),e.jsx(Re,{icon:"Call",title:"HD Video Calls",description:"Reliable WebRTC video and audio visitor sessions."}),e.jsx(Re,{icon:"Logs",title:"Complete Analytics",description:"Track visitor patterns and security events over time."})]})]})}),e.jsxs("section",{ref:p.ref,className:`mx-auto w-full max-w-7xl px-4 py-12 transition-all duration-700 sm:px-6 sm:py-16 lg:px-10 lg:py-20 ${p.visible?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:[e.jsxs("div",{className:"mb-10 text-center sm:mb-12 lg:mb-16",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:"Process"}),e.jsx("h2",{className:"mt-3 text-3xl font-black tracking-tight sm:text-4xl lg:mt-4 lg:text-5xl",children:"How It Works"})]}),e.jsxs("div",{className:"grid gap-6 sm:gap-8 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(We,{number:"01",title:"Visitor Scans",description:"Visitor scans a unique QR code at the entry point."}),e.jsx(We,{number:"02",title:"System Validates",description:"Backend verifies code and checks routing permissions."}),e.jsx(We,{number:"03",title:"You Approve",description:"You receive an alert and approve or deny the request."}),e.jsx(We,{number:"04",title:"Access Granted",description:"Secure chat, voice, or video session opens immediately."})]})]}),e.jsx("section",{ref:k.ref,className:`border-y border-slate-200 bg-slate-50 py-12 transition-all duration-700 sm:py-16 lg:py-20 dark:border-slate-800 dark:bg-slate-900/40 ${k.visible?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-10",children:[e.jsxs("div",{className:"mb-10 text-center sm:mb-12",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:"Platform Statistics"}),e.jsx("h3",{className:"mt-3 text-3xl font-black tracking-tight sm:text-4xl lg:mt-4",children:"Trusted Worldwide"})]}),e.jsxs("div",{className:"grid gap-4 sm:gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(Je,{value:"24,000+",label:"Active Users"}),e.jsx(Je,{value:"1.2M",label:"Monthly Scans"}),e.jsx(Je,{value:"94%",label:"Approval Rate"}),e.jsx(Je,{value:"<1s",label:"Avg Response"})]})]})}),e.jsxs("section",{ref:S.ref,className:`mx-auto w-full max-w-7xl px-4 py-12 transition-all duration-700 sm:px-6 sm:py-16 lg:px-10 lg:py-20 ${S.visible?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:[e.jsxs("div",{className:"mb-10 text-center sm:mb-12",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:"Testimonials"}),e.jsx("h3",{className:"mt-3 text-3xl font-black tracking-tight sm:text-4xl lg:mt-4",children:"What Our Users Say"})]}),e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white p-6 shadow-lg sm:p-8 lg:p-12 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("div",{className:"mx-auto max-w-3xl text-center",children:[e.jsxs("p",{className:"text-lg font-medium leading-relaxed text-slate-700 sm:text-xl lg:text-2xl dark:text-slate-200",children:['"',$e[l].quote,'"']}),e.jsxs("div",{className:"mt-6 sm:mt-8",children:[e.jsx("p",{className:"text-lg font-bold sm:text-xl",children:$e[l].name}),e.jsx("p",{className:"mt-1 text-sm font-medium text-slate-600 dark:text-slate-300",children:$e[l].role})]})]}),e.jsx("div",{className:"mt-8 flex justify-center gap-2 sm:mt-10",children:$e.map((j,T)=>e.jsx("button",{type:"button",onClick:()=>i(T),className:`h-2 rounded-full transition-all ${T===l?"w-8 bg-slate-900 dark:bg-white":"w-2 bg-slate-300 dark:bg-slate-600"}`},T))})]})]}),e.jsx("section",{ref:v.ref,className:`border-y border-slate-200 bg-slate-900 py-12 transition-all duration-700 sm:py-16 lg:py-20 dark:border-slate-800 ${v.visible?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}`,children:e.jsxs("div",{className:"mx-auto w-full max-w-4xl px-4 text-center sm:px-6",children:[e.jsx("h2",{className:"text-3xl font-black tracking-tight text-white sm:text-4xl lg:text-5xl",children:"Ready To Get Started?"}),e.jsx("p",{className:"mt-4 text-base text-slate-300 sm:mt-6 sm:text-xl",children:"Join thousands using Qring. Start your free trial today with no credit card required."}),e.jsxs("div",{className:"mt-8 flex flex-wrap justify-center gap-3 sm:mt-10 sm:gap-4",children:[e.jsx(g,{to:"/signup",className:"rounded-lg bg-white px-6 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-100 sm:px-10 sm:py-4",children:"Start Free Trial"}),e.jsx(g,{to:"/contact",className:"rounded-lg border border-slate-700 bg-transparent px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 sm:px-10 sm:py-4",children:"Contact Sales"})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap justify-center gap-4 text-xs text-slate-400 sm:mt-8 sm:gap-6 sm:text-sm",children:[e.jsx("span",{children:"14-day free trial"}),e.jsx("span",{children:"No credit card needed"}),e.jsx("span",{children:"Cancel anytime"})]})]})})]}),e.jsx("footer",{className:"border-t border-slate-200 bg-white py-10 sm:py-12 dark:border-slate-800 dark:bg-slate-950",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-10",children:[e.jsxs("div",{className:"grid gap-8 sm:gap-10 md:grid-cols-2 lg:grid-cols-4 lg:gap-12",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("span",{className:"text-xl font-black",children:"Qring"})}),e.jsx("p",{className:"mt-4 text-sm text-slate-600 dark:text-slate-300",children:"Modern door access control for homes and estates."})]}),e.jsx(yt,{title:"Product",links:[{to:"/platform",label:"Platform"},{to:"/pricing",label:"Pricing"},{to:"/security",label:"Security"},{to:"/api-docs",label:"API Docs"}]}),e.jsx(yt,{title:"Company",links:[{to:"/about",label:"About"},{to:"/blog",label:"Blog"},{to:"/careers",label:"Careers"},{to:"/contact",label:"Contact"}]}),e.jsx(yt,{title:"Legal",links:[{to:"/privacy",label:"Privacy"},{to:"/terms",label:"Terms"},{to:"/compliance",label:"Compliance"}]})]}),e.jsxs("div",{className:"mt-10 border-t border-slate-200 pt-6 text-center text-sm text-slate-600 dark:border-slate-800 dark:text-slate-300",children:[e.jsx("p",{children:"2026 Qring Technologies. All rights reserved."}),e.jsx("p",{className:"mt-1",children:"techspareng.online"})]})]})})]})}function yt({title:t,links:s}){return e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wider",children:t}),e.jsx("ul",{className:"mt-4 space-y-2 text-sm",children:s.map(a=>e.jsx("li",{children:e.jsx(g,{to:a.to,className:"text-slate-600 transition hover:text-slate-900 dark:text-slate-300 dark:hover:text-white",children:a.label})},a.label))})]})}function vt({value:t,label:s}){return e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-black sm:text-3xl",children:t}),e.jsx("p",{className:"mt-1 text-[11px] font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:s})]})}function Ge({title:t,time:s,status:a}){const r={active:"border-slate-900 bg-slate-50 dark:border-slate-400 dark:bg-slate-800",success:"border-slate-300 bg-white dark:border-slate-700 dark:bg-slate-900",complete:"border-slate-200 bg-white dark:border-slate-700 dark:bg-slate-900"};return e.jsxs("div",{className:`flex items-center justify-between rounded-lg border p-3 ${r[a]}`,children:[e.jsx("p",{className:"text-sm font-semibold",children:t}),e.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:s})]})}function Re({icon:t,title:s,description:a}){return e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-white p-6 transition hover:shadow-lg sm:p-8 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("div",{className:"mb-4 inline-flex rounded-md border border-slate-200 bg-slate-50 px-2 py-1 text-xs font-semibold uppercase tracking-wider dark:border-slate-700 dark:bg-slate-800",children:t}),e.jsx("h4",{className:"text-xl font-bold",children:s}),e.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:a})]})}function We({number:t,title:s,description:a}){return e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-white p-6 text-center dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full border-2 border-slate-900 bg-white dark:border-white dark:bg-slate-900",children:e.jsx("span",{className:"text-sm font-black sm:text-base",children:t})}),e.jsx("h4",{className:"text-lg font-bold",children:s}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:a})]})}function Je({value:t,label:s}){return e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-white p-6 text-center sm:p-8 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("p",{className:"text-3xl font-black sm:text-4xl",children:t}),e.jsx("p",{className:"mt-2 text-sm font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:s})]})}function Qa(t){var i;const r=(Array.isArray(t)?t:[]).filter(o=>o&&o.active!==!1).map(o=>{const b=Number(o.amount||0),m=b*12,u=o.maxDoors??null,d=o.maxQrCodes??null,x=[];return typeof u=="number"&&x.push(`Up to ${u} doors`),typeof d=="number"&&x.push(`Up to ${d} QR codes`),{id:o.id,name:o.name??o.id,monthly:b,yearly:m,note:x.length?x.join(" • "):"Flexible access control plan",highlight:!1}}),l=r.some(o=>o.id==="doors_40")?"doors_40":(i=r.find(o=>o.monthly>0))==null?void 0:i.id;return r.map(o=>({...o,highlight:o.id===l}))}const Ba=[{title:"Security by design",text:"Every session, route, and permission is scoped with strict role boundaries and auditability."},{title:"Realtime reliability",text:"Qring is engineered for low-latency alerts, resilient socket delivery, and stable communication."},{title:"Scalable architecture",text:"Modular services support growth from single properties to large multi-estate deployments."}],Ua=[{year:"2024",event:"Qring concept and architecture blueprint defined."},{year:"2025",event:"Core QR routing and visitor flow launched in pilot communities."},{year:"2026",event:"Realtime session suite and estate operations dashboard released."}];function Ha(){const{isDark:t,toggleTheme:s}=ie(),[a,r]=n.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(oe,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"Pricing"}),e.jsx(g,{to:"/signup",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Get Started"}),e.jsx("button",{type:"button",onClick:()=>r(!a),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),a&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/signup",onClick:()=>r(!1),className:"block rounded-lg bg-slate-900 px-3 py-2 text-base font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Get Started"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-7xl px-4 py-10 sm:px-6 sm:py-12 lg:px-10 lg:py-16",children:[e.jsxs("section",{className:"grid gap-8 rounded-2xl border border-slate-200 bg-white p-6 shadow-soft sm:p-8 lg:grid-cols-2 dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:"About Qring"}),e.jsx("h1",{className:"mt-3 text-3xl font-black tracking-tight sm:text-4xl lg:text-5xl",children:"Building trusted access communication for modern communities"}),e.jsx("p",{className:"mt-4 text-sm leading-relaxed text-slate-600 sm:text-base dark:text-slate-300",children:"Qring replaces analog doorbell friction with a secure digital-first experience for homeowners, estate managers, and visitors."}),e.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 sm:text-base dark:text-slate-300",children:"We focus on clarity, speed, and control so communities can manage access confidently from anywhere."})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-5 sm:p-6 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:"Mission"}),e.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 sm:text-base dark:text-slate-300",children:"Make door access communication secure, instant, and auditable while preserving user privacy and operational boundaries."}),e.jsxs("div",{className:"mt-5 grid grid-cols-3 gap-3 text-center sm:gap-4",children:[e.jsx(St,{value:"150k+",label:"Sessions handled"}),e.jsx(St,{value:"98%",label:"Approval speed"}),e.jsx(St,{value:"24/7",label:"Platform ops"})]})]})]}),e.jsx("section",{className:"mt-8 grid gap-4 sm:mt-10 sm:gap-6 md:grid-cols-3",children:Ba.map(l=>e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-white p-5 sm:p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h2",{className:"text-xl font-bold",children:l.title}),e.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:l.text})]},l.title))}),e.jsxs("section",{className:"mt-8 rounded-2xl border border-slate-200 bg-white p-6 sm:mt-10 sm:p-8 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h2",{className:"text-2xl font-black tracking-tight sm:text-3xl",children:"Journey"}),e.jsx("div",{className:"mt-5 grid gap-4 sm:mt-6 md:grid-cols-3",children:Ua.map(l=>e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-slate-50 p-5 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:l.year}),e.jsx("p",{className:"mt-2 text-sm font-medium leading-relaxed",children:l.event})]},l.year))})]}),e.jsxs("section",{className:"mt-8 rounded-2xl bg-slate-900 p-6 text-white sm:mt-10 sm:p-8 lg:flex lg:items-center lg:justify-between dark:bg-white dark:text-slate-900",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black tracking-tight sm:text-3xl",children:"Ready to deploy Qring?"}),e.jsx("p",{className:"mt-2 text-sm text-slate-300 dark:text-slate-600",children:"Talk to our team about your building or estate setup."})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-3 lg:mt-0",children:[e.jsx(g,{to:"/contact",className:"rounded-lg bg-white px-5 py-3 text-sm font-semibold text-slate-900 dark:bg-slate-900 dark:text-white",children:"Contact Sales"}),e.jsx(g,{to:"/",className:"rounded-lg border border-white px-5 py-3 text-sm font-semibold dark:border-slate-900",children:"Back Home"})]})]})]})]})}function St({value:t,label:s}){return e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-3 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("p",{className:"text-2xl font-black sm:text-3xl",children:t}),e.jsx("p",{className:"mt-1 text-[11px] font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:s})]})}const Va="₦",Fa=[{id:"free",name:"Starter",monthly:0,yearly:0,bestFor:"Get started at no cost",cta:"Get Started Free",features:["1 door","1 QR code","Visitor notifications","Basic access logs","Mobile alerts"]},{id:"doors_20",name:"Basic Plan",monthly:12e3,yearly:12e4,bestFor:"Up to 10 doors",cta:"Start Basic",features:["Up to 10 doors","Up to 10 QR codes","Realtime visitor alerts","Access logs","Guest approvals","Resident management","Mobile dashboard"]},{id:"doors_40",name:"Standard Plan",monthly:25e3,yearly:25e4,bestFor:"Up to 22 doors",cta:"Choose Standard",features:["Up to 22 doors","Up to 22 QR codes","Realtime approvals","Visitor session logs","Chat + call access","Admin panel","Multi-user access"]},{id:"doors_80",name:"Pro Estate Plan",monthly:5e4,yearly:5e5,bestFor:"Up to 46 doors",cta:"Start Pro Estate",features:["Up to 46 doors","Up to 46 QR codes","Visitor scheduling","Access time windows","Multi-admin roles","Advanced analytics","Realtime controls","Priority support"],popular:!0},{id:"doors_100",name:"Premium Estate Plan",monthly:1e5,yearly:1e6,bestFor:"Up to 100 doors",cta:"Choose Premium",features:["Up to 100 doors","Up to 100 QR codes","Estate-level analytics","Security audit logs","Multi-location control","Advanced permissions","API access","Dedicated support"]},{id:"enterprise",name:"Enterprise",monthly:null,yearly:null,bestFor:"Custom pricing - annual contract",cta:"Contact Sales",features:["Unlimited doors","Unlimited QR codes","Custom workflows","Custom security policies","Onsite onboarding","SLA contracts","Private cloud deployment","API + integrations","Dedicated account manager"]}];function za(){const{isDark:t,toggleTheme:s}=ie(),[a,r]=n.useState("monthly"),[l,i]=n.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(oe,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/contact",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Contact"}),e.jsx("button",{type:"button",onClick:()=>i(!l),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:l?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),l&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>i(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>i(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/contact",onClick:()=>i(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"}),e.jsx(g,{to:"/signup",onClick:()=>i(!1),className:"block rounded-lg bg-slate-900 px-3 py-2 text-base font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Get Started"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-7xl px-4 py-10 sm:px-6 sm:py-12 lg:px-10 lg:py-16",children:[e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-soft sm:p-8 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:"Pricing Plans"}),e.jsx("h1",{className:"mt-2 text-3xl font-black tracking-tight sm:text-4xl lg:text-5xl",children:"Paystack-ready pricing for every property size"}),e.jsx("p",{className:"mt-4 max-w-2xl text-sm leading-relaxed text-slate-600 sm:text-base dark:text-slate-300",children:"Choose a plan based on your number of doors. Free plan supports one door and one QR code."}),e.jsxs("div",{className:"mt-6 inline-flex rounded-lg border border-slate-200 bg-slate-50 p-1 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("button",{type:"button",onClick:()=>r("monthly"),className:`rounded-md px-4 py-2 text-sm font-semibold transition ${a==="monthly"?"bg-slate-900 text-white dark:bg-white dark:text-slate-900":"text-slate-600 dark:text-slate-300"}`,children:"Monthly"}),e.jsx("button",{type:"button",onClick:()=>r("yearly"),className:`rounded-md px-4 py-2 text-sm font-semibold transition ${a==="yearly"?"bg-slate-900 text-white dark:bg-white dark:text-slate-900":"text-slate-600 dark:text-slate-300"}`,children:"Yearly"})]})]}),e.jsx("section",{className:"mt-8 grid gap-4 sm:gap-6 md:grid-cols-2 xl:grid-cols-3",children:Fa.map(o=>e.jsxs("article",{className:`rounded-xl border bg-white p-6 transition hover:shadow-xl sm:p-8 dark:bg-slate-900 ${o.popular?"border-slate-900 shadow-lg dark:border-white":"border-slate-200 dark:border-slate-700"}`,children:[o.popular?e.jsx("div",{className:"mb-4 inline-block rounded-full bg-slate-900 px-3 py-1 text-xs font-semibold uppercase tracking-wider text-white dark:bg-white dark:text-slate-900",children:"Popular"}):null,e.jsx("p",{className:"text-sm font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-300",children:o.name}),e.jsx("p",{className:"mt-4 text-4xl font-black tracking-tight sm:text-5xl",children:o.monthly===null||o.yearly===null?"Custom":`${Va}${Ga(a==="monthly"?o.monthly:o.yearly)}`}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-300",children:o.monthly===null||o.yearly===null?"Annual contract":a==="monthly"?"per month":"per year"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:o.bestFor}),e.jsx("ul",{className:"mt-5 space-y-2 text-sm text-slate-700 dark:text-slate-200",children:o.features.map(b=>e.jsxs("li",{children:["- ",b]},b))}),e.jsx(g,{to:o.id==="enterprise"?"/contact":"/billing/paywall",className:`mt-8 block rounded-lg py-3 text-center text-sm font-semibold transition ${o.popular?"bg-slate-900 text-white hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200":"border border-slate-200 text-slate-900 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-100 dark:hover:bg-slate-800"}`,children:o.cta??`Choose ${o.name}`})]},o.id))})]})]})}function Ga(t){return new Intl.NumberFormat("en-NG").format(t)}function Wa(){const{isDark:t,toggleTheme:s}=ie(),[a,r]=n.useState(!1),[l,i]=n.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(oe,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>i(!l),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:l?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),l&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>i(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>i(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>i(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/signup",onClick:()=>i(!1),className:"block rounded-lg bg-slate-900 px-3 py-2 text-base font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Get Started"})]})})]}),e.jsxs("main",{className:"mx-auto grid w-full max-w-7xl gap-6 px-4 py-10 sm:px-6 sm:py-12 lg:grid-cols-12 lg:px-10 lg:py-16",children:[e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-soft sm:p-8 lg:col-span-5 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:"Contact"}),e.jsx("h1",{className:"mt-3 text-3xl font-black tracking-tight sm:text-4xl",children:"Talk to the Qring team"}),e.jsx("p",{className:"mt-4 text-sm leading-relaxed text-slate-600 sm:text-base dark:text-slate-300",children:"Reach out for deployment planning, technical onboarding, or custom estate pricing."}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx(Ye,{label:"General",value:"hello@useqring.online"}),e.jsx(Ye,{label:"Support",value:"support@useqring.online"}),e.jsx(Ye,{label:"Sales",value:"sales@useqring.online"}),e.jsx(Ye,{label:"Response time",value:"Within 1 business day"})]})]}),e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-soft sm:p-8 lg:col-span-7 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h2",{className:"text-2xl font-black tracking-tight sm:text-3xl",children:"Send a message"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Tell us about your property setup and goals."}),e.jsxs("form",{onSubmit:o=>{o.preventDefault(),r(!0)},className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(Oe,{label:"First name",placeholder:"Your first name"}),e.jsx(Oe,{label:"Last name",placeholder:"Your last name"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(Oe,{label:"Email",type:"email",placeholder:"you@company.com"}),e.jsx(Oe,{label:"Phone",placeholder:"+234..."})]}),e.jsx(Oe,{label:"Company / Estate",placeholder:"Property name"}),e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-2 block font-semibold text-slate-700 dark:text-slate-200",children:"Message"}),e.jsx("textarea",{required:!0,rows:5,placeholder:"Share your requirements...",className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-3 outline-none ring-0 transition focus:border-slate-500 dark:border-slate-700 dark:bg-slate-950"})]}),a?e.jsx("p",{className:"rounded-lg border border-green-200 bg-green-50 px-3 py-2 text-sm text-green-700 dark:border-green-900 dark:bg-green-950/40 dark:text-green-300",children:"Message received. We will contact you shortly."}):null,e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{type:"submit",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Send Message"}),e.jsx(g,{to:"/",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Back Home"})]})]})]})]})]})}function Oe({label:t,placeholder:s,type:a="text"}){return e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-2 block font-semibold text-slate-700 dark:text-slate-200",children:t}),e.jsx("input",{required:!0,type:a,placeholder:s,className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-3 outline-none ring-0 transition focus:border-slate-500 dark:border-slate-700 dark:bg-slate-950"})]})}function Ye({label:t,value:s}){return e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-300",children:t}),e.jsx("p",{className:"mt-1 text-sm font-medium",children:s})]})}function Ja(){const{isDark:t,toggleTheme:s}=ie(),[a,r]=n.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(oe,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!a),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),a&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-5xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:[e.jsxs("div",{className:"mb-16",children:[e.jsx("h1",{className:"text-4xl font-black tracking-tight sm:text-5xl",children:"Platform Overview"}),e.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300",children:"Qring is a modern smart access control platform that replaces traditional doorbells with QR-powered realtime communication and visitor verification."})]}),e.jsxs("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-xl font-bold",children:"QR Code Scanning"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:"Visitors scan unique QR codes at entry points to request access. Instant notifications reach homeowners with full context."})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Realtime Communication"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:"WebSocket-powered messaging, voice, and video calls connect homeowners and visitors instantly with no lag."})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Smart Routing"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:"Automatically direct visitors to the right person, door, or building based on QR code assignments."})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Session Management"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:"Create, approve, deny, or revoke access sessions with configurable time limits on-the-fly."})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Complete Audit Logs"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:"Every action is logged for compliance, security investigations, and operational transparency."})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Multi-Level Access"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-300",children:"Role-based access control for homeowners, estate managers, residents, and visitors."})]})]}),e.jsxs("div",{className:"mt-16",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"How It Works"}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-900 text-sm font-bold text-white dark:bg-white dark:text-slate-900",children:"1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"Visitor Scans QR Code"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Visitor scans a unique QR code at the entry point or gate"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-900 text-sm font-bold text-white dark:bg-white dark:text-slate-900",children:"2"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"System Validates & Notifies"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Qring backend verifies the code and sends instant notification to the homeowner"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-900 text-sm font-bold text-white dark:bg-white dark:text-slate-900",children:"3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"Homeowner Responds"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Homeowner approves or denies access from their phone or dashboard"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-900 text-sm font-bold text-white dark:bg-white dark:text-slate-900",children:"4"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"Session Established"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Secure chat, voice, or video session opens immediately for communication"})]})]})]})]}),e.jsxs("div",{className:"mt-16 flex flex-wrap justify-center gap-4",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/pricing",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"View Pricing"}),e.jsx(g,{to:"/signup",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Start Free Trial"})]})]})]})}function Ya(){const{isDark:t,toggleTheme:s}=ie(),[a,r]=n.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(oe,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!a),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),a&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-5xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:[e.jsxs("div",{className:"mb-16",children:[e.jsx("h1",{className:"text-4xl font-black tracking-tight sm:text-5xl",children:"Security & Privacy"}),e.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300",children:"Qring employs industry-standard security practices to protect your data, sessions, and access control."})]}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Encryption & Data Protection"}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"End-to-End Encryption"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"All realtime communication (messages, voice, video) is encrypted using WebRTC protocols and TLS 1.2+."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"JWT Authentication"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Sessions are secured with JSON Web Tokens with configurable expiration. Tokens are stored securely on client devices."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Password Security"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Passwords are hashed with bcrypt (10+ rounds). We enforce strong password policies and support two-factor authentication."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Database Encryption"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Sensitive data at rest is encrypted using AES-256 encryption. Database backups are regularly tested and encrypted."})]})]})]}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Access Control & Permissions"}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Role-Based Access Control (RBAC)"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Granular permissions for admins, estate managers, homeowners, and visitors. Each role has strict scope boundaries."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Session Scoping"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Each session is scoped to specific users, doors, and time windows. Access is automatically revoked on expiration."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Audit Logging"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Every authentication, authorization, and access event is logged with timestamp, user, IP, and outcome."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Rate Limiting"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"API endpoints are rate-limited to prevent brute-force attacks and abuse."})]})]})]}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Infrastructure & Compliance"}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"HTTPS/TLS"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"All traffic is encrypted in transit using HTTPS with TLS 1.2 or higher. Certificate pinning for mobile apps."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Secure Infrastructure"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Application runs on managed cloud infrastructure with DDoS protection, firewalls, and intrusion detection."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Regular Security Audits"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Third-party security assessments, penetration testing, and code reviews are conducted regularly."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Vulnerability Disclosure"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"We follow responsible disclosure practices. Report security issues to security@useqring.online"})]})]})]}),e.jsxs("div",{className:"mt-16 flex flex-wrap justify-center gap-4",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/compliance",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"View Compliance"})]})]})]})}function Ka(){const{isDark:t,toggleTheme:s}=ie(),[a,r]=n.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(oe,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!a),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),a&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsx("main",{className:"mx-auto w-full max-w-4xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-4 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-slate-400"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-white"})]}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-200",children:"Coming Soon"})]}),e.jsx("h1",{className:"mt-6 text-4xl font-black tracking-tight sm:text-5xl lg:text-6xl",children:"API Documentation"}),e.jsx("p",{className:"mt-6 text-lg leading-relaxed text-slate-600 dark:text-slate-300",children:"Comprehensive API reference, code examples, and integration guides are coming soon. Build with Qring."}),e.jsxs("div",{className:"mt-10 flex flex-wrap justify-center gap-4",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/contact",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Get Started"})]})]})})]})}function Xa(){const{isDark:t,toggleTheme:s}=ie(),[a,r]=n.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(oe,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!a),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),a&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsx("main",{className:"mx-auto w-full max-w-4xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-4 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-slate-400"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-white"})]}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-200",children:"Coming Soon"})]}),e.jsx("h1",{className:"mt-6 text-4xl font-black tracking-tight sm:text-5xl lg:text-6xl",children:"Company"}),e.jsx("p",{className:"mt-6 text-lg leading-relaxed text-slate-600 dark:text-slate-300",children:"Learn more about Qring company information, team, and our mission. Detailed company page coming soon."}),e.jsxs("div",{className:"mt-10 flex flex-wrap justify-center gap-4",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/contact",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Contact Us"})]})]})})]})}function Za(){const{isDark:t,toggleTheme:s}=ie(),[a,r]=n.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(oe,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!a),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),a&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsx("main",{className:"mx-auto w-full max-w-4xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-4 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-slate-400"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-white"})]}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-200",children:"Coming Soon"})]}),e.jsx("h1",{className:"mt-6 text-4xl font-black tracking-tight sm:text-5xl lg:text-6xl",children:"Blog"}),e.jsx("p",{className:"mt-6 text-lg leading-relaxed text-slate-600 dark:text-slate-300",children:"Insights, updates, and stories about smart access control. Our blog is coming soon."}),e.jsxs("div",{className:"mt-10 flex flex-wrap justify-center gap-4",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/contact",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Subscribe to Updates"})]})]})})]})}function er(){const{isDark:t,toggleTheme:s}=ie(),[a,r]=n.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(oe,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!a),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),a&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsx("main",{className:"mx-auto w-full max-w-4xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-4 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-slate-400"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-white"})]}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-200",children:"Coming Soon"})]}),e.jsx("h1",{className:"mt-6 text-4xl font-black tracking-tight sm:text-5xl lg:text-6xl",children:"Careers"}),e.jsx("p",{className:"mt-6 text-lg leading-relaxed text-slate-600 dark:text-slate-300",children:"Join our team and help build the future of access control. Career opportunities coming soon."}),e.jsxs("div",{className:"mt-10 flex flex-wrap justify-center gap-4",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/contact",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Get In Touch"})]})]})})]})}function tr(){const{isDark:t,toggleTheme:s}=ie(),[a,r]=n.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(oe,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!a),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),a&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsx("main",{className:"mx-auto w-full max-w-4xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-4 py-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-slate-400"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-white"})]}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-700 dark:text-slate-200",children:"Coming Soon"})]}),e.jsx("h1",{className:"mt-6 text-4xl font-black tracking-tight sm:text-5xl lg:text-6xl",children:"Legal"}),e.jsx("p",{className:"mt-6 text-lg leading-relaxed text-slate-600 dark:text-slate-300",children:"Legal information and documentation coming soon. Check back for Privacy, Terms, and Compliance information."}),e.jsxs("div",{className:"mt-10 flex flex-wrap justify-center gap-4",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/contact",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"Contact Us"})]})]})})]})}function sr(){const{isDark:t,toggleTheme:s}=ie(),[a,r]=n.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(oe,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!a),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),a&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-5xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:[e.jsxs("div",{className:"mb-16",children:[e.jsx("h1",{className:"text-4xl font-black tracking-tight sm:text-5xl",children:"Privacy Policy"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Last updated: January 2025"}),e.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300",children:"We respect your privacy and are committed to protecting your personal data. This policy explains how we collect, use, and safeguard your information."})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"1. Information We Collect"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Account Information:"})," Name, email address, phone number, password, and profile details provided during registration."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Session Data:"})," QR code scans, access requests, visitor interactions, and device information for each session."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Communication Data:"})," Messages, voice recordings, and video data shared through our realtime communication features (encrypted end-to-end)."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Technical Data:"})," IP address, browser type, device information, and usage patterns for analytics and security."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Payment Information:"})," Billing address and payment method data (processed securely by third-party providers, we do not store full credit card numbers)."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"2. How We Use Your Information"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Provide and improve our smart access control platform and services"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Process transactions, payments, and account management"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Communicate service updates, security alerts, and support responses"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Generate audit logs for security, compliance, and troubleshooting"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Analyze usage patterns to enhance user experience and platform performance"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Comply with legal obligations and enforce our terms of service"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"3. Data Retention"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Active Account:"})," Your account information is retained for the duration of your subscription."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Audit Logs:"})," Session logs and access records are retained for 90 days to 1 year for security and compliance purposes."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Communication Data:"})," Realtime communication is not stored unless explicitly backed up by the user."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"After Account Deletion:"})," We delete or anonymize personal data within 30 days of account closure, except where required by law."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"4. Data Sharing & Third Parties"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"We do not sell, rent, or trade your personal data. We may share information only:"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• With service providers (hosting, payment processing, analytics) under data processing agreements"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• When required by law, court order, or government authority"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• To protect against security threats or fraud (with minimal data shared)"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• In case of business restructuring or acquisition (with privacy terms maintained)"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"5. Your Rights & Controls"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Access:"})," You can view and download your personal data through account settings."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Correction:"})," Update or correct account information in your profile at any time."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Deletion:"})," Request deletion of your account and associated personal data (some data retained for audit/legal purposes)."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Opt-Out:"})," Disable marketing emails and notifications through account preferences."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"GDPR Rights:"})," If you're in the EU, you have additional rights under GDPR. Contact us for a formal data request."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"6. Cookies & Tracking"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"We use cookies and localStorage to maintain sessions, remember preferences, and analyze platform usage. You can control cookie settings in your browser."}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"We use Google Analytics for aggregated usage insights. No personally identifiable information is sent to Google."})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"7. Security Measures"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Data encrypted in transit (HTTPS/TLS 1.2+) and at rest (AES-256)"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Passwords hashed with bcrypt to prevent unauthorized access"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• End-to-end encryption for realtime communications"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Regular security audits and penetration testing"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Multi-factor authentication available for enhanced account protection"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"8. Children's Privacy"}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"Our service is not intended for users under 18. We do not knowingly collect data from minors. If we discover such data, we delete it promptly."})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"9. Policy Changes"}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"We may update this policy periodically. Significant changes will be notified via email or in-app notice. Continued use after changes constitutes acceptance."})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"10. Contact Us"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Privacy Questions:"})," privacy@useqring.online"]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"GDPR/Data Requests:"})," dpo@useqring.online"]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Security Concerns:"})," security@useqring.online"]})]})]})]}),e.jsxs("div",{className:"mt-16 flex flex-wrap justify-center gap-4 border-t border-slate-200 pt-8 dark:border-slate-800",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/terms",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"View Terms"})]})]})]})}function ar(){const{isDark:t,toggleTheme:s}=ie(),[a,r]=n.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(oe,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!a),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),a&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-5xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:[e.jsxs("div",{className:"mb-16",children:[e.jsx("h1",{className:"text-4xl font-black tracking-tight sm:text-5xl",children:"Terms of Service"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Last updated: January 2025"}),e.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300",children:"These Terms of Service govern your use of the Qring platform. By accessing or using our service, you agree to be bound by these terms."})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"1. Acceptance of Terms"}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"By accessing, using, or registering with Qring, you agree to comply with these Terms of Service and all applicable laws and regulations. If you do not agree with any part of these terms, you may not use our service."})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"2. Service Description"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"Qring is a smart access control platform that enables estate managers and homeowners to manage visitor access through QR codes, realtime communication, and digital session management."}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"We reserve the right to modify, suspend, or discontinue service at any time with reasonable notice."})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"3. User Accounts & Responsibilities"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Registration:"})," You must provide accurate, complete information during registration and keep it updated."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Account Security:"})," You are responsible for maintaining the confidentiality of your password. You agree not to share account credentials and are liable for all activities under your account."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Lawful Use:"})," You must use the service only for lawful purposes and in accordance with these terms."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"4. User Conduct Restrictions"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"You agree NOT to:"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Attempt unauthorized access or hack the platform"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Transmit malware, viruses, or malicious code"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Use the service for illegal activities or harassment"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Violate intellectual property rights of others"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Reverse engineer, decompile, or attempt to derive source code"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"• Spam, abuse, or harass other users"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"5. Intellectual Property Rights"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"All content, features, and functionality of Qring are owned by Qring or its licensors, including logos, trademarks, and software code. You may not reproduce, modify, or distribute any content without express written permission."}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"You retain ownership of content you create and upload, but grant us a license to use, display, and process it for service delivery."})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"6. Payment & Billing"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Fees:"})," Subscription fees are as listed on the pricing page and are subject to change with 30 days notice."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Billing:"})," You authorize us to charge your payment method on the billing date. Failed payments may result in service suspension."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Refunds:"})," Refunds are available within 30 days of payment for first-time subscribers. Other refunds are at our discretion."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"7. Limitation of Liability"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Disclaimer:"}),' The service is provided "as-is" without warranties of any kind, express or implied.']}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Limitation:"})," To the maximum extent permitted by law, Qring shall not be liable for indirect, incidental, special, consequential, or punitive damages."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Maximum Liability:"})," Our total liability to you shall not exceed the amount you paid in the 12 months preceding the claim."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"8. Indemnification"}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"You agree to indemnify, defend, and hold harmless Qring from any claims, damages, losses, or expenses arising from your violation of these terms, your use of the service, or your infringement of any rights."})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"9. Termination"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Account Termination:"})," You may terminate your account anytime through account settings. No refund of unused subscription fees will be issued."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Our Right to Terminate:"})," We may terminate or suspend your account for violation of these terms, non-payment, or abuse of service."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"10. Dispute Resolution"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Governing Law:"})," These terms are governed by applicable international law."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Arbitration:"})," Disputes shall be resolved through informal resolution or binding arbitration, not court proceedings."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"11. Modifications to Terms"}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"We may update these terms at any time. Major changes will be notified via email or in-app notice. Your continued use after changes constitutes acceptance."})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"12. Contact for Disputes"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Support:"})," support@useqring.online"]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Legal Issues:"})," legal@useqring.online"]})]})]})]}),e.jsxs("div",{className:"mt-16 flex flex-wrap justify-center gap-4 border-t border-slate-200 pt-8 dark:border-slate-800",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/privacy",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"View Privacy"})]})]})]})}function rr(){const{isDark:t,toggleTheme:s}=ie(),[a,r]=n.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsxs("header",{className:"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm dark:border-slate-800 dark:bg-slate-950/95",children:[e.jsxs("nav",{className:"mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[e.jsxs(g,{to:"/",className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(oe,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("span",{children:[e.jsx("span",{className:"block text-xl font-black tracking-tight sm:text-2xl",children:"Qring"}),e.jsx("span",{className:"block text-[10px] font-medium uppercase tracking-wider text-slate-500",children:"Smart Access Control"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 transition hover:bg-slate-50 sm:px-4 sm:text-sm dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:t?"Light":"Dark"}),e.jsx(g,{to:"/about",className:"hidden rounded-lg border border-slate-200 px-4 py-2 text-xs font-semibold sm:text-sm sm:inline-block dark:border-slate-700",children:"About"}),e.jsx(g,{to:"/pricing",className:"hidden rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white sm:px-6 sm:text-sm sm:inline-block dark:bg-white dark:text-slate-900",children:"Pricing"}),e.jsx("button",{type:"button",onClick:()=>r(!a),className:"md:hidden rounded-lg border border-slate-200 px-3 py-2 text-slate-700 transition hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-900",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),a&&e.jsx("div",{className:"border-t border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900 md:hidden",children:e.jsxs("div",{className:"space-y-1 px-4 py-4 sm:px-6",children:[e.jsx(g,{to:"/",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Home"}),e.jsx(g,{to:"/about",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"About"}),e.jsx(g,{to:"/pricing",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Pricing"}),e.jsx(g,{to:"/contact",onClick:()=>r(!1),className:"block rounded-lg px-3 py-2 text-base font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",children:"Contact"})]})})]}),e.jsxs("main",{className:"mx-auto w-full max-w-5xl px-4 py-16 sm:px-6 sm:py-24 lg:px-10",children:[e.jsxs("div",{className:"mb-16",children:[e.jsx("h1",{className:"text-4xl font-black tracking-tight sm:text-5xl",children:"Compliance & Standards"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Last updated: January 2025"}),e.jsx("p",{className:"mt-4 text-lg text-slate-600 dark:text-slate-300",children:"Qring adheres to stringent compliance requirements and best practices for data protection, security, and operational integrity."})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Data Protection Regulations"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"GDPR Compliance"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Qring complies with the General Data Protection Regulation (GDPR). We honor user rights including data access, correction, deletion, and portability. Our Data Processing Agreements are available upon request."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"CCPA & Privacy Laws"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"For users in California and other jurisdictions with privacy laws, we provide transparency about personal information, allow opt-out options, and facilitate data rights requests."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"UK Data Protection Act (UKDPA)"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Qring honors obligations under the UK Data Protection Act 2018 and recognizes all GDPR rights for UK-based users."})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Security Frameworks"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"NIST Cybersecurity Framework"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Our security practices align with NIST guidelines for identifying, protecting, detecting, responding to, and recovering from cybersecurity incidents."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"OWASP Top 10"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Qring development follows OWASP Top 10 security recommendations to prevent common application vulnerabilities including injection, broken authentication, and sensitive data exposure."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Encryption Standards"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"All data is encrypted using industry-standard protocols: TLS 1.2+ for transport, AES-256 for data at rest, and WebRTC for realtime communications."})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Compliance Certifications"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Security Audits"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Qring undergoes regular third-party security assessments and penetration testing to identify and remediate vulnerabilities."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Incident Response Plan"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"We maintain a documented incident response plan to detect and respond to security incidents within acceptable timeframes and notify affected users."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Business Continuity"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Qring maintains backup and disaster recovery procedures with regular testing to ensure service availability and data integrity."})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Access Control & Authentication"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Role-Based Access Control (RBAC)"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Granular permissions ensure users only access data and features required for their role. Regular access reviews are conducted."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Multi-Factor Authentication"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"MFA is available for all accounts and required for administrative functions to prevent unauthorized access."})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Session Management"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Sessions are scoped, time-limited, and automatically revoked. All session events are logged for audit purposes."})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Audit & Logging"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Comprehensive Logging:"})," All authentication, authorization, and data access events are logged with timestamps, user identifiers, IP addresses, and action details."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Log Retention:"})," Audit logs are retained for 12 months and protected against tampering and unauthorized access."]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Log Review:"})," Logs are regularly reviewed for suspicious activities and security events."]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Third-Party Security"}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:"All third-party service providers are vetted for security and compliance. Data Processing Agreements are in place for any processor handling personal data."})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Compliance Contact"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Compliance Officer:"})," compliance@useqring.online"]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Data Protection Officer:"})," dpo@useqring.online"]}),e.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[e.jsx("strong",{children:"Security Team:"})," security@useqring.online"]})]})]})]}),e.jsxs("div",{className:"mt-16 flex flex-wrap justify-center gap-4 border-t border-slate-200 pt-8 dark:border-slate-800",children:[e.jsx(g,{to:"/",className:"rounded-lg bg-slate-900 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200",children:"Back Home"}),e.jsx(g,{to:"/security",className:"rounded-lg border border-slate-200 px-6 py-3 text-sm font-semibold transition hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800",children:"View Security"})]})]})]})}function Te({title:t,subtitle:s,children:a}){return e.jsxs("div",{className:"w-full max-w-md rounded-3xl border border-slate-200 bg-white/90 p-7 shadow-soft backdrop-blur dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"mb-5 flex items-center gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-xl bg-slate-900 dark:bg-white",children:e.jsx(oe,{tone:"light",className:"h-6 w-6 dark:invert-0"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500",children:"Qring"}),e.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Secure Access"})]})]}),e.jsx("h1",{className:"font-heading text-3xl font-bold",children:t}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:s}),e.jsx("div",{className:"mt-6",children:a})]})}const nr={apiKey:"AIzaSyAg0TIlKOOk3AcDn-VGh9HlDQi2eDjk088",authDomain:"qring-7ced9.firebaseapp.com",projectId:"qring-7ced9",storageBucket:"qring-7ced9.firebasestorage.app",messagingSenderId:"103048317220",appId:"1:103048317220:web:72f9667db6daae62504bb1",measurementId:"G-3B48QKGTH7"},lr=ca(nr),it=xa(lr);ma(it,ua).catch(t=>{console.error("Error setting Firebase persistence:",t)});const mt=new ha;mt.addScope("profile");mt.addScope("email");const Ut="qring_pending_google_signup",Ls="qring_google_redirect_intent";function or(t){sessionStorage.setItem(Ut,JSON.stringify(t))}function ir(){const t=sessionStorage.getItem(Ut);if(!t)return null;try{return JSON.parse(t)}catch{return null}}function dr(){sessionStorage.removeItem(Ut)}function cr(){var t,s;try{return!!((s=(t=window==null?void 0:window.Capacitor)==null?void 0:t.isNativePlatform)!=null&&s.call(t))}catch{return!1}}function xr(t){sessionStorage.setItem(Ls,t)}function mr(){sessionStorage.removeItem(Ls)}async function Ds(t="signin"){if(cr()){const a=await ba(it);if(a!=null&&a.user)return mr(),a.user;throw xr(t),await ga(it,mt),new Error("Redirecting to Google...")}return(await pa(it,mt)).user}async function qs(){try{const t=await Ds("signin"),s=await t.getIdToken(!0);return await _("/auth/google-signin",{method:"POST",body:JSON.stringify({idToken:s,email:t.email,displayName:t.displayName,photoURL:t.photoURL})})}catch(t){throw(t==null?void 0:t.message)==="Redirecting to Google..."?t:t.code==="auth/popup-closed-by-user"?new Error("Sign-in popup was closed"):t.code==="auth/popup-blocked"?new Error("Sign-in popup was blocked. Please allow popups."):new Error(t.message||"Google sign-in failed")}}async function _s(t=""){try{const s=await Ds("signup"),r={idToken:await s.getIdToken(!0),email:s.email,displayName:s.displayName,photoURL:s.photoURL,referralCode:String(t||"").trim()||void 0};return or(r),r}catch(s){throw(s==null?void 0:s.message)==="Redirecting to Google..."?s:s.code==="auth/popup-closed-by-user"?new Error("Sign-up popup was closed"):s.code==="auth/popup-blocked"?new Error("Sign-up popup was blocked. Please allow popups."):new Error(s.message||"Google sign-up failed")}}async function ur(t="homeowner"){let s=ir();s!=null&&s.idToken||(s=await _s());try{const a=await _("/auth/google-signup",{method:"POST",body:JSON.stringify({idToken:s.idToken,email:s.email,displayName:s.displayName,photoURL:s.photoURL,role:t,referralCode:s.referralCode})}),r=(a==null?void 0:a.data)??a;if(!(r!=null&&r.accessToken)&&!(r!=null&&r.user))throw new Error("Google signup API returned no auth payload. Check VITE_API_BASE_URL and backend /auth/google-signup deployment.");return dr(),a}catch(a){throw a.code==="auth/popup-closed-by-user"?new Error("Sign-up popup was closed"):a.code==="auth/popup-blocked"?new Error("Sign-up popup was blocked. Please allow popups."):new Error(a.message||"Google sign-up failed")}}async function $s(t="homeowner"){return ur(t)}async function Os(t){return _("/auth/login",{method:"POST",body:JSON.stringify(t)})}async function hr(){return qs()}async function br(t){return $s(t)}async function gr(t=""){return _s(t)}async function pr(){return qs()}async function fr(){return $s("admin")}async function jr(t){return _("/auth/signup",{method:"POST",body:JSON.stringify(t)})}async function kr(t){return _("/auth/admin-signup",{method:"POST",body:JSON.stringify(t)})}async function wr(t){return _("/auth/forgot-password",{method:"POST",body:JSON.stringify(t)})}async function Nr(t){return _("/auth/reset-password",{method:"POST",body:JSON.stringify(t)})}async function ut(t){return _("/auth/logout",{method:"POST",body:JSON.stringify(t)})}async function yr(t){return _("/auth/change-password",{method:"POST",body:JSON.stringify(t)})}const Qs=n.createContext(null);function vr(t,s){const a=localStorage.getItem(t);if(!a)return s;try{return JSON.parse(a)}catch{return s}}function Sr(t){if(!t||typeof t!="string"||!t.includes("."))return null;try{const a=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=a.padEnd(a.length+(4-a.length%4)%4,"=");return JSON.parse(atob(r))}catch{return null}}function Ct(t){const s=(t==null?void 0:t.data)??t,a=(s==null?void 0:s.data)??s,r=(a==null?void 0:a.accessToken)??(s==null?void 0:s.accessToken)??"",l=(a==null?void 0:a.refreshToken)??(s==null?void 0:s.refreshToken)??"",i=Sr(r),o=(i==null?void 0:i.role)??null,b=(a==null?void 0:a.user)??(s==null?void 0:s.user)??null,m=b?{...b,role:b.role??b.userRole??o??null}:o?{role:o}:null;return{accessToken:r,refreshToken:l,user:m}}function Cr({children:t}){const[s,a]=n.useState(()=>localStorage.getItem("qring_access_token")??""),[r,l]=n.useState(()=>localStorage.getItem("qring_access_token")?vr("qring_user",null):null),[i,o]=n.useState(!1),b=async k=>{o(!0);try{const S=await Os(k),v=Ct(S);return v.accessToken&&(localStorage.setItem("qring_access_token",v.accessToken),a(v.accessToken)),v.refreshToken&&localStorage.setItem("qring_refresh_token",v.refreshToken),v.user&&(localStorage.setItem("qring_user",JSON.stringify(v.user)),l(v.user)),v}finally{o(!1)}},m=async k=>{o(!0);try{return await jr(k)}finally{o(!1)}},u=async()=>{o(!0);try{const k=await hr(),S=Ct(k);return S.accessToken&&(localStorage.setItem("qring_access_token",S.accessToken),a(S.accessToken)),S.refreshToken&&localStorage.setItem("qring_refresh_token",S.refreshToken),S.user&&(localStorage.setItem("qring_user",JSON.stringify(S.user)),l(S.user)),S}finally{o(!1)}},d=async k=>{var S;o(!0);try{const v=await br(k),j=Ct(v);return!((S=j.user)!=null&&S.role)&&j.accessToken&&(j.user={...j.user??{},role:k}),j.accessToken&&(localStorage.setItem("qring_access_token",j.accessToken),a(j.accessToken)),j.refreshToken&&localStorage.setItem("qring_refresh_token",j.refreshToken),j.user&&(localStorage.setItem("qring_user",JSON.stringify(j.user)),l(j.user)),j}finally{o(!1)}},x=async(k="")=>{o(!0);try{return await gr(k)}finally{o(!1)}},c=async k=>wr({email:k}),h=async()=>{try{const k=localStorage.getItem("qring_refresh_token");k&&await ut({refreshToken:k})}finally{localStorage.removeItem("qring_access_token"),localStorage.removeItem("qring_refresh_token"),localStorage.removeItem("qring_user"),a(""),l(null)}},p=n.useMemo(()=>({user:r,loading:i,isAuthenticated:!!(r&&s),login:b,signup:m,googleSignIn:u,googleSignUp:d,beginGoogleSignUp:x,forgotPassword:c,logout:h}),[r,s,i]);return e.jsx(Qs.Provider,{value:p,children:t})}function pe(){const t=n.useContext(Qs);if(!t)throw new Error("useAuth must be used inside AuthProvider");return t}const Ar={homeowner:"/dashboard/homeowner/overview",admin:"/dashboard/admin",estate:"/dashboard/estate"};function ts(t,s){var l;const a=(l=t==null?void 0:t.user)==null?void 0:l.role;if(!a)return null;const r=Ar[a];if(!r)throw new Error(`Login succeeded but role '${a}' is not supported in this app.`);return s??r}function Pr(){const{login:t,googleSignIn:s,loading:a}=pe(),[r]=Ss(),l=r.get("email")??r.get("username")??"",[i,o]=n.useState({email:l,password:""}),[b,m]=n.useState(!1),[u,d]=n.useState(""),x=me(),c=Ie(),h=async k=>{var S,v;k.preventDefault(),d("");try{const j=await t(i),T=ts(j,(v=(S=c.state)==null?void 0:S.from)==null?void 0:v.pathname);if(!T)throw new Error("Login succeeded but no user role was returned. Please contact support.");x(T,{replace:!0})}catch(j){d(j.message??"Login failed")}},p=async()=>{var k,S,v,j;d("");try{const T=await s(),f=ts(T,(S=(k=c.state)==null?void 0:k.from)==null?void 0:S.pathname);if(!f){x("/google-role",{replace:!0,state:{from:(j=(v=c.state)==null?void 0:v.from)==null?void 0:j.pathname}});return}x(f,{replace:!0})}catch(T){d(T.message??"Google sign-in failed")}};return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsx(Te,{title:"Login",subtitle:"Access your secure Qring workspace",children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsx(Rr,{label:"Email or Username",type:"text",value:i.email,onChange:k=>o(S=>({...S,email:k}))}),e.jsx(Er,{label:"Password",value:i.password,show:b,onToggle:()=>m(k=>!k),onChange:k=>o(S=>({...S,password:k}))}),u?e.jsx("p",{className:"text-sm text-danger",children:u}):null,e.jsx("button",{type:"submit",disabled:a,className:"w-full rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:a?"Signing In...":"Sign In"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-300 dark:border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-slate-50 px-2 text-slate-500 dark:bg-slate-950 dark:text-slate-400",children:"Or"})})]}),e.jsxs("button",{type:"button",onClick:p,disabled:a,className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-900 dark:text-white dark:hover:bg-slate-800",children:[e.jsxs("svg",{className:"mb-0.5 mr-2 inline h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),a?"Signing in...":"Sign in with Google"]}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[e.jsx(g,{to:"/forgot-password",className:"hover:text-brand-500",children:"Forgot password?"}),e.jsx(g,{to:"/signup",className:"hover:text-brand-500",children:"Create account"})]})]})})})}function Rr({label:t,type:s,value:a,onChange:r}){return e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:t}),e.jsx("input",{required:!0,type:s,value:a,onChange:l=>r(l.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]})}function Er({label:t,value:s,onChange:a,show:r,onToggle:l}){return e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:t}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{required:!0,type:r?"text":"password",value:s,onChange:i=>a(i.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 pr-16 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"}),e.jsx("button",{type:"button",onClick:l,className:"absolute inset-y-0 right-2 my-1 rounded-lg px-3 text-xs font-semibold text-slate-600 dark:text-slate-300",children:r?"Hide":"Show"})]})]})}function Mr(){const[t,s]=n.useState({email:"",password:""}),[a,r]=n.useState(""),[l,i]=n.useState(!1);me();const o=Ie(),b=async u=>{var d,x,c;u.preventDefault(),r(""),i(!0);try{const h=await Os(t),p=(h==null?void 0:h.data)??h;if(p!=null&&p.accessToken&&localStorage.setItem("qring_access_token",p.accessToken),p!=null&&p.refreshToken&&localStorage.setItem("qring_refresh_token",p.refreshToken),p!=null&&p.user&&localStorage.setItem("qring_user",JSON.stringify(p.user)),((d=p==null?void 0:p.user)==null?void 0:d.role)!=="admin"){const S=localStorage.getItem("qring_refresh_token");if(S)try{await ut({refreshToken:S})}catch{}localStorage.removeItem("qring_access_token"),localStorage.removeItem("qring_refresh_token"),localStorage.removeItem("qring_user"),r("Admin account required.");return}const k=((c=(x=o.state)==null?void 0:x.from)==null?void 0:c.pathname)??"/dashboard/admin";window.location.assign(k)}catch(h){r(h.message??"Admin login failed")}finally{i(!1)}},m=async()=>{var u,d,x;r(""),i(!0);try{const c=await pr(),h=(c==null?void 0:c.data)??c;if(h!=null&&h.accessToken&&localStorage.setItem("qring_access_token",h.accessToken),h!=null&&h.refreshToken&&localStorage.setItem("qring_refresh_token",h.refreshToken),h!=null&&h.user&&localStorage.setItem("qring_user",JSON.stringify(h.user)),((u=h==null?void 0:h.user)==null?void 0:u.role)!=="admin"){const k=localStorage.getItem("qring_refresh_token");if(k)try{await ut({refreshToken:k})}catch{}localStorage.removeItem("qring_access_token"),localStorage.removeItem("qring_refresh_token"),localStorage.removeItem("qring_user"),r("Admin account required.");return}const p=((x=(d=o.state)==null?void 0:d.from)==null?void 0:x.pathname)??"/dashboard/admin";window.location.assign(p)}catch(c){r(c.message??"Google admin sign-in failed")}finally{i(!1)}};return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsx(Te,{title:"Admin Login",subtitle:"Restricted access for platform administrators",children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsx(ss,{label:"Admin Email or Username",type:"text",value:t.email,onChange:u=>s(d=>({...d,email:u}))}),e.jsx(ss,{label:"Password",type:"password",value:t.password,onChange:u=>s(d=>({...d,password:u}))}),a?e.jsx("p",{className:"text-sm text-danger",children:a}):null,e.jsx("button",{type:"submit",disabled:l,className:"w-full rounded-xl bg-slate-900 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:l?"Signing In...":"Enter Admin Dashboard"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-300 dark:border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-slate-50 px-2 text-slate-500 dark:bg-slate-950 dark:text-slate-400",children:"Or"})})]}),e.jsxs("button",{type:"button",onClick:m,disabled:l,className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-900 dark:text-white dark:hover:bg-slate-800",children:[e.jsxs("svg",{className:"mb-0.5 mr-2 inline h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),l?"Signing in...":"Sign in with Google"]}),e.jsx("div",{className:"text-center text-xs text-slate-500",children:e.jsxs("div",{className:"space-x-3",children:[e.jsx(g,{to:"/admin/signup",className:"hover:text-brand-500",children:"Create admin"}),e.jsx(g,{to:"/login",className:"hover:text-brand-500",children:"User login"})]})})]})})})}function ss({label:t,type:s,value:a,onChange:r}){return e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:t}),e.jsx("input",{required:!0,type:s,value:a,onChange:l=>r(l.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]})}function Ir(){const[t,s]=n.useState({fullName:"",email:"",password:""}),[a,r]=n.useState(!1),[l,i]=n.useState(""),o=me();async function b(u){u.preventDefault(),r(!0),i("");try{await kr(t),setTimeout(()=>o("/admin/login"),500)}catch(d){i(d.message??"Admin signup failed")}finally{r(!1)}}async function m(){var u;i(""),r(!0);try{const d=await fr(),x=(d==null?void 0:d.data)??d;if(x!=null&&x.accessToken&&localStorage.setItem("qring_access_token",x.accessToken),x!=null&&x.refreshToken&&localStorage.setItem("qring_refresh_token",x.refreshToken),x!=null&&x.user&&localStorage.setItem("qring_user",JSON.stringify(x.user)),((u=x==null?void 0:x.user)==null?void 0:u.role)!=="admin"){const c=localStorage.getItem("qring_refresh_token");if(c)try{await ut({refreshToken:c})}catch{}localStorage.removeItem("qring_access_token"),localStorage.removeItem("qring_refresh_token"),localStorage.removeItem("qring_user"),i("Admin account required.");return}setTimeout(()=>o("/admin/login"),500)}catch(d){i(d.message??"Google admin sign-up failed")}finally{r(!1)}}return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsx(Te,{title:"Create Admin Account",subtitle:"Creates an admin user account",children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsx(At,{label:"Full Name",type:"text",value:t.fullName,onChange:u=>s(d=>({...d,fullName:u}))}),e.jsx(At,{label:"Email",type:"email",value:t.email,onChange:u=>s(d=>({...d,email:u}))}),e.jsx(At,{label:"Password",type:"password",value:t.password,onChange:u=>s(d=>({...d,password:u}))}),l?e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:l}):null,e.jsx("button",{type:"submit",disabled:a,className:"w-full rounded-xl bg-slate-900 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:a?"Creating...":"Create Admin"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-300 dark:border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-slate-50 px-2 text-slate-500 dark:bg-slate-950 dark:text-slate-400",children:"Or"})})]}),e.jsxs("button",{type:"button",onClick:m,disabled:a,className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-900 dark:text-white dark:hover:bg-slate-800",children:[e.jsxs("svg",{className:"mb-0.5 mr-2 inline h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),a?"Creating admin...":"Sign up with Google"]}),e.jsxs("p",{className:"text-center text-xs text-slate-500",children:["Already have admin account?"," ",e.jsx(g,{to:"/admin/login",className:"font-semibold hover:text-slate-700 dark:hover:text-slate-300",children:"Admin login"})]})]})})})}function At({label:t,type:s,value:a,onChange:r}){return e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:t}),e.jsx("input",{required:!0,type:s,value:a,onChange:l=>r(l.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-slate-900 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]})}function Tr(){const{signup:t,beginGoogleSignUp:s}=pe(),[a,r]=n.useState({fullName:"",email:"",password:"",role:"homeowner",referralCode:""}),[l,i]=n.useState(""),[o,b]=n.useState(!1),[m,u]=n.useState(!1),d=me(),x=async h=>{h.preventDefault(),i(""),u(!0);try{await t(a),d("/login")}catch(p){i(p.message??"Signup failed")}finally{u(!1)}},c=async()=>{i(""),u(!0);try{await s(a.referralCode),d("/google-role",{state:{intent:"signup"}})}catch(h){i(h.message??"Google sign-up failed")}finally{u(!1)}};return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsx(Te,{title:"Create Account",subtitle:"Start with secure QR access",children:e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsx(Pt,{label:"Full name",type:"text",value:a.fullName,onChange:h=>r(p=>({...p,fullName:h}))}),e.jsx(Pt,{label:"Email",type:"email",value:a.email,onChange:h=>r(p=>({...p,email:h}))}),e.jsx(Lr,{label:"Password",value:a.password,show:o,onToggle:()=>b(h=>!h),onChange:h=>r(p=>({...p,password:h}))}),e.jsx(Pt,{label:"Referral code (optional)",type:"text",value:a.referralCode,required:!1,onChange:h=>r(p=>({...p,referralCode:h}))}),e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:"Role"}),e.jsxs("select",{value:a.role,onChange:h=>r(p=>({...p,role:h.target.value})),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("option",{value:"homeowner",children:"Homeowner"}),e.jsx("option",{value:"estate",children:"Estate User"})]})]}),l?e.jsx("p",{className:"text-sm text-danger",children:l}):null,e.jsx("button",{type:"submit",disabled:m,className:"w-full rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:m?"Creating...":"Create Account"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-300 dark:border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-slate-50 px-2 text-slate-500 dark:bg-slate-950 dark:text-slate-400",children:"Or"})})]}),e.jsxs("button",{type:"button",onClick:c,disabled:m,className:"w-full rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-50 disabled:opacity-50 dark:border-slate-700 dark:bg-slate-900 dark:text-white dark:hover:bg-slate-800",children:[e.jsxs("svg",{className:"mb-0.5 mr-2 inline h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),m?"Creating account...":"Sign up with Google"]}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Already have an account?"," ",e.jsx(g,{to:"/login",className:"font-semibold hover:text-brand-500",children:"Login"})]})]})})})}function Pt({label:t,type:s,value:a,onChange:r,required:l=!0}){return e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:t}),e.jsx("input",{required:l,type:s,value:a,onChange:i=>r(i.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]})}function Lr({label:t,value:s,onChange:a,show:r,onToggle:l}){return e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:t}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{required:!0,type:r?"text":"password",value:s,onChange:i=>a(i.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 pr-16 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"}),e.jsx("button",{type:"button",onClick:l,className:"absolute inset-y-0 right-2 my-1 rounded-lg px-3 text-xs font-semibold text-slate-600 dark:text-slate-300",children:r?"Hide":"Show"})]})]})}const Dr={homeowner:"/dashboard/homeowner/overview",admin:"/dashboard/admin",estate:"/dashboard/estate"};function qr(){var c;const{googleSignUp:t,loading:s}=pe(),[a,r]=n.useState("homeowner"),[l,i]=n.useState(""),[o,b]=n.useState(!1),m=me(),u=Ie(),d=((c=u.state)==null?void 0:c.intent)??"signin-fallback";async function x(h){var p,k;h.preventDefault(),i("");try{const S=await t(a);if(d==="signup"){localStorage.removeItem("qring_access_token"),localStorage.removeItem("qring_refresh_token"),localStorage.removeItem("qring_user"),b(!0),window.dispatchEvent(new CustomEvent("qring:flash",{detail:{type:"success",title:"Signup Successful",message:"Google account setup complete. Redirecting to login...",duration:2600}})),window.setTimeout(()=>window.location.assign("/login"),1800);return}const v=(()=>{try{return JSON.parse(localStorage.getItem("qring_user")??"null")}catch{return null}})(),j=((p=S==null?void 0:S.user)==null?void 0:p.role)??(v==null?void 0:v.role);if(!j)throw new Error("Account setup completed but role was not returned.");const T=Dr[j];if(!T)throw new Error(`Account setup completed but role '${j}' is not supported.`);m(((k=u.state)==null?void 0:k.from)??T,{replace:!0})}catch(S){i(S.message??"Unable to finish Google account setup")}}return e.jsxs("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:[e.jsx(Te,{title:"Choose Your Role",subtitle:"Select how you want to use Qring on this account",children:e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:"Role"}),e.jsxs("select",{value:a,onChange:h=>r(h.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("option",{value:"homeowner",children:"Homeowner"}),e.jsx("option",{value:"estate",children:"Estate User"})]})]}),l?e.jsx("p",{className:"text-sm text-danger",children:l}):null,e.jsx("button",{type:"submit",disabled:s,className:"w-full rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:s?"Setting up...":"Continue"})]})}),o?e.jsx("div",{className:"fixed inset-0 z-40 grid place-items-center bg-slate-900/50 p-4",children:e.jsxs("div",{className:"w-full max-w-sm rounded-2xl border border-emerald-200 bg-white p-5 shadow-2xl",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-emerald-700",children:"Success"}),e.jsx("p",{className:"mt-2 text-sm font-medium text-slate-800",children:"Account setup complete. Redirecting to login..."})]})}):null]})}function _r(){const{forgotPassword:t}=pe(),[s,a]=n.useState(""),[r,l]=n.useState(""),[i,o]=n.useState(1),[b,m]=n.useState({loading:!1,error:"",done:!1,message:""}),u=async x=>{x.preventDefault(),m({loading:!0,error:"",done:!1,message:""});try{const c=await t(s),h=(c==null?void 0:c.data)??c;m({loading:!1,error:"",done:!0,message:(h==null?void 0:h.status)==="email_verified"?"Email found. Set your new password.":"Email verified."}),o(2)}catch(c){m({loading:!1,error:c.message??"Request failed",done:!1,message:""})}},d=async x=>{x.preventDefault(),m(c=>({...c,loading:!0,error:""}));try{await Nr({email:s,newPassword:r}),m({loading:!1,error:"",done:!0,message:"Password reset successful. You can now login."}),o(3)}catch(c){m(h=>({...h,loading:!1,error:c.message??"Reset failed"}))}};return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsxs(Te,{title:"Forgot Password",subtitle:"Verify your email and set a new password",children:[i===1?e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:"Email"}),e.jsx("input",{required:!0,type:"email",value:s,onChange:x=>a(x.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]}),b.error?e.jsx("p",{className:"text-sm text-danger",children:b.error}):null,e.jsx("button",{type:"submit",disabled:b.loading,className:"w-full rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:b.loading?"Checking...":"Continue"})]}):null,i===2?e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsx("p",{className:"rounded-xl bg-slate-100 p-3 text-xs text-slate-600 dark:bg-slate-800 dark:text-slate-300",children:b.message||"Set your new password."}),e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium text-slate-700 dark:text-slate-300",children:"New Password"}),e.jsx("input",{required:!0,minLength:8,type:"password",value:r,onChange:x=>l(x.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 outline-none ring-brand-500 focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]}),b.error?e.jsx("p",{className:"text-sm text-danger",children:b.error}):null,e.jsx("button",{type:"submit",disabled:b.loading,className:"w-full rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:b.loading?"Resetting...":"Reset Password"})]}):null,i===3?e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-success",children:b.message}),e.jsx(g,{to:"/login",className:"block w-full rounded-xl bg-slate-900 px-4 py-3 text-center text-sm font-semibold text-white dark:bg-white dark:text-slate-900",children:"Back to Login"})]}):null,e.jsxs("p",{className:"mt-4 text-xs text-slate-500",children:["Back to"," ",e.jsx(g,{to:"/login",className:"font-semibold hover:text-brand-500",children:"Login"})]})]})})}async function $r(){const t=await _("/homeowner/visits");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function gt(){var a;const t=await _("/homeowner/settings"),s=(t==null?void 0:t.data)??null;return{managedByEstate:!!(s!=null&&s.managedByEstate),estateId:(s==null?void 0:s.estateId)??null,estateName:(s==null?void 0:s.estateName)??null,estateOwnerId:((a=s==null?void 0:s.subscription)==null?void 0:a.subscriptionOwnerId)??null}}async function as(){const t=await _("/homeowner/messages");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function Or(t){const s=await _(`/homeowner/messages/${t}`);return Array.isArray(s==null?void 0:s.data)?s.data:[]}async function Qr(t,s){const a=await _(`/homeowner/messages/${t}`,{method:"POST",body:JSON.stringify({text:s})});return(a==null?void 0:a.data)??null}async function Br(t,s){const a=await _(`/homeowner/messages/${t}/${s}`,{method:"DELETE"});return(a==null?void 0:a.data)??null}async function Ur(t){const s=await _(`/homeowner/visits/${t}/end`,{method:"POST"});return(s==null?void 0:s.data)??null}async function Hr(){const t=await _("/homeowner/doors"),s=t==null?void 0:t.data;return Array.isArray(s)?{doors:s,subscription:null}:{doors:Array.isArray(s==null?void 0:s.doors)?s.doors:[],subscription:(s==null?void 0:s.subscription)??null}}async function Vr(t){const s=await _("/homeowner/doors",{method:"POST",body:JSON.stringify(t)});return(s==null?void 0:s.data)??null}async function Fr(t,s){const a=await _(`/homeowner/visits/${t}/decision`,{method:"POST",body:JSON.stringify({action:s})});return(a==null?void 0:a.data)??null}async function zr(t){const s=await _(`/visitor/sessions/${t}`);return(s==null?void 0:s.data)??null}async function Gr(t){const s=await _(`/visitor/sessions/${t}/messages`);return Array.isArray(s==null?void 0:s.data)?s.data:[]}async function Bs(){const t=await _("/notifications/");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function Wr(t){const s=await _("/notifications/push-subscriptions",{method:"POST",body:JSON.stringify(t)});return(s==null?void 0:s.data)??null}async function Us(t){const s=await _(`/notifications/${t}/read`,{method:"POST"});return typeof window<"u"&&window.dispatchEvent(new Event("qring:notifications-updated")),(s==null?void 0:s.data)??null}async function Jr(){const t=await _("/notifications/read-all",{method:"POST"});return typeof window<"u"&&window.dispatchEvent(new Event("qring:notifications-updated")),(t==null?void 0:t.data)??null}async function Yr(){return typeof window>"u"||typeof window.Notification>"u"?"unsupported":window.Notification.permission==="granted"?"granted":window.Notification.requestPermission()}function Kr(t){if(t&&typeof t=="object")return t;if(typeof t=="string")try{return JSON.parse(t)}catch{return{}}return{}}async function Xr(t){if(!t)return;const a=(await Bs()).filter(r=>!(r!=null&&r.readAt)&&(r==null?void 0:r.kind)==="visitor.request").filter(r=>{var l;return((l=Kr(r==null?void 0:r.payload))==null?void 0:l.sessionId)===t}).map(r=>r.id).filter(Boolean);await Promise.all(a.map(r=>Us(r))),typeof window<"u"&&window.dispatchEvent(new Event("qring:notifications-updated"))}function Zr({open:t,role:s,steps:a,onClose:r,onComplete:l,onNavigate:i}){var h;const[o,b]=n.useState(0),m=a.length,u=a[o],d=n.useMemo(()=>s==="estate"?"Estate Manager Guide":"Homeowner Guide",[s]);if(n.useEffect(()=>{t&&b(0)},[t,s]),!t||!u)return null;function x(){r==null||r()}function c(){if(o>=m-1){l==null||l();return}b(p=>p+1)}return e.jsx("div",{className:"fixed inset-0 z-[70] grid place-items-center bg-slate-950/50 p-4",children:e.jsxs("div",{className:"relative w-full max-w-sm rounded-[2rem] border border-slate-200 bg-white p-5 shadow-[0_18px_55px_rgba(15,23,42,0.24)]",children:[e.jsx("div",{className:"absolute -top-6 left-1/2 h-12 w-16 -translate-x-1/2 rounded-3xl bg-brand-600 shadow-soft"}),e.jsxs("div",{className:"pt-4 text-center",children:[e.jsx("p",{className:"text-[11px] font-semibold tracking-wide text-slate-500",children:"QRING"}),e.jsx("p",{className:"mt-1 text-xs font-medium text-slate-500",children:d})]}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("div",{className:"grid h-24 w-24 place-items-center rounded-3xl bg-brand-50 text-brand-600",children:e.jsxs("svg",{viewBox:"0 0 24 24",className:"h-10 w-10",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1.5"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1.5"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1.5"}),e.jsx("path",{d:"M14 14h3M14 18h7M18 14v7"})]})})}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-slate-900",children:u.title}),e.jsx("p",{className:"mt-2 text-lg font-semibold text-brand-600",children:"Smart Access Communication"}),e.jsx("p",{className:"mx-auto mt-3 max-w-[18rem] text-base leading-relaxed text-slate-500",children:u.description})]}),(h=u.points)!=null&&h.length?e.jsx("div",{className:"mx-auto mt-4 max-w-[18rem] text-center text-sm text-slate-600",children:u.points[0]}):null,e.jsx("div",{className:"mt-6 flex justify-center gap-2",children:a.map((p,k)=>e.jsx("button",{type:"button",onClick:()=>b(k),"aria-label":`Go to step ${k+1}`,className:`h-2.5 rounded-full transition-all ${k===o?"w-7 bg-brand-600":"w-2.5 bg-slate-300"}`},p.title))}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("button",{type:"button",onClick:c,className:"w-full rounded-2xl bg-brand-600 py-3 text-base font-bold text-white shadow-soft transition hover:bg-brand-700",children:o>=m-1?"Finish":"Next"}),e.jsxs("div",{className:"flex items-center justify-center gap-5 text-sm",children:[e.jsx("button",{type:"button",onClick:x,className:"font-semibold text-slate-400 transition hover:text-slate-600",children:"Skip"}),u.route&&u.routeLabel?e.jsx("button",{type:"button",onClick:()=>i==null?void 0:i(u.route),className:"font-semibold text-brand-600 transition hover:text-brand-700",children:u.routeLabel}):null]})]})]})})}const en={homeowner:[{to:"/dashboard/homeowner/overview",label:"Overview",icon:"overview"},{to:"/dashboard/homeowner/visits",label:"Visits",icon:"visits"},{to:"/dashboard/homeowner/messages",label:"Messages",icon:"messages"},{to:"/dashboard/homeowner/doors",label:"Doors",icon:"doors"},{to:"/billing/paywall",label:"Billing",icon:"billing"},{to:"/dashboard/homeowner/settings",label:"Settings",icon:"settings"}],estate:[{to:"/dashboard/estate",label:"Overview",icon:"estate"},{to:"/dashboard/estate/create",label:"Create Estate",icon:"estate_create"},{to:"/dashboard/estate/doors",label:"Add Doors",icon:"doors"},{to:"/dashboard/estate/assign",label:"Assign Doors",icon:"assign"},{to:"/dashboard/estate/invites",label:"Invite Owners",icon:"invite"},{to:"/dashboard/estate/mappings",label:"Mappings",icon:"mappings"},{to:"/dashboard/estate/logs",label:"Access Logs",icon:"logs"},{to:"/dashboard/estate/plan",label:"Plan Rules",icon:"plans"},{to:"/billing/paywall",label:"Billing",icon:"billing"},{to:"/dashboard/estate/homes",label:"Multi-Home",icon:"homes"}],admin:[{to:"/dashboard/admin",label:"System",icon:"system"},{to:"/dashboard/admin/users",label:"Users",icon:"user_admin"},{to:"/dashboard/admin/sessions",label:"Sessions",icon:"sessions"},{to:"/dashboard/admin/payments",label:"Payments",icon:"billing"},{to:"/dashboard/admin/config",label:"Config",icon:"settings"},{to:"/dashboard/admin/audit",label:"Audit",icon:"logs"}]};function ae({title:t,children:s}){const{user:a,logout:r}=pe(),{isDark:l,toggleTheme:i}=ie(),o=me(),[b,m]=n.useState(!1),[u,d]=n.useState([]),[x,c]=n.useState(null),[h,p]=n.useState(!1),[k,S]=n.useState(()=>typeof window<"u"&&window.Notification?window.Notification.permission:"unsupported"),[v,j]=n.useState(()=>localStorage.getItem("qring_sound_alerts")!=="false"),[T,f]=n.useState(!1),[w,E]=n.useState(!1),[I,H]=n.useState(!0),O=n.useRef(null),N=n.useRef(null),A=n.useRef([]),y=n.useRef(!1),L=n.useRef(new Set),F=n.useMemo(()=>(a==null?void 0:a.role)==="homeowner"&&(!!(x!=null&&x.managedByEstate)||typeof(a==null?void 0:a.email)=="string"&&a.email.toLowerCase().endsWith("@estate.useqring.online")),[a==null?void 0:a.role,a==null?void 0:a.email,x]),ee=n.useMemo(()=>{const P=en[a==null?void 0:a.role]??[];return(a==null?void 0:a.role)==="homeowner"&&(h||F)?P.filter(Q=>Q.to!=="/billing/paywall"):P},[a==null?void 0:a.role,F,h]),C=n.useMemo(()=>ee.find(P=>P.to.endsWith("/settings"))??null,[ee]),D=n.useMemo(()=>(a==null?void 0:a.role)==="homeowner"?[{to:"/dashboard/homeowner/overview",label:"Home",icon:"overview"},{to:"/dashboard/homeowner/doors",label:"Door",icon:"doors"},{to:"/dashboard/homeowner/visits",label:"Visits",icon:"visits"},{to:"/dashboard/homeowner/messages",label:"Message",icon:"messages"},{to:"/dashboard/homeowner/settings",label:"Profile",icon:"settings"}]:ee.filter(P=>!P.to.endsWith("/settings")).slice(0,4),[ee,a==null?void 0:a.role]),J=(a==null?void 0:a.role)==="estate",z=n.useMemo(()=>tn(a==null?void 0:a.role),[a==null?void 0:a.role]),Y=typeof window<"u"&&window.history.length>1;n.useEffect(()=>{let P=!0;async function Q(){if((a==null?void 0:a.role)!=="homeowner"){c(null),p(!1);return}p(!0);try{const X=await gt();if(!P)return;c(X)}catch{if(!P)return;c(null)}finally{P&&p(!1)}}return Q(),()=>{P=!1}},[a==null?void 0:a.role]),n.useEffect(()=>{if(!J||w)return;const P=(a==null?void 0:a.email)??(a==null?void 0:a.id)??"anonymous",Q=`qring_onboarding_seen_${a==null?void 0:a.role}_${P}`;localStorage.getItem(Q)||(f(!0),localStorage.setItem(Q,"true"))},[J,w,a==null?void 0:a.role,a==null?void 0:a.email,a==null?void 0:a.id]),n.useEffect(()=>{let P=!0,Q=!1;async function X(){if(Q)return;if(!localStorage.getItem("qring_access_token")){d([]);return}try{const ue=await Bs();if(!P)return;d(ue)}catch(ue){if(!P)return;(ue==null?void 0:ue.status)===401&&(Q=!0),d([])}}X();const re=setInterval(X,2e4),de=()=>X();return window.addEventListener("qring:notifications-updated",de),()=>{P=!1,clearInterval(re),window.removeEventListener("qring:notifications-updated",de)}},[]),n.useEffect(()=>{const P=X=>{X.key==="qring_sound_alerts"&&j(X.newValue!=="false")},Q=()=>{j(localStorage.getItem("qring_sound_alerts")!=="false")};return window.addEventListener("storage",P),window.addEventListener("qring:sound-alerts-updated",Q),()=>{window.removeEventListener("storage",P),window.removeEventListener("qring:sound-alerts-updated",Q)}},[]);const K=n.useMemo(()=>u.map(P=>{let Q=P.payload;if(typeof Q=="string")try{Q=JSON.parse(Q)}catch{Q={message:P.payload}}return{...P,payload:Q&&typeof Q=="object"?Q:{}}}),[u]),M=n.useMemo(()=>K.filter(P=>!P.readAt).length,[K]),Z=n.useMemo(()=>K.filter(P=>!P.readAt&&P.kind==="visitor.request").map(P=>P.id),[K]);n.useEffect(()=>{if(!y.current){A.current=Z,y.current=!0;return}const P=A.current;if(Z.some(X=>!P.includes(X))){H(!1);try{typeof navigator<"u"&&typeof navigator.vibrate=="function"&&navigator.vibrate([120,80,120])}catch{}try{window.dispatchEvent(new CustomEvent("qring:flash",{detail:{type:"info",title:"New Visitor Request",message:"A visitor is requesting access.",duration:3200}}))}catch{}}A.current=Z},[Z]),n.useEffect(()=>{function P(){N.current&&(clearInterval(N.current),N.current=null)}function Q(){if(typeof window>"u")return;const X=window.AudioContext||window.webkitAudioContext;if(!X)return;O.current||(O.current=new X);const re=O.current;re.state==="suspended"&&re.resume().catch(()=>{});const de=re.createGain();de.gain.setValueAtTime(1e-4,re.currentTime),de.connect(re.destination),[880,660].forEach((ue,ke)=>{const we=re.currentTime+ke*.2,He=we+.16,he=re.createOscillator();he.type="sine",he.frequency.setValueAtTime(ue,we),he.connect(de),de.gain.exponentialRampToValueAtTime(.07,we+.02),de.gain.exponentialRampToValueAtTime(1e-4,He),he.start(we),he.stop(He)})}if(v&&Z.length>0&&!I){Q(),N.current||(N.current=setInterval(Q,1800));return}return P(),P},[v,Z,I]),n.useEffect(()=>{if(typeof window>"u")return;const Q=typeof window.Notification<"u"&&window.Notification.permission==="granted";K.forEach(X=>{var de;if(X.readAt||L.current.has(X.id))return;L.current.add(X.id);const re=((de=X.payload)==null?void 0:de.message)??"You have a new alert";if(Q){const Se=new window.Notification("Qring Alert",{body:re});Se.onclick=()=>{window.focus(),U(X)};return}window.dispatchEvent(new CustomEvent("qring:flash",{detail:{type:"info",title:"Qring Alert",message:re,duration:3600}}))})},[K]),n.useEffect(()=>()=>{var P,Q;N.current&&clearInterval(N.current),(Q=(P=O.current)==null?void 0:P.close)==null||Q.call(P).catch(()=>{}),O.current=null},[]);async function U(P){if(H(!0),P!=null&&P.id&&!(P!=null&&P.readAt))try{await Us(P.id),d(X=>X.map(re=>re.id===P.id?{...re,readAt:re.readAt||new Date().toISOString()}:re))}catch{}((P==null?void 0:P.kind)??"").startsWith("visitor.")?o("/dashboard/homeowner/visits"):o((a==null?void 0:a.role)==="estate"?"/dashboard/estate":"/dashboard/homeowner/overview"),m(!1)}async function V(){H(!0);try{await Jr(),d(P=>P.map(Q=>({...Q,readAt:Q.readAt||new Date().toISOString()})))}catch{}}async function te(){const P=await Yr();if(S(P),P==="granted")try{await Wr({endpoint:"browser-notification",keys:{ua:navigator.userAgent}})}catch{}}function ve(){if(Y){o(-1);return}const P=(a==null?void 0:a.role)==="estate"?"/dashboard/estate":(a==null?void 0:a.role)==="admin"?"/dashboard/admin":"/dashboard/homeowner/overview";o(P)}return e.jsxs("div",{className:"min-h-screen bg-slate-100 text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[e.jsx("div",{className:"pointer-events-none fixed inset-0 -z-10 bg-[radial-gradient(circle_at_top_right,_rgba(36,86,245,0.16),_transparent_40%),radial-gradient(circle_at_bottom_left,_rgba(20,184,166,0.12),_transparent_35%)]"}),e.jsxs("div",{className:"flex min-h-screen",children:[e.jsxs("aside",{className:"hidden w-72 border-r border-slate-200/70 bg-white/90 p-6 backdrop-blur dark:border-slate-800 dark:bg-slate-900/95 lg:block",children:[e.jsxs("div",{className:"mb-8 flex items-center gap-3",children:[e.jsx("div",{className:"grid h-10 w-16 place-items-center rounded-xl  text-xs font-bold text-white shadow-soft",children:e.jsx(oe,{tone:"dark",className:"h-18 w-46"})}),e.jsxs("div",{children:[e.jsx(g,{to:"/",className:"block font-heading text-2xl font-bold text-brand-500",children:"Qring"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Smart Access Communication"})]})]}),e.jsxs("nav",{className:"space-y-2",children:[ee.map(P=>e.jsxs(xt,{to:P.to,className:({isActive:Q})=>`group relative flex items-center gap-3 rounded-xl border px-4 py-3 text-sm font-semibold transition-all ${Q?"border-brand-500 bg-brand-500 text-white shadow-soft":"border-transparent text-slate-700 hover:border-slate-200 hover:bg-slate-100 dark:text-slate-200 dark:hover:border-slate-700 dark:hover:bg-slate-800"}`,children:[e.jsx("span",{className:"grid h-7 w-7 place-items-center rounded-lg border border-white/25 bg-white/20",children:e.jsx(Ke,{name:P.icon})}),e.jsx("span",{className:"flex-1",children:P.label})]},P.to)),J?e.jsxs("button",{type:"button",onClick:()=>{E(!1),f(!0)},className:"group relative flex w-full items-center gap-3 rounded-xl border border-transparent px-4 py-3 text-sm font-semibold text-slate-700 transition-all hover:border-slate-200 hover:bg-slate-100 dark:text-slate-200 dark:hover:border-slate-700 dark:hover:bg-slate-800",children:[e.jsx("span",{className:"grid h-7 w-7 place-items-center rounded-lg border border-white/25 bg-white/20",children:e.jsx(Ke,{name:"help"})}),e.jsx("span",{className:"flex-1 text-left",children:"Help"})]}):null]}),e.jsxs("div",{className:"mt-8 rounded-2xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Live Status"}),e.jsx("p",{className:"mt-2 text-sm font-semibold",children:"Realtime services operational"}),e.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 rounded-lg bg-success/15 px-2 py-1 text-xs font-semibold text-success",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-success"}),"Connected"]})]})]}),e.jsxs("main",{className:"flex-1 p-3 pb-[calc(5.25rem+env(safe-area-inset-bottom))] pt-16 sm:p-4 sm:pb-[calc(5.5rem+env(safe-area-inset-bottom))] sm:pt-16 lg:p-8 lg:pb-8 lg:pt-8",children:[e.jsx("header",{className:"fixed inset-x-0 top-0 z-30 px-3 pt-2 sm:px-4 lg:static lg:px-0 lg:pt-0 lg:mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:ve,className:"rounded-lg border border-slate-300 bg-white/60 p-1.5 text-xs font-semibold backdrop-blur dark:border-slate-700 dark:bg-slate-900/60 sm:p-2","aria-label":"Go back",title:"Back",children:e.jsx(rn,{})}),e.jsx("h1",{className:"font-heading text-sm font-bold sm:text-base lg:text-2xl",children:t})]}),e.jsxs("div",{className:"relative flex items-center gap-1.5 sm:gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>m(P=>!P),className:"relative rounded-lg border border-slate-300 bg-white/60 p-1.5 text-xs font-semibold backdrop-blur dark:border-slate-700 dark:bg-slate-900/60 sm:p-2","aria-label":"Notifications",children:[e.jsx(an,{}),M>0?e.jsx("span",{className:"absolute -right-1 -top-1 min-w-4 rounded-full bg-danger px-1 text-[10px] font-bold text-white",children:M}):null]}),b?e.jsxs("div",{className:"absolute right-0 top-12 z-50 w-[min(20rem,calc(100vw-2rem))] rounded-2xl border border-slate-200 bg-white p-3 shadow-soft dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between px-2 pb-2",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Notifications"}),e.jsxs("div",{className:"flex items-center gap-2",children:[k!=="granted"&&k!=="unsupported"?e.jsx("button",{type:"button",onClick:te,className:"rounded-md border border-brand-300 px-2 py-1 text-[10px] font-semibold text-brand-700 dark:border-brand-500/50 dark:text-brand-200",children:"Enable Alerts"}):null,e.jsx("button",{type:"button",onClick:V,className:"rounded-md border border-slate-300 px-2 py-1 text-[10px] font-semibold dark:border-slate-700",children:"Clear"})]})]}),e.jsx("div",{className:"max-h-80 space-y-2 overflow-y-auto",children:K.length===0?e.jsx("div",{className:"rounded-xl bg-slate-100 p-3 text-xs text-slate-500 dark:bg-slate-800",children:"No notifications yet."}):K.map(P=>{var Q;return e.jsxs("button",{type:"button",onClick:()=>U(P),className:`block w-full rounded-xl border p-3 text-left transition hover:bg-slate-50 dark:hover:bg-slate-800 ${P.readAt?"border-slate-200 dark:border-slate-700":"border-brand-300 bg-brand-50/60 dark:border-brand-500/50 dark:bg-brand-500/10"}`,children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:P.kind}),e.jsx("p",{className:"mt-1 text-sm font-medium",children:((Q=P.payload)==null?void 0:Q.message)??"New activity"}),e.jsx("p",{className:"mt-1 text-[11px] text-slate-500",children:sn(P.createdAt)})]},P.id)})})]}):null,e.jsx("button",{type:"button",onClick:i,className:"hidden rounded-lg border border-slate-300 px-2 py-1.5 text-xs font-semibold dark:border-slate-700 sm:inline-flex",children:l?"LIGHT":"DARK"}),C?e.jsx(g,{to:C.to,className:"rounded-lg border border-slate-300 bg-white/60 p-1.5 text-xs font-semibold backdrop-blur dark:border-slate-700 dark:bg-slate-900/60 sm:p-2","aria-label":"Settings",title:"Settings",children:e.jsx(nn,{})}):null,e.jsx("button",{type:"button",onClick:r,className:"rounded-lg border border-slate-300 bg-white/60 p-1.5 text-xs font-semibold backdrop-blur dark:border-slate-700 dark:bg-slate-900/60 sm:p-2","aria-label":"Logout",title:"Logout",children:e.jsx(ln,{})})]})]})}),s]})]}),D.length>0?e.jsx("nav",{className:"fixed inset-x-0 bottom-0 z-[9999] border-t border-slate-200 bg-white/95 px-2 pb-[max(0.5rem,env(safe-area-inset-bottom))] pt-2 backdrop-blur supports-[backdrop-filter]:bg-white/85 dark:border-slate-800 dark:bg-slate-900/95 dark:supports-[backdrop-filter]:bg-slate-900/85 lg:hidden",children:e.jsxs("div",{className:"flex h-12 items-stretch gap-1 sm:h-14",children:[D.map(P=>e.jsxs(xt,{to:P.to,className:({isActive:Q})=>`flex min-w-0 flex-1 flex-col items-center justify-center rounded-xl px-1 py-1.5 text-[10px] font-semibold transition-transform duration-200 sm:text-[11px] ${Q?"scale-105 bg-brand-500 text-white shadow-sm":"scale-95 bg-slate-100/70 text-slate-600 dark:bg-slate-800/70 dark:text-slate-300"}`,children:[e.jsx("span",{className:"mb-1",children:e.jsx(Ke,{name:P.icon})}),e.jsx("span",{className:"leading-none",children:P.label})]},`mobile-${P.to}`)),J?e.jsxs("button",{type:"button",onClick:()=>{E(!1),f(!0)},className:"flex min-w-0 flex-1 flex-col items-center justify-center rounded-xl px-1 py-1.5 text-[10px] font-semibold text-slate-600 transition hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800 sm:text-[11px]",children:[e.jsx("span",{className:"mb-1",children:e.jsx(Ke,{name:"help"})}),e.jsx("span",{className:"leading-none",children:"Help"})]}):null]})}):null,e.jsx(Zr,{open:T,role:a==null?void 0:a.role,steps:z,onClose:()=>{E(!0),f(!1)},onComplete:()=>{E(!0),f(!1)},onNavigate:P=>{o(P),E(!0),f(!1)}})]})}function tn(t){const s=t==="estate";return[{title:"What QRing Is",description:"QRing transforms physical doors into smart access points, giving homeowners and estate teams real-time visibility, control, and security over visits.",points:["No expensive cameras or IoT hardware needed.","QR code + software creates a digital access layer.","Works for homes, estates, rentals, offices, and gated communities."],route:s?"/dashboard/estate":"/dashboard/homeowner/overview",routeLabel:"Open Dashboard"},{title:"How Visits Work",description:"When a visitor arrives, they scan your QR code, share identity and visit reason, and QRing instantly notifies you so you can approve or deny access.",points:["Visitor scans QR at the door or gate.","Identity and intent are captured digitally.","You get instant alert and control access."],route:s?"/dashboard/estate/logs":"/dashboard/homeowner/visits",routeLabel:s?"View Access Logs":"View Visits"},{title:"Why It Matters",description:"QRing solves missed deliveries, unknown visitors, and manual logbooks by replacing reactive security with proactive, trackable, real-time access control.",points:["Homeowners know who is at the door in real time.","Estates get centralized tracking instead of manual records.","Every visit is securely logged for follow-up and accountability."],route:s?"/dashboard/estate/doors":"/dashboard/homeowner/doors",routeLabel:s?"Set Up Doors":"Manage Doors"},{title:"Your Next Steps",description:"Start by setting up your access points, then monitor incoming requests and manage approvals through your dashboard. Use Help anytime from the sidebar.",points:s?["Create or review your estate setup.","Assign doors to homes and owners.","Track logs and enforce plan rules."]:["Keep your door QR active.","Review visits and messages daily.","Control who enters even when away."],route:s?"/dashboard/estate/assign":"/dashboard/homeowner/messages",routeLabel:s?"Assign Doors":"Open Messages"}]}function sn(t){if(!t)return"";const s=new Date(t);return Number.isNaN(s.getTime())?t:s.toLocaleString()}function an(){return e.jsxs("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M15 17h5l-1.4-1.4A2 2 0 0 1 18 14.2V11a6 6 0 1 0-12 0v3.2a2 2 0 0 1-.6 1.4L4 17h5"}),e.jsx("path",{d:"M9 17a3 3 0 0 0 6 0"})]})}function rn(){return e.jsx("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})}function nn(){return e.jsxs("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h0A1.65 1.65 0 0 0 9.93 3.1V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h0a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v0a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}function ln(){return e.jsxs("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("path",{d:"M16 17l5-5-5-5"}),e.jsx("path",{d:"M21 12H9"})]})}function Ke({name:t}){const s={overview:e.jsx("path",{d:"M3 3h8v8H3zM13 3h8v5h-8zM13 10h8v11h-8zM3 13h8v8H3z"}),visits:e.jsx("path",{d:"M4 5h16M4 12h16M4 19h10"}),messages:e.jsx("path",{d:"M4 5h16v10H7l-3 3z"}),doors:e.jsx("path",{d:"M7 3h10v18H7zM10 12h.01"}),billing:e.jsx("path",{d:"M3 7h18v10H3zM3 11h18"}),estate:e.jsx("path",{d:"M3 21h18M5 21V9l7-5 7 5v12"}),estate_create:e.jsx("path",{d:"M12 5v14M5 12h14"}),homes:e.jsx("path",{d:"M3 11l9-7 9 7M5 10v11h14V10"}),invite:e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2M16 3h5v5M21 3l-7 7"}),assign:e.jsx("path",{d:"M4 12h10M10 6l6 6-6 6M19 5v14"}),mappings:e.jsx("path",{d:"M3 5h6v6H3zM15 5h6v6h-6zM9 8h6M3 17h6v6H3zM15 17h6v6h-6zM9 20h6"}),logs:e.jsx("path",{d:"M5 3h14v18H5zM8 8h8M8 12h8M8 16h5"}),system:e.jsx("path",{d:"M12 1v4M12 19v4M4.9 4.9l2.8 2.8M16.3 16.3l2.8 2.8M1 12h4M19 12h4M4.9 19.1l2.8-2.8M16.3 7.7l2.8-2.8"}),plans:e.jsx("path",{d:"M4 20V8l8-4 8 4v12M4 12h16"}),user_admin:e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm10 0v-2m0 0V7m0 2h-2m2 0h2"}),sessions:e.jsx("path",{d:"M8 7h13M8 12h13M8 17h13M3 7h.01M3 12h.01M3 17h.01"}),help:e.jsx("path",{d:"M12 17h.01M9.1 9a3 3 0 1 1 4.9 2.3c-.8.7-2 1.5-2 2.7v.5M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20z"}),settings:e.jsx("path",{d:"M12 8.5A3.5 3.5 0 1 1 8.5 12 3.5 3.5 0 0 1 12 8.5zm0-6 1.2 2.4 2.7.4.4 2.7L18.8 9l-1.5 2.3 1.5 2.3-2.5 1.2-.4 2.7-2.7.4L12 21.5l-1.2-2.4-2.7-.4-.4-2.7L5.2 13.6 6.7 11.3 5.2 9l2.5-1.2.4-2.7 2.7-.4z"})};return e.jsx("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s[t]??e.jsx("circle",{cx:"12",cy:"12",r:"9"})})}const Hs={activeVisitors:0,pendingApprovals:0,callsToday:0,unreadMessages:0},rs={metrics:Hs,activity:[],waitingRoom:[],session:null,messages:[],traffic:[],callControls:{canAudio:!1,canVideo:!1,canMute:!1,canEnd:!1}};function ht(t){return!t||typeof t!="object"?rs:{metrics:{...Hs,...t.metrics??{}},activity:Array.isArray(t.activity)?t.activity:[],waitingRoom:Array.isArray(t.waitingRoom)?t.waitingRoom:[],session:t.session??null,messages:Array.isArray(t.messages)?t.messages:[],traffic:Array.isArray(t.traffic)?t.traffic:[],callControls:{...rs.callControls,...t.callControls??{}}}}async function on(){const t=await _("/dashboard/overview");return ht((t==null?void 0:t.data)??t)}let ye;function dn(){return ye||(ye=Ot(`${le.socketUrl}${le.dashboardNamespace}`,{path:le.socketPath,transports:["websocket","polling"],rememberUpgrade:!0,reconnection:!0,reconnectionAttempts:10,reconnectionDelay:400,reconnectionDelayMax:2e3,timeout:7e3,auth:t=>{const s=localStorage.getItem("qring_access_token");t(s?{token:s}:{})},withCredentials:!0,autoConnect:!0})),ye}function cn(){ye&&(ye.removeAllListeners(),ye.disconnect(),ye=void 0)}const xn=ht({});function mn(t){return!t||typeof t!="object"?!1:!!(t.metrics||t.activity||t.waitingRoom||t.session||t.messages||t.traffic||t.callControls)}function un(){const[t,s]=n.useState(xn),[a,r]=n.useState(!0),[l,i]=n.useState(""),[o,b]=n.useState(!1),m=n.useCallback(async()=>{r(!0),i("");try{const u=await on();s(u)}catch(u){i(u.message??"Unable to load dashboard")}finally{r(!1)}},[]);return n.useEffect(()=>{let u=!0;const d=dn(),x=()=>u&&b(!0),c=()=>u&&b(!1),h=v=>{if(!u)return;const j=(v==null?void 0:v.data)??v;mn(j)&&s(ht(j))},p=v=>{u&&s(j=>ht({...j,...(v==null?void 0:v.data)??v}))},k=v=>{u&&i((v==null?void 0:v.message)??"Realtime error")},S=()=>{u&&b(!1)};return d.on("connect",x),d.on("disconnect",c),d.on("connect_error",S),d.on("dashboard.snapshot",h),d.on("dashboard.patch",p),d.on("dashboard.error",k),m(),()=>{u=!1,d.off("connect",x),d.off("disconnect",c),d.off("connect_error",S),d.off("dashboard.snapshot",h),d.off("dashboard.patch",p),d.off("dashboard.error",k),cn()}},[m]),n.useMemo(()=>({...t,loading:a,error:l,connected:o,refresh:m}),[t,a,l,o,m])}function hn(){var d;const[t,s]=n.useState(!1),{metrics:a,activity:r,waitingRoom:l,session:i,messages:o,loading:b,error:m,connected:u}=un();return n.useEffect(()=>{let x=!0;async function c(){try{const h=await gt();if(!x)return;s(!!(h!=null&&h.managedByEstate))}catch{if(!x)return;s(!1)}}return c(),()=>{x=!1}},[]),e.jsxs(ae,{className:"text-sm",title:"Homeowner",children:[m?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:m}):null,e.jsxs("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[e.jsx(Xe,{title:"Active Visitors",tip:"Number of visitors currently waiting or interacting right now.",value:a.activeVisitors,tone:"success",loading:b,sub:"Live now"}),e.jsx(Xe,{title:"Pending Approvals",tip:"Requests that need you to allow or deny entry.",value:a.pendingApprovals,tone:"warning",loading:b,sub:"Needs action"}),e.jsx(Xe,{title:"Calls Today",tip:"Total audio and video calls completed today.",value:a.callsToday,tone:"brand",loading:b,sub:"Audio + video"}),e.jsx(Xe,{title:"Unread Messages",tip:"Messages in visitor threads you have not opened yet.",value:a.unreadMessages,tone:"danger",loading:b,sub:"Recent threads"})]}),e.jsxs("section",{className:"mt-4 rounded-2xl border border-brand-100 bg-brand-50/70 p-4 dark:border-brand-500/30 dark:bg-brand-500/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"font-heading text-base font-bold",children:"How to use this dashboard"}),e.jsx(Vs,{text:"Use this quick guide to understand what each area does before taking actions."})]}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Start with pending approvals, review activity for context, then open Realtime Interaction for call and message actions."})]}),e.jsx("section",{className:"mt-4",children:e.jsx(g,{to:"/dashboard/homeowner/doors",className:"inline-flex items-center rounded-xl bg-brand-500 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-600",children:"Create a Door"})}),e.jsxs("section",{className:"mt-6 grid grid-cols-1 gap-6 xl:grid-cols-12",children:[e.jsxs("article",{className:"xl:col-span-7 rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-6 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"font-heading text-lg font-bold",children:"Recent Visitor Activity"}),e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${u?"bg-success/20 text-success":"bg-warning/20 text-warning"}`,children:u?"LIVE":"RECONNECTING"})]}),e.jsxs("div",{className:"mb-4 rounded-xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between text-xs text-slate-500",children:[e.jsx("span",{children:"Weekly Traffic"}),e.jsx("span",{children:"Last 7 Days"})]}),e.jsx(bn,{})]}),e.jsx("div",{className:"space-y-3",children:r.length===0?e.jsx(gn,{text:"No activity yet."}):r.map(x=>e.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-4 text-sm transition hover:-translate-y-0.5 hover:shadow-soft dark:border-slate-800 dark:bg-slate-900",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-semibold",children:x.event}),e.jsx("span",{className:"text-xs text-slate-500",children:x.time})]})},x.id??`${x.event}-${x.time}`))})]}),e.jsxs("article",{className:"hidden md:block xl:col-span-5 rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-6 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("h2",{className:"mb-4 font-heading text-lg font-bold",children:"Realtime Interaction"}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(Ze,{title:"Waiting Room",value:`${l.length} Visitors`,tone:"warning"}),e.jsx(Ze,{title:"Active Session",value:(i==null?void 0:i.id)??"No session",tone:"success"}),e.jsx(Ze,{title:"Latest Message",value:((d=o[0])==null?void 0:d.text)??"No unread messages",tone:"brand"}),e.jsx(Ze,{title:"Call Status",value:(i==null?void 0:i.state)??"Idle",tone:"danger"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[e.jsx(et,{label:"Audio",tone:"success"}),e.jsx(et,{label:"Video",tone:"brand"}),e.jsx(et,{label:"Mute",tone:"warning"}),e.jsx(et,{label:"End",tone:"danger"})]})]})]}),t?null:e.jsx("section",{className:"mt-6 hidden md:block",children:e.jsx("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-6 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-heading text-lg font-bold",children:"Billing & Subscription"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Upgrade your homeowner plan and pay securely with Paystack."})]}),e.jsx(g,{to:"/billing/paywall",className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white dark:bg-white dark:text-slate-900",children:"Open Billing"})]})})})]})}function Xe({title:t,tip:s,value:a,tone:r,loading:l,sub:i}){const o={success:"bg-success/20 text-success",warning:"bg-warning/20 text-warning",danger:"bg-danger/20 text-danger",brand:"bg-brand-100 text-brand-700 dark:bg-brand-500/20 dark:text-brand-100"};return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-5 shadow-soft transition hover:-translate-y-0.5 dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-slate-500",children:t}),e.jsx(Vs,{text:s})]}),e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${o[r]}`,children:"Live"})]}),e.jsx("p",{className:"mt-3 font-heading text-2xl font-extrabold sm:text-3xl",children:l?"...":a}),e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:i})]})}function Ze({title:t,value:s,tone:a}){const r={success:"bg-success",warning:"bg-warning",danger:"bg-danger",brand:"bg-brand-500"};return e.jsxs("div",{className:"rounded-xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`h-2 w-2 rounded-full ${r[a]}`}),e.jsx("p",{className:"text-xs text-slate-500",children:t})]}),e.jsx("p",{className:"mt-1 text-sm font-semibold",children:s})]})}function et({label:t,tone:s}){const a={success:"bg-success hover:bg-success/90",warning:"bg-warning hover:bg-warning/90",danger:"bg-danger hover:bg-danger/90",brand:"bg-brand-500 hover:bg-brand-600"};return e.jsx("button",{type:"button",className:`rounded-xl px-4 py-3 text-sm font-semibold text-white transition ${a[s]}`,children:t})}function bn(){return e.jsxs("svg",{viewBox:"0 0 320 88",className:"h-16 w-full",role:"img","aria-label":"Traffic trend",children:[e.jsx("path",{d:"M0 65 L40 58 L80 60 L120 42 L160 47 L200 35 L240 30 L280 38 L320 20",fill:"none",stroke:"#2456f5",strokeWidth:"3",strokeLinecap:"round"}),e.jsx("path",{d:"M0 88 L0 65 L40 58 L80 60 L120 42 L160 47 L200 35 L240 30 L280 38 L320 20 L320 88 Z",fill:"rgba(36,86,245,0.15)"})]})}function gn({text:t}){return e.jsx("p",{className:"rounded-xl bg-slate-100 p-4 text-sm text-slate-500 dark:bg-slate-800",children:t})}function Vs({text:t}){return e.jsxs("span",{className:"group relative inline-flex",children:[e.jsx("button",{type:"button",className:"grid h-5 w-5 place-items-center rounded-full bg-slate-200 text-[11px] font-bold text-slate-700 dark:bg-slate-700 dark:text-slate-100","aria-label":"More information",children:"?"}),e.jsx("span",{className:"pointer-events-none absolute left-1/2 top-7 z-10 hidden w-56 -translate-x-1/2 rounded-lg bg-slate-900 px-2 py-1 text-xs text-white shadow-lg group-hover:block group-focus-within:block",children:t})]})}const pn=[{key:"message",title:"Messages",description:"Open chat first, then move to call when ready.",buttonClass:"bg-slate-900 text-white hover:bg-slate-800"},{key:"audio",title:"Audio Call",description:"Start voice session with microphone only.",buttonClass:"bg-emerald-600 text-white hover:bg-emerald-700"},{key:"video",title:"Video Call",description:"Start live video and audio session.",buttonClass:"bg-cyan-600 text-white hover:bg-cyan-700"}];function fn({open:t,sessionId:s,onClose:a,onSelect:r}){const l=n.useMemo(()=>s?`Choose Session Mode (${s.slice(0,8)}...)`:"Choose Session Mode",[s]);return!t||!s?null:e.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-slate-900/50 p-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-slate-200 bg-white p-5 shadow-soft dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("h3",{className:"font-heading text-lg font-bold",children:l}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Pick where you want to enter this session."}),e.jsx("div",{className:"mt-4 space-y-3",children:pn.map(i=>e.jsxs("button",{type:"button",onClick:()=>r(i.key),className:`w-full rounded-xl px-4 py-3 text-left transition ${i.buttonClass}`,children:[e.jsx("p",{className:"text-sm font-semibold",children:i.title}),e.jsx("p",{className:"text-xs opacity-85",children:i.description})]},i.key))}),e.jsx("button",{type:"button",onClick:a,className:"mt-4 w-full rounded-xl border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800",children:"Cancel"})]})})}function jn(){const t=me(),[s,a]=n.useState([]),[r,l]=n.useState(!0),[i,o]=n.useState(""),[b,m]=n.useState(""),[u,d]=n.useState(""),[x,c]=n.useState(!1),[h,p]=n.useState(""),k=n.useRef(!1),S=n.useCallback(async({background:w=!1,force:E=!1}={})=>{if(!(k.current&&!E)){k.current=!0,w||(l(!0),o(""));try{const I=await $r();a(I)}catch(I){w||o(I.message??"Failed to load visits")}finally{w||l(!1),k.current=!1}}},[]);n.useEffect(()=>{S({force:!0})},[S]),n.useEffect(()=>{const E=setInterval(()=>{document.visibilityState==="visible"&&S({background:!0})},15e3),I=()=>{document.visibilityState==="visible"&&S({background:!0})};return document.addEventListener("visibilitychange",I),()=>{clearInterval(E),document.removeEventListener("visibilitychange",I)}},[S]);async function v(w,E){m(w),o("");try{const I=await Fr(w,E);await Xr(w),a(H=>H.map(O=>O.id===w?{...O,status:(I==null?void 0:I.status)==="approved"?"Approved":"Rejected",sessionStatus:(I==null?void 0:I.status)??O.sessionStatus,canDecide:!1}:O))}catch(I){o(I.message??"Failed to update visit")}finally{m("")}}async function j(w){d(w),o("");try{await Ur(w),a(E=>E.map(I=>I.id===w?{...I,status:"Completed",sessionStatus:"closed",canDecide:!1}:I))}catch(E){o(E.message??"Failed to end session")}finally{d("")}}function T(w){p(w),c(!0)}function f(w){h&&(c(!1),t(`/session/${h}/${w}`))}return e.jsxs(ae,{title:"Visits",children:[i?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:i}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-6",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Visitor Log"}),e.jsx("button",{type:"button",onClick:()=>S({force:!0}),className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700",children:"Refresh"})]}),r?e.jsx("p",{className:"py-2 text-sm text-slate-500",children:"Loading visits..."}):s.length===0?e.jsx("p",{className:"py-2 text-sm text-slate-500",children:"No visit records yet."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3 md:hidden",children:s.map(w=>e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:w.visitor}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:w.door})]}),e.jsx("span",{className:`rounded-full px-2 py-1 text-[11px] font-semibold ${ns(w.status)}`,children:w.status})]}),e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:ls(w.time)}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:w.canDecide?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",disabled:b===w.id,onClick:()=>v(w.id,"approve"),className:"rounded-lg bg-success px-3 py-1.5 text-[11px] font-semibold text-white disabled:opacity-50",children:"Approve"}),e.jsx("button",{type:"button",disabled:b===w.id,onClick:()=>v(w.id,"reject"),className:"rounded-lg bg-danger px-3 py-1.5 text-[11px] font-semibold text-white disabled:opacity-50",children:"Reject"})]}):w.sessionStatus==="approved"||w.sessionStatus==="active"?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>T(w.id),className:"rounded-lg bg-brand-500 px-3 py-1.5 text-[11px] font-semibold text-white",children:"Open Session"}),e.jsx("button",{type:"button",disabled:u===w.id,onClick:()=>j(w.id),className:"rounded-lg bg-danger px-3 py-1.5 text-[11px] font-semibold text-white disabled:opacity-50",children:u===w.id?"Ending...":"End Session"})]}):null})]},w.id))}),e.jsx("div",{className:"hidden overflow-x-auto md:block",children:e.jsxs("table",{className:"w-full min-w-[520px] text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:[e.jsx("th",{className:"py-3 font-semibold",children:"Visitor"}),e.jsx("th",{className:"py-3 font-semibold",children:"Door"}),e.jsx("th",{className:"py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"py-3 font-semibold",children:"Time"}),e.jsx("th",{className:"py-3 font-semibold",children:"Action"})]})}),e.jsx("tbody",{children:s.map(w=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-3 font-medium",children:w.visitor}),e.jsx("td",{className:"py-3",children:w.door}),e.jsx("td",{className:"py-3",children:e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${ns(w.status)}`,children:w.status})}),e.jsx("td",{className:"py-3 text-slate-500",children:ls(w.time)}),e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:w.canDecide?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",disabled:b===w.id,onClick:()=>v(w.id,"approve"),className:"rounded-lg bg-success px-3 py-1.5 text-xs font-semibold text-white disabled:opacity-50",children:"Approve"}),e.jsx("button",{type:"button",disabled:b===w.id,onClick:()=>v(w.id,"reject"),className:"rounded-lg bg-danger px-3 py-1.5 text-xs font-semibold text-white disabled:opacity-50",children:"Reject"})]}):w.sessionStatus==="approved"||w.sessionStatus==="active"?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>T(w.id),className:"rounded-lg bg-brand-500 px-3 py-1.5 text-xs font-semibold text-white",children:"Open Session"}),e.jsx("button",{type:"button",disabled:u===w.id,onClick:()=>j(w.id),className:"rounded-lg bg-danger px-3 py-1.5 text-xs font-semibold text-white disabled:opacity-50",children:u===w.id?"Ending...":"End Session"})]}):e.jsx("span",{className:"text-xs text-slate-500",children:"No action"})})})]},w.id))})]})})]})]}),e.jsx(fn,{open:x,sessionId:h,onClose:()=>c(!1),onSelect:f})]})}function ns(t){return t==="Approved"||t==="Completed"||t==="Active"?"bg-success/15 text-success":t==="Pending"?"bg-warning/20 text-warning":t==="Rejected"?"bg-danger/15 text-danger":"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200"}function ls(t){if(!t)return"-";const s=new Date(t);return Number.isNaN(s.getTime())?t:s.toLocaleString()}let Qe=null;function kn(){if(typeof window>"u")return null;const t=window.AudioContext||window.webkitAudioContext;return t?(Qe||(Qe=new t),Qe.state==="suspended"&&Qe.resume().catch(()=>{}),Qe):null}function Fs(t,s=.12,a=.06,r=.06){const l=kn();if(!l)return;const i=l.currentTime;t.forEach((o,b)=>{const m=i+b*(s+a),u=m+s,d=l.createOscillator(),x=l.createGain();d.type="sine",d.frequency.setValueAtTime(o,m),x.gain.setValueAtTime(1e-4,m),x.gain.exponentialRampToValueAtTime(r,m+.02),x.gain.exponentialRampToValueAtTime(1e-4,u),d.connect(x),x.connect(l.destination),d.start(m),d.stop(u)})}function zs(){Fs([720,880],.1,.05,.04)}function wn(){Fs([660,880,660],.14,.05,.06)}function Nn(){const[t,s]=n.useState([]),[a,r]=n.useState(""),[l,i]=n.useState({}),[o,b]=n.useState(!0),[m,u]=n.useState(!1),[d,x]=n.useState(""),[c,h]=n.useState(!1),[p,k]=n.useState(""),[S,v]=n.useState(""),j=n.useRef(null),T=localStorage.getItem("qring_access_token");function f(N,A){if(!N||!A)return!1;if(N.id&&A.id&&N.id===A.id)return!0;if((N.text||"").trim()!==(A.text||"").trim()||(N.senderType||"")!==(A.senderType||""))return!1;const y=new Date(N.at).getTime(),L=new Date(A.at).getTime();return Number.isNaN(y)||Number.isNaN(L)?!1:Math.abs(y-L)<1e4}function w(N){N!=null&&N.sessionId&&s(A=>A.map(y=>y.id===N.sessionId?{...y,last:N.text,time:N.at,unread:a===N.sessionId||N.senderType==="homeowner"?0:(y.unread||0)+1}:y))}n.useEffect(()=>{let N=!0;async function A(){b(!0),v("");try{const y=await as();if(!N)return;s(y),r(L=>{var F;return L||((F=y[0])==null?void 0:F.id)||""})}catch(y){if(!N)return;v(y.message??"Failed to load messages")}finally{N&&b(!1)}}return A(),()=>{N=!1}},[]),n.useEffect(()=>{const N=setInterval(async()=>{try{const A=await as();s(y=>{if(!y.length)return A;const L=Object.fromEntries(y.map(F=>[F.id,F.unread||0]));return A.map(F=>({...F,unread:L[F.id]??F.unread??0}))})}catch{}},8e3);return()=>clearInterval(N)},[]),n.useEffect(()=>{if(!a)return;let N=!0;return(async()=>{u(!0);try{const y=await Or(a);if(!N)return;i(L=>({...L,[a]:y})),s(L=>L.map(F=>F.id===a?{...F,unread:0}:F))}catch(y){if(!N)return;v(y.message??"Failed to load conversation")}finally{N&&u(!1)}})(),()=>{N=!1}},[a]),n.useEffect(()=>{if(!a)return;const N=Ot(`${le.socketUrl}${le.signalingNamespace}`,{path:le.socketPath,transports:["websocket","polling"],auth:A=>{const y=localStorage.getItem("qring_access_token");A(y?{token:y}:{})},withCredentials:!0});return N.on("connect",()=>{N.emit("session.join",{sessionId:a,displayName:"Homeowner"})}),N.on("chat.message",A=>{const y=A==null?void 0:A.sessionId;if(!y)return;const L={id:(A==null?void 0:A.id)??`${(A==null?void 0:A.at)||Date.now()}-${Math.random()}`,sessionId:y,text:(A==null?void 0:A.text)||"",senderType:(A==null?void 0:A.senderType)||"visitor",displayName:(A==null?void 0:A.displayName)||"Participant",at:(A==null?void 0:A.at)||new Date().toISOString()};i(F=>{const ee=F[y]??[];return ee.some(C=>f(C,L))?F:{...F,[y]:[...ee,L]}}),L.senderType!=="homeowner"&&zs(),w(L)}),()=>{N.disconnect()}},[a,T]),n.useEffect(()=>{j.current&&(j.current.scrollTop=j.current.scrollHeight)},[a,l]);const E=n.useMemo(()=>t.find(N=>N.id===a)??null,[t,a]),I=n.useMemo(()=>l[a]??[],[l,a]);async function H(N){N.preventDefault();const A=d.trim();if(!(!a||!A)){h(!0);try{await Qr(a,A),x("")}catch(y){v(y.message??"Failed to send message")}finally{h(!1)}}}async function O(N){if(!(!a||!N||p)){v(""),k(N);try{const A=I.filter(y=>y.id!==N);await Br(a,N),i(y=>({...y,[a]:A})),s(y=>y.map(L=>{if(L.id!==a)return L;const F=A[A.length-1];return{...L,last:(F==null?void 0:F.text)??"",time:(F==null?void 0:F.at)??L.time}}))}catch(A){v(A.message??"Failed to delete message")}finally{k("")}}}return e.jsxs(ae,{title:"Messages",children:[S?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:S}):null,e.jsxs("section",{className:"grid gap-3 sm:gap-4 lg:grid-cols-12",children:[e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-3 sm:p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 lg:col-span-5 sm:p-5",children:[e.jsx("h2",{className:"mb-4 font-heading text-lg font-bold sm:text-xl",children:"Threads"}),o?e.jsx(os,{text:"Loading threads..."}):null,!o&&t.length===0?e.jsx(os,{text:"No messages yet."}):null,e.jsx("div",{className:"space-y-3",children:t.map(N=>e.jsxs("button",{type:"button",onClick:()=>r(N.id),className:`flex w-full items-center justify-between rounded-xl border p-3 text-left transition ${a===N.id?"border-brand-500 bg-brand-50 dark:border-brand-400 dark:bg-brand-500/10":"border-slate-200 bg-white dark:border-slate-700 dark:bg-slate-900"}`,children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"truncate text-sm font-semibold",children:N.name}),e.jsx("p",{className:"truncate text-xs text-slate-500",children:N.last})]}),e.jsxs("div",{className:"ml-3 text-right",children:[e.jsx("p",{className:"text-xs text-slate-500",children:is(N.time)}),N.unread>0?e.jsx("span",{className:"mt-1 inline-block rounded-full bg-brand-500 px-2 py-0.5 text-[10px] font-bold text-white",children:N.unread}):null]})]},N.id))})]}),e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-3 sm:p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 lg:col-span-7 sm:p-5",children:[e.jsx("h2",{className:"mb-4 font-heading text-lg font-bold sm:text-xl",children:"Conversation"}),E?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Visitor"}),e.jsx("p",{className:"mt-1 text-sm font-semibold",children:E.name})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Door"}),e.jsx("p",{className:"mt-1 text-sm font-semibold",children:E.door})]})]}),e.jsxs("div",{ref:j,className:"max-h-[28rem] space-y-2 overflow-y-auto rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[m?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading conversation..."}):null,!m&&I.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No messages in this session yet."}):null,I.map(N=>{const A=N.senderType==="homeowner";return e.jsxs("div",{className:`max-w-[85%] rounded-xl px-3 py-2 text-sm ${A?"ml-auto bg-brand-500 text-white":"bg-white text-slate-800 dark:bg-slate-900 dark:text-slate-100"}`,children:[e.jsx("p",{className:"text-[11px] font-semibold opacity-80",children:N.displayName}),e.jsx("p",{children:N.text}),e.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2 text-[10px] opacity-80",children:[e.jsx("p",{children:is(N.at)}),A?e.jsx("button",{type:"button",onClick:()=>O(N.id),disabled:p===N.id,className:"rounded-md bg-black/20 px-2 py-0.5 text-[10px] font-semibold text-inherit disabled:opacity-60",children:p===N.id?"Deleting...":"Delete"}):null]})]},N.id)})]}),e.jsxs("form",{onSubmit:H,className:"flex gap-2",children:[e.jsx("input",{value:d,onChange:N=>x(N.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 text-sm dark:border-slate-700 dark:bg-slate-900",placeholder:"Type a message to this visitor"}),e.jsx("button",{type:"submit",disabled:c||!a||!d.trim(),className:"rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:c?"Sending...":"Send"})]})]}):e.jsx("div",{className:"rounded-xl bg-slate-100 p-4 text-sm text-slate-600 dark:bg-slate-800 dark:text-slate-300",children:"Select a thread to view details."})]})]})]})}function os({text:t}){return e.jsx("div",{className:"mb-3 rounded-xl bg-slate-100 p-4 text-sm text-slate-600 dark:bg-slate-800 dark:text-slate-300",children:t})}function is(t){if(!t)return"-";const s=new Date(t);return Number.isNaN(s.getTime())?t:s.toLocaleString()}function yn(){var K;const[t,s]=n.useState([]),[a,r]=n.useState(null),[l,i]=n.useState(!0),[o,b]=n.useState(""),[m,u]=n.useState(""),[d,x]=n.useState(""),[c,h]=n.useState(""),[p,k]=n.useState(""),[S,v]=n.useState(!1),[j,T]=n.useState(""),[f,w]=n.useState(""),[E,I]=n.useState(!1),[H,O]=n.useState(""),[N,A]=n.useState(!0),[y,L]=n.useState({size:"240",shape:"rounded"}),F=n.useRef(null),ee=!!(a&&Number(a.maxDoors??0)>0&&Number(a.usedDoors??0)>=Number(a.maxDoors??0)),C=!!(a&&Number(a.maxQrCodes??0)>0&&Number(a.usedQrCodes??0)>=Number(a.maxQrCodes??0));async function D(){var M,Z;i(!0),b("");try{const U=await Hr(),V=(U==null?void 0:U.doors)??[];s(V),r((U==null?void 0:U.subscription)??null),(M=U==null?void 0:U.subscription)!=null&&M.managedByEstate&&(I(!0),O(((Z=U==null?void 0:U.subscription)==null?void 0:Z.estateName)||"")),!c&&V.length>0&&h(V[0].id),!j&&V.length>0&&T(V[0].id)}catch(U){b(U.message??"Failed to load doors")}finally{i(!1)}}n.useEffect(()=>{D()},[]),n.useEffect(()=>{let M=!0;async function Z(){try{const U=await gt();if(!M)return;I(!!(U!=null&&U.managedByEstate)),O((U==null?void 0:U.estateName)||"")}catch{if(!M)return;const U=localStorage.getItem("qring_user");let V=!1;try{const te=U?JSON.parse(U):null;V=typeof(te==null?void 0:te.email)=="string"&&te.email.toLowerCase().endsWith("@estate.useqring.online")}catch{V=!1}I(V),O("")}finally{M&&A(!1)}}return Z(),()=>{M=!1}},[]);async function J(M){var Z,U;if(M.preventDefault(),ee||C){b(ee?`Door limit reached (${(a==null?void 0:a.maxDoors)??0}) for your ${(a==null?void 0:a.plan)??"current"} plan.`:`QR limit reached (${(a==null?void 0:a.maxQrCodes)??0}) for your ${(a==null?void 0:a.plan)??"current"} plan.`);return}v(!0),b(""),x("");try{const V=await Vr({name:p,generateQr:!0,mode:"direct",plan:"single"});if(V!=null&&V.door&&(s(te=>[V.door,...te]),h(V.door.id),T(V.door.id),(Z=V==null?void 0:V.qr)!=null&&Z.qr_id&&w(V.qr.qr_id),k("")),r(te=>te&&{...te,usedDoors:(te.usedDoors??0)+1,remainingDoors:Math.max((te.remainingDoors??0)-1,0),usedQrCodes:(te.usedQrCodes??0)+(V!=null&&V.qr?1:0),remainingQrCodes:Math.max((te.remainingQrCodes??0)-(V!=null&&V.qr?1:0),0)}),(U=V==null?void 0:V.qr)!=null&&U.qr_id){const te=tt(V.qr.qr_id);try{await navigator.clipboard.writeText(te),x(`Door created and QR copied: ${te}`)}catch{x(`Door created with QR: ${te}`)}}else x("Door created successfully.")}catch(V){b(V.message??"Failed to create door")}finally{v(!1)}}const z=t.find(M=>String(M.id)===String(j))??null,Y=z&&f?{doorName:z.name,scanUrl:tt(f)}:null;return e.jsxs(ae,{title:"Doors",children:[o?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:o}):null,d?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:d}):null,E?e.jsxs("div",{className:"mb-4 rounded-xl border border-warning/30 bg-warning/10 px-4 py-3 text-sm text-warning",children:["Door and QR creation are managed by your estate",H?` (${H})`:"","."]}):null,a?e.jsxs("section",{className:"mb-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Subscription"}),e.jsxs("p",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:["Plan: ",a.plan," (",a.status,")"]})]}),e.jsxs("div",{className:"text-right text-xs text-slate-600 dark:text-slate-300",children:[e.jsxs("p",{children:["Doors: ",a.usedDoors,"/",a.maxDoors]}),e.jsxs("p",{children:["QR Codes: ",a.usedQrCodes,"/",a.maxQrCodes]})]})]}),a.overDoorLimit?e.jsx("p",{className:"mt-3 rounded-lg bg-warning/15 px-3 py-2 text-xs font-medium text-warning",children:"You are above your plan door limit. Upgrade your subscription."}):null]}):null,!N&&!E?e.jsxs("section",{className:"mb-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Create Door"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 sm:text-sm",children:"Enter a new door name and create it with a QR code."}),e.jsxs("form",{className:"mt-4 grid gap-3 sm:grid-cols-[1fr_auto]",onSubmit:J,children:[e.jsx("input",{type:"text",value:p,onChange:M=>k(M.target.value),placeholder:"e.g. Front Gate",className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm outline-none ring-brand-300 focus:ring-2 dark:border-slate-700 dark:bg-slate-900",required:!0}),e.jsx("button",{type:"submit",disabled:S||ee||C,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:cursor-not-allowed disabled:opacity-50 dark:bg-white dark:text-slate-900",children:S?"Creating...":"Create Door + QR"})]})]}):null,l?e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-5 text-sm text-slate-500 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:"Loading doors..."}):t.length===0?e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-5 text-sm text-slate-500 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:"No doors configured yet."}):e.jsxs("section",{children:[e.jsx("h2",{className:"mb-3 font-heading text-lg font-bold sm:text-xl",children:"Doors Created"}),e.jsx("div",{className:"grid gap-3 sm:gap-4 md:grid-cols-2 xl:grid-cols-3",children:t.map(M=>{var Z;return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-5 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-heading text-lg font-bold",children:M.name}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:M.homeName})]}),e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-semibold ${M.state==="Online"?"bg-success/20 text-success":"bg-danger/20 text-danger"}`,children:M.state})]}),e.jsx("p",{className:"mt-4 text-xs uppercase tracking-wide text-slate-500",children:"Linked QR Codes"}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(Z=M.qr)!=null&&Z.length?M.qr.map(U=>e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-lg border border-slate-200 bg-slate-50 px-2 py-1 text-xs font-semibold transition hover:border-slate-300 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("img",{src:dt(tt(U),40),alt:`QR ${U}`,className:"h-5 w-5 rounded"}),e.jsx("span",{children:U})]},`${M.id}-${U}`)):e.jsx("span",{className:"text-xs text-slate-500",children:"No QR linked"})}),e.jsx("button",{type:"button",onClick:()=>{var U;T(M.id),w(((U=M.qr)==null?void 0:U[0])??""),setTimeout(()=>{var V;(V=F.current)==null||V.scrollIntoView({behavior:"smooth",block:"start"})},0)},className:"mt-4 w-full rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:cursor-not-allowed disabled:opacity-50 dark:bg-white dark:text-slate-900",children:"View Door"})]},M.id)})})]}),z?e.jsxs("section",{ref:F,className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Door Details & QR Print"}),e.jsx("button",{type:"button",onClick:()=>{T(""),w("")},className:"rounded-lg border border-slate-300 px-3 py-1.5 text-xs font-semibold dark:border-slate-700",children:"Close"})]}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500 sm:text-sm",children:["Door: ",z.name," | QR: ",f||"None selected"]}),e.jsxs("div",{className:"mt-4 grid gap-4 lg:grid-cols-[300px_1fr]",children:[e.jsxs("div",{className:"space-y-3 rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"QR Codes Created"}),e.jsx("div",{className:"max-h-40 space-y-2 overflow-y-auto pr-1",children:(K=z.qr)!=null&&K.length?z.qr.map(M=>e.jsxs("button",{type:"button",onClick:()=>w(M),className:`flex w-full items-center gap-2 rounded-lg border px-2 py-2 text-left text-xs font-semibold transition ${f===M?"border-brand-500 bg-brand-50 text-brand-700 dark:bg-brand-500/10 dark:text-brand-200":"border-slate-200 bg-white hover:border-slate-300 dark:border-slate-700 dark:bg-slate-900"}`,children:[e.jsx("img",{src:dt(tt(M),40),alt:`QR ${M}`,className:"h-8 w-8 rounded"}),e.jsx("span",{className:"truncate",children:M})]},`${z.id}-pick-${M}`)):e.jsx("p",{className:"text-xs text-slate-500",children:"No QR codes for this door yet."})}),e.jsxs("label",{className:"block text-xs font-semibold uppercase tracking-wide text-slate-500",children:["Print Size",e.jsxs("select",{value:y.size,onChange:M=>L(Z=>({...Z,size:M.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 bg-white px-2 py-2 text-sm font-medium dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("option",{value:"180",children:"Small (180px)"}),e.jsx("option",{value:"240",children:"Medium (240px)"}),e.jsx("option",{value:"320",children:"Large (320px)"}),e.jsx("option",{value:"420",children:"XL Poster (420px)"})]})]}),e.jsxs("label",{className:"block text-xs font-semibold uppercase tracking-wide text-slate-500",children:["Gen Z Shape",e.jsxs("select",{value:y.shape,onChange:M=>L(Z=>({...Z,shape:M.target.value})),className:"mt-1 w-full rounded-lg border border-slate-300 bg-white px-2 py-2 text-sm font-medium dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("option",{value:"rounded",children:"Rounded Card"}),e.jsx("option",{value:"circle",children:"Circle Sticker"}),e.jsx("option",{value:"diamond",children:"Diamond Tilt"}),e.jsx("option",{value:"squircle",children:"Squircle"}),e.jsx("option",{value:"ticket",children:"Ticket Cut"}),e.jsx("option",{value:"home",children:"Home Badge"}),e.jsx("option",{value:"bell",children:"Bell Badge"}),e.jsx("option",{value:"star",children:"Star Pop"})]})]}),e.jsx("button",{type:"button",disabled:!Y,onClick:()=>vn(Y,y),className:"w-full rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white dark:bg-white dark:text-slate-900",children:"Print QR"})]}),e.jsx("div",{className:"grid place-items-center rounded-xl border border-dashed border-slate-300 bg-white p-4 dark:border-slate-700 dark:bg-slate-900",children:Y?e.jsxs("div",{className:`bg-white p-4 shadow-lg ${ds(y.shape)}`,style:{width:`${Number(y.size)+40}px`},children:[e.jsx("div",{className:"mb-2 text-center text-xs font-semibold uppercase tracking-wide text-slate-500",children:Y.doorName}),e.jsx("img",{src:dt(Y.scanUrl,Number(y.size)),alt:`QR for ${Y.doorName}`,className:`mx-auto bg-white p-2 ${ds(y.shape)}`,style:{width:`${Number(y.size)}px`,height:`${Number(y.size)}px`}}),e.jsx("div",{className:"mt-2 text-center text-[10px] font-medium text-slate-500",children:Y.scanUrl})]}):e.jsx("p",{className:"text-sm text-slate-500",children:"Pick a QR code to preview and print."})})]})]}):null]})}function dt(t,s=240){return`https://api.qrserver.com/v1/create-qr-code/?size=${s}x${s}&data=${encodeURIComponent(t)}`}function tt(t){return`${(le.publicAppUrl||window.location.origin||"").replace(/\/+$/,"")}/scan/${t}`}function ds(t){return t==="circle"?"rounded-full":t==="diamond"?"rotate-2 rounded-2xl":t==="squircle"?"rounded-[32px]":t==="ticket"?"rounded-[22px]":t==="home"?"rounded-[18px]":t==="bell"?"rounded-[24px]":t==="star"?"rounded-[14px]":"rounded-2xl"}function vn(t,s){const a=Number(s.size||240),r=dt(t.scanUrl,a),l={rounded:"border-radius:18px;",circle:"border-radius:9999px;",diamond:"border-radius:22px;transform:rotate(2deg);",squircle:"border-radius:32px;",ticket:"border-radius:22px;clip-path: polygon(6% 0,94% 0,100% 18%,100% 82%,94% 100%,6% 100%,0 82%,0 18%);",home:"clip-path: polygon(50% 0,100% 30%,100% 100%,0 100%,0 30%);border-radius:10px;",bell:"clip-path: polygon(20% 22%,30% 8%,70% 8%,80% 22%,86% 64%,74% 88%,26% 88%,14% 64%);border-radius:10px;",star:"clip-path: polygon(50% 0,61% 35%,98% 35%,68% 57%,79% 92%,50% 70%,21% 92%,32% 57%,2% 35%,39% 35%);border-radius:8px;"}[s.shape]||"border-radius:18px;",i=`
    <html>
      <head>
        <title>Print QR</title>
        <style>
          body{font-family:Inter,Arial,sans-serif;padding:24px;background:#fff;color:#111}
          .card{width:${a+40}px;padding:16px;border:1px solid #e2e8f0;${l}}
          .door{font-size:12px;font-weight:700;text-transform:uppercase;letter-spacing:.08em;text-align:center;color:#334155;margin-bottom:8px}
          .qr{width:${a}px;height:${a}px;display:block;margin:0 auto;background:#fff;padding:8px;${l}}
          .url{font-size:10px;color:#64748b;text-align:center;margin-top:8px;word-break:break-all}
        </style>
      </head>
      <body>
        <div class="card">
          <div class="door">${t.doorName}</div>
          <img class="qr" src="${r}" alt="QR" />
          <div class="url">${t.scanUrl}</div>
        </div>
        <script>window.onload = () => { window.print(); };<\/script>
      </body>
    </html>`,o=window.open("","_blank","width=700,height=800");o&&(o.document.open(),o.document.write(i),o.document.close())}async function Sn(){const t=await _("/homeowner/settings");return(t==null?void 0:t.data)??null}async function Cn(t){const s=await _("/homeowner/settings",{method:"PUT",body:JSON.stringify(t)});return(s==null?void 0:s.data)??null}function An(){const[t,s]=n.useState({pushAlerts:!0,soundAlerts:!0,autoRejectUnknownVisitors:!1}),[a,r]=n.useState(!1),[l,i]=n.useState(""),[o,b]=n.useState(null),[m,u]=n.useState(null),[d,x]=n.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[c,h]=n.useState(!0),[p,k]=n.useState(!1),[S,v]=n.useState(!1),[j,T]=n.useState(!1),[f,w]=n.useState(""),[E,I]=n.useState("");n.useEffect(()=>{let A=!0;async function y(){h(!0),I("");try{const[L,F]=await Promise.all([Sn(),Da()]);if(!A)return;s({pushAlerts:!!(L!=null&&L.pushAlerts),soundAlerts:!!(L!=null&&L.soundAlerts),autoRejectUnknownVisitors:!!(L!=null&&L.autoRejectUnknownVisitors)}),r(!!(L!=null&&L.managedByEstate)),i((L==null?void 0:L.estateName)||""),localStorage.setItem("qring_sound_alerts",String(!!(L!=null&&L.soundAlerts))),window.dispatchEvent(new Event("qring:sound-alerts-updated")),b((L==null?void 0:L.subscription)??null),u(F)}catch(L){if(!A)return;I(L.message??"Failed to load settings")}finally{A&&h(!1)}}return y(),()=>{A=!1}},[]);async function H(A){A.preventDefault(),k(!0),I(""),w("");try{const y=await Cn(t);s({pushAlerts:!!(y!=null&&y.pushAlerts),soundAlerts:!!(y!=null&&y.soundAlerts),autoRejectUnknownVisitors:!!(y!=null&&y.autoRejectUnknownVisitors)}),localStorage.setItem("qring_sound_alerts",String(!!(y!=null&&y.soundAlerts))),window.dispatchEvent(new Event("qring:sound-alerts-updated")),w("Settings updated successfully.")}catch(y){I(y.message??"Failed to update settings")}finally{k(!1)}}async function O(A){if(A.preventDefault(),v(!0),I(""),w(""),d.newPassword!==d.confirmPassword){I("New password and confirm password do not match."),v(!1);return}try{await yr({currentPassword:d.currentPassword,newPassword:d.newPassword}),x({currentPassword:"",newPassword:"",confirmPassword:""}),w("Password changed successfully.")}catch(y){I(y.message??"Failed to change password")}finally{v(!1)}}async function N(){const A=String((m==null?void 0:m.referralCode)||"").trim();if(!A){I("No referral code available yet.");return}T(!0),I("");try{await navigator.clipboard.writeText(A),w("Referral code copied.")}catch{I("Unable to copy referral code. Please copy manually.")}finally{T(!1)}}return e.jsxs(ae,{title:"Profile & Settings",children:[E?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:E}):null,f?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:f}):null,a?e.jsxs("div",{className:"mb-4 rounded-xl border border-brand-300/40 bg-brand-50 px-4 py-3 text-sm text-brand-700 dark:bg-brand-500/10 dark:text-brand-200",children:["Your plan is managed by estate admin",l?` (${l})`:"","."]}):null,c?e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/90 p-5 text-sm text-slate-500 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:"Loading settings..."}):e.jsxs("section",{className:"grid gap-3 sm:gap-4 xl:grid-cols-12",children:[e.jsxs("article",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/95 shadow-soft dark:border-slate-800 dark:bg-slate-900/85 xl:col-span-12",children:[e.jsxs("div",{className:"bg-gradient-to-r from-brand-600 via-brand-500 to-teal-500 px-4 py-5 text-white sm:px-6",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-white/80",children:"Profile Hub"}),e.jsx("h2",{className:"font-heading text-xl font-bold sm:text-2xl",children:"Your Account Overview"}),e.jsx("p",{className:"mt-1 max-w-2xl text-sm text-white/90",children:"Manage alerts, referrals, subscription and account security from one place."})]}),e.jsxs("div",{className:"grid gap-3 p-4 sm:p-6 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded-xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Plan"}),e.jsx("p",{className:"mt-1 text-base font-semibold",children:(o==null?void 0:o.plan)??"Not available"}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Status: ",(o==null?void 0:o.status)??"Unknown"]})]}),e.jsxs("div",{className:"rounded-xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Referral Earnings"}),e.jsxs("p",{className:"mt-1 text-base font-semibold",children:["NGN ",new Intl.NumberFormat("en-NG").format((m==null?void 0:m.earnings)??0)]}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Rewarded: ",(m==null?void 0:m.rewardedReferrals)??0," / ",(m==null?void 0:m.totalReferrals)??0]})]}),e.jsxs("div",{className:"rounded-xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Referral Code"}),e.jsx("p",{className:"mt-1 text-base font-semibold",children:(m==null?void 0:m.referralCode)??"N/A"}),e.jsx("button",{type:"button",onClick:N,disabled:j||!(m!=null&&m.referralCode),className:"mt-2 rounded-lg border border-slate-300 px-3 py-1.5 text-xs font-semibold disabled:opacity-50 dark:border-slate-700",children:j?"Copying...":"Copy code"})]})]})]}),e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-6 xl:col-span-7",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Preferences"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Manage how you receive alerts and visitor auto-reject behavior."}),e.jsxs("form",{className:"mt-4 space-y-3",onSubmit:H,children:[e.jsx(Rt,{label:"Push Alerts",checked:t.pushAlerts,onChange:A=>s(y=>({...y,pushAlerts:A}))}),e.jsx(Rt,{label:"Sound Alerts",checked:t.soundAlerts,onChange:A=>s(y=>({...y,soundAlerts:A}))}),e.jsx(Rt,{label:"Auto Reject Unknown Visitors",checked:t.autoRejectUnknownVisitors,onChange:A=>s(y=>({...y,autoRejectUnknownVisitors:A}))}),e.jsx("button",{type:"submit",disabled:p,className:"w-full rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50 sm:w-auto dark:bg-white dark:text-slate-900",children:p?"Saving...":"Save Preferences"})]})]}),e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-6 xl:col-span-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Security"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Update your password regularly to keep your account protected."}),o!=null&&o.limits?e.jsxs("div",{className:"mt-4 rounded-xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Plan Limits"}),e.jsxs("p",{className:"mt-1 text-sm text-slate-700 dark:text-slate-200",children:[o.limits.maxDoors," doors, ",o.limits.maxQrCodes," QR codes"]})]}):null,e.jsxs("form",{className:"mt-6 space-y-3",onSubmit:O,children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Reset Password"}),e.jsx(Et,{label:"Current Password",value:d.currentPassword,onChange:A=>x(y=>({...y,currentPassword:A}))}),e.jsx(Et,{label:"New Password",value:d.newPassword,onChange:A=>x(y=>({...y,newPassword:A}))}),e.jsx(Et,{label:"Confirm New Password",value:d.confirmPassword,onChange:A=>x(y=>({...y,confirmPassword:A}))}),e.jsx("button",{type:"submit",disabled:S,className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm font-semibold disabled:opacity-50 dark:border-slate-700",children:S?"Updating...":"Update Password"})]})]})]})]})}function Rt({label:t,checked:s,onChange:a}){return e.jsxs("label",{className:"flex items-center justify-between rounded-xl border border-slate-200 px-3 py-2 dark:border-slate-700",children:[e.jsx("span",{className:"text-sm font-medium",children:t}),e.jsx("input",{type:"checkbox",checked:s,onChange:r=>a(r.target.checked),className:"h-4 w-4 accent-brand-500"})]})}function Et({label:t,value:s,onChange:a}){return e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-sm font-medium text-slate-700 dark:text-slate-300",children:t}),e.jsx("input",{type:"password",value:s,required:!0,minLength:8,onChange:r=>a(r.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm outline-none ring-brand-300 transition focus:ring-2 dark:border-slate-700 dark:bg-slate-900"})]})}function Pn(){const{user:t}=pe(),[s,a]=n.useState([]),[r,l]=n.useState(null),[i,o]=n.useState([]),[b,m]=n.useState(""),[u,d]=n.useState("monthly"),[x,c]=n.useState(""),[h,p]=n.useState(""),k=me();n.useEffect(()=>{let f=!0;async function w(){try{const[E,I,H,O]=await Promise.all([Ta(),La(),Ts(),(t==null?void 0:t.role)==="homeowner"?gt():Promise.resolve(null)]);if(!f)return;if((t==null?void 0:t.role)==="homeowner"&&(O!=null&&O.managedByEstate)){k("/dashboard/homeowner/overview",{replace:!0});return}l(E),a(I),o(H)}catch(E){if(!f)return;c(E.message??"Failed to load billing data")}}return w(),()=>{f=!1}},[k,t==null?void 0:t.role]);const S=n.useMemo(()=>{if(!(r!=null&&r.plan))return"Free";const f=i.find(w=>w.id===r.plan);return(f==null?void 0:f.name)??r.plan},[i,r]),v=(t==null?void 0:t.role)==="estate"?"/dashboard/estate":"/dashboard/homeowner/overview",j=(t==null?void 0:t.role)==="estate"?"Estate Dashboard":"Homeowner Dashboard";async function T(f){m(f.id),c(""),p("");try{if(f.amount===0){const w=await qa(f.id);l(E=>({...E??{},...w,limits:{maxDoors:f.maxDoors,maxQrCodes:f.maxQrCodes}})),p(`Free plan activated. You can manage up to ${f.maxDoors} door${f.maxDoors===1?"":"s"} and ${f.maxQrCodes} QR code${f.maxQrCodes===1?"":"s"}.`)}else{const E=!["localhost","127.0.0.1"].includes(window.location.hostname)&&window.location.protocol==="https:"?`${window.location.origin}/billing/callback`:void 0,I=await _a(f.id,E,u);if(!(I!=null&&I.authorization_url))throw new Error("Unable to start Paystack checkout");window.location.href=I.authorization_url}}catch(w){c(w.message??"Failed to process plan request")}finally{m("")}}return e.jsxs(ae,{title:"Billing & Subscription",children:[x?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:x}):null,h?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:h}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-5 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-heading text-xl font-bold",children:"Current Plan"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:S}),r!=null&&r.limits?e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Limit: ",r.limits.maxDoors," door(s), ",r.limits.maxQrCodes," QR code(s)"]}):null]}),e.jsxs("button",{type:"button",onClick:()=>k(v),className:"rounded-lg bg-brand-500 px-4 py-2 text-sm font-semibold text-white",children:["Back to ",j]})]}),e.jsxs("div",{className:"mt-4 inline-flex rounded-lg border border-slate-200 bg-slate-50 p-1 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("button",{type:"button",onClick:()=>d("monthly"),className:`rounded-md px-3 py-1.5 text-xs font-semibold transition ${u==="monthly"?"bg-slate-900 text-white dark:bg-white dark:text-slate-900":"text-slate-600 dark:text-slate-300"}`,children:"Monthly"}),e.jsx("button",{type:"button",onClick:()=>d("yearly"),className:`rounded-md px-3 py-1.5 text-xs font-semibold transition ${u==="yearly"?"bg-slate-900 text-white dark:bg-white dark:text-slate-900":"text-slate-600 dark:text-slate-300"}`,children:"Yearly"})]})]}),e.jsx("section",{className:"mt-4 grid gap-3 sm:mt-6 sm:gap-4 md:grid-cols-2 xl:grid-cols-3",children:i.map(f=>e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 sm:p-5 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500",children:f.name}),e.jsxs("p",{className:"mt-2 text-2xl font-bold",children:[Rn(En(f,u),f.currency),e.jsxs("span",{className:"ml-1 text-sm font-medium text-slate-500",children:["/",u==="yearly"?"year":"month"]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:(f.currency||"NGN").toUpperCase()}),e.jsxs("p",{className:"mt-2 text-sm text-slate-500",children:["Up to ",f.maxDoors," doors"]}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Up to ",f.maxQrCodes," QR codes"]}),e.jsx("button",{type:"button",disabled:b===f.id||(r==null?void 0:r.plan)===f.id,onClick:()=>T(f),className:"mt-4 w-full rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:cursor-not-allowed disabled:opacity-50 dark:bg-white dark:text-slate-900",children:(r==null?void 0:r.plan)===f.id?"Current plan":b===f.id?"Processing...":f.amount===0?"Activate free":`Pay with Paystack (${u==="yearly"?"Yearly":"Monthly"})`})]},f.id))}),e.jsxs("section",{className:"mt-6 rounded-2xl border border-slate-200 bg-white/90 p-5 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("h3",{className:"font-heading text-lg font-bold",children:"Manual Payment Instructions"}),s.length===0?e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"No manual payment account configured."}):e.jsx("div",{className:"mt-3 space-y-3",children:s.map(f=>e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-sm font-semibold",children:f.name}),e.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:f.description}),e.jsx("p",{className:"mt-2 text-xs font-medium text-slate-500",children:f.accountInfo})]},f.id))}),e.jsxs("p",{className:"mt-4 text-xs text-slate-500",children:["Need help? ",e.jsx(g,{to:"/contact",className:"font-semibold text-brand-600 dark:text-brand-300",children:"Contact support"}),"."]})]})]})}function Rn(t,s="NGN"){const a=Number(t||0),r=String(s||"NGN").toUpperCase();try{return new Intl.NumberFormat("en",{style:"currency",currency:r,maximumFractionDigits:0}).format(a)}catch{return`${r} ${a.toLocaleString("en-US")}`}}function En(t,s){const a=Number((t==null?void 0:t.amount)||0);return s==="yearly"?a*12:a}function Mn(){const{user:t}=pe(),[s,a]=n.useState(""),[r,l]=n.useState("Verifying payment..."),[i]=Ss(),o=me();return n.useEffect(()=>{let b=!0;async function m(){const u=i.get("reference")||i.get("trxref");if(!u){a("Missing Paystack reference.");return}try{if(await $a(u),!b)return;l("Payment successful. Redirecting..."),setTimeout(()=>{const d=(t==null?void 0:t.role)==="estate"?"/dashboard/estate":"/dashboard/homeowner/overview";o(d,{replace:!0})},800)}catch(d){if(!b)return;a(d.message??"Unable to verify payment.")}}return m(),()=>{b=!1}},[o,i,t==null?void 0:t.role]),e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-100 p-6 dark:bg-slate-950",children:e.jsx("div",{className:"w-full max-w-md rounded-2xl border border-slate-200 bg-white p-6 text-center shadow-soft dark:border-slate-800 dark:bg-slate-900",children:s?e.jsx("p",{className:"text-sm font-semibold text-danger",children:s}):e.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:r})})})}async function Le(){const t=await _("/estate/overview");return(t==null?void 0:t.data)??{}}async function In(t){const s=await _("/estate/",{method:"POST",body:JSON.stringify(t)});return(s==null?void 0:s.data)??null}async function Tn(t){const s=await _("/estate/homes",{method:"POST",body:JSON.stringify(t)});return(s==null?void 0:s.data)??null}async function Ln(t){const s=await _("/estate/doors",{method:"POST",body:JSON.stringify(t)});return(s==null?void 0:s.data)??null}async function Dn(t){const s=await _("/estate/doors/provision",{method:"POST",body:JSON.stringify(t)});return(s==null?void 0:s.data)??null}async function qn(t,s){const a=await _(`/estate/doors/${t}/assign-homeowner`,{method:"POST",body:JSON.stringify({homeownerId:s})});return(a==null?void 0:a.data)??null}async function _n(t){const s=await _(`/estate/homeowners/${t}/invite`,{method:"POST"});return(s==null?void 0:s.data)??null}async function $n(){const t=await _("/estate/mappings");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function On(){const t=await _("/estate/access-logs");return Array.isArray(t==null?void 0:t.data)?t.data:[]}async function Qn(){const t=await _("/estate/plan-restrictions");return(t==null?void 0:t.data)??null}async function Bn(t,s){const a=await _(`/estate/doors/${t}/admin-profile`,{method:"PUT",body:JSON.stringify(s)});return(a==null?void 0:a.data)??null}async function Gs(t){const s=await _("/estate/shared-qr",{method:"POST",body:JSON.stringify({estateId:t})});return(s==null?void 0:s.data)??null}async function cs(t){const s=await _(`/estate/shared-qr?estateId=${encodeURIComponent(t)}`);return Array.isArray(s==null?void 0:s.data)?s.data:[]}const Un=[{title:"Create Estate",description:"Set up a new estate profile before adding homes and access doors."},{title:"Add Doors",description:"Register entry points so each door can be mapped and monitored."},{title:"Assign Doors To Homeowners",description:"Link doors to responsible homeowners for approvals and notifications."},{title:"Invite Homeowners",description:"Send access invites so residents can sign in and control their doors."},{title:"Manage Door Mappings",description:"Review and adjust door-to-homeowner mappings at any time."},{title:"View Access Logs",description:"Track entry attempts and approvals for audit and security review."},{title:"Plan Restrictions",description:"See usage limits and plan-based restrictions for estate operations."},{title:"Multi-Home Support",description:"Handle multiple homes under one estate workspace."}];function Hn(){var i,o,b,m;const[t,s]=n.useState(null),[a,r]=n.useState("");n.useEffect(()=>{let u=!0;async function d(){try{const x=await Le();if(!u)return;s(x)}catch(x){if(!u)return;r(x.message??"Failed to load estate data")}}return d(),()=>{u=!1}},[]);const l={estates:((i=t==null?void 0:t.estates)==null?void 0:i.length)??0,homes:((o=t==null?void 0:t.homes)==null?void 0:o.length)??0,doors:((b=t==null?void 0:t.doors)==null?void 0:b.length)??0,homeowners:((m=t==null?void 0:t.homeowners)==null?void 0:m.length)??0};return e.jsxs(ae,{title:"Estate Overview",children:[a?e.jsx(Vn,{tone:"danger",message:a}):null,e.jsxs("section",{className:"mb-4 grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[e.jsx(st,{label:"Estates",tip:"Total estate profiles currently configured.",value:l.estates}),e.jsx(st,{label:"Homes",tip:"Number of homes across your estate setup.",value:l.homes}),e.jsx(st,{label:"Doors",tip:"Registered access doors managed from this account.",value:l.doors}),e.jsx(st,{label:"Homeowners",tip:"Residents linked to doors and available for approvals.",value:l.homeowners})]}),e.jsxs("section",{className:"mb-4 rounded-2xl border border-brand-100 bg-brand-50/70 p-4 dark:border-brand-500/30 dark:bg-brand-500/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"font-heading text-base font-bold",children:"How to use estate dashboard"}),e.jsx(_t,{text:"Use this as your control center: configure estate structure, then manage residents and logs."})]}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Start with create estate and add doors, then assign homeowners and monitor access logs daily."})]}),e.jsx("section",{className:"mb-4",children:e.jsx(g,{to:"/dashboard/estate/create",className:"inline-flex items-center rounded-xl bg-slate-900 px-4 py-2 text-sm font-semibold text-white dark:bg-white dark:text-slate-900",children:"Create an Estate"})}),e.jsx("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:Un.map(u=>e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/80 p-5 shadow-soft dark:border-slate-800 dark:bg-slate-900/70",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"font-heading text-lg font-bold",children:u.title}),e.jsx(_t,{text:u.description})]}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:u.description})]},u.title))}),e.jsx("section",{className:"mt-4",children:e.jsx("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Billing & Subscription"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Manage estate plan limits and complete payments via Paystack."})]}),e.jsx(g,{to:"/billing/paywall",className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white dark:bg-white dark:text-slate-900",children:"Open Billing"})]})})})]})}function st({label:t,tip:s,value:a}){return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsx(_t,{text:s})]}),e.jsx("p",{className:"mt-2 text-2xl font-black",children:a})]})}function Vn({tone:t,message:s}){const a=t==="danger"?"border-danger/30 bg-danger/10 text-danger":"border-brand-200 bg-brand-50 text-brand-700";return e.jsx("div",{className:`mb-4 rounded-xl border px-4 py-3 text-sm ${a}`,children:s})}function _t({text:t}){return e.jsxs("span",{className:"group relative inline-flex",children:[e.jsx("button",{type:"button",className:"grid h-5 w-5 place-items-center rounded-full bg-slate-200 text-[11px] font-bold text-slate-700 dark:bg-slate-700 dark:text-slate-100","aria-label":"More information",children:"?"}),e.jsx("span",{className:"pointer-events-none absolute left-1/2 top-7 z-10 hidden w-56 -translate-x-1/2 rounded-lg bg-slate-900 px-2 py-1 text-xs text-white shadow-lg group-hover:block group-focus-within:block",children:t})]})}function Fn(){const[t,s]=n.useState(""),[a,r]=n.useState([]),[l,i]=n.useState({}),[o,b]=n.useState(""),[m,u]=n.useState(""),[d,x]=n.useState(!1),[c,h]=n.useState("");async function p(){const j=await Le();r(Array.isArray(j==null?void 0:j.estates)?j.estates:[])}n.useEffect(()=>{p().catch(j=>b(j.message??"Failed to load estates"))},[]),n.useEffect(()=>{let j=!0;async function T(){if(a.length!==0)try{const f=await Promise.all(a.map(async w=>{const E=await cs(w.id);return[w.id,E]}));if(!j)return;i(Object.fromEntries(f))}catch{}}return T(),()=>{j=!1}},[a]);async function k(j){j.preventDefault(),x(!0),b(""),u("");try{const T=await In({name:t});u(`Estate created: ${(T==null?void 0:T.name)??t}`),s(""),await p()}catch(T){b(T.message??"Failed to create estate")}finally{x(!1)}}const S=n.useMemo(()=>a.map(j=>{const f=(l[j.id]??[]).find(w=>w.active!==!1)??null;return{...j,sharedQr:f}}),[a,l]);async function v(j){h(j),b(""),u("");try{const T=await Gs(j);u(`Estate QR created: ${(T==null?void 0:T.qrId)??"ready"}`);const f=await cs(j);i(w=>({...w,[j]:f}))}catch(T){b(T.message??"Failed to create estate QR")}finally{h("")}}return e.jsxs(ae,{title:"Create Estate",children:[o?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:o}):null,m?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:m}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Create Estate"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."}),e.jsxs("form",{className:"mt-4 grid gap-3 sm:grid-cols-[1fr_auto]",onSubmit:k,children:[e.jsx("input",{type:"text",value:t,onChange:j=>s(j.target.value),placeholder:"Estate name",className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm outline-none ring-brand-300 focus:ring-2 dark:border-slate-700 dark:bg-slate-900",required:!0}),e.jsx("button",{type:"submit",disabled:d,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:d?"Creating...":"Create"})]})]}),e.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Your Estates"}),e.jsxs("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:[S.map(j=>e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"truncate font-semibold",children:j.name}),e.jsx("p",{className:"truncate text-xs text-slate-500",children:j.id})]}),e.jsx("button",{type:"button",onClick:()=>v(j.id),disabled:c===j.id,className:"rounded-lg bg-slate-900 px-3 py-2 text-xs font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:c===j.id?"Generating...":j.sharedQr?"Regenerate QR":"Generate QR"})]}),e.jsxs("div",{className:"mt-3 rounded-lg border border-slate-200 bg-white p-3 dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Estate QR (Shared)"}),j.sharedQr?e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("p",{className:"text-sm font-semibold",children:j.sharedQr.qrId}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Doors: ",j.sharedQr.doorCount??"-"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx("a",{href:j.sharedQr.scanUrl,className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700",children:"Open Scan Page"}),e.jsx("button",{type:"button",onClick:()=>Gn(zn(j.sharedQr.scanUrl)),className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700",children:"Copy Link"})]}),e.jsx("p",{className:"mt-2 text-[11px] text-slate-500",children:"This QR is a selector QR: it can route visitors to any door in the estate."})]}):e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Not generated yet. You need at least 1 home and 1 door in this estate before generating."})]})]},j.id)),S.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No estates created yet."}):null]})]})]})}function zn(t){const s=(le.publicAppUrl||window.location.origin||"").replace(/\/+$/,"");return t?/^https?:\/\//i.test(t)?t:`${s}${t.startsWith("/")?t:`/${t}`}`:s}async function Gn(t){try{await navigator.clipboard.writeText(t),window.dispatchEvent(new CustomEvent("qring:toast",{detail:{message:"Copied"}}))}catch{}}function Be(t,s=140){return`https://api.qrserver.com/v1/create-qr-code/?size=${s}x${s}&data=${encodeURIComponent(t)}`}function Wn(){const[t,s]=n.useState(null),[a,r]=n.useState(""),[l,i]=n.useState(""),[o,b]=n.useState(!1),[m,u]=n.useState(!1),[d,x]=n.useState(null),[c,h]=n.useState(null),[p,k]=n.useState(""),[S,v]=n.useState(!1),[j,T]=n.useState({doorName:"",homeownerName:"",homeownerEmail:"",newPassword:""}),[f,w]=n.useState({estateId:"",homeId:"",name:"",homeName:"",homeownerFullName:"",homeownerUsername:"",homeownerPassword:""});async function E(){var D,J;const C=await Le();s(C),!f.estateId&&((D=C==null?void 0:C.estates)!=null&&D.length)&&w(z=>({...z,estateId:C.estates[0].id})),!f.homeId&&((J=C==null?void 0:C.homes)!=null&&J.length)&&w(z=>({...z,homeId:C.homes[0].id}))}n.useEffect(()=>{E().catch(C=>r(C.message??"Failed to load door data"))},[]);const I=n.useMemo(()=>((t==null?void 0:t.homes)??[]).filter(C=>!f.estateId||C.estateId===f.estateId),[t,f.estateId]),H=n.useMemo(()=>(t==null?void 0:t.doors)??[],[t]);async function O(C){var D,J,z,Y,K;C.preventDefault(),b(!0),r(""),i(""),x(null);try{if(m){const M=await Dn({estateId:f.estateId,homeName:f.homeName,doorName:f.name,homeownerFullName:f.homeownerFullName,homeownerUsername:f.homeownerUsername,homeownerPassword:f.homeownerPassword});(D=M==null?void 0:M.qr)!=null&&D.qrId&&x({qrId:M.qr.qrId,scanUrl:at(M.qr.qrId),doorName:((J=M==null?void 0:M.door)==null?void 0:J.name)??f.name}),i(`Door created and linked to ${((z=M==null?void 0:M.homeowner)==null?void 0:z.username)??"homeowner"}.`)}else{const M=await Ln({estateId:f.estateId,homeId:f.homeId,name:f.name,generateQr:!0,mode:"direct",plan:"single"});(Y=M==null?void 0:M.qr)!=null&&Y.qrId&&x({qrId:M.qr.qrId,scanUrl:at(M.qr.qrId),doorName:((K=M==null?void 0:M.door)==null?void 0:K.name)??f.name}),i("Door created successfully.")}w(M=>({...M,name:"",homeName:"",homeownerFullName:"",homeownerUsername:"",homeownerPassword:""})),await E()}catch(M){r(M.message??"Failed to create door")}finally{b(!1)}}async function N(){if(f.estateId){r(""),i("");try{const C=await Gs(f.estateId);h({...C,fullScanUrl:Jn(C.scanUrl)}),i("Estate shared QR generated. Visitors can pick a door after scanning."),await E()}catch(C){r(C.message??"Failed to generate estate shared QR")}}}async function A(C){if(C.preventDefault(),!!p){v(!0),r(""),i("");try{const D={doorName:j.doorName||void 0,homeownerName:j.homeownerName||void 0,homeownerEmail:j.homeownerEmail||void 0,newPassword:j.newPassword||void 0};await Bn(p,D),i("Door admin profile updated successfully."),k(""),T({doorName:"",homeownerName:"",homeownerEmail:"",newPassword:""}),await E()}catch(D){r(D.message??"Failed to update door admin profile")}finally{v(!1)}}}function y(C){k(C.id),T({doorName:C.name??"",homeownerName:C.homeownerName??"",homeownerEmail:C.homeownerEmail??"",newPassword:""})}function L(C,D){const J=at(D),z=`
      <html>
        <head>
          <title>Print Door QR</title>
          <style>
            body{font-family:Arial,sans-serif;padding:24px}
            .card{width:340px;border:1px solid #cbd5e1;border-radius:16px;padding:16px}
            .title{font-size:14px;font-weight:700;text-align:center;margin-bottom:8px}
            .meta{font-size:12px;color:#475569;text-align:center;margin-bottom:8px}
            .qr{display:block;width:280px;height:280px;margin:0 auto;background:#fff;padding:8px;border-radius:10px}
            .url{font-size:10px;color:#64748b;text-align:center;margin-top:8px;word-break:break-all}
          </style>
        </head>
        <body>
          <div class="card">
            <div class="title">${C.name}</div>
            <div class="meta">${C.homeName||""}</div>
            <img class="qr" src="${Be(J,280)}" alt="QR" />
            <div class="url">${J}</div>
          </div>
          <script>window.onload = () => window.print();<\/script>
        </body>
      </html>
    `,Y=window.open("","_blank","width=720,height=860");Y&&(Y.document.open(),Y.document.write(z),Y.document.close())}async function F(C){const D=`${C.loginLink}?email=${encodeURIComponent(C.homeownerEmail||"")}`,J=`Homeowner: ${C.homeownerName||"N/A"}
Email: ${C.homeownerEmail||"N/A"}
Login: ${D}`;try{await navigator.clipboard.writeText(J),i(`Login details copied for ${C.name}.`),r("")}catch{r("Unable to copy login details. Please copy manually.")}}function ee(){var Y;if(!c)return;const C=((Y=((t==null?void 0:t.estates)??[]).find(K=>K.id===f.estateId))==null?void 0:Y.name)??"Estate Entry",D=Be(c.fullScanUrl,300),J=`
      <html>
        <head>
          <title>Print Shared Estate QR</title>
          <style>
            body{font-family:Inter,Arial,sans-serif;padding:24px;background:#fff;color:#0f172a}
            .card{width:380px;border:1px solid #cbd5e1;border-radius:18px;padding:18px}
            .brand{display:flex;align-items:center;gap:10px;margin-bottom:8px}
            .logo{width:30px;height:30px;border-radius:9px;background:#0f172a;color:#fff;display:grid;place-items:center;font-weight:800}
            .name{font-size:18px;font-weight:800}
            .subtitle{font-size:12px;color:#475569;margin-bottom:10px}
            .title{font-size:12px;text-transform:uppercase;letter-spacing:.08em;color:#334155;text-align:center;margin:8px 0}
            .qr{display:block;width:320px;height:320px;margin:0 auto;background:#fff;padding:10px;border-radius:12px;border:1px solid #e2e8f0}
            .steps{margin-top:10px;font-size:11px;color:#475569;line-height:1.5}
            .url{font-size:10px;color:#64748b;text-align:center;margin-top:8px;word-break:break-all}
          </style>
        </head>
        <body>
          <div class="card">
            <div class="brand">
              <div class="logo">Q</div>
              <div>
                <div class="name">Qring</div>
                <div class="subtitle">${C}</div>
              </div>
            </div>
            <div class="title">Shared Estate Access QR</div>
            <img class="qr" src="${D}" alt="Shared Estate QR" />
            <div class="steps">
              1. Visitor scans this QR<br/>
              2. Selects door from list<br/>
              3. Sends request to specific homeowner
            </div>
            <div class="url">${c.fullScanUrl}</div>
          </div>
          <script>window.onload = () => window.print();<\/script>
        </body>
      </html>
    `,z=window.open("","_blank","width=760,height=900");z&&(z.document.open(),z.document.write(J),z.document.close())}return e.jsxs(ae,{title:"Estate Doors",children:[a?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:a}):null,l?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:l}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Create Door"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Create doors and provision homeowner login in one flow."})]}),e.jsx("button",{type:"button",onClick:()=>u(C=>!C),className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700",children:m?"Use Existing Homeowner":"Provision New Homeowner Login"})]}),e.jsxs("form",{onSubmit:O,className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(xs,{label:"Estate",value:f.estateId,onChange:C=>w(D=>({...D,estateId:C})),options:((t==null?void 0:t.estates)??[]).map(C=>({value:C.id,label:C.name}))}),m?e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Home Name"}),e.jsx("input",{value:f.homeName,onChange:C=>w(D=>({...D,homeName:C.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0})]}):e.jsx(xs,{label:"Home",value:f.homeId,onChange:C=>w(D=>({...D,homeId:C})),options:I.map(C=>({value:C.id,label:`${C.name} (${C.homeownerName||"No homeowner"})`}))}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Door Name"}),e.jsx("input",{value:f.name,onChange:C=>w(D=>({...D,name:C.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0})]}),m?e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Homeowner Full Name"}),e.jsx("input",{value:f.homeownerFullName,onChange:C=>w(D=>({...D,homeownerFullName:C.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Username"}),e.jsx("input",{value:f.homeownerUsername,onChange:C=>w(D=>({...D,homeownerUsername:C.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Password"}),e.jsx("input",{type:"password",value:f.homeownerPassword,onChange:C=>w(D=>({...D,homeownerPassword:C.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0})]})]}):null,e.jsx("button",{type:"submit",disabled:o,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:o?"Saving...":"Create Door"})]})]}),d?e.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("h3",{className:"font-heading text-base font-bold",children:"Generated QR"}),e.jsx("p",{className:"text-xs text-slate-500",children:d.doorName}),e.jsxs("div",{className:"mt-3 inline-flex flex-col items-center rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("img",{src:Be(d.scanUrl,180),alt:d.qrId,className:"h-44 w-44 rounded bg-white p-2"}),e.jsx("p",{className:"mt-2 text-xs font-semibold",children:d.qrId})]})]}):null,e.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-heading text-base font-bold",children:"Estate Shared Entry QR"}),e.jsx("p",{className:"text-xs text-slate-500",children:"One QR for the estate. Visitors scan, pick door, then request access."})]}),e.jsx("button",{type:"button",onClick:N,className:"rounded-lg bg-slate-900 px-3 py-2 text-xs font-semibold text-white dark:bg-white dark:text-slate-900",children:"Generate Shared QR"})]}),c?e.jsxs("div",{className:"mt-3 inline-flex flex-col items-center rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("img",{src:Be(c.fullScanUrl,180),alt:c.qrId,className:"h-44 w-44 rounded bg-white p-2"}),e.jsx("p",{className:"mt-2 text-xs font-semibold",children:c.qrId}),e.jsx("p",{className:"text-[11px] text-slate-500",children:c.fullScanUrl}),e.jsx("button",{type:"button",onClick:ee,className:"mt-3 rounded-lg bg-slate-900 px-3 py-2 text-xs font-semibold text-white dark:bg-white dark:text-slate-900",children:"Print Shared Estate QR"})]}):null]}),e.jsxs("section",{className:"mt-4",children:[e.jsx("h3",{className:"mb-3 font-heading text-lg font-bold",children:"Doors Created"}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2 2xl:grid-cols-3",children:[H.map(C=>{var z,Y;const D=(z=C.qr)==null?void 0:z[0],J=`${C.loginLink}?email=${encodeURIComponent(C.homeownerEmail||"")}`;return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-heading text-lg font-bold",children:C.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[C.homeName," | ",C.state]})]}),e.jsx("button",{type:"button",onClick:()=>y(C),className:"rounded-lg border border-slate-300 px-2 py-1 text-xs font-semibold dark:border-slate-700",children:"Admin Profile"})]}),e.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Homeowner: ",C.homeownerName||"N/A"]}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Email: ",C.homeownerEmail||"N/A"]}),e.jsx("a",{href:J,target:"_blank",rel:"noreferrer",className:"mt-2 inline-block text-xs font-semibold text-brand-600 dark:text-brand-300",children:"Estate Homeowner Login Link"}),e.jsx("div",{className:"mt-2",children:e.jsx("button",{type:"button",onClick:()=>F(C),className:"rounded-lg border border-slate-300 px-2.5 py-1.5 text-xs font-semibold dark:border-slate-700",children:"Copy Login Details"})}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[(Y=C.qr)!=null&&Y.length?C.qr.map(K=>e.jsxs("button",{type:"button",onClick:()=>L(C,K),className:"rounded-lg border border-slate-200 bg-slate-50 px-2 py-1 text-xs font-semibold dark:border-slate-700 dark:bg-slate-800",children:["Print ",K]},`${C.id}-${K}`)):e.jsx("span",{className:"text-xs text-slate-500",children:"No QR yet"}),D?e.jsx("img",{src:Be(at(D),64),alt:D,className:"h-12 w-12 rounded border border-slate-200 bg-white p-1 dark:border-slate-700"}):null]})]},C.id)}),H.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No doors created yet."}):null]})]}),p?e.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h3",{className:"font-heading text-lg font-bold",children:"Door Admin Profile"}),e.jsx("button",{type:"button",onClick:()=>k(""),className:"rounded-lg border border-slate-300 px-2 py-1 text-xs font-semibold dark:border-slate-700",children:"Close"})]}),e.jsxs("form",{onSubmit:A,className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Door Name"}),e.jsx("input",{value:j.doorName,onChange:C=>T(D=>({...D,doorName:C.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Homeowner Name"}),e.jsx("input",{value:j.homeownerName,onChange:C=>T(D=>({...D,homeownerName:C.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Homeowner Email"}),e.jsx("input",{type:"email",value:j.homeownerEmail,onChange:C=>T(D=>({...D,homeownerEmail:C.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Change Password"}),e.jsx("input",{type:"password",value:j.newPassword,onChange:C=>T(D=>({...D,newPassword:C.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",placeholder:"Leave empty to keep current password"})]}),e.jsx("button",{type:"submit",disabled:S,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:S?"Updating...":"Update Admin Profile"})]})]}):null]})}function $t(){return(le.publicAppUrl||window.location.origin||"").replace(/\/+$/,"")}function at(t){return`${$t()}/scan/${t}`}function Jn(t){return t?/^https?:\/\//i.test(t)?t:`${$t()}${t.startsWith("/")?t:`/${t}`}`:$t()}function xs({label:t,value:s,onChange:a,options:r}){return e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsxs("select",{value:s,onChange:l=>a(l.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0,children:[r.length===0?e.jsx("option",{value:"",children:"No options available"}):null,r.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]})]})}function Yn(){const[t,s]=n.useState(null),[a,r]=n.useState({doorId:"",homeownerId:""}),[l,i]=n.useState(""),[o,b]=n.useState(""),[m,u]=n.useState(!1);async function d(){var h,p;const c=await Le();s(c),!a.doorId&&((h=c==null?void 0:c.doors)!=null&&h.length)&&r(k=>({...k,doorId:c.doors[0].id})),!a.homeownerId&&((p=c==null?void 0:c.homeowners)!=null&&p.length)&&r(k=>({...k,homeownerId:c.homeowners[0].id}))}n.useEffect(()=>{d().catch(c=>i(c.message??"Failed to load assignment data"))},[]);async function x(c){c.preventDefault(),u(!0),i(""),b("");try{await qn(a.doorId,a.homeownerId),b("Door assigned to homeowner."),await d()}catch(h){i(h.message??"Failed to assign door")}finally{u(!1)}}return e.jsxs(ae,{title:"Assign Doors",children:[l?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:l}):null,o?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:o}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Assign Doors To Homeowners"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."}),e.jsxs("form",{onSubmit:x,className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(ms,{label:"Door",value:a.doorId,onChange:c=>r(h=>({...h,doorId:c})),options:((t==null?void 0:t.doors)??[]).map(c=>({value:c.id,label:c.name}))}),e.jsx(ms,{label:"Homeowner",value:a.homeownerId,onChange:c=>r(h=>({...h,homeownerId:c})),options:((t==null?void 0:t.homeowners)??[]).map(c=>({value:c.id,label:`${c.fullName} (${c.email})`}))}),e.jsx("button",{type:"submit",disabled:m,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:m?"Assigning...":"Assign Door"})]})]})]})}function ms({label:t,value:s,onChange:a,options:r}){return e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsxs("select",{value:s,onChange:l=>a(l.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0,children:[r.length===0?e.jsx("option",{value:"",children:"No options available"}):null,r.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]})]})}function Kn(){const[t,s]=n.useState([]),[a,r]=n.useState(""),[l,i]=n.useState(""),[o,b]=n.useState("");async function m(){const d=await Le();s(Array.isArray(d==null?void 0:d.homeowners)?d.homeowners:[])}n.useEffect(()=>{m().catch(d=>r(d.message??"Failed to load homeowners"))},[]);async function u(d){b(d),r(""),i("");try{const x=await _n(d);i(`Invite sent. Token: ${(x==null?void 0:x.inviteToken)??"-"}`)}catch(x){r(x.message??"Failed to send invite")}finally{b("")}}return e.jsxs(ae,{title:"Invite Homeowners",children:[a?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:a}):null,l?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:l}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Invite Homeowners"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."})]}),e.jsxs("section",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:[t.map(d=>e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("p",{className:"font-semibold",children:d.fullName}),e.jsx("p",{className:"text-xs text-slate-500",children:d.email}),e.jsx("button",{type:"button",onClick:()=>u(d.id),disabled:o===d.id,className:"mt-3 rounded-lg bg-slate-900 px-3 py-2 text-xs font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:o===d.id?"Sending...":"Send Invite"})]},d.id)),t.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No homeowners available yet."}):null]})]})}function Xn(){const[t,s]=n.useState([]),[a,r]=n.useState("");return n.useEffect(()=>{let l=!0;async function i(){try{const o=await $n();if(!l)return;s(o)}catch(o){if(!l)return;r(o.message??"Failed to load mappings")}}return i(),()=>{l=!1}},[]),e.jsxs(ae,{title:"Door Mappings",children:[a?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:a}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Manage Door Mappings"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."})]}),e.jsxs("section",{className:"mt-4 space-y-3",children:[t.map(l=>{var i;return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-heading text-lg font-bold",children:l.homeName}),e.jsxs("p",{className:"text-xs text-slate-500",children:[l.homeownerName," | ",l.homeownerEmail]})]}),e.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold dark:bg-slate-800",children:[((i=l.doors)==null?void 0:i.length)??0," doors"]})]}),e.jsx("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:(l.doors??[]).map(o=>e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-sm font-semibold",children:o.name}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["QR: ",(o.qr??[]).join(", ")||"None"]})]},o.id))})]},l.homeId)}),t.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No mappings created yet."}):null]})]})}function Zn(){const[t,s]=n.useState([]),[a,r]=n.useState("");return n.useEffect(()=>{let l=!0;async function i(){try{const o=await On();if(!l)return;s(o)}catch(o){if(!l)return;r(o.message??"Failed to load access logs")}}return i(),()=>{l=!1}},[]),e.jsxs(ae,{title:"Access Logs",children:[a?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:a}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"View Access Logs"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."})]}),e.jsxs("section",{className:"mt-4 space-y-3",children:[t.map(l=>e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsx("p",{className:"font-semibold",children:l.visitor}),e.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs font-semibold uppercase dark:bg-slate-800",children:l.status})]}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:[l.doorName," | ",l.homeName]}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Started: ",new Date(l.startedAt).toLocaleString()]})]},l.id)),t.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No access logs yet."}):null]})]})}function el(){const[t,s]=n.useState(null),[a,r]=n.useState("");n.useEffect(()=>{let o=!0;async function b(){try{const m=await Qn();if(!o)return;s(m)}catch(m){if(!o)return;r(m.message??"Failed to load plan restrictions")}}return b(),()=>{o=!1}},[]);const l=t!=null&&t.maxDoors?Math.min(Math.round(t.usedDoors/t.maxDoors*100),100):0,i=t!=null&&t.maxQrCodes?Math.min(Math.round(t.usedQrCodes/t.maxQrCodes*100),100):0;return e.jsxs(ae,{title:"Plan Restrictions",children:[a?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:a}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Plan Restrictions"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."}),t?e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsxs("p",{className:"text-sm font-semibold",children:["Plan: ",t.plan]}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Status: ",t.status]})]}),e.jsx(us,{label:`Doors ${t.usedDoors}/${t.maxDoors}`,percent:l}),e.jsx(us,{label:`QR Codes ${t.usedQrCodes}/${t.maxQrCodes}`,percent:i})]}):e.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Loading restrictions..."})]})]})}function us({label:t,percent:s}){return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs font-semibold text-slate-500",children:[e.jsx("span",{children:t}),e.jsxs("span",{children:[s,"%"]})]}),e.jsx("div",{className:"h-2 rounded-full bg-slate-200 dark:bg-slate-700",children:e.jsx("div",{className:"h-2 rounded-full bg-slate-900 dark:bg-slate-100",style:{width:`${s}%`}})})]})}function tl(){const[t,s]=n.useState(null),[a,r]=n.useState({estateId:"",name:"",homeownerId:""}),[l,i]=n.useState(""),[o,b]=n.useState(""),[m,u]=n.useState(!1);async function d(){var h,p;const c=await Le();s(c),!a.estateId&&((h=c==null?void 0:c.estates)!=null&&h.length)&&r(k=>({...k,estateId:c.estates[0].id})),!a.homeownerId&&((p=c==null?void 0:c.homeowners)!=null&&p.length)&&r(k=>({...k,homeownerId:c.homeowners[0].id}))}n.useEffect(()=>{d().catch(c=>i(c.message??"Failed to load homes"))},[]);async function x(c){c.preventDefault(),u(!0),i(""),b("");try{await Tn(a),b("Home added successfully."),r(h=>({...h,name:""})),await d()}catch(h){i(h.message??"Failed to add home")}finally{u(!1)}}return e.jsxs(ae,{title:"Multi-Home Support",children:[l?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:l}):null,o?e.jsx("div",{className:"mb-4 rounded-xl border border-success/30 bg-success/10 px-4 py-3 text-sm text-success",children:o}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Add Home"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Built for multi-home estates with central control and audit-ready workflows."}),e.jsxs("form",{onSubmit:x,className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsx(hs,{label:"Estate",value:a.estateId,onChange:c=>r(h=>({...h,estateId:c})),options:((t==null?void 0:t.estates)??[]).map(c=>({value:c.id,label:c.name}))}),e.jsx(hs,{label:"Homeowner",value:a.homeownerId,onChange:c=>r(h=>({...h,homeownerId:c})),options:((t==null?void 0:t.homeowners)??[]).map(c=>({value:c.id,label:`${c.fullName} (${c.email})`}))}),e.jsxs("label",{className:"block md:col-span-2",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Home Name"}),e.jsx("input",{value:a.name,onChange:c=>r(h=>({...h,name:c.target.value})),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0})]}),e.jsx("button",{type:"submit",disabled:m,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-50 dark:bg-white dark:text-slate-900",children:m?"Saving...":"Add Home"})]})]}),e.jsx("section",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:((t==null?void 0:t.homes)??[]).map(c=>e.jsxs("article",{className:"rounded-xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("p",{className:"font-semibold",children:c.name}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:c.homeownerName||"No homeowner assigned"}),e.jsx("p",{className:"text-xs text-slate-500",children:c.homeownerEmail})]},c.id))})]})}function hs({label:t,value:s,onChange:a,options:r}){return e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsxs("select",{value:s,onChange:l=>a(l.target.value),className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",required:!0,children:[r.length===0?e.jsx("option",{value:"",children:"No options available"}):null,r.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]})]})}async function Ws(){const t=await _("/admin/overview");return(t==null?void 0:t.data)??null}function sl(){var d,x;const[t,s]=n.useState(null),[a,r]=n.useState(!0),[l,i]=n.useState(""),[o,b]=n.useState("");n.useEffect(()=>{let c=!0;async function h(){r(!0),i("");try{const p=await Ws();if(!c)return;s(p)}catch(p){if(!c)return;p instanceof ge&&p.status===404?i("Admin overview endpoint not found (404). Restart the backend server so /api/v1/admin/overview is available."):i(p.message??"Failed to load admin overview")}finally{c&&r(!1)}}return h(),()=>{c=!1}},[]);const m=n.useMemo(()=>{var p;const c=((p=t==null?void 0:t.visits)==null?void 0:p.rows)??[],h=o.trim().toLowerCase();return h?c.filter(k=>[k.visitor,k.homeownerName,k.homeownerEmail,k.estateName,k.doorName,k.status].join(" ").toLowerCase().includes(h)):c},[t,o]),u=(t==null?void 0:t.metrics)??{};return e.jsxs(ae,{title:"Admin Overview",children:[l?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:l}):null,e.jsxs("section",{className:"grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[e.jsx(rt,{label:"Total Homeowners",value:u.totalHomeowners,loading:a}),e.jsx(rt,{label:"Total Estates",value:u.totalEstates,loading:a}),e.jsx(rt,{label:"Total Visits",value:u.totalVisits,loading:a}),e.jsx(rt,{label:"Total Payments",value:a?"...":Mt(u.totalPaymentAmount),loading:!1})]}),e.jsxs("section",{className:"mt-4 grid gap-4 xl:grid-cols-2",children:[e.jsx(nt,{title:"Homeowners",loading:a,rows:(t==null?void 0:t.homeowners)??[],columns:[{key:"fullName",label:"Name"},{key:"email",label:"Email"},{key:"homeCount",label:"Homes"},{key:"doorCount",label:"Doors"},{key:"qrCount",label:"QR"},{key:"visits",label:"Visits",render:c=>{var h;return((h=c.visits)==null?void 0:h.total)??0}},{key:"plan",label:"Plan",render:c=>{var h;return((h=c.subscription)==null?void 0:h.plan)??"free"}}]}),e.jsx(nt,{title:"Estates",loading:a,rows:(t==null?void 0:t.estates)??[],columns:[{key:"fullName",label:"Name"},{key:"email",label:"Email"},{key:"estateCount",label:"Estates"},{key:"homeownerCount",label:"Homeowners"},{key:"doorCount",label:"Doors"},{key:"qrCount",label:"QR"},{key:"plan",label:"Plan",render:c=>{var h;return((h=c.subscription)==null?void 0:h.plan)??"free"}}]})]}),e.jsxs("section",{className:"mt-4 grid gap-4 xl:grid-cols-2",children:[e.jsx(nt,{title:"Homeowner Payment History",loading:a,rows:((d=t==null?void 0:t.payments)==null?void 0:d.homeownerHistory)??[],columns:[{key:"userName",label:"User"},{key:"userEmail",label:"Email"},{key:"plan",label:"Plan"},{key:"status",label:"Status"},{key:"amount",label:"Amount",render:c=>Mt(c.amount)},{key:"startsAt",label:"Date",render:c=>It(c.startsAt)}]}),e.jsx(nt,{title:"Estate Payment History",loading:a,rows:((x=t==null?void 0:t.payments)==null?void 0:x.estateHistory)??[],columns:[{key:"userName",label:"User"},{key:"userEmail",label:"Email"},{key:"plan",label:"Plan"},{key:"status",label:"Status"},{key:"amount",label:"Amount",render:c=>Mt(c.amount)},{key:"startsAt",label:"Date",render:c=>It(c.startsAt)}]})]}),e.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Visits By User"}),e.jsx("input",{value:o,onChange:c=>b(c.target.value),placeholder:"Search visitor, homeowner, estate, door...",className:"w-full max-w-md rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900"})]}),a?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading visits..."}):m.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No visits found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[880px] text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:[e.jsx("th",{className:"py-2 font-semibold",children:"Visitor"}),e.jsx("th",{className:"py-2 font-semibold",children:"Status"}),e.jsx("th",{className:"py-2 font-semibold",children:"Homeowner"}),e.jsx("th",{className:"py-2 font-semibold",children:"Estate"}),e.jsx("th",{className:"py-2 font-semibold",children:"Door"}),e.jsx("th",{className:"py-2 font-semibold",children:"Started"})]})}),e.jsx("tbody",{children:m.map(c=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-2",children:c.visitor}),e.jsx("td",{className:"py-2",children:c.status}),e.jsx("td",{className:"py-2",children:c.homeownerName||"-"}),e.jsx("td",{className:"py-2",children:c.estateName||"-"}),e.jsx("td",{className:"py-2",children:c.doorName||"-"}),e.jsx("td",{className:"py-2",children:It(c.startedAt)})]},c.id))})]})})]})]})}function rt({label:t,value:s,loading:a}){return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsx("p",{className:"mt-2 text-2xl font-black",children:a?"...":s??0})]})}function nt({title:t,rows:s,columns:a,loading:r}){return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"mb-3 font-heading text-lg font-bold sm:text-xl",children:t}),r?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading..."}):s.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No records."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[680px] text-left text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:a.map(l=>e.jsx("th",{className:"py-2 font-semibold",children:l.label},l.label))})}),e.jsx("tbody",{children:s.slice(0,200).map(l=>e.jsx("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:a.map(i=>e.jsx("td",{className:"py-2",children:i.render?i.render(l):l[i.key]??"-"},`${l.id}-${i.label}`))},l.id))})]})})]})}function Mt(t){const s=Number(t||0);return`N${new Intl.NumberFormat("en-NG").format(s)}`}function It(t){if(!t)return"-";const s=new Date(t);return Number.isNaN(s.getTime())?t:s.toLocaleString()}function al(){var x;const[t,s]=n.useState(null),[a,r]=n.useState(!0),[l,i]=n.useState(""),[o,b]=n.useState("");n.useEffect(()=>{let c=!0;async function h(){r(!0),i("");try{const p=await Ws();if(!c)return;s(p)}catch(p){if(!c)return;p instanceof ge&&p.status===404?i("Admin overview endpoint not found (404). Restart the backend server so /api/v1/admin/overview is available."):i(p.message??"Failed to load admin payments")}finally{c&&r(!1)}}return h(),()=>{c=!1}},[]);const m=((x=t==null?void 0:t.payments)==null?void 0:x.totalAmount)??0,u=n.useMemo(()=>{var p;const c=((p=t==null?void 0:t.payments)==null?void 0:p.homeownerHistory)??[],h=o.trim().toLowerCase();return h?c.filter(k=>[k.userName,k.userEmail,k.plan,k.status].join(" ").toLowerCase().includes(h)):c},[t,o]),d=n.useMemo(()=>{var p;const c=((p=t==null?void 0:t.payments)==null?void 0:p.estateHistory)??[],h=o.trim().toLowerCase();return h?c.filter(k=>[k.userName,k.userEmail,k.plan,k.status].join(" ").toLowerCase().includes(h)):c},[t,o]);return e.jsxs(ae,{title:"Payments",children:[l?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:l}):null,e.jsxs("section",{className:"grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[e.jsx(lt,{label:"Total Payments",value:a?"...":Js(m)}),e.jsx(lt,{label:"Homeowner Records",value:a?"...":u.length}),e.jsx(lt,{label:"Estate Records",value:a?"...":d.length}),e.jsx(lt,{label:"Last Updated",value:a?"...":"now"})]}),e.jsxs("section",{className:"mt-4 rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Payment History"}),e.jsx("input",{value:o,onChange:c=>b(c.target.value),placeholder:"Search name, email, plan, status...",className:"w-full max-w-md rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900"})]}),a?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading payments..."}):e.jsxs("div",{className:"grid gap-4 xl:grid-cols-2",children:[e.jsx(bs,{title:"Homeowner Payments",rows:u}),e.jsx(bs,{title:"Estate Payments",rows:d})]})]})]})}function lt({label:t,value:s}){return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsx("p",{className:"mt-2 text-2xl font-black",children:s??0})]})}function bs({title:t,rows:s}){return e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white/60 p-4 dark:border-slate-800 dark:bg-slate-950/30",children:[e.jsx("h3",{className:"mb-3 font-heading text-base font-bold",children:t}),s.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No records."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[640px] text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:[e.jsx("th",{className:"py-2 font-semibold",children:"User"}),e.jsx("th",{className:"py-2 font-semibold",children:"Email"}),e.jsx("th",{className:"py-2 font-semibold",children:"Plan"}),e.jsx("th",{className:"py-2 font-semibold",children:"Status"}),e.jsx("th",{className:"py-2 font-semibold",children:"Amount"}),e.jsx("th",{className:"py-2 font-semibold",children:"Date"})]})}),e.jsx("tbody",{children:s.slice(0,200).map(a=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-2 font-semibold",children:a.userName||"-"}),e.jsx("td",{className:"py-2",children:a.userEmail||"-"}),e.jsx("td",{className:"py-2",children:a.plan||"-"}),e.jsx("td",{className:"py-2",children:a.status||"-"}),e.jsx("td",{className:"py-2",children:Js(a.amount)}),e.jsx("td",{className:"py-2",children:rl(a.startsAt)})]},a.id))})]})})]})}function Js(t){const s=Number(t||0);return`N${new Intl.NumberFormat("en-NG").format(s)}`}function rl(t){if(!t)return"-";const s=new Date(t);return Number.isNaN(s.getTime())?t:s.toLocaleString()}function nl(){const[t,s]=n.useState([]),[a,r]=n.useState(!0),[l,i]=n.useState(""),[o,b]=n.useState(""),[m,u]=n.useState(""),[d,x]=n.useState("");n.useEffect(()=>{let p=!0;async function k(){r(!0),i("");try{const S=new URLSearchParams;m&&S.set("role",m),o.trim()&&S.set("q",o.trim());const v=await _(`/admin/users?${S.toString()}`);if(!p)return;s(Array.isArray(v==null?void 0:v.data)?v.data:[])}catch(S){if(!p)return;S instanceof ge&&S.status===404?i("Admin users endpoint not found (404). Restart backend so /api/v1/admin/users is available."):i(S.message??"Failed to load users")}finally{p&&r(!1)}}return k(),()=>{p=!1}},[o,m]);const c=n.useMemo(()=>t,[t]);async function h(p){x(p.id),i("");try{const k=await _(`/admin/users/${encodeURIComponent(p.id)}`,{method:"PATCH",body:JSON.stringify({isActive:!p.active})}),S=(k==null?void 0:k.data)??null;if(!S)return;s(v=>v.map(j=>j.id===S.id?{...j,active:S.active}:j))}catch(k){i(k.message??"Failed to update user")}finally{x("")}}return e.jsxs(ae,{title:"Admin Users",children:[l?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:l}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Users"}),e.jsxs("div",{className:"flex w-full flex-col gap-2 sm:w-auto sm:flex-row sm:items-center",children:[e.jsxs("select",{value:m,onChange:p=>u(p.target.value),className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("option",{value:"",children:"All roles"}),e.jsx("option",{value:"homeowner",children:"Homeowner"}),e.jsx("option",{value:"estate",children:"Estate"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsx("input",{value:o,onChange:p=>b(p.target.value),placeholder:"Search name or email...",className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900 sm:w-72"})]})]}),a?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading users..."}):c.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No users found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[820px] text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:[e.jsx("th",{className:"py-2 font-semibold",children:"Name"}),e.jsx("th",{className:"py-2 font-semibold",children:"Email"}),e.jsx("th",{className:"py-2 font-semibold",children:"Role"}),e.jsx("th",{className:"py-2 font-semibold",children:"Active"}),e.jsx("th",{className:"py-2 font-semibold",children:"Created"}),e.jsx("th",{className:"py-2 font-semibold",children:"Action"})]})}),e.jsx("tbody",{children:c.slice(0,300).map(p=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-2 font-semibold",children:p.fullName}),e.jsx("td",{className:"py-2",children:p.email}),e.jsx("td",{className:"py-2",children:p.role}),e.jsx("td",{className:"py-2",children:p.active?"Yes":"No"}),e.jsx("td",{className:"py-2",children:ll(p.createdAt)}),e.jsx("td",{className:"py-2",children:e.jsx("button",{type:"button",disabled:d===p.id,onClick:()=>h(p),className:"rounded-lg border border-slate-300 px-3 py-2 text-xs font-semibold dark:border-slate-700 disabled:opacity-50",children:d===p.id?"Saving...":p.active?"Deactivate":"Activate"})})]},p.id))})]})})]})]})}function ll(t){if(!t)return"-";const s=new Date(t);return Number.isNaN(s.getTime())?t:s.toLocaleString()}function ol(){const[t,s]=n.useState([]),[a,r]=n.useState(!0),[l,i]=n.useState(""),[o,b]=n.useState(""),[m,u]=n.useState("");n.useEffect(()=>{let x=!0;async function c(){r(!0),i("");try{const h=new URLSearchParams;o&&h.set("status",o);const p=await _(`/admin/sessions?${h.toString()}`);if(!x)return;s(Array.isArray(p==null?void 0:p.data)?p.data:[])}catch(h){if(!x)return;h instanceof ge&&h.status===404?i("Admin sessions endpoint not found (404). Restart backend so /api/v1/admin/sessions is available."):i(h.message??"Failed to load sessions")}finally{x&&r(!1)}}return c(),()=>{x=!1}},[o]);const d=n.useMemo(()=>{const x=m.trim().toLowerCase();return x?t.filter(c=>[c.id,c.qrId,c.homeId,c.doorId,c.homeownerId,c.visitor,c.status].join(" ").toLowerCase().includes(x)):t},[t,m]);return e.jsxs(ae,{title:"Admin Sessions",children:[l?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:l}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsxs("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Visitor Sessions"}),e.jsxs("div",{className:"flex w-full flex-col gap-2 sm:w-auto sm:flex-row sm:items-center",children:[e.jsxs("select",{value:o,onChange:x=>b(x.target.value),className:"rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900",children:[e.jsx("option",{value:"",children:"All status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsx("input",{value:m,onChange:x=>u(x.target.value),placeholder:"Search session, visitor, ids...",className:"w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-900 sm:w-80"})]})]}),a?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading sessions..."}):d.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No sessions found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[980px] text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:[e.jsx("th",{className:"py-2 font-semibold",children:"Visitor"}),e.jsx("th",{className:"py-2 font-semibold",children:"Status"}),e.jsx("th",{className:"py-2 font-semibold",children:"QR"}),e.jsx("th",{className:"py-2 font-semibold",children:"Door"}),e.jsx("th",{className:"py-2 font-semibold",children:"Homeowner"}),e.jsx("th",{className:"py-2 font-semibold",children:"Started"}),e.jsx("th",{className:"py-2 font-semibold",children:"Ended"})]})}),e.jsx("tbody",{children:d.slice(0,300).map(x=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-2 font-semibold",children:x.visitor||"-"}),e.jsx("td",{className:"py-2",children:x.status}),e.jsx("td",{className:"py-2 font-mono text-xs",children:x.qrId}),e.jsx("td",{className:"py-2 font-mono text-xs",children:x.doorId}),e.jsx("td",{className:"py-2 font-mono text-xs",children:x.homeownerId}),e.jsx("td",{className:"py-2",children:gs(x.startedAt)}),e.jsx("td",{className:"py-2",children:gs(x.endedAt)})]},x.id))})]})})]})]})}function gs(t){if(!t)return"-";const s=new Date(t);return Number.isNaN(s.getTime())?t:s.toLocaleString()}function il(){const[t,s]=n.useState(null),[a,r]=n.useState(!0),[l,i]=n.useState("");return n.useEffect(()=>{let o=!0;async function b(){r(!0),i("");try{const m=await _("/admin/config");if(!o)return;s((m==null?void 0:m.data)??null)}catch(m){if(!o)return;m instanceof ge&&m.status===404?i("Admin config endpoint not found (404). Restart backend so /api/v1/admin/config is available."):i(m.message??"Failed to load config")}finally{o&&r(!1)}}return b(),()=>{o=!1}},[]),e.jsxs(ae,{title:"Admin Config",children:[l?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:l}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Runtime Config"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Read-only status of backend configuration."}),a?e.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Loading..."}):t?e.jsxs("div",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:[e.jsx(Ee,{label:"Environment",value:String(t.environment)}),e.jsx(Ee,{label:"Debug",value:t.debug?"true":"false"}),e.jsx(Ee,{label:"Paystack Configured",value:t.paystackConfigured?"true":"false"}),e.jsx(Ee,{label:"VAPID Configured",value:t.vapidConfigured?"true":"false"}),e.jsx(Ee,{label:"Admin Signup Key Set",value:t.adminSignupKeySet?"true":"false"}),e.jsx(Ee,{label:"Frontend Base URL",value:String(t.frontendBaseUrl),mono:!0})]}):e.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"No data."})]})]})}function Ee({label:t,value:s,mono:a}){return e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),e.jsx("p",{className:`mt-1 text-sm font-semibold ${a?"font-mono text-xs":""}`,children:s})]})}function dl(){const[t,s]=n.useState([]),[a,r]=n.useState(!0),[l,i]=n.useState("");return n.useEffect(()=>{let o=!0;async function b(){r(!0),i("");try{const m=await _("/admin/audit");if(!o)return;s(Array.isArray(m==null?void 0:m.data)?m.data:[])}catch(m){if(!o)return;m instanceof ge&&m.status===404?i("Admin audit endpoint not found (404). Restart backend so /api/v1/admin/audit is available."):i(m.message??"Failed to load audit logs")}finally{o&&r(!1)}}return b(),()=>{o=!1}},[]),e.jsxs(ae,{title:"Admin Audit",children:[l?e.jsx("div",{className:"mb-4 rounded-xl border border-danger/30 bg-danger/10 px-4 py-3 text-sm text-danger",children:l}):null,e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-soft dark:border-slate-800 dark:bg-slate-900/80 sm:p-5",children:[e.jsx("h2",{className:"font-heading text-lg font-bold sm:text-xl",children:"Audit Log"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Records admin actions like user toggles, subscription activations, and message deletes."}),a?e.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Loading audit logs..."}):t.length===0?e.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"No audit entries yet."}):e.jsx("div",{className:"mt-4 overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[980px] text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 text-slate-500 dark:border-slate-700",children:[e.jsx("th",{className:"py-2 font-semibold",children:"Time"}),e.jsx("th",{className:"py-2 font-semibold",children:"Action"}),e.jsx("th",{className:"py-2 font-semibold",children:"Resource"}),e.jsx("th",{className:"py-2 font-semibold",children:"Actor"}),e.jsx("th",{className:"py-2 font-semibold",children:"Meta"})]})}),e.jsx("tbody",{children:t.slice(0,300).map(o=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800",children:[e.jsx("td",{className:"py-2",children:cl(o.createdAt)}),e.jsx("td",{className:"py-2 font-semibold",children:o.action}),e.jsxs("td",{className:"py-2",children:[e.jsx("span",{className:"font-mono text-xs",children:o.resourceType}),o.resourceId?e.jsx("span",{className:"ml-2 font-mono text-xs text-slate-500",children:o.resourceId}):null]}),e.jsx("td",{className:"py-2 font-mono text-xs",children:o.actorUserId||"-"}),e.jsx("td",{className:"py-2 font-mono text-xs text-slate-500",children:xl(o.meta||"",120)})]},o.id))})]})})]})]})}function cl(t){if(!t)return"-";const s=new Date(t);return Number.isNaN(s.getTime())?t:s.toLocaleString()}function xl(t,s){const a=String(t??"");return a.length<=s?a:`${a.slice(0,s)}...`}const ml=new Set([0,502,503,504]),ct=2,ul=700;function hl(t){return new Promise(s=>setTimeout(s,t))}function bl(t){const s=Number((t==null?void 0:t.status)??-1);return ml.has(s)}async function gl(t,s){let a=null;for(let r=0;r<=ct;r+=1)try{return await _("/visitor/request",{method:"POST",body:JSON.stringify(t)})}catch(l){if(a=l,r>=ct||!bl(l))throw l;const i=ul*2**r+Math.floor(Math.random()*220);s==null||s({attempt:r+1,maxRetries:ct,nextDelayMs:i}),await hl(i)}throw a}function pl(){const{qrId:t}=Ue(),s=me(),[a,r]=n.useState(!0),[l,i]=n.useState(""),[o,b]=n.useState(null),[m,u]=n.useState(""),[d,x]=n.useState({sending:!1,retrying:!1,retryAttempt:0,requestStartedAt:0,lastLatencyMs:null,sent:!1,sessionId:"",status:""}),[c,h]=n.useState(0),[p,k]=n.useState(0),[S,v]=n.useState({name:"",purpose:""});n.useEffect(()=>{let E=!0;return(async()=>{var H;r(!0),i("");try{const O=await _(`/qr/resolve/${t}`),N=(O==null?void 0:O.data)??O;if(!E)return;b(N),u(((H=N==null?void 0:N.doors)==null?void 0:H[0])??"")}catch(O){if(!E)return;i(O.message??"QR could not be resolved")}finally{E&&r(!1)}})(),()=>{E=!1}},[t]),n.useEffect(()=>{if(!d.sent)return;const E=setInterval(()=>h(I=>I+1),1e3);return()=>clearInterval(E)},[d.sent]),n.useEffect(()=>{if(!d.sending||!d.requestStartedAt)return;const E=()=>k(Date.now()-d.requestStartedAt);E();const I=setInterval(E,150);return()=>clearInterval(I)},[d.sending,d.requestStartedAt]),n.useEffect(()=>{if(!d.sent||!d.sessionId)return;let E=!0;const I=setInterval(async()=>{try{const H=await zr(d.sessionId);if(!E||!(H!=null&&H.status))return;x(O=>({...O,status:H.status}))}catch{}},3e3);return()=>{E=!1,clearInterval(I)}},[d.sent,d.sessionId]),n.useEffect(()=>{d.sessionId&&(d.status!=="approved"&&d.status!=="active"||s(`/session/${d.sessionId}/message`,{replace:!0}))},[s,d.sessionId,d.status]);const j=async E=>{E.preventDefault(),i("");const I=Date.now();k(0),x(H=>({...H,sending:!0,retrying:!1,retryAttempt:0,requestStartedAt:I,lastLatencyMs:null}));try{const H=await gl({qrId:t,doorId:m,name:S.name,purpose:S.purpose},({attempt:A})=>{x(y=>({...y,sending:!0,retrying:!0,retryAttempt:A}))}),O=(H==null?void 0:H.data)??H,N=Date.now()-I;x({sending:!1,retrying:!1,retryAttempt:0,requestStartedAt:0,lastLatencyMs:N,sent:!0,sessionId:(O==null?void 0:O.sessionId)??"",status:(O==null?void 0:O.status)??"pending"}),k(N)}catch(H){const O=Date.now()-I;x(N=>({...N,sending:!1,retrying:!1,retryAttempt:0,requestStartedAt:0,lastLatencyMs:O})),k(O),i(H.message??"Request failed")}},T=(o==null?void 0:o.doorOptions)??[],f=T.find(E=>E.id===m)??null,w=n.useMemo(()=>`${Math.floor(c/60)}:${String(c%60).padStart(2,"0")}`,[c]);return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsxs("article",{className:"w-full max-w-lg rounded-3xl border border-slate-200 bg-white/90 p-7 shadow-soft dark:border-slate-800 dark:bg-slate-900/80",children:[e.jsx("h1",{className:"font-heading text-3xl font-bold",children:"Qring Visitor Access"}),e.jsxs("p",{className:"mt-2 text-sm text-slate-500",children:["QR ID: ",t]}),a?e.jsx("p",{className:"mt-5 text-sm",children:"Resolving secure QR route..."}):null,l?e.jsx("p",{className:"mt-5 text-sm text-danger",children:l}):null,!a&&o&&!d.sent?e.jsxs("form",{onSubmit:j,className:"mt-6 space-y-4",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Select the door and submit your entry request."}),e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium",children:"Your Name"}),e.jsx("input",{type:"text",value:S.name,onChange:E=>v(I=>({...I,name:E.target.value})),className:"w-full rounded-xl border border-slate-300 px-3 py-3 dark:border-slate-700 dark:bg-slate-900",placeholder:"e.g. John Doe",required:!0})]}),e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium",children:"Purpose of Visit"}),e.jsx("textarea",{value:S.purpose,onChange:E=>v(I=>({...I,purpose:E.target.value})),className:"w-full rounded-xl border border-slate-300 px-3 py-3 dark:border-slate-700 dark:bg-slate-900",placeholder:"e.g. Package delivery",rows:3,required:!0})]}),e.jsxs("label",{className:"block text-sm",children:[e.jsx("span",{className:"mb-1 block font-medium",children:"Door"}),e.jsx("select",{value:m,onChange:E=>u(E.target.value),className:"w-full rounded-xl border border-slate-300 px-3 py-3 dark:border-slate-700 dark:bg-slate-900",children:(T.length?T:(o.doors??[]).map(E=>({id:E,name:E}))).map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))})]}),f?e.jsxs("p",{className:"text-xs text-slate-500",children:["Home: ",f.homeName||"N/A"," | Homeowner: ",f.homeownerName||"N/A"]}):null,e.jsx("button",{type:"submit",disabled:d.sending,className:"w-full rounded-xl bg-brand-500 px-4 py-3 text-sm font-semibold text-white disabled:opacity-50",children:d.retrying?`Retrying (${d.retryAttempt}/${ct})...`:d.sending?"Submitting...":"Request Access"}),d.sending||d.lastLatencyMs!==null?e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Request latency:"," ",d.sending?`${(p/1e3).toFixed(2)}s (live)`:`${((d.lastLatencyMs??0)/1e3).toFixed(2)}s`]}):null,d.retrying?e.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-300",children:"Network is unstable. Retrying your request automatically..."}):null]}):null,d.sent?e.jsxs("div",{className:"mt-6 rounded-2xl bg-slate-100 p-4 dark:bg-slate-800",children:[e.jsx("p",{className:"text-sm font-semibold",children:d.status==="approved"?"Request approved":d.status==="rejected"?"Request rejected by homeowner":"Waiting for homeowner approval"}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Timer: ",w]}),d.sessionId&&(d.status==="approved"||d.status==="active")?e.jsx("p",{className:"mt-3 text-xs text-success",children:"Homeowner is ready. Opening session automatically..."}):null,d.status==="rejected"?e.jsx("p",{className:"mt-3 text-xs font-semibold text-danger",children:"You can retry another request or contact the resident."}):null]}):null]})})}const ps={good:"bg-emerald-100 text-emerald-800",slow:"bg-amber-100 text-amber-800",reconnecting:"bg-slate-200 text-slate-700"},fs={good:"Good",slow:"Slow",reconnecting:"Reconnecting"};function Ht({quality:t="reconnecting",detail:s="",detailClassName:a="text-slate-500"}){const r=ps[t]||ps.reconnecting,l=fs[t]||fs.reconnecting;return e.jsxs("div",{className:"mt-2",children:[e.jsxs("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-semibold ${r}`,children:["Network: ",l]}),s?e.jsx("p",{className:`mt-1 text-xs ${a}`,children:s}):null]})}const js=[{key:"message",label:"Messages"},{key:"audio",label:"Audio"},{key:"video",label:"Video"}];function fl({sessionId:t,disableCallModes:s=!1,disabledCallTooltip:a="Audio and Video are disabled until the homeowner starts a call."}){const[r,l]=n.useState(""),i=n.useRef(null);n.useEffect(()=>()=>{i.current&&clearTimeout(i.current)},[]);function o(x){l(x),i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{l("")},2e3)}function b(x){return x==="audio"||x==="video"}function m(x){return`block rounded-xl px-3 py-2 text-sm font-semibold transition ${x?"bg-slate-900 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`}function u(x){return`rounded-xl px-2 py-2 text-center text-xs font-semibold ${x?"bg-slate-900 text-white":"bg-slate-100 text-slate-700"}`}function d(x){return s&&b(x)}return e.jsxs(e.Fragment,{children:[e.jsx("aside",{className:"hidden lg:col-span-3 lg:block",children:e.jsxs("section",{className:"sticky top-6 rounded-3xl border border-slate-200/80 bg-white/85 p-4 shadow-soft backdrop-blur",children:[e.jsx("p",{className:"mb-2 text-xs font-semibold uppercase tracking-[0.15em] text-slate-500",children:"Session Pages"}),e.jsx("nav",{className:"space-y-2",children:js.map(x=>d(x.key)?e.jsx("button",{type:"button",onClick:()=>o(x.key),className:"block w-full rounded-xl bg-slate-100 px-3 py-2 text-left text-sm font-semibold text-slate-400",children:x.label},x.key):e.jsx(xt,{to:`/session/${t}/${x.key}`,className:({isActive:c})=>m(c),children:x.label},x.key))}),r?e.jsx("p",{className:"mt-3 rounded-xl bg-amber-100 px-3 py-2 text-xs text-amber-800",children:a}):null]})}),e.jsxs("nav",{className:"fixed bottom-3 left-1/2 z-30 w-[min(96vw,520px)] -translate-x-1/2 rounded-2xl border border-slate-200 bg-white/95 p-2 shadow-soft backdrop-blur lg:hidden",children:[e.jsx("div",{className:"grid grid-cols-3 gap-2",children:js.map(x=>d(x.key)?e.jsx("button",{type:"button",onClick:()=>o(x.key),className:"rounded-xl bg-slate-100 px-2 py-2 text-center text-xs font-semibold text-slate-400",children:x.label},x.key):e.jsx(xt,{to:`/session/${t}/${x.key}`,className:({isActive:c})=>u(c),children:x.label},x.key))}),r?e.jsx("p",{className:"mt-2 rounded-lg bg-amber-100 px-3 py-2 text-center text-[11px] text-amber-800",children:a}):null]})]})}function Vt({open:t,hasVideo:s,onAccept:a,onReject:r}){return t?e.jsx("div",{className:"fixed inset-0 z-[90] grid place-items-center bg-slate-950/70 px-4 backdrop-blur-sm",children:e.jsxs("section",{className:"w-full max-w-md rounded-3xl border border-white/15 bg-[#111b21] p-6 text-white shadow-soft",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.16em] text-[#00a884]",children:"Incoming Call"}),e.jsx("h2",{className:"mt-2 font-heading text-2xl font-black",children:s?"Homeowner is calling (Video)":"Homeowner is calling (Audio)"}),e.jsx("p",{className:"mt-2 text-sm text-slate-300",children:"Accept to join now, or reject to stay on your current page."}),e.jsxs("div",{className:"mt-5 grid grid-cols-2 gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-xl bg-[#00a884] px-4 py-3 text-sm font-semibold text-white transition hover:bg-[#019575]",children:"Accept"}),e.jsx("button",{type:"button",onClick:r,className:"rounded-xl bg-[#e53935] px-4 py-3 text-sm font-semibold text-white transition hover:bg-[#cd2f2b]",children:"Reject"})]})]})}):null}const Ys="qring_session_call_access",Ks=new Set(["incoming","connected"]),jl=5*60*1e3;function Xs(){return typeof window<"u"&&typeof window.sessionStorage<"u"}function Ft(){if(!Xs())return{};try{const t=window.sessionStorage.getItem(Ys),s=t?JSON.parse(t):{};return s&&typeof s=="object"?s:{}}catch{return{}}}function zt(t){if(Xs())try{window.sessionStorage.setItem(Ys,JSON.stringify(t))}catch{}}function Tt(t,s="incoming"){if(!t||!Ks.has(s))return;const a=Ft();a[t]={state:s,expiresAt:Date.now()+jl},zt(a)}function Lt(t){if(!t)return;const s=Ft();s[t]&&(delete s[t],zt(s))}function kl(t){if(!t)return!1;const s=Ft(),a=s[t];return a?Ks.has(a.state)&&Number(a.expiresAt)>Date.now()?!0:(delete s[t],zt(s),!1):!1}const wl={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}],iceCandidatePoolSize:8},Nl=5e3,ks=2,ws="qring_low_bandwidth_mode";function Gt(t){var Jt;const s=localStorage.getItem("qring_access_token"),a=n.useMemo(()=>{try{return JSON.parse(localStorage.getItem("qring_user")||"null")}catch{return null}},[]),r=(a==null?void 0:a.fullName)||"Visitor",l=(a==null?void 0:a.role)==="homeowner",[i,o]=n.useState(!1),[b,m]=n.useState(!1),[u,d]=n.useState("idle"),[x,c]=n.useState(!1),[h,p]=n.useState(!1),[k,S]=n.useState(!1),[v,j]=n.useState([]),[T,f]=n.useState(""),[w,E]=n.useState("reconnecting"),[I,H]=n.useState("Connecting..."),[O,N]=n.useState("idle"),[A,y]=n.useState(null),[L,F]=n.useState({pending:!1,hasVideo:!1}),[ee,C]=n.useState(()=>typeof window>"u"?!1:localStorage.getItem(ws)==="true"),D=n.useRef(null),J=n.useRef(null),z=n.useRef(null),Y=n.useRef(null),K=n.useRef(null),M=n.useRef(null),Z=n.useRef([]),U=n.useRef(!1),V=n.useRef(null),te=n.useRef("idle"),ve=n.useRef(null),P=n.useRef(null),Q=n.useRef(0),X=n.useRef(new Set),re=n.useRef(!1),de=typeof window<"u"&&typeof window.RTCPeerConnection<"u",Se=typeof navigator<"u"&&typeof((Jt=navigator.mediaDevices)==null?void 0:Jt.getUserMedia)=="function",ue=typeof window>"u"?!0:window.isSecureContext,ke=n.useMemo(()=>de?ue?Se?"":"Camera/microphone APIs are unavailable in this browser.":"Camera and microphone require HTTPS on network devices. Open the app with HTTPS or localhost.":"This browser does not support WebRTC calls.",[ue,Se,de]),we=ee||w==="slow";n.useEffect(()=>{te.current=u},[u]);function He(R){return(a==null?void 0:a.role)==="homeowner"?R==="homeowner":a!=null&&a.role?R===a.role:R!=="homeowner"}function he(R){const B=(R==null?void 0:R.senderType)||null;return{id:(R==null?void 0:R.id)||null,text:(R==null?void 0:R.text)||"",displayName:(R==null?void 0:R.displayName)||"Participant",senderType:B,at:(R==null?void 0:R.at)||new Date().toISOString(),mine:B!==null?He(B):(R==null?void 0:R.displayName)===r}}function Zs(R){const B=!!R;C(B),typeof window<"u"&&localStorage.setItem(ws,B?"true":"false")}function Ce(){if(J.current)return J.current;const R=new RTCPeerConnection(wl);return R.ontrack=B=>{var se;const G=(se=B.streams)==null?void 0:se[0];G&&(K.current&&(K.current.srcObject=G,K.current.play().catch(()=>{})),M.current&&(M.current.srcObject=G,M.current.muted=!1,M.current.volume=1,M.current.play().catch(()=>{})))},R.onicecandidate=B=>{!B.candidate||!D.current||D.current.emit("webrtc.ice",{sessionId:t,candidate:B.candidate})},R.onconnectionstatechange=()=>{const B=R.connectionState;B==="connected"&&(d("connected"),N("idle"),y(null),l||Tt(t,"connected")),(B==="failed"||B==="disconnected"||B==="closed")&&(d("ended"),N("idle"),y(null),Lt(t))},J.current=R,R}function Ve(R="Realtime connection is stable."){E("good"),H(R)}function Ae(R="Network is unstable. Trying to keep the session active."){E("slow"),H(R)}function pt(R="Reconnecting to session..."){E("reconnecting"),H(R)}function Ne(){ve.current&&(clearTimeout(ve.current),ve.current=null)}function Wt(){Ne(),ve.current=setTimeout(()=>{if(te.current==="ringing"&&!(!P.current||!D.current)){if(Q.current>=ks){f("Network looks slow. Keep this page open while we continue trying."),Ae("Signaling is delayed. Keeping call setup in progress.");return}Q.current+=1,D.current.emit("webrtc.offer",{sessionId:t,sdp:P.current,retryAttempt:Q.current}),Ae("Retrying call request due to network delay."),f(`Network is slow. Retrying call request (${Q.current}/${ks})...`),Wt()}},Nl)}async function ft({video:R}){if(ke)throw new Error(ke);if(z.current){const $=!!R;if(z.current.getVideoTracks().length>0===$)return z.current;z.current.getTracks().forEach(ne=>ne.stop()),z.current=null}const G=!!R?we?{width:{ideal:640,max:960},height:{ideal:360,max:540},frameRate:{ideal:15,max:20},facingMode:"user"}:{width:{ideal:1280,max:1920},height:{ideal:720,max:1080},frameRate:{ideal:24,max:30},facingMode:"user"}:!1,se=await navigator.mediaDevices.getUserMedia({audio:!0,video:G});z.current=se,Y.current&&(Y.current.srcObject=se,Y.current.muted=!0,Y.current.play().catch(()=>{}));const be=Ce();return be.getSenders().forEach($=>{$.track&&be.removeTrack($)}),se.getTracks().forEach($=>be.addTrack($,se)),S(!!G),d("ready"),se}async function jt({video:R}){var B;try{if(f(""),N("preparing"),y(Date.now()),Q.current=0,Ne(),ke){f(ke),N("idle"),y(null);return}if(!b){f("Joining session room..."),N("waiting");return}await ft({video:R}),N("signaling");const G=Ce();U.current=!0;const se=await G.createOffer();await G.setLocalDescription(se),(B=D.current)==null||B.emit("webrtc.offer",{sessionId:t,sdp:se}),P.current=se,d("ringing"),N("ringing"),Wt()}catch(G){f((G==null?void 0:G.message)??"Unable to start call"),N("idle"),y(null)}finally{U.current=!1}}function ea(){if(!l){f("Only homeowner can start calls. Wait for incoming call.");return}jt({video:!1})}function ta(){if(!l){f("Only homeowner can start calls. Wait for incoming call.");return}if(ee){f("Low bandwidth mode is enabled. Starting audio-only call."),jt({video:!1});return}jt({video:!0})}async function sa(){var B;if(!L.pending)return;const R=V.current;if(R!=null&&R.sdp)try{f("");const G=L.hasVideo&&!ee;L.hasVideo&&!G&&f("Low bandwidth mode enabled. Accepting call with audio-only."),await ft({video:G}),await kt(R.sdp);const se=Ce(),be=await se.createAnswer();await se.setLocalDescription(be),(B=D.current)==null||B.emit("webrtc.answer",{sessionId:t,sdp:be}),d("connected"),N("idle"),y(null),Ne(),Tt(t,"connected"),F({pending:!1,hasVideo:!1}),V.current=null}catch(G){f((G==null?void 0:G.message)??"Failed to accept incoming call")}}function aa(){var R;L.pending&&((R=D.current)==null||R.emit("session.control",{sessionId:t,action:"call_rejected"}),f("Incoming call rejected"),d("idle"),N("idle"),y(null),Ne(),F({pending:!1,hasVideo:!1}),V.current=null,Lt(t))}async function kt(R){const B=Ce();await B.setRemoteDescription(new RTCSessionDescription(R));for(const G of Z.current)try{await B.addIceCandidate(new RTCIceCandidate(G))}catch{}Z.current=[]}function ra(R){const B=(R||"").trim();if(!B||!D.current||!b)return!1;const G=`local-${Date.now()}-${Math.random().toString(36).slice(2,7)}`;return X.current.add(G),j(se=>[...se,he({id:G,text:B,displayName:r,senderType:(a==null?void 0:a.role)||"visitor",at:new Date().toISOString()})]),D.current.emit("chat.message",{sessionId:t,text:B,displayName:r,clientId:G}),!0}function na(){var B;if(!z.current)return;const R=!x;z.current.getAudioTracks().forEach(G=>{G.enabled=!R}),c(R),(B=D.current)==null||B.emit("session.control",{sessionId:t,action:R?"mute":"unmute"})}function Fe(R=!0){var B;R&&((B=D.current)==null||B.emit("session.control",{sessionId:t,action:"end"})),J.current&&(J.current.getSenders().forEach(G=>{G.track&&G.track.stop()}),J.current.close(),J.current=null),z.current&&(z.current.getTracks().forEach(G=>G.stop()),z.current=null),Y.current&&(Y.current.srcObject=null),K.current&&(K.current.srcObject=null),M.current&&(M.current.srcObject=null),d("ended"),N("idle"),y(null),S(!1),c(!1),p(!1),F({pending:!1,hasVideo:!1}),V.current=null,Ne(),P.current=null,Q.current=0,Lt(t)}return n.useEffect(()=>{let R=!0;return(async()=>{try{const G=await Gr(t);if(!R)return;j(G.map(se=>he(se)))}catch{R&&f(G=>G||"Unable to load message history")}})(),()=>{R=!1}},[t]),n.useEffect(()=>{const R=Ot(`${le.socketUrl}${le.signalingNamespace}`,{path:le.socketPath,transports:["websocket","polling"],rememberUpgrade:!0,reconnection:!0,reconnectionAttempts:10,reconnectionDelay:400,reconnectionDelayMax:2e3,timeout:7e3,auth:$=>{const W=localStorage.getItem("qring_access_token");$(W?{token:W}:{})},withCredentials:!0});D.current=R,R.on("connect",()=>{o(!0),re.current=!0,pt("Connected to signaling. Joining session room..."),R.emit("session.join",{sessionId:t,displayName:r})}),R.on("disconnect",()=>{o(!1),m(!1),pt(re.current?"Connection lost. Reconnecting...":"Connecting...")}),R.on("connect_error",$=>{f(($==null?void 0:$.message)??"Socket connection failed"),Ae("Unable to reach signaling server. Retrying...")}),R.on("session.joined",$=>{$!=null&&$.sid&&(m(!0),f("Session connected"),Ve("Session connected."))}),R.on("session.participant_joined",async()=>{var $;if(!U.current&&(f("Participant joined"),z.current&&(($=J.current)==null?void 0:$.signalingState)==="stable"))try{U.current=!0;const W=await J.current.createOffer();await J.current.setLocalDescription(W),R.emit("webrtc.offer",{sessionId:t,sdp:W}),d("ringing")}catch{}finally{U.current=!1}}),R.on("session.participant_left",()=>f("Participant left")),R.on("webrtc.offer",async $=>{var W;if(($==null?void 0:$.sessionId)===t){wn();try{const ne=typeof((W=$==null?void 0:$.sdp)==null?void 0:W.sdp)=="string"&&$.sdp.sdp.includes("m=video");if(!l){V.current=$,F({pending:!0,hasVideo:ne}),d("incoming"),f(ne?"Incoming video call":"Incoming audio call"),Tt(t,"incoming");return}const fe=ne&&!ee;ne&&!fe&&f("Low bandwidth mode enabled. Joining with audio-only."),await ft({video:fe}),await kt($.sdp);const ce=Ce(),De=await ce.createAnswer();await ce.setLocalDescription(De),R.emit("webrtc.answer",{sessionId:t,sdp:De}),d("connected"),N("idle"),y(null)}catch(ne){f((ne==null?void 0:ne.message)??"Failed to handle incoming call")}}}),R.on("webrtc.answer",async $=>{if(($==null?void 0:$.sessionId)===t)try{await kt($.sdp),d("connected"),N("idle"),y(null),Ne(),P.current=null,Q.current=0,Ve("Call connected.")}catch(W){f((W==null?void 0:W.message)??"Failed to establish call"),Ae("Call signaling is unstable.")}}),R.on("webrtc.ice",async $=>{if(($==null?void 0:$.sessionId)!==t)return;const W=$==null?void 0:$.candidate;if(!W)return;const ne=Ce();if(ne.remoteDescription)try{await ne.addIceCandidate(new RTCIceCandidate(W))}catch{}else Z.current.push(W)}),R.on("chat.message",$=>{if(($==null?void 0:$.sessionId)!==t)return;Ve("Realtime messages synced.");const W=he($);W.mine||zs(),j(ne=>{const fe=$==null?void 0:$.clientId;if(fe&&X.current.has(fe))return X.current.delete(fe),ne.map(ce=>ce.id===fe?{...W,id:W.id||fe}:ce);if(W.id&&ne.some(ce=>ce.id&&ce.id===W.id))return ne;if(W.mine){const ce=new Date(W.at).getTime(),De=ne.findIndex(Pe=>{if(!String(Pe.id??"").startsWith("local-")||(Pe.text||"").trim()!==(W.text||"").trim())return!1;const ze=new Date(Pe.at).getTime();return Number.isNaN(ze)||Number.isNaN(ce)?!1:Math.abs(ce-ze)<15e3});if(De>=0)return ne.map((Pe,ze)=>ze===De?{...W,id:W.id||Pe.id}:Pe)}return[...ne,W]})}),R.on("session.control",$=>{if(($==null?void 0:$.sessionId)!==t)return;const W=$==null?void 0:$.action;W==="mute"&&(p(!0),f("Other participant muted microphone")),W==="unmute"&&(p(!1),f("Other participant unmuted microphone")),W==="end"&&(f("Call ended by participant"),Fe(!1)),W==="call_rejected"&&(f("Call rejected by visitor"),Fe(!1))});const B=R.io,G=()=>{pt("Reconnecting to signaling...")},se=()=>{Ve("Reconnected.")},be=()=>{Ae("Reconnect attempt failed. Retrying...")},wt=()=>{Ae("Could not reconnect automatically.")};return B.on("reconnect_attempt",G),B.on("reconnect",se),B.on("reconnect_error",be),B.on("reconnect_failed",wt),()=>{Ne(),B.off("reconnect_attempt",G),B.off("reconnect",se),B.off("reconnect_error",be),B.off("reconnect_failed",wt),R.disconnect(),Fe(!1)}},[t,r,s,l,ee]),{connected:i,joined:b,callState:u,muted:x,cameraOn:k,messages:v,status:T,networkQuality:w,networkDetail:I,callLaunchStage:O,callLaunchStartedAt:A,featureError:ke,localVideoRef:Y,remoteVideoRef:K,remoteAudioRef:M,localStreamRef:z,remoteMuted:h,incomingCall:L,lowBandwidthMode:ee,autoLowBandwidthActive:we,setLowBandwidthMode:Zs,canStartCall:l,sendMessage:ra,toggleMute:na,endCall:Fe,startAudioCall:ea,startVideoCall:ta,acceptIncomingCall:sa,rejectIncomingCall:aa}}function yl(){const{sessionId:t}=Ue(),[s,a]=n.useState(""),{connected:r,joined:l,callState:i,messages:o,status:b,networkQuality:m,networkDetail:u,featureError:d,incomingCall:x,canStartCall:c,sendMessage:h,acceptIncomingCall:p,rejectIncomingCall:k}=Gt(t);function S(v){v.preventDefault(),h(s)&&a("")}return e.jsxs("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top_left,_#f8fafc_0,_#eef2ff_42%,_#e0f2fe_78%,_#dbeafe_100%)] p-4 text-slate-900",children:[e.jsxs("div",{className:"mx-auto w-full max-w-7xl py-6",children:[e.jsxs("header",{className:"mb-4 rounded-3xl border border-slate-200/80 bg-white/80 p-5 shadow-soft backdrop-blur",children:[e.jsx("h1",{className:"font-heading text-2xl font-black md:text-3xl",children:"Session Messages"}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["Session ",t," | ",r?"Signaling Online":"Connecting"," |"," ",l?"Room Joined":"Waiting Room"," | Call: ",i]}),e.jsx(Ht,{quality:m,detail:u}),d?e.jsx("p",{className:"mt-2 text-sm text-rose-700",children:d}):null,b?e.jsx("p",{className:"mt-2 text-sm text-amber-700",children:b}):null]}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-12",children:[e.jsx(fl,{sessionId:t,disableCallModes:!c&&!x.pending&&i!=="connected"}),e.jsx("section",{className:"space-y-4 lg:col-span-9",children:e.jsxs("article",{className:"rounded-3xl border border-slate-200/80 bg-white p-4 shadow-soft",children:[e.jsx("h2",{className:"font-heading text-lg font-bold",children:"Conversation"}),e.jsxs("div",{className:"mt-3 max-h-[28rem] space-y-2 overflow-y-auto rounded-2xl border border-slate-200 bg-slate-50/80 p-3",children:[o.map(v=>e.jsxs("div",{className:`max-w-[85%] rounded-xl px-3 py-2 text-sm shadow-sm ${v.mine?"ml-auto bg-brand-500 text-white":"bg-white text-slate-700 border border-slate-200"}`,children:[e.jsx("p",{className:"text-[11px] font-semibold",children:v.displayName}),e.jsx("p",{children:v.text})]},v.id||`${v.at}-${v.text}`)),o.length===0?e.jsx("p",{className:"text-xs text-slate-500",children:"No messages yet."}):null]}),e.jsxs("form",{onSubmit:S,className:"mt-3 flex gap-2",children:[e.jsx("input",{value:s,onChange:v=>a(v.target.value),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-3 text-sm",placeholder:"Type a message"}),e.jsx("button",{type:"submit",className:"rounded-xl bg-slate-900 px-4 py-3 text-sm font-semibold text-white",children:"Send"})]})]})})]})]}),e.jsx(Vt,{open:x.pending&&!c,hasVideo:x.hasVideo,onAccept:p,onReject:k})]})}function vl(){const{sessionId:t}=Ue(),{connected:s,joined:a,callState:r,muted:l,remoteMuted:i,localStreamRef:o,remoteAudioRef:b,status:m,networkQuality:u,networkDetail:d,featureError:x,callLaunchStage:c,callLaunchStartedAt:h,incomingCall:p,canStartCall:k,lowBandwidthMode:S,autoLowBandwidthActive:v,setLowBandwidthMode:j,toggleMute:T,endCall:f,startAudioCall:w,acceptIncomingCall:E,rejectIncomingCall:I}=Gt(t),[H,O]=n.useState(0),N=k&&(c!=="idle"||r==="ringing"),A=N||r==="connected";return n.useEffect(()=>{if(!N||!h){O(0);return}const y=()=>{O(Math.max(0,Math.floor((Date.now()-h)/1e3)))};y();const L=setInterval(y,1e3);return()=>clearInterval(L)},[h,N]),e.jsxs("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#17212a_0%,_#0f1720_55%,_#0b1118_100%)] p-4 text-slate-100 sm:p-6",children:[e.jsxs("div",{className:"mx-auto w-full max-w-5xl py-3",children:[e.jsxs("header",{className:"mb-4 flex items-center justify-between rounded-3xl border border-white/10 bg-white/5 p-4 shadow-soft backdrop-blur",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-heading text-2xl font-black tracking-tight",children:"Audio Call"}),e.jsxs("p",{className:"text-xs text-slate-300/80",children:["Session ",t]})]}),e.jsx(g,{to:"/dashboard",className:"rounded-xl bg-brand-500 px-4 py-2 text-xs font-semibold text-white transition hover:bg-brand-600",children:"Go Back Home"})]}),e.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-6 shadow-soft backdrop-blur",children:[e.jsx("audio",{ref:b,autoPlay:!0,playsInline:!0}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(Ns,{label:"Visitor",state:r==="connected"&&!i?"Speaking":"Listening",muted:i}),e.jsx(Ns,{label:"You",state:l?"Microphone muted":"Microphone active",muted:l})]}),e.jsxs("div",{className:"mt-4 rounded-2xl border border-white/10 bg-slate-900/40 p-4 text-center text-white",children:[e.jsx("p",{className:"text-sm font-semibold",children:r==="ringing"?"Calling...":"In audio room"}),e.jsx("p",{className:"mt-1 text-xs text-slate-300",children:o.current?"Audio stream connected":"Start call to connect microphone"}),e.jsxs("p",{className:"mt-1 text-xs text-slate-300",children:[s?"Signaling Online":"Connecting"," | ",a?"Room Joined":"Waiting Room"," | Call:"," ",r]})]}),x?e.jsx("p",{className:"mt-3 text-sm text-rose-400",children:x}):null,e.jsx(Ht,{quality:u,detail:d,detailClassName:"text-slate-300"}),m?e.jsx("p",{className:"mt-2 text-sm text-amber-300",children:m}):null,N?e.jsxs("section",{className:"mt-3 rounded-2xl border border-[#00a884]/35 bg-[#0f2428] p-4",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.14em] text-[#00a884]",children:"Call Setup In Progress"}),e.jsx("p",{className:"mt-1 text-sm text-slate-100",children:r==="ringing"?"Call request sent. Waiting for visitor to accept.":"Preparing call and connecting signaling services."}),e.jsxs("p",{className:"mt-1 text-xs text-slate-300",children:["Elapsed: ",H,"s"]}),H>=8?e.jsx("p",{className:"mt-2 rounded-xl bg-amber-500/20 px-3 py-2 text-xs text-amber-200",children:"Network looks slow. Keep this page open while we continue trying."}):null]}):null,e.jsxs("div",{className:"mt-3 rounded-2xl border border-white/10 bg-slate-900/30 px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.12em] text-slate-200",children:"Low Bandwidth Mode"}),e.jsx("p",{className:"mt-1 text-[11px] text-slate-300",children:"Keeps calls stable on weak internet and limits media usage."})]}),e.jsx("button",{type:"button",onClick:()=>j(!S),className:`relative h-7 w-12 rounded-full transition ${S?"bg-brand-500":"bg-slate-600"}`,"aria-pressed":S,children:e.jsx("span",{className:`absolute top-1 h-5 w-5 rounded-full bg-white transition ${S?"left-6":"left-1"}`})})]}),v?e.jsx("p",{className:"mt-2 text-[11px] font-semibold text-brand-300",children:"Bandwidth saver active."}):null]}),e.jsxs("div",{className:"mt-5 grid grid-cols-3 gap-3",children:[e.jsx("button",{type:"button",onClick:w,disabled:!!x||!k||A,className:"rounded-xl bg-brand-500 px-3 py-3 text-xs font-semibold text-white transition hover:bg-brand-600 disabled:opacity-50",children:A?"Starting...":"Start"}),e.jsx("button",{type:"button",onClick:T,disabled:!o.current,className:"rounded-xl bg-slate-600 px-3 py-3 text-xs font-semibold text-white transition hover:bg-slate-500 disabled:opacity-50",children:l?"Unmute":"Mute"}),e.jsx("button",{type:"button",onClick:f,className:"rounded-xl bg-rose-600 px-3 py-3 text-xs font-semibold text-white transition hover:bg-rose-500",children:"End"})]})]})]}),e.jsx(Vt,{open:p.pending&&!k,hasVideo:p.hasVideo,onAccept:E,onReject:I})]})}function Ns({label:t,state:s,muted:a}){return e.jsxs("article",{className:"rounded-2xl border border-white/10 bg-slate-900/45 p-6 text-center",children:[e.jsx("div",{className:"mx-auto h-28 w-28 rounded-full bg-brand-500/20 p-2",children:e.jsx("div",{className:`grid h-full place-items-center rounded-full text-lg font-bold text-white ${a?"bg-slate-600":"bg-brand-500 animate-pulse"}`,children:t==="You"?"YOU":"VIS"})}),e.jsx("p",{className:"mt-4 text-base font-semibold",children:t}),e.jsx("p",{className:"mt-1 text-xs text-slate-300",children:s})]})}function Sl(){const{sessionId:t}=Ue(),{connected:s,joined:a,callState:r,muted:l,remoteMuted:i,localStreamRef:o,status:b,networkQuality:m,networkDetail:u,featureError:d,callLaunchStage:x,callLaunchStartedAt:c,localVideoRef:h,remoteVideoRef:p,remoteAudioRef:k,incomingCall:S,canStartCall:v,lowBandwidthMode:j,autoLowBandwidthActive:T,setLowBandwidthMode:f,toggleMute:w,endCall:E,startVideoCall:I,acceptIncomingCall:H,rejectIncomingCall:O}=Gt(t),[N,A]=n.useState(0),y=v&&(x!=="idle"||r==="ringing"),L=y||r==="connected";return n.useEffect(()=>{if(!y||!c){A(0);return}const F=()=>{A(Math.max(0,Math.floor((Date.now()-c)/1e3)))};F();const ee=setInterval(F,1e3);return()=>clearInterval(ee)},[c,y]),e.jsxs("div",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#17212a_0%,_#0f1720_55%,_#0b1118_100%)] p-4 text-slate-100 sm:p-6",children:[e.jsxs("div",{className:"mx-auto w-full max-w-6xl py-3",children:[e.jsxs("header",{className:"mb-4 flex items-center justify-between rounded-3xl border border-white/10 bg-white/5 p-4 shadow-soft backdrop-blur",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-heading text-2xl font-black tracking-tight",children:"Video Call"}),e.jsxs("p",{className:"text-xs text-slate-300/80",children:["Session ",t]})]}),e.jsx(g,{to:"/dashboard",className:"rounded-xl bg-brand-500 px-4 py-2 text-xs font-semibold text-white transition hover:bg-brand-600",children:"Go Back Home"})]}),e.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-3 shadow-soft backdrop-blur",children:[e.jsx("audio",{ref:k,autoPlay:!0,playsInline:!0}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("article",{className:"relative overflow-hidden rounded-2xl bg-black",children:[e.jsx("video",{ref:p,autoPlay:!0,playsInline:!0,className:"h-[300px] w-full rounded-2xl bg-slate-950 object-cover sm:h-[420px]"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent px-3 pb-2 pt-8",children:e.jsx("p",{className:"text-xs font-semibold text-white",children:"Visitor"})})]}),e.jsxs("article",{className:"relative overflow-hidden rounded-2xl bg-black",children:[e.jsx("video",{ref:h,autoPlay:!0,playsInline:!0,className:"h-[300px] w-full rounded-2xl bg-slate-900 object-cover sm:h-[420px]"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent px-3 pb-2 pt-8",children:e.jsx("p",{className:"text-xs font-semibold text-white",children:"You"})})]})]}),e.jsxs("div",{className:"mt-3 rounded-2xl border border-white/10 bg-slate-900/40 px-4 py-3 text-xs text-slate-200",children:[s?"Signaling Online":"Connecting"," | ",a?"Room Joined":"Waiting Room"," | Call:"," ",r," | ",o.current?"Media ready":"Media not started"," | Remote mic:"," ",i?"Muted":"Active"]}),e.jsx(Ht,{quality:m,detail:u,detailClassName:"text-slate-300"}),d?e.jsx("p",{className:"mt-2 text-sm text-rose-700",children:d}):null,b?e.jsx("p",{className:"mt-2 text-sm text-amber-700",children:b}):null,y?e.jsxs("section",{className:"mt-3 rounded-2xl border border-[#00a884]/35 bg-[#0f2428] p-4",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.14em] text-[#00a884]",children:"Call Setup In Progress"}),e.jsx("p",{className:"mt-1 text-sm text-slate-100",children:r==="ringing"?"Call request sent. Waiting for visitor to accept.":"Preparing camera/microphone and signaling connection."}),e.jsxs("p",{className:"mt-1 text-xs text-slate-300",children:["Elapsed: ",N,"s"]}),N>=8?e.jsx("p",{className:"mt-2 rounded-xl bg-amber-500/20 px-3 py-2 text-xs text-amber-200",children:"Network looks slow. Keep this page open while the call request continues."}):null]}):null,e.jsxs("div",{className:"mt-3 rounded-2xl border border-white/10 bg-slate-900/30 px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.12em] text-slate-200",children:"Low Bandwidth Mode"}),e.jsx("p",{className:"mt-1 text-[11px] text-slate-300",children:"Start audio-only and reduce video quality when network slows down."})]}),e.jsx("button",{type:"button",onClick:()=>f(!j),className:`relative h-7 w-12 rounded-full transition ${j?"bg-brand-500":"bg-slate-600"}`,"aria-pressed":j,children:e.jsx("span",{className:`absolute top-1 h-5 w-5 rounded-full bg-white transition ${j?"left-6":"left-1"}`})})]}),T?e.jsx("p",{className:"mt-2 text-[11px] font-semibold text-brand-300",children:"Bandwidth saver active."}):null]}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[e.jsx("button",{type:"button",onClick:I,disabled:!!d||!v||L,className:"rounded-xl bg-brand-500 px-3 py-3 text-xs font-semibold text-white transition hover:bg-brand-600 disabled:opacity-50",children:L?"Starting...":j?"Start Audio":"Start Video"}),e.jsx("button",{type:"button",onClick:w,disabled:!o.current,className:"rounded-xl bg-slate-600 px-3 py-3 text-xs font-semibold text-white transition hover:bg-slate-500 disabled:opacity-50",children:l?"Unmute":"Mute"}),e.jsx("button",{type:"button",onClick:E,className:"rounded-xl bg-rose-600 px-3 py-3 text-xs font-semibold text-white transition hover:bg-rose-500",children:"End"})]})]})]}),e.jsx(Vt,{open:S.pending&&!v,hasVideo:S.hasVideo,onAccept:H,onReject:O})]})}function Cl(){return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-8 text-center shadow-soft dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h1",{className:"font-heading text-3xl font-bold",children:"Access Restricted"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"You do not have permission to view this route."}),e.jsx(g,{to:"/",className:"mt-5 inline-block rounded-xl bg-brand-500 px-5 py-2 text-sm font-semibold text-white",children:"Return Home"})]})})}function Al(){return e.jsx("div",{className:"grid min-h-screen place-items-center bg-slate-50 p-4 dark:bg-slate-950",children:e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-8 text-center shadow-soft dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("h1",{className:"font-heading text-3xl font-bold",children:"404"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Page not found."}),e.jsx(g,{to:"/",className:"mt-5 inline-block rounded-xl bg-brand-500 px-5 py-2 text-sm font-semibold text-white",children:"Go to Landing Page"})]})})}function Pl(){return e.jsx("div",{className:"min-h-screen bg-slate-950 px-4 py-10 text-white",children:e.jsxs("div",{className:"mx-auto w-full max-w-md animate-screen-enter",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-brand-300",children:"Loading"}),e.jsx("h1",{className:"mt-3 font-heading text-3xl font-extrabold",children:"Preparing your workspace"}),e.jsx("div",{className:"mt-6 h-2 overflow-hidden rounded-full bg-white/10",children:e.jsx("div",{className:"h-full w-1/2 animate-[qring-loader_1.1s_ease-in-out_infinite] rounded-full bg-brand-500"})}),e.jsxs("div",{className:"mt-8 space-y-3",children:[e.jsx(Dt,{}),e.jsx(Dt,{}),e.jsx(Dt,{})]})]})})}function Dt(){return e.jsx("div",{className:"h-20 animate-pulse rounded-2xl bg-white/10"})}function Rl(){const{isAuthenticated:t}=pe(),s=Ie(),a=!!localStorage.getItem("qring_access_token");return!t||!a?e.jsx(Me,{to:"/login",replace:!0,state:{from:s}}):e.jsx(Cs,{})}function ot({allowedRoles:t}){const{user:s}=pe();return!(s!=null&&s.role)||!t.includes(s.role)?e.jsx(Me,{to:"/unauthorized",replace:!0}):e.jsx(Cs,{})}function El(){try{return JSON.parse(localStorage.getItem("qring_user")||"null")}catch{return null}}function ys({children:t}){const{sessionId:s}=Ue(),a=El();return(a==null?void 0:a.role)==="homeowner"||kl(s)?t:e.jsx(Me,{to:`/session/${s}/message`,replace:!0})}const vs={success:"border-emerald-200 bg-emerald-50 text-emerald-900",error:"border-rose-200 bg-rose-50 text-rose-900",warning:"border-amber-200 bg-amber-50 text-amber-900",info:"border-sky-200 bg-sky-50 text-sky-900"};function Ml(){const[t,s]=n.useState(null),a=n.useRef(null);n.useEffect(()=>{const l=i=>{const o=(i==null?void 0:i.detail)??{},b=String(o.message??"").trim();if(!b)return;const m=o.type??"info",u=o.title??(m==="success"?"Success":m==="error"?"Action failed":m==="warning"?"Attention":"Notice"),d=Number.isFinite(Number(o.duration))?Number(o.duration):3600;s({message:b,type:m,title:u}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s(null),Math.max(1200,d))};return window.addEventListener("qring:toast",l),window.addEventListener("qring:flash",l),()=>{window.removeEventListener("qring:toast",l),window.removeEventListener("qring:flash",l),window.clearTimeout(a.current)}},[]);const r=n.useMemo(()=>vs[t==null?void 0:t.type]??vs.info,[t==null?void 0:t.type]);return t?e.jsx("div",{className:"pointer-events-none fixed inset-0 z-50 flex items-start justify-center px-4 pt-6",children:e.jsxs("div",{className:`pointer-events-auto w-full max-w-md rounded-2xl border p-4 shadow-2xl backdrop-blur-sm transition-all duration-300 ${r}`,role:"status","aria-live":"polite",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide opacity-80",children:t.title}),e.jsx("p",{className:"mt-1 text-sm font-medium",children:t.message})]})}):null}function Il(){const t="QRING".split("");return e.jsx("div",{className:"fixed inset-0 z-[100] grid place-items-center bg-white text-slate-950",children:e.jsxs("div",{className:"flex flex-col items-center gap-5",children:[e.jsxs("div",{className:"relative flex items-center gap-1.5",children:[t.map((s,a)=>e.jsx("span",{className:"font-heading text-4xl font-extrabold tracking-[0.16em] text-slate-950 opacity-0 sm:text-5xl",style:{animation:"qring-letter-in 420ms cubic-bezier(0.2,0.9,0.25,1) forwards",animationDelay:`${a*110}ms`},children:s},`${s}-${a}`)),e.jsx("span",{className:"pointer-events-none absolute -inset-x-2 -bottom-2 h-[2px] animate-[qring-bonus-sweep_1.2s_ease-in-out_infinite] bg-gradient-to-r from-transparent via-brand-500 to-transparent"})]}),e.jsx("div",{className:"h-1.5 w-44 overflow-hidden rounded-full bg-slate-300",children:e.jsx("div",{className:"h-full w-1/2 animate-[qring-loader_1.1s_ease-in-out_infinite] rounded-full bg-brand-500"})}),e.jsx("p",{className:"animate-[qring-pulse-fade_1.2s_ease-in-out_infinite] text-xs font-semibold uppercase tracking-[0.22em] text-slate-600",children:"Smart Access Control"})]})})}function Tl(){return e.jsx(va,{children:e.jsx(Cr,{children:e.jsx(oa,{children:e.jsx(Ll,{})})})})}function Ll(){const t=Ie(),[s,a]=n.useState(!0);return n.useEffect(()=>{a(!0);const r=window.setTimeout(()=>a(!1),800);return()=>window.clearTimeout(r)},[t.pathname,t.search]),e.jsxs(e.Fragment,{children:[e.jsx(Dl,{}),s?e.jsx(Il,{}):e.jsxs(e.Fragment,{children:[e.jsx(Ml,{}),e.jsx("div",{className:"animate-screen-enter",children:e.jsxs(ia,{location:t,children:[e.jsx(q,{path:"/",element:e.jsx(Oa,{})}),e.jsx(q,{path:"/about",element:e.jsx(Ha,{})}),e.jsx(q,{path:"/pricing",element:e.jsx(za,{})}),e.jsx(q,{path:"/contact",element:e.jsx(Wa,{})}),e.jsx(q,{path:"/platform",element:e.jsx(Ja,{})}),e.jsx(q,{path:"/security",element:e.jsx(Ya,{})}),e.jsx(q,{path:"/api-docs",element:e.jsx(Ka,{})}),e.jsx(q,{path:"/company",element:e.jsx(Xa,{})}),e.jsx(q,{path:"/blog",element:e.jsx(Za,{})}),e.jsx(q,{path:"/careers",element:e.jsx(er,{})}),e.jsx(q,{path:"/legal",element:e.jsx(tr,{})}),e.jsx(q,{path:"/privacy",element:e.jsx(sr,{})}),e.jsx(q,{path:"/terms",element:e.jsx(ar,{})}),e.jsx(q,{path:"/compliance",element:e.jsx(rr,{})}),e.jsx(q,{path:"/login",element:e.jsx(Pr,{})}),e.jsx(q,{path:"/admin/login",element:e.jsx(Mr,{})}),e.jsx(q,{path:"/admin/signup",element:e.jsx(Ir,{})}),e.jsx(q,{path:"/signup",element:e.jsx(Tr,{})}),e.jsx(q,{path:"/google-role",element:e.jsx(qr,{})}),e.jsx(q,{path:"/forgot-password",element:e.jsx(_r,{})}),e.jsx(q,{path:"/loader",element:e.jsx(Pl,{})}),e.jsx(q,{path:"/scan/:qrId",element:e.jsx(pl,{})}),e.jsx(q,{path:"/session/:sessionId",element:e.jsx(Me,{to:"message",replace:!0})}),e.jsx(q,{path:"/session/:sessionId/message",element:e.jsx(yl,{})}),e.jsx(q,{path:"/session/:sessionId/audio",element:e.jsx(ys,{children:e.jsx(vl,{})})}),e.jsx(q,{path:"/session/:sessionId/video",element:e.jsx(ys,{children:e.jsx(Sl,{})})}),e.jsxs(q,{element:e.jsx(Rl,{}),children:[e.jsxs(q,{element:e.jsx(ot,{allowedRoles:["homeowner","estate"]}),children:[e.jsx(q,{path:"/billing/paywall",element:e.jsx(Pn,{})}),e.jsx(q,{path:"/billing/callback",element:e.jsx(Mn,{})})]}),e.jsxs(q,{element:e.jsx(ot,{allowedRoles:["homeowner"]}),children:[e.jsx(q,{path:"/dashboard/homeowner",element:e.jsx(Me,{to:"/dashboard/homeowner/overview",replace:!0})}),e.jsx(q,{path:"/dashboard/homeowner/overview",element:e.jsx(hn,{})}),e.jsx(q,{path:"/dashboard/homeowner/visits",element:e.jsx(jn,{})}),e.jsx(q,{path:"/dashboard/homeowner/messages",element:e.jsx(Nn,{})}),e.jsx(q,{path:"/dashboard/homeowner/doors",element:e.jsx(yn,{})}),e.jsx(q,{path:"/dashboard/homeowner/settings",element:e.jsx(An,{})})]}),e.jsxs(q,{element:e.jsx(ot,{allowedRoles:["estate"]}),children:[e.jsx(q,{path:"/dashboard/estate",element:e.jsx(Hn,{})}),e.jsx(q,{path:"/dashboard/estate/create",element:e.jsx(Fn,{})}),e.jsx(q,{path:"/dashboard/estate/doors",element:e.jsx(Wn,{})}),e.jsx(q,{path:"/dashboard/estate/assign",element:e.jsx(Yn,{})}),e.jsx(q,{path:"/dashboard/estate/invites",element:e.jsx(Kn,{})}),e.jsx(q,{path:"/dashboard/estate/mappings",element:e.jsx(Xn,{})}),e.jsx(q,{path:"/dashboard/estate/logs",element:e.jsx(Zn,{})}),e.jsx(q,{path:"/dashboard/estate/plan",element:e.jsx(el,{})}),e.jsx(q,{path:"/dashboard/estate/homes",element:e.jsx(tl,{})})]}),e.jsxs(q,{element:e.jsx(ot,{allowedRoles:["admin"]}),children:[e.jsx(q,{path:"/dashboard/admin",element:e.jsx(sl,{})}),e.jsx(q,{path:"/dashboard/admin/users",element:e.jsx(nl,{})}),e.jsx(q,{path:"/dashboard/admin/sessions",element:e.jsx(ol,{})}),e.jsx(q,{path:"/dashboard/admin/payments",element:e.jsx(al,{})}),e.jsx(q,{path:"/dashboard/admin/config",element:e.jsx(il,{})}),e.jsx(q,{path:"/dashboard/admin/audit",element:e.jsx(dl,{})})]})]}),e.jsx(q,{path:"/unauthorized",element:e.jsx(Cl,{})}),e.jsx(q,{path:"/dashboard",element:e.jsx(Me,{to:"/dashboard/homeowner/overview",replace:!0})}),e.jsx(q,{path:"*",element:e.jsx(Al,{})})]})},t.pathname)]})]})}function Dl(){const t=Ie(),s=me();return n.useEffect(()=>{const r=new URLSearchParams(t.search).get("redirect");r&&(!r.startsWith("/")||r.startsWith("//")||s(r,{replace:!0}))},[t.search,s]),null}qt.createRoot(document.getElementById("root")).render(e.jsx(da.StrictMode,{children:e.jsx(Tl,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.getRegistrations().then(t=>{t.forEach(s=>s.unregister())})});
